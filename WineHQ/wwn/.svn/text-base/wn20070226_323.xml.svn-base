<?xml version="1.0" ?>
<kc>

<title>Wine Traffic</title>

<author contact="http://www.theshell.com/~vinn">Brian Vincent</author>
<issue num="323" date="02/26/2007" />
<intro> <p>This is the 323rd issue of the Wine Weekly News publication.
Its main goal is to have the same great taste, now with real mailing list stats. It also serves to inform you of what's going on around Wine. Wine is an open source implementation of the Windows API on top of X and Unix.  Think of it as a Windows compatibility layer.  Wine does not require Microsoft Windows, as it is a completely alternative implementation consisting of 100% Microsoft-free code, but it can optionally use native system DLLs if they are available.   You can find more info at <a href="http://www.winehq.org">www.winehq.org</a></p> </intro>
<stats posts="152" size="471" contrib="57" multiples="28" lastweek="45">

<person posts="15" size="13" who="hverbeet at gmail.com (H. Verbeet)" />
<person posts="11" size="21" who="rob at codeweavers.com (Robert Shearman)" />
<person posts="10" size="9" who="wine-devel at kievinfo.com (Vitaliy Margolen)" />
<person posts="7" size="15" who="patrol at sinus.cz (Pavel Troller)" />
<person posts="6" size="10" who="julliard at winehq.org (Alexandre Julliard)" />
<person posts="5" size="60" who="eric.pouech at wanadoo.fr (Eric Pouech)" />
<person posts="5" size="51" who="mk144210 at bcm.tmc.edu (Misha Koshelev)" />
<person posts="5" size="36" who="thunder.m at czela.net (Mirek)" />
<person posts="16" size="133" who="stefan at codeweavers.com (Stefan D&#246;singer" />
<person posts="5" size="3" who="flexo at holycrap.org (Felix Nawothnig)" />
<person posts="4" size="8" who="truiken at gmail.com (James Hawkins)" />
<person posts="4" size="4" who="us at edmeades.me.uk (Ann &amp; Jason Edmeades)" />
<person posts="4" size="4" who="thestig at google.com (Lei Zhang)" />
<person posts="3" size="11" who="joris_huizer at yahoo.com (Joris Huizer)" />
<person posts="3" size="5" who="wine.dev at web.de (Detlef Riekenberg)" />
<person posts="2" size="5" who="core5fedora at gmail.com (Jeffrey Sabarese)" />
<person posts="2" size="4" who="paul.vriens.wine at gmail.com (Paul Vriens)" />
<person posts="2" size="4" who="wes.parish at paradise.net.nz (Wesley Parish)" />
<person posts="2" size="4" who="twickline at gmail.com (Tom Wickline)" />
<person posts="2" size="2" who="nlaw at nildram.co.uk (Nick Law)" />
<person posts="2" size="2" who="dmitry at codeweavers.com (Dmitry Timoshkov)" />
<person posts="2" size="2" who="frank.richter at gmail.com (Frank Richter)" />
<person posts="3" size="1" who="marcus at jet.franken.de (Marcus Meissner)" />
<person posts="2" size="1" who="dank at kegel.com (Dan Kegel)" />
<person posts="2" size="1" who="saulius2 at ar.fi.lt (Saulius Krasuckas)" />
<person posts="2" size="1" who="scott at open-vote.org (Scott Ritchie)" />
<person posts="1" size="8" who="Stefan.Leichter at camline.com (Stefan Leichter)" />
<person posts="1" size="4" who="kingofallhearts999 at gmail.com (Bryan Haskins)" />
<person posts="1" size="2" who="kumbayo84 at arcor.de (Peter Oberndorfer)" />
<person posts="1" size="2" who="xixsimplicityxix at gmail.com (John Smith)" />
<person posts="1" size="2" who="rok.mandeljc at email.si (Rok Mandeljc)" />
<person posts="1" size="1" who="damjan.jov at gmail.com (Damjan Jovanovic)" />
<person posts="1" size="1" who="ben at atomnet.co.uk (Ben Hodgetts (Enverex))" />
<person posts="1" size="1" who="research at science.su (L. Rahyen)" />
<person posts="1" size="1" who="bon at elektron.ikp.physik.tu-darmstadt.de (Uwe Bonnes)" />
<person posts="1" size="1" who="joao.eiras at gmail.com (=?iso-8859-15?Q?Jo=E3o_Eiras?=)" />
<person posts="1" size="1" who="juan_lang at yahoo.com (Juan Lang)" />
<person posts="1" size="1" who="jan.wine at zerebecki.de (Jan Zerebecki)" />
<person posts="1" size="1" who="reif at earthlink.net (Robert Reif)" />
<person posts="1" size="1" who="m.b.lankhorst at gmail.com (M.B. Lankhorst)" />
<person posts="1" size="1" who="lats at yless4u.com.au (Jeff L)" />
<person posts="1" size="0" who="julesrichardsonuk at yahoo.co.uk (Jules Richardson)" />
<person posts="1" size="0" who="ploujj at gmail.com (Michael [Plouj] Ploujnikov)" />
<person posts="1" size="0" who="wferi at niif.hu (Wagner Ferenc)" />
<person posts="1" size="0" who="fgouget at codeweavers.com (Francois Gouget)" />
<person posts="1" size="0" who="andrew.james.barr at gmail.com (Andrew J. Barr)" />
<person posts="1" size="0" who="der.fabe at gmx.net (Fabian Bieler)" />
<person posts="1" size="0" who="david at l8s.co.uk (David Laight)" />
<person posts="1" size="0" who="jrliggett at cox.net (James Liggett)" />
<person posts="1" size="0" who="gslink at one.net (gslink)" />

</stats>
<section 
	title="News: Short Article"
	subject="News"
	archive="http://www.linuxworld.com/columnists/2007/030507bradner.html"
	posts="1"
>
<topic>News</topic>
<p>There's short editorial on LinuxWorld (Network World?) by Scott Bradner about
running Windows apps on non-Windows platforms titled, <i>
<a href="http://www.linuxworld.com/columnists/2007/030507bradner.html">Obeying
Microsoft: Is Wine the way?</a></i>.  Virtualization and Wine are
mentioned but Scott summarizes with:</p>
<quote who="Scott Bradner"><p>

The Wine approach seems to me the ideal way to support nonnative software on 
your platform of choice. Because Microsoft is making the main alternative too 
expensive, I expect to see wider use of this approach in the future. </p>
</quote>


</section>
<section 
	title="Direct3D Breakage in 0.9.31"
	subject="0.9.31 not suitable for gaming"
	archive="http://www.winehq.com/pipermail/wine-devel/2007-February/054223.html"
	posts="20"
>
<topic>DirectX</topic>
<p>Wine's bi-weekly snapshots are exactly that - snapshots of the git
repository.  There's no extra care given toward a release, no regression
testing done (other than the usual process of running the regression
test suite), and certainly no applications checked for compatibility.
Pavel Troller warned gamers last week to stay away from release 0.9.31:</p>
<quote who="Pavel Troller"> <p>
I've tried 0.9.31 and it seems that there is a regression in at least two
games:<ul>
<li> Fallout Tactics (BOS.exe): Shows a dialog stating
<ul><code>
"C:\dev\phoenix\display\win32\win32_window.cpp(873): **fatal error**:
Could not create display buffers"</code></ul>
and then another one about abnormal termination of the program and quits.</li>
<li>Steam based games, mainly HL2: During game load, the screen goes black.
Moving the cursor causes sound effects as it hovers across the menus and
buttons, so the program runs, but nothing can be seen.</li></ul></p><p>
 Both those games are known to work with wine at about a half between .29
and .30.
 I tried it with basic .31 as well as with today's git update.
 Are those regressions known and is it a work in progress, or should I make
a bisecting session to find the problem ?
</p></quote>

<p>Regarding the issue affecting Steam games, Stefan D&#246;singer was
aware of it:
</p><quote who="Stefan Dosinger"><p>
This regression is known, and it should be fixed already. It was caused by my
patch which made wined3d return an error if an unsupported query is created,
like windows does. Wine does not support event queries, but many apps expect
them to be supported. I have sent another patch (committed already) that
re-enables the fake event queries.</p></quote>

<p>Stefan wasn't aware of the other issue and asked Pavel to do a bisect
to find the patch that caused the problem.  Pavel did and found it
was a patch that contained fixes for fullscreen windows.  He also
ran a trace using some debug channels which Stefan diagnosed:</p>
<quote who="Stefan Dosinger"><p>
This here seems strange. If you compare that to the good log you'll see that
IWineD3DDeviceImpl_Init3D was left way too early. As there is no ERR about a
possible reason for the abort I think that somewhere an exception is
thrown, caught by the game which terminates afterwards.
</p><p>
You can do the following:<ul>
<li> Run the game in winedbg and see if it catches the execption and gives a
backtrace and crash position</li>
<li> Add some extra traces (or ERRs) to Init3D and its subfunctions to catch the
last line that is executed successfully.</li></ul></p></quote>

<p>Pavel did a lot more testing and eventually narrowed the issue down to
some calls to <code>SetWindowPos()</code>.  The consensus seemed to be that
the problem didn't actually lie with that function, but with the parameters
passed to it or some such event.  Thus far it doesn't appear there's a 
solution other than a hack by Pavel to simply comment out the SetWindowPos()
calls.</p>


</section>
<section 
	title="Screenshots"
	subject="Progress in implementation of Direct3D"
	archive="http://www.winehq.com/pipermail/wine-devel/2007-February/054250.html"
	posts="1"
>
<topic>DirectX</topic>
<p>Everyone likes eye candy.  Someone named Mirek posted a link to some 
screenshots of Wine showing off the latest work on Direct3D:</p>
<quote who="Mirek"><p>
Hi, i would like to say "Thanks for your work!" to all wine developers. 
In the past months there was really big progress in implementation of 
Direct3D in wine (that part is most important for me) and other parts 
such as Dinput, so I would like to introduce you to some more sreenshots from 
the latest Direct3D applications. I will try to post them on the official wine 
website.
</p><p>
To run the third benchmark in 3DMark 2005 I used the wined3d_3dmark05.diff.txt 
patch (from H. Verbeet)
To run Call of Duty 2 I used cod2.diff patch (my latest modification of a
patch against current CVS)
</p><p>
All screenshots are from today CVS 20.02.2007 without patch "[9/10] 
WineD3D: Use VBOs for index buffers" which caused some regressions.

<ul><a href="http://headline.czela.net/Mirek/wine/">
http://headline.czela.net/Mirek/wine/</a></ul></p></quote>

</section>
<section 
	title="Message Spy Viewer"
	subject="Message spy log viewer"
	archive="http://www.winehq.com/pipermail/wine-devel/2007-February/054319.html"
	posts="1"
>
<topic>Debugging</topic>
<p>Felix Nawothnig announced to everyone he'd developed a little tool to
parse Wine's debugging output for spying on messages being passed in a program
and display it in a treeview manner:</p>
<quote who="Felix Nawothnig"><p>
I just figured I never told anyone (did I?) - a while ago I wrote a 
Ruby/GTK2 tool to parse +message logs (along with other channels mixed 
in) and display them in a treeview - makes debugging message related 
problems much easier. I suppose others wrote similar scripts for their 
own use - but maybe someone will find it useful nevertheless:
<ul>
<a href="http://users.holycrap.org/flexo/spy.rb">
http://users.holycrap.org/flexo/spy.rb</a>
</ul></p><p>
Use like:
<ul><code>
$ WINEDEBUG="+message" wine foo.exe 2&gt;log<br />
$ ruby spy.rb log</code></ul></p></quote>

</section>
<section 
	title="Theming Performance"
	subject="Wine and XP Themes"
	archive="http://www.winehq.com/pipermail/wine-devel/2007-February/054367.html"
	posts="5"
>
<topic>Controls</topic>
<p>Andrew Barr wanted to know about using themes in Wine:</p>
<quote who="Andrew Barr"><p>
I would like to use the XP ClearLooks theme that is available to make
Wine apps blend in with my GNOME desktop. However, it seems that using
themes in Wine makes it rather slow. Is this a known problem, is there a
workaround of some kind, a registry setting or a patch, or is it best
just not to use themes with Wine right now? I am running Wine 0.9.31.
</p><p>
According to a Google search, there seem to be scattered reports of this
problem but no diagnosis or solution.</p></quote>

<p>Frank Richter recommended not using them at all:</p>
<quote who="Frank Richter"><p>

The comctl32 controls all do theming "natively". The subclassing is done
only for controls residing in user32 (the motivation was to avoid copying
and pasting all the control implementations from user32 to comctl32, as
Microsoft supposedly did).
</p><p>
With regard to speed: themes usually use alpha-blending extensively; however, 
the speed of Wine's AlphaBlend() can almost be measured in geological terms;
so at least part of the performance problem can be found there.</p></quote>

<p>Dmitry Timoshkov referred to 
<a href="http://www.winehq.org/?issue=267#Theming%20Revisited">WWN #267</a>
for a discussion of theming as it was being implemented.</p>

</section>
<section 
	title="Winetest Executable"
	subject="New wintest executable is there (but there are some issues due to introduction of skip)"
	archive="http://www.winehq.com/pipermail/wine-devel/2007-February/054337.html"
	posts="4"
>
<topic>Testing</topic>
<p>There's been a problem with automatically generated builds of winetest
for the past few months.  Paul Vriens announced that it was working again:</p>
<quote who="Paul Vriens"><p>
as of today there's a new winetest executable available at the usual place:
<ul>
<a href="http://www.astro.gla.ac.uk/users/paulm/WRT/CrossBuilt/">
http://www.astro.gla.ac.uk/users/paulm/WRT/CrossBuilt/</a></ul></p><p>

There is however an issue with the generated reports. It looks like this is 
introduced when the 'skip' thingy was added to the test infrastructure. I'm 
currently going through the perl scripts but have no fix yet. Most likely we 
have to patch the 'dissect' script</p></quote>

<p>He later posted a patch to the script he mentioned.  Feri Wagner
thought it looked good, but mentioned,<quote who="Ferenc Wagner">


Looks good.  The already submitted report files could be moved from
the data dir back into the queue on the web server as
<a href="http://cvs.winehq.org/cvsweb/tools/winetest/README">
http://cvs.winehq.org/cvsweb/tools/winetest/README</a> tries to explain.
(The original directories can be removed afterwards.)</quote></p>
</section>
<section 
	title="WineConf '07 $$$"
	subject="WineConf 2007 Fundraiser proposal"
	archive="http://www.winehq.com/pipermail/wine-devel/2007-February/054279.html"
	posts="3"
>
<topic>Wineconf 2007</topic>
<p>There's been active discussion on the wineconf mailing list for
WineConf 2007.  For those of you not keeping track, it appears there's
3 possible locations on the table: Utrecht, Netherlands; Zurich, Switzerland;
and Bratislava, Slovakia.  Anyway, something closer to Wine development
lies with funding.  As a project we've searched for few funds but
thankfully always received enough for the things we've needed.  Tom
Wickline thought it might be time to step up and actively seek some
donations.  He summarized a discussion that took place on the wineconf
mailing list and asked developers what they thought of it:</p>
<quote who="Tom Wickline"><p>

On February 14th I made a suggestion on the wine-conf mailing list
that we should have an annual Fund Raiser to help raise funds for our
annual Conference.

<ul><a href="http://www.winehq.org/pipermail/wineconf/2007-February/000397.html">
http://www.winehq.org/pipermail/wineconf/2007-February/000397.html</a></ul></p><p>

Jeremy replied with his thoughts/suggestions and some background info
on how the WPF funds have helped in the past.

<ul><a href="http://www.winehq.org/pipermail/wineconf/2007-February/000397.html">
http://www.winehq.org/pipermail/wineconf/2007-February/000403.html</a></ul></p><p>

From this, I cobbled together an extremely rough Donations page..
Keep in mind this is still very much a work in progress and the
language within it needs major revisions.

<ul><a href="http://www.winehq.org/pipermail/wineconf/2007-February/000397.html">
http://www.winehq.org/pipermail/wineconf/2007-February/000425.html</a></ul></p><p>

The current discussion is now on whether or not a $1,000 donation is
sufficient for a front page listing for one year since our search rank
is so high.
</p><p>
Dan suggested that we join adsense, and I replied that I had already
suggested this in the past.

<ul><a href="http://www.winehq.org/pipermail/wineconf/2007-February/000397.html">
http://www.winehq.org/pipermail/wineconf/2007-February/000437.html</a></ul></p><p>

At this point there are many undecided questions about the original
suggestion of us having a fund raiser, as well as if we should join
adsense.
</p><p>
If you have a opinion on this subject we would like (even suggest)
that you air it at this time before decisions are made.

<ul><a href="http://www.winehq.org/pipermail/wineconf/2007-February/000397.html">
http://www.winehq.org/pipermail/wineconf/2007-February/000440.html</a></ul></p><p>


Questions:
</p><p>
Should we have a annual fundraiser to help with conference expenses?
Thus far the consensus is Yes.
</p><p>
What is a realistic goal?
I believe $10,000 is very doable.
</p><p>
What amount should we receive for a front page listing 'gold sponsor'?
Is $10,000 to much or too small an amount? If we decide on $10,000
the goal should be revised to about $25,000
</p><p>
Should the Wine project join the adsense network?
With our high google page rank we are practically guaranteed to rake
in a mint :D
</p></quote>

<p>The idea was met with deafening silence.  Usually that's a bad thing,
but in the Wine community it generally implies a general agreement.  
No one is afraid to voice their opinion if they disagree, so it seems
most people don't mind Tom's suggestion.</p>

</section></kc>
