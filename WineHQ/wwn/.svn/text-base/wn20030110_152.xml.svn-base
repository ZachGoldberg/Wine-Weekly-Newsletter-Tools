<?xml version="1.0" ?>
<kc>

<title>Kernel Cousin Wine</title>

<author email="vinn@theshell.com">Brian Vincent</author>

<issue num="152" date="10 Jan 2003 00:00:00 -0800" />

<intro>
<p>This is the 152nd release of the Wine's kernel cousin publication. Its
main goal is to distribute widely what's going on around Wine (the Un*x 
Windows emulator).</p>
</intro>
<stats posts="454" size="1374" contrib="85" multiples="49" lastweek="36">

<person posts="84" size="268" who="Dimitrie O. Paun" />
<person posts="40" size="101" who="Dan Kegel" />
<person posts="37" size="95" who="Alexandre Julliard" />
<person posts="31" size="75" who="Sylvain Petreolle" />
<person posts="30" size="83" who="Francois Gouget" />
<person posts="21" size="54" who="Eric Pouech" />
<person posts="13" size="32" who="Shachar Shemesh" />
<person posts="10" size="28" who="Mike Hearn" />
<person posts="10" size="23" who="Lionel Ulmer" />
<person posts="10" size="21" who="Steven Edwards" />
<person posts="8" size="21" who="Marcus Meissner" />
<person posts="7" size="54" who="Greg Turner" />
<person posts="7" size="29" who="Francois Gouget" />
<person posts="6" size="17" who="Jim White" />
<person posts="6" size="15" who="Oliver Sampson" />
<person posts="5" size="19" who="Ove Kaaven" />
<person posts="5" size="15" who="Uwe Bonnes" />
<person posts="5" size="14" who="Hans Christian Studt" />
<person posts="5" size="13" who="David Fraser" />
<person posts="5" size="12" who="Jeff Smith" />
<person posts="4" size="14" who="John K. Hohm" />
<person posts="4" size="10" who="Dmitry Timoshkov" />
<person posts="4" size="9" who="Duane Clark" />
<person posts="3" size="21" who="Michael Stefaniuc" />
<person posts="3" size="11" who="Martin Pool" />
<person posts="3" size="10" who="Glen Kaukola" />
<person posts="3" size="9" who="(chrismorgan)" />
<person posts="3" size="8" who="Bill Medland" />
<person posts="3" size="7" who="Rein Klazes" />
<person posts="3" size="6" who="Marcus Meissner" />
<person posts="3" size="6" who="Tony Lambregts" />
<person posts="3" size="6" who="Mehmet YASAR" />
<person posts="2" size="10" who="Claudiu Costin" />
<person posts="2" size="8" who="Manu" />
<person posts="2" size="8" who="Stefan Leichter" />
<person posts="2" size="7" who="=?ISO-8859-1?Q?Stefan_G=F6rling?=" />
<person posts="2" size="6" who="Alberto Massari" />
<person posts="2" size="6" who="Dave" />
<person posts="2" size="5" who="Jeremy White" />
<person posts="2" size="5" who="Paul Millar" />
<person posts="2" size="5" who="Eric POUECH" />
<person posts="2" size="5" who="Patrik Stridvall" />
<person posts="2" size="5" who="Rick Romero" />
<person posts="2" size="5" who="Gustavo Junior Alves" />
<person posts="2" size="4" who="Nerijus Baliunas" />
<person posts="2" size="4" who="Hetz Ben Hamo" />
<person posts="2" size="3" who="Hetz Ben Hamo" />
<person posts="2" size="3" who="Andreas Mohr" />
<person posts="2" size="3" who="tom potts" />
<person posts="1" size="20" who="Kevin" />
<person posts="1" size="20" who="Kye Lewis" />
<person posts="1" size="17" who="Mauro Carvalho Chehab" />
<person posts="1" size="6" who="Matthew Mastracci" />
<person posts="1" size="5" who="Mauro Carvalho Chehab - BrTurbo" />
<person posts="1" size="5" who="John Westerman" />
<person posts="1" size="4" who="Alejandro Lorenzo" />
<person posts="1" size="3" who="David Miller" />
<person posts="1" size="3" who="Jeroen Janssen" />
<person posts="1" size="3" who="Roderick Colenbrander" />
<person posts="1" size="3" who="David Welch" />
<person posts="1" size="3" who="Matt Chapman" />
<person posts="1" size="2" who="Zsolt Rizsanyi" />
<person posts="1" size="2" who="Michael F. March" />
<person posts="1" size="2" who="yf" />
<person posts="1" size="2" who="Geoff Thorpe" />
<person posts="1" size="2" who="Nathan Boyle" />
<person posts="1" size="2" who="Steven Tower" />
<person posts="1" size="2" who="Drew Ogle" />
<person posts="1" size="2" who="Mike Robinson" />
<person posts="1" size="2" who="Ben Clewett" />
<person posts="1" size="2" who="Kari Hurtta" />
<person posts="1" size="2" who="Tom Wickline" />
<person posts="1" size="2" who="LarstiQ" />
<person posts="1" size="2" who="Z_God" />
<person posts="1" size="2" who="Dave Miller" />
<person posts="1" size="2" who="Thai Dang" />
<person posts="1" size="2" who="David Laight" />
<person posts="1" size="2" who="Steve Langasek" />
<person posts="1" size="1" who="Brian Vincent" />
<person posts="1" size="1" who="Shachar Shemesh" />
<person posts="1" size="1" who="Matthew Davison" />
<person posts="1" size="1" who="Robert Lunnon" />
<person posts="1" size="1" who="Enrico Horn" />

</stats>


<section 
	title="News: Distribution Review" 
	subject="News"
	archive="http://www.desktoplinux.com/articles/AT9485255756.html" 
	posts="1"
	startdate="03 Jan 2003 00:00:00 -0800"
	enddate="20 Jan 2003 00:00:00 -0800"
>
<topic>News</topic>
<p>Over at DesktopLinux.com there's a review of 
<a href="http://www.desktoplinux.com/articles/AT9485255756.html">several 
desktop</a> operating systems.  If
you skip to the last page you'll find a discussion of
<a href="http://www.desktoplinux.com/articles/AT8266871610.html">
several Linux distributions</a>, some you may never have heard
of before.  The notable Wine reference discusses using 
CodeWeavers CrossOver Office with the ELX distribution.
Sadly, the author doesn't mention Wine at all.</p>

</section>




<section 
	title="Direct 3D Status" 
	subject=""
	archive="http://www.winehq.org/hypermail/wine-devel/2003/01/0.html" 
	posts=""
	startdate="03 Jan 2003 00:00:00 -0800"
>
<topic>Status Updates</topic>
<p>There's been a lot of work on Direct 3D lately and it
hasn't gotten much attention here - mostly because the changes
haven't been controversial.  Over the past month there's
been almost 100 patches submitted on various parts of Wine's
Direct 3D.  They've come from primarily from Lionel Ulmer,
Jason Edmeades, Christian Costa, and Rapha&#235;l Junqueira.
So I asked Lionel about the
work and how it's going.  Below are questions asked by me and
answers from him.  </p>
<p>What exactly is the status of Direct 3D (v. 1-8) in Wine?</p>
<quote who="Lionel Ulmer"><p>
The status is that D3D 1-7 is mostly complete. One big stuff remaining to be
done is direct surface operation for the D3D device (locking, blitting, ...).
The rest are only optimisations or optional features (like multi-texturing).
A lot of other stuff would remain to be done but we did not find yet any
game using them, so we consider them unneeded to be implemented (yet :-) ).
</p></quote>

<p>What's some of the new stuff that's really important?</p>
<quote who="Lionel Ulmer"><p>
All the support for the various types of DrawPrimitive (non-indexed,
indexed, via a vertex buffer, ...). The rest was already here before the
start of the revival, just a lot less clean.
</p></quote>

<p>Does it affect D3D8?
</p>
<quote who="Lionel Ulmer"><p>
Not at all.
</p></quote>

<p>Some other folks have been working on it too, have
   you been coordinating with them?</p>
<quote who="Lionel Ulmer"><p>
Yup. I am in regular contact with two other French guys (one, Christian,
working like me on D3D1-7, the other, Raphael, working on D3D8) on how to
plan ahead on making the most code common between the two code paths.
</p><p>
I had also some discussions with Jason (the main D3D8 developper) and also
some people working to get some of their favourite games to work.
</p></quote>



<p>What's the most exciting thing you've gotten to work?</p>
<quote who="Lionel Ulmer"><p>
For me that would be System Shock 2. It's not playable yet (as it misses
surface locking) but it's certainly nice to be able to start to walk around
the 3D stuff.
</p><p>
Even better is to see people starting to ask me to review some patches they
are writing to get their games working. That means that it's in a state
where anybody could help just adding one little patch here or there to fix
their favourite game.
</p></quote>


</section>





<section 
	title="Conformance Testing" 
	subject="Conformance Testing"
	archive="http://www.winehq.org/hypermail/wine-devel/2002/12/0958.html" 
	posts="20"
	startdate="29 Dec 2002 00:00:00 -0800"
	enddate="05 Jan 2003 00:00:00 -0800"
>
<topic>Testing</topic>
<p>There's been a lot of people lately doing testing with Wine's
test programs on Windows to see if the output matches what's expected
by Wine.  Pretty simple concept really - compile little Win32 programs
run them under Wine and Windows and compare the results.  In theory,
the results should be the same.  Anyway, this topic is composed of several 
threads and has been going on for over a month.  I've neglected to cover
it because it's pretty boring - you probably don't want to see test output
and reports like "14 of 42 tests failed".  What's a little more interesting
is to link to Francois Gouget's page where he has a running list of
the tests.  You can find that at:
<a href="http://fgouget.free.fr/wine/tests-en.shtml">http://fgouget.free.fr/wine/tests-en.shtml</a>.
</p><p>If you're looking for a way to contribute to Wine, that might be
a good starting point.  Francois has the tests compiled and available as
a .zip file ready to be run on Windows (no compiling necessary!)  
There's still quite a few versions of Windows that haven't had some of
the tests run on them.  If you
have output different than what's already reported I'm sure he'd love to
hear about it.  The tests are known to have problems, hence the differences
between Windows versions and Wine.  Figuring out why a test won't work
is a great way to start digging into Wine.    
I'll include the intro Francois wrote to give you an idea of what's been
going on:</p>
<quote who="Francois Gouget">

<p>14 tests out of 42 have failures on one or more Windows platforms
<i>(last time I counted)</i>.
That's 33% of incorrect tests! Making progress. That's still pretty bad
since a good part of the progress comes from the addition of the generated
tests that succeed on all platforms. But it is much better than the initial
75% of 2002/12/03 :-) <br />
Click on the link below to download pre-compiled windows binaries and see
for yourself:<br />
<a href="winetests.zip">winetests.zip</a>
-- Sunday, 05-Jan-2003 04:32:51 MET
--  1.1M</p>

<p>What Wine needs most currently is volunteers to go over these errors and
to send patches to wine-patches fixing the tests so that they complete
successfully on all versions of Windows: at this time running the tests on
more platforms would mostly confirm already known bugs. If you fix a test
let me know and I will update this page accordingly.<br />
See the following URL for instructions on how to compile (and debug) the
tests on Windows using Visual C++:
<a href="http://www.winehq.org/docs/wine-devel/testing-windows.html">http://www.winehq.org/docs/wine-devel/testing-windows</a>
</p>
<p><a name="incorrect">Note</a>: These tests are conformance tests which means
their main function is to describe the behavior of Windows APIs, and then to
allow us to verify that Wine behaves like the test says. So obviously if a
test fails on Windows its description of the Windows API behavior is incorrect
and is useless as far as testing the correctness of Wine. Thus in the 'Wine'
column I am marking any test that fails on a Windows platform as 'incorrect'.
It must be fixed first. Then we can consider the results of running the test
on Wine.
</p></quote>

<p>On Wednesday Francois posted a message asking for help with
some specific tests:</p>
<quote who="Francois Gouget"><p>
However now I need *help* to fix the following test failures. I.e these
tests fail and I don't know how to fix them so a patch, or hints as to
what needs to be done would be greatly appreciated:
(well, the alternative is that I could also just remove them)
<ul>
<li>kernel32/alloc</li>
<li>kernel32/file</li>
<li>kernel32/locale</li>
<li>netapi32/access</li>
<li>user32/sysparams</li>
<li>user32/win</li>
</ul>   
</p><p>
There are more tests that fail and I would certainly appreciate help
with these too (would free me lots of time to do other things on Wine).
Otherwise I will have a crack at them and see what I can do.
</p></quote>

<p>If you're interested to see how people are reporting problems, here's some
links to threads about testing:
<ul>
<li><a href="http://www.winehq.org/hypermail/wine-devel/2002/12/0994.html">Windows 2000 Pro conformance test update</a></li>
<li><a href="http://www.winehq.org/hypermail/wine-devel/2003/01/0007.html">Win2000 Conformance R3:</a></li>
<li><a href="http://www.winehq.org/hypermail/wine-devel/2003/01/0167.html">Windows XP conformance test update 1/5</a></li>
<li><a href="http://www.winehq.org/hypermail/wine-devel/2002/12/0958.html">Win98 Compliance Status</a></li>
</ul></p>

</section>





<section 
	title="wxWindows Port Completed" 
	subject="wxWindows: it's now official (almost)"
	archive="http://www.winehq.org/hypermail/wine-devel/2003/01/0153.html" 
	posts="1"
	startdate="04 Jan 2003 00:00:00 -0800"
>
<topic>Winelib</topic>
<p>Looks like Dimi Paun finished his work getting wxWindows to
compile under Wine (now comes the fun of integrating changes
into various projects):</p> 
<kcref startdate="24 Dec 2002 00:00:00 -0800" subject="[JOY] wxWindows" />:
<quote who="Dimitrie Paun">
<p>
Last night I had nothing better to do than to cleanup my wxWindows
patch. The entire thing is less than 500 lines! This says quite a
few things about the maturity of our headers. 
</p><p>
The changes to the build system are just a few lines changed in 
src/makeg95.env. In fact, most of those are just documentation changes, 
and convenience things. *All* interesting changes are just:
<ul><code>
CC=winegcc<br />
CXX=winegcc -xc++<br />
WINDRES=wrc</code></ul>
</p><p>
Needless to say, I am sooooo happy! :))))
Below I've included a diffstat of the patch (to give you an idea
how few things I had to change), and the patch itself (first to
show how trivial the changes are, and second in the hope that my
experience doing this port can be of some use to someone else).
</p><p>
The exact same patch (with the only difference being that it has
only 2 lines of context for the unified diff, to conform to the
wxWindows patch guidelines) will be submitted for inclusion in the
official wxWindows tree in the next 10 minutes. But I figured you
guys should be the first to know, so here it is! :)
</p><p>
Enjoy!
</p><p><code>
diffstat wine.diff<ul>
<table border="0">
<tr><td> include/wx/filefn.h      </td><td>|</td><td>    2 +-</td></tr>
<tr><td> include/wx/longlong.h    </td><td>|</td><td>    1 +</td></tr>
<tr><td> include/wx/msw/gccpriv.h </td><td>|</td><td>    4 ++--</td></tr>
<tr><td> include/wx/msw/setup0.h  </td><td>|</td><td>    2 +-</td></tr>
<tr><td> include/wx/platform.h    </td><td>|</td><td>    2 +-</td></tr>
<tr><td> include/wx/sckaddr.h     </td><td>|</td><td>    2 +-</td></tr>
<tr><td> src/common/datetime.cpp  </td><td>|</td><td>    2 +-</td></tr>
<tr><td> src/common/dynarray.cpp  </td><td>|</td><td>    1 +</td></tr>
<tr><td> src/common/encconv.cpp   </td><td>|</td><td>    1 +</td></tr>
<tr><td> src/common/filefn.cpp    </td><td>|</td><td>    2 +-</td></tr>
<tr><td> src/common/list.cpp      </td><td>|</td><td>    1 +</td></tr>
<tr><td> src/common/mimecmn.cpp   </td><td>|</td><td>    6 +++---</td></tr>
<tr><td> src/common/sckaddr.cpp   </td><td>|</td><td>    4 ++--</td></tr>
<tr><td> src/common/sckipc.cpp    </td><td>|</td><td>    2 +-</td></tr>
<tr><td> src/common/string.cpp    </td><td>|</td><td>    1 +</td></tr>
<tr><td> src/common/wxchar.cpp    </td><td>|</td><td>    2 +-</td></tr>
<tr><td> src/jpeg/jmorecfg.h      </td><td>|</td><td>    3 +++</td></tr>
<tr><td> src/makeg95.env          </td><td>|</td><td>   24 +++++++++++++++++++++---</td></tr>
<tr><td> src/msw/app.cpp          </td><td>|</td><td>    2 +-</td></tr>
<tr><td> src/msw/dialup.cpp       </td><td>|</td><td>    1 +</td></tr>
<tr><td> src/msw/fontenum.cpp     </td><td>|</td><td>    2 +-</td></tr>
<tr><td> src/msw/gsocket.c        </td><td>|</td><td>    4 ++--</td></tr>
<tr><td> src/msw/ole/automtn.cpp  </td><td>|</td><td>    1 +</td></tr>
<tr><td> src/png/pngconf.h        </td><td>|</td><td>    8 ++++++--</td></tr>
</table>
 24 files changed, 56 insertions(+), 24 deletions(-)
</ul></code></p></quote>

</section>


<section 
	title="Fun Projects Update" 
	subject="Wine Fun v0.3"
	archive="http://www.winehq.org/hypermail/wine-devel/2003/01/0262.html" 
	posts="6"
	startdate="06 Jan 2003 00:00:00 -0800"
	enddate="07 Jan 2003 00:00:00 -0800"
>
<topic>Project Management</topic>
<p>Dimi updated his fun projects list - the one
that got slashdotted last time he posted it:</p>
<quote who="Dimitrie Paun"><p>
 I haven't released a version of the Fun page in a loooong time, and a 
 _lot_ of things changed. In fact, I would say at least 90% of it has 
 changed since last time. Here it is for your viewing pleasure:
<ul><a href="http://63.138.153.104/wine/Wine-Fun-0.3.html">
  http://63.138.153.104/wine/Wine-Fun-0.3.html</a></ul></p>
<p>
Check it out, maybe you'll find something that tickles your fancy! ;)
</p></quote>
</section>


<section 
	title="Compiling With distcc" 
	subject="distcc and wine"
	archive="http://www.winehq.org/hypermail/wine-devel/2003/01/0361.html" 
	posts=""
	startdate="08 Jan 2003 00:00:00 -0800"
	enddate="10 Jan 2003 00:00:00 -0800"
>
<topic>Build Process</topic>
<p>A few weeks ago we reported some comparisons with compile
times.  In that we noted Dan Kegel had failed to see a speedup
compiling with a distcc - a compiler that distributes across
a bunch of machines.  This week Martin Pool replied:</p>
<quote who="Martin Pool"><p>
I saw (reading my referrer logs :-) people were interested in distcc
with Wine, so I thought I would add it to distcc's performance
benchmark.  
</p><p>
Across three machines I saw a 2.58x speedup -- details are attached.
The machines were all 1GB, 1700MHz Pentium IV with a 100Mbps switched
connection.  Building on just one took 22m57s, and across all three
took 8m53s.  There is probably still some scheduling inefficiency
here, which I hope to reduce over the next few months.
</p><p>
I'm not sure what was happening with the person who saw little change.
Perhaps they had distcc misconfigured, or perhaps they hit a bug.
Either way I would be interested in hearing the details
($DISTCC_HOSTS, etc) and seeing if I can help fix it.
</p><p>
I hope you find ccache and distcc useful.  Wine is a cool project.
</p></quote>

<p>Dan was pleasantly surprised by the results.  He surmised the
reason was because his machines were different types.  Martin
thought the scheduler with distcc had some problems and said he'd
take a look at trying to improve it.</p>




</section>

<section 
	title="Mac OS X + Bochs + Wine = Wish List" 
	subject="Mac OS X/Darwin port of Wine"
	archive="http://www.winehq.org/hypermail/wine-devel/2003/01/0131.html" 
	posts="5"
	startdate="04 Jan 2003 00:00:00 -0800"
>
<topic>Ports</topic>
<p>The only reason I'm covering this thread is because the next
time it comes up on wine-devel I'll just post a link and point to 
this.  Anyway, Jim White had a question about getting Wine to 
integrate into Mac OS X:</p>
<quote who="Jim White"><p>
A few weeks ago when I thought how cool it would be to marry Wine and 
Bochs to run Windows progams on Mac OS X &amp; Darwin, I checked around, 
including this list, and didn't find any activity.
</p><p>
So I opened a SourceForge project to focus on just that goal:
<ul><a href="http://darwine.sf.net">http://darwine.sf.net</a></ul>
</p><p>
After I uploaded the home page tonight, I checked here again and found 
this topic had just come up last week!
</p><p>
I don't know yet whether it makes sense to maintain a separate 
discussion and/or repository for this purpose.  Seems like it would at 
least be useful during active initial work and then perhaps phase out.
</p><p>
In any case, the resource is ready-to-use and I'ld like to hear from 
others interested in this port.
</p></quote>
<p>I posted the following:</p>
<quote who="Brian Vincent"><p>
This issue comes up a few times a year (isn't it in a FAQ
somewhere?)  Anyway, take a look at these threads:
<ul>
<a href="http://kt.zork.net/wine/wn20020830_133.html#3">
http://kt.zork.net/wine/wn20020830_133.html#3</a><br />

<a href="http://bugs.winehq.org/show_bug.cgi?id=44">
http://bugs.winehq.org/show_bug.cgi?id=44</a><br />

<a href="http://www.winehq.org/hypermail/wine-devel/2000/11/0004.html">
http://www.winehq.org/hypermail/wine-devel/2000/11/0004.html</a><br />

<a href="http://www.winehq.org/hypermail/wine-devel/2000/11/0077.html">
http://www.winehq.org/hypermail/wine-devel/2000/11/0077.html</a><br />
</ul></p><p>
The fact that you're using Bochs does make it unique, but you
may still glean some useful info from those links.
</p></quote>

<p>Lionel Ulmer then wrote in with an interesting idea:</p>
<quote who="Lionel Ulmer"><p>
Yeah, this is one of the most persistent 'Wine dream' around :-)
</p><p>
I had once a long discussion with a fellow hacker on this subject (going
into the likes of using Valgrind's virtualization engine to output non-X86
code to do dynamic translation and so on). We agreed that before starting
with Wine, one could start with running, for example, Linux/x86 binaries on
Linux/PPC. That would already validate the fact that you can draw the line
at one point and from there run such an heterogenous environment.
</p><p>
It's a very nice subject... A pitty it has such a low importance (seeing how
X86 dominates the desktop market).
</p></quote>


</section>




</kc>

