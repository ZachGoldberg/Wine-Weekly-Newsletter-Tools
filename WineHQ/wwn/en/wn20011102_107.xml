<?xml version="1.0" ?>
<kc>

<title>Kernel Cousin Wine</title>

<author email="vinn@theshell.com">Brian Vincent</author>

<issue num="107" date="11/02/2001" />

<intro>
<p>
This is the 107th release of the Wine's kernel cousin publication. Its main 
goal is to distribute widely what's going on around Wine (the Un*x Windows 
emulator). </p>
<p>
There's lots and lots and lots of interesting Wine press this week.</p>
<p>
First, everyone should go take a look at the
<a href="http://www.osnews.com/story.php?news_id=227">interview</a> 
with Alexandre Julliard over at <a href="http://www.osnews.com">OSNews</a>.
Alexandre covers a lot of different topics including Wine architecture,
working with the Win32 API, and some of the various companies working
with Wine.  There's a link to some 
<a href ="http://www.codeweavers.com/technology/wine/screenshots.php">screenshots</a> 
from CodeWeavers too.</p>


<p>The next bit of interesting news comes out of 
<a href="http://www.transgaming.com">TransGaming</a> and 
<a href="http://www.linux-mandrake.com">MandrakeSoft</a>.  The two
companies have partnered together to bundle a unique Linux distribution.
Check out the 
<a href="http://www.transgaming.com/news.php?newsid=3">press release</a>
for the details.   Of course
MandrakeSoft makes the popular Mandrake distribution - definitely one
of the easiest distros to set up.  TransGaming is developing WineX - 
Wine + all the goodies (DirectX) needed to run games.  TransGaming is 
providing a port of Electronic Arts' "The Sims".  Is there anyone out 
there that hasn't heard of the game?  Didn't think so.  </p>

<p>So to whet the appetite a bit, here's a 
<a href="http://www.transgaming.com/images/thesims01.jpg">screenshot</a>
and here's <a href="http://www.transgaming.com/images/thesims02.jpg">
another</a>.  Pre-orders supposedly started October 31st (though I
couldn't find them anywhere) and shipping is scheduled
for November 9th.  The package is being called "Mandrake Gaming Edition"
and for $69.99 you get Mandrake Linux 8.1, The Sims, and bunch of mornings 
wondering why you stayed up all night.</p>

<p>But wait, before you put down your Christmas list there's some other
TransGaming info you might want to check out.  Although this hasn't
been addressed here directly, there have been various discussions
about TransGaming's business model.  Here's one aspect of it:
<ul><li>Get a <a href="http://www.transgaming.com/create_accnt.php">
  subscription</a> for $5 a month.</li>
    <li>That gives you the right to 
        <a href="http://www.transgaming.com/vote.php">vote</a> for
        what you think the developers should work on.  You might
        vote to get a particular game working or a feature added
        to Wine for example. </li>
    <li>You can check out the current
	  <a href="http://www.transgaming.com/pollslist.php">poll</a>
        for what people want.</li></ul>
Not too bad of an idea.</p>

<p>Now, for some insight into how The Sims got ported, check out
<a href="http://www.linuxgames.com/news/index.php3/5084">this 
post</a> on <a href="http://www.linuxgames.com">LinuxGames</a>.
If you scroll down there's a couple of posts from Don Hopkins
who worked on the port.  The second post is far more interesting -
he describes how he helped design The Sims to be portable and he
goes on to say how happy he was doing it with Wine.
There are several external applications that can be used with
The Sims and doing a native port of each would be nearly impossible.
</p>

<p>If you read the post above from LinuxGames you might have 
noticed Loki got slammed pretty hard.  Personally, I hate the whole 
argument of "native vs. Wine ports".  Loki has done more to further 
gaming on Linux than anyone else.  The products they put out have been
fantastic.  I think there's more than enough room in the roughly
$6 billion a year gaming industry for a few companies with different
approaches.  Naturally some games lend themselves better to a native
port than others, but as Don points out above - end users care more
about functionality than the details of how it was created.</p>

<p>Finally, we have have an announcement from a new company called
<a href="http://www.lindows.com">Lindows</a>.  (See that link
for the October 23rd press release.)  The details are pretty
sketchy.  Basically the founder of <a href="http://www.mp3.com">
MP3.com</a>, Michael Robertson, has started a company that is
going to create a "reliable, easy-to-use, and compatible OS that 
can run both Linux and Windows software titles".  Preview releases
are set to be out before year end and Version 1.0 is slated for 
Q1, 2002.  It's a Linux kernel + Wine.  <a href="http://www.zdnet.com">
ZDNet</a> has 
<a href="http://www.zdnet.com/zdnn/stories/news/0%2c4586%2c5098693%2c00.html?chkpt=zdnnp1tp02">an  
article</a> with a little more detail in it.  And John Dvorak 
also wrote <a href="http://www.pcmag.com/article/0,2997,s%253D1500%2526a%253D17211,00.asp">an
editorial</a> about it.  Will this product ever be more than
vaporware?  Do you think we'll see patches getting
submitted to <a href="http://www.winehq.org/hypermail/wine-patches">
wine-patches</a>?  Only time will tell.</p>

</intro>

<stats posts="113" size="395" contrib="33" multiples="18" lastweek="17">

<person posts="12" size="29" who="Simon Britnell &lt;ughbash@yahoo.com&gt;" />
<person posts="12" size="28" who="Alexandre Julliard &lt;julliard@winehq.org&gt;" />
<person posts="11" size="22" who="Ove Kaaven &lt;ovehk@ping.uio.no&gt;" />
<person posts="10" size="26" who="Gerard Patel &lt;gerard.patel@nerim.net&gt;" />
<person posts="13" size="32" who="eric pouech &lt;eric.pouech@wanadoo.fr&gt;" />
<person posts="12" size="111" who="Francois Gouget &lt;fgouget@free.fr&gt;" />
<person posts="6" size="23" who="Uwe Bonnes &lt;bon@elektron.ikp.physik.tu-darmstadt.de&gt;" />
<person posts="4" size="14" who="David Elliott &lt;dfe@tgwbd.org&gt;" />
<person posts="3" size="7" who="Roger Fujii &lt;rmf@lookhere.com&gt;" />
<person posts="3" size="7" who="Andriy Palamarchuk &lt;apa3a@yahoo.com&gt;" />
<person posts="2" size="29" who="Josh Duncan &lt;duncan@msmd.net&gt;" />
<person posts="2" size="9" who="Mike McCormack  &lt;mike_mccormack@start.com.au&gt;" />
<person posts="2" size="5" who="Grzegorz Prokopski &lt;greg@sente.pl&gt;" />
<person posts="2" size="3" who="Guilherme Kunz &lt;guilherme@elipse.com.br&gt;" />
<person posts="2" size="3" who="mdew &lt;rpbrown@xtra.co.nz&gt;" />
<person posts="2" size="3" who="Bill Medland &lt;medbi01_1@accpac.com&gt;" />
<person posts="1" size="5" who="Arjen Nienhuis &lt;arjen@BleHQ.org&gt;" />
<person posts="1" size="4" who="Takeshima Hidenori &lt;hidenori@a2.ctktv.ne.jp&gt;" />
<person posts="1" size="3" who="Paul Lorenz &lt;p1orenz@yahoo.com&gt;" />
<person posts="1" size="2" who="haxial &lt;winelist@haxial.com&gt;" />
<person posts="1" size="2" who="Nerijus Baliunas &lt;nerijus@users.sourceforge.net&gt;" />
<person posts="1" size="2" who="giorgian &lt;giorgian@icube.it&gt;" />
<person posts="1" size="2" who="geschrader &lt;geschrader@mediaone.net&gt;" />
<person posts="1" size="2" who="Guy L. Albertelli &lt;galberte@neo.lrun.com&gt;" />
<person posts="1" size="2" who="Joshua Thielen &lt;thielen@netprince.net&gt;" />
<person posts="1" size="2" who="Rein Klazes &lt;rklazes@xs4all.nl&gt;" />
<person posts="1" size="1" who="Duane Clark &lt;dclark@akamail.com&gt;" />
<person posts="1" size="1" who="G.LeeJ &lt;G.LeeJ@imyourhandiman.com&gt;" />
<person posts="1" size="1" who="Bill Medland &lt;Bill.Medland@accpac.com&gt;" />
<person posts="1" size="1" who="Gerald Pfeifer &lt;pfeifer@dbai.tuwien.ac.at&gt;" />

</stats>



 

<section
  title="Problem With VirtualDub"
  subject="problem with virtualdub."
  archive="http://www.winehq.org/hypermail/wine-devel/2001/10/0262.html"
  posts="4"
  startdate="10/26/2001"
  enddate="10/29/2001"
>
<p>Roger Fujii was having problems getting a program called VirtualDub to
work:</p>
<quote who="Roger Fujii"><p>
 there seems to be a funky problem with virtualdub
 (<a href="http://virtualdub.sourceforge.net">http://virutaldub.sourceforge.net
 </a>).  Get differing results between solaris and linux, but both seems to
 fail before the app comes up.
</p><p>
 Under solaris, it seems like something is screwed up
 with the loader - when it tries to load the binary, 
 it dies in dump_exports because what's at pe_exports
 is just garbage.   Not sure where it's dying under
 linux (probably the same place) - don't have a devel
 environment there (yet).
</p><p>
 Nothing unusual seems to happen before it gets there
 (both solaris/linux binaries run sol.exe and other stuff just fine). 
 My suspicion is that the IMAGE_DIRECTORY_ENTRY_EXPORT data isn't pointing to what
 wine thinks is there, but would like someone who knows more
 about the loader to say something....
</p><p>
 can anyone help shed more light onto this?
</p></quote>

<p>
Gerard Patel had some insight:</p>
<quote who="Gerard Patel"><p>
  Yes, I have looked at this application.
  It loads fine under Windows - however, both dependency walker and the
  Nt quick viewer are not happy with it (one displays that there is a format
  error in the exe, the other loops and finally crashes)
</p><p> 
  The web site says that this executable is compressed with a tool called UPX.
  This seems to be the reason for the problem, as the original program is 
  compiled with Ms VC++ - not a very exotic tool.
</p><p>
  I think that a fix could be to detect a corrupted header in dump_exports and
  to not try to display anything if numberoffunctions is not coherent with the
  export section size.
</p><p>
  I tried a hack for that and virtualdub got further; however, I see that it is
  trying to load avicap32.dll and this is not going to work - even under Linux
  ;:-)
</p></quote>
<p>Nerijus Baliunas suggest checking out 
<a href="http://upx.sourceforge.net">http://upx.sourceforge.net</a>
to unpack it.  He also added that Takeshima Hidenori had just submitted
a patch adding a stub for avicap32.  Gerard got further after unpacking
it, but it still died.  </p>

</section>  







 

<section
  title="Borland OWL"
  subject="Anyone compiled Borland OWL (Object Windows Library) with winelib ?"
  archive="http://www.winehq.org/hypermail/wine-devel/2001/10/0281.html"
  posts="4"
  startdate="10/30/2001"
  enddate="10/31/2001"
>
<p>
Grzegorz Prokopski wants to port a program to Linux using winelib
and had some questions:</p>
<quote who="Grzegorz Prokopski"><p>
  Q1: Have You heard about anyone who compiled Borland OWL (Object
  Windows Library) based project with winelib ? Yeah - I know it is
  an old library and Borland C++ 5.02 is the last version released
  a few years ago and without future updates.
</p><p>
  Anyway I have a project which IS written in OWL and need to check
  how hard will it be to make it working under Linux without
  rewriting it all.
</p><p>
  I believe I have the sources for complete OWL of course.
</p><p>
  Q2: With You expirience what would You say to that statment:
  If my OWL-based program works under Wine it should be convertable
  to winelib. How true is that statment ?
</p><p>
  Q3: I have read docs about using winelib and seen that there is
  MS Visual C++ mentioned many times. Does MS VC++ have some kind
  of support in winemake or in winelib itself ? Does OWL case differ
  much from MS VC++ ?
</p></quote>

<p>Eric Pouech replied to the first question, <quote who="Eric Pouech">
well, it might be possible. some folks have been successful with MFC
however, it has to be checked which BCC++ specific extensions were
used by OWL.  since OWL is a C++ lib, the DLL linking
is done on decorated names, and since GCC and BCC don't use the same
you need to recompile OWL</quote>.  Eric thought it was likely it
could be converted to winelib.  Grzegorz didn't think OWL would use
many new Win API features so he didn't think he'd run into a problem
on that front.  However, Eric reminded him, <quote who="Eric Pouech">
  my main concern isn't against API support (some native OWL should run in
  wine). it's more compilation issues that we may face (like use of pragma,
  specific preprocessor extents..., some 32/16 bit discrepencies).
  Compiling MFC under wine is not a piece of cake (and furthermore,
  details have never been released because of copyright issues)
</quote></p>








</section>  






 

<section
  title="Poll Implementation of audio.c"
  subject="audio.c converted from WaitForSingleObject to poll"
  archive="http://www.winehq.org/hypermail/wine-devel/2001/10/0.html"
  posts="23"
  startdate="10/22/2001"
  enddate="10/31/2001"
>
<p>This topic spanned a lot of threads.  It started with 
Simon Britnell trying to get the audio to work in Homeworld.
Eric Pouech had some suggestions for changing audio.c that
might cure the buffer underrun problems Simon was seeing.
Simon posted the following note with 
a patch:</p>
<p><quote who="Simon Britnell">
<ol>
  <li>Removes the wodPlayer communication ringbuffer
  management code as the pipe already has a queue.</li>
  <li>Removes the need to calculate a sleep interval in
  the wodPlayer main loop, as it loops only when dsp is
  ready to be written or a command is ready to be
  received.</li>
</ol>
</quote>
</p>

<p>Ove K&aring;ven replied, <quote who="Ove Kaaven">
  Well, it seems like a bad idea to make the player thread enter a busy loop
  when there isn't enough data to fill the device buffers, don't you think?
  (Well, though I'd like buffer complete notifications to happen more
  frequently than they do in Wine's current implementation, making the
  player thread use 100% CPU isn't the way...)</quote></p>

<p>Eric Pouech replied it's not a problem if poll was fixed up
for it.  Ove thought it definitely needed to happen before applying
the patch.  Then Simon broke in and mentioned he uncovered some race
conditions and he needed to fix up the new implementation.  Simon
and Eric both went to work on working around the problems.  </p>




</section>  






 
 

<section
  title="WINE and Haxial programs"
  subject="WINE and Haxial programs"
  archive="http://www.winehq.org/hypermail/wine-devel/2001/10/0265.html"
  posts="1"
  startdate="10/27/2001"
  enddate="10/27/2001"
>
<p>Someone posted a message to the list requesting help getting
a some programs to work:</p>
<quote who="winelist@haxial.com"><p>
Hi There
</p><p>
My company produces a few programs that run on Windows and MacOS.  Some 
of the users of these programs have been experimenting using WINE to run 
the programs on Linux.
</p><p>
This is what they have been saying:  "the KDX server runs FLAWLESSLY, 
100% perfect, better than solitaire runs"
</p><p>
However, there is one caveat to the above:  I'm told that text input 
doesn't work when running KDX using WINE on Linux.
</p><p>
I was wondering if I would be able to work with WINE developers in making 
KDX run perfectly on Linux using WINE.  I think you would find this to be 
an easier task than usual because KDX only uses a *minimal* amount of 
windoze APIs.
</p><p>
For example, KDX implements it's own GUI, it does not use the windoze API 
for that.  Also, KDX even implements it's own graphics routines, it does 
not use the windoze GDI functions (except for the final step of getting 
the images onto the screen).  KDX loads no obscure DLLs, it's just a 
single .exe file.   It does not use MDI or any crap like that.  It does 
not access the registry.  It does not use MFC.  So I think it would be 
much easier for WINE than your average windoze program.
</p><p>
Which probably explains why it's already running well, except there is 
some bug, probably a minor little thing, that is preventing text input 
from working.
</p><p>
The website is:   <a href="http://www.haxial.com">http://www.haxial.com</a>
</p><p>
Thanks.
</p>
</quote>
KDX appears to be a client/server app that allows people
to connect to servers for file sharing, chatting, and messaging.  All
the functions are integrated into one client.

</section>  







</kc>
