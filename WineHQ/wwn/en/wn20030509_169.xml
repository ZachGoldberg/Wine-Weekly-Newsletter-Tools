<?xml version="1.0" ?>
<kc>

<title>Wine Traffic</title>

<author contact="http://www.theshell.com/~vinn">Brian Vincent</author>

<issue num="169" date="05/09/2003" />

<intro>
<p>This is the 169th release of the Wine's kernel cousin publication. 
  Its main goal is to inform you of what's going on around Wine (the Un*x 
  Windows emulator).</p>
</intro>






<stats posts="214" size="623" contrib="67" multiples="34" lastweek="30">

<person posts="22" size="56" who="Dimitrie O. Paun" />
<person posts="16" size="50" who="hatky" />
<person posts="14" size="52" who="Uwe Bonnes" />
<person posts="12" size="31" who="Sylvain Petreolle" />
<person posts="12" size="25" who="Eric Pouech" />
<person posts="10" size="24" who="Alexandre Julliard" />
<person posts="11" size="34" who="Mike Hearn" />
<person posts="8" size="26" who="Shachar Shemesh" />
<person posts="8" size="18" who="Gerhard W. Gruber" />
<person posts="7" size="23" who="Francois Gouget" />
<person posts="6" size="38" who="Juan Lang" />
<person posts="6" size="14" who="Lionel Ulmer" />
<person posts="4" size="14" who="Gregory M. Turner" />
<person posts="5" size="13" who="Ove Kaaven" />
<person posts="4" size="8" who="Vincent Beron" />
<person posts="3" size="7" who="Christian Costa" />
<person posts="3" size="6" who="Rein Klazes" />
<person posts="3" size="5" who="erwin wolff" />
<person posts="2" size="12" who="Raphael Junqueira" />
<person posts="2" size="8" who="Michael Schluter" />
<person posts="2" size="7" who="Rob Hughes" />
<person posts="2" size="6" who="Maxime Bellenge" />
<person posts="2" size="6" who="Dave Miller" />
<person posts="2" size="5" who="Kevin DeKorte" />
<person posts="2" size="5" who="Dmitry Timoshkov" />
<person posts="2" size="5" who="Dan Kegel" />
<person posts="2" size="4" who="Robert Lunnon" />
<person posts="2" size="4" who="Brian Vincent" />
<person posts="2" size="4" who="(us)" />
<person posts="2" size="4" who="Gerald Pfeifer" />
<person posts="2" size="4" who="Jeremy Newman" />
<person posts="2" size="3" who="KK singh" />
<person posts="2" size="3" who="Marcus Meissner" />
<person posts="1" size="7" who="Mike McCormack" />
<person posts="1" size="3" who="Mark Westcott" />
<person posts="1" size="3" who="Joerg Mayer" />
<person posts="1" size="3" who="Michael Stefaniuc" />
<person posts="1" size="3" who="David Fraser" />
<person posts="1" size="2" who="David Miller" />
<person posts="1" size="2" who="Dave Miller" />
<person posts="1" size="2" who="Johannes E. Schindelin" />
<person posts="1" size="2" who="Keith Matthews" />
<person posts="1" size="2" who="Philipp Wollermann" />
<person posts="1" size="2" who="Peter Hunnisett" />
<person posts="1" size="2" who="Michael Sauer" />
<person posts="1" size="2" who=" (Neven Luetic)" />
<person posts="1" size="2" who="(jpo234)" />
<person posts="1" size="2" who="Andreas Mohr" />
<person posts="1" size="2" who="Nick Brereton" />
<person posts="1" size="2" who="schuetzen" />
<person posts="1" size="2" who="Jan Sporbeck" />
<person posts="1" size="2" who="Steven Edwards" />
<person posts="1" size="2" who="Robert Reif" />
<person posts="1" size="2" who="Stefan Leichter" />
<person posts="1" size="2" who="Dave Miller" />
<person posts="1" size="2" who="Jeff Smith" />
<person posts="1" size="2" who="Davide Giannotti" />
<person posts="1" size="1" who="Daniel Chao" />
<person posts="1" size="1" who="BiGgUn" />
<person posts="1" size="1" who="Steven Edwards" />
<person posts="1" size="1" who="Oliver Sampson" />
<person posts="1" size="1" who="Peter Lees" />

</stats>




<section
        title="News: Wine-20030508, Lycoris GamePak"
        subject="News"
        archive="http://cvs.winehq.org/cvsweb/wine/ChangeLog?rev=1.71&amp;content-type=text/x-cvsweb-markup"
        posts="3"
        startdate="05/03/2003"
        enddate="05/09/2003"
>
<topic>News</topic>
<p>Another Wine drop, you know the drill.  Alexandre
noted the following changes with Wine-20030508:</p>
<quote who="Alexandre Julliard"><p>

WHAT'S NEW with Wine-20030508: (see 
<a href="http://cvs.winehq.org/cvsweb/wine/ChangeLog?rev=1.71&amp;content-type=text/x-cvsweb-markup">ChangeLog</a>
for details)
<ul>
        <li> Some more reorganizations of the source tree.</li>
        <li> A few more steps towards kernel/ntdll separation.</li>
        <li> Many Direct3D improvements.</li>
        <li> More compatible COM interfaces definitions.</li>
        <li> Lots of bug fixes.</li></ul></p></quote>

<p>Lycoris announced their GamePak distribution:</p>
<quote who="LinuxPR"><p>
Breaking down one of the barrriers to widespread adoption of Desktop/LX as a
mainstream operating system, Lycoris and TransGaming unleash the GamePak. A
powerful package of five (5) native Desktop/LX games, the GamePak comes
bundled with access to one free month of WineX which allows Desktop/LX users
to play over 250 Windows games on their Desktop/LX PC. At the low price of
$34.95, the GamePak gives Desktop/LX users value, action and compatibility in
a single, simple to install package. The GamePak is immediately available from
<a href="https://www.lycoris.com/store">The Lycoris Store</a>.</p></quote>

<p>Looks like an easy way to get WineX installed and configured.  TransGaming
has no announcement on their web site.</p>

<p>eWeek has a positive albeit lame 
<a href="http://www.eweek.com/article2/0,3959,1054585,00.asp">review</a>
of CrossOver Office 2.0.</p>

</section>

<section 
	title="Compiling Mozilla With Wine Tools" 
	subject="Win32 Mozilla 1.4b+ GCC (MingW)?"
	archive="http://www.winehq.org/hypermail/wine-devel/2003/05/0238.html" 
	posts="3"
	startdate="05/08/2003"
>
<topic>Winelib</topic>
<p>I asked the following on Thursday:</p>
<quote who="Brian Vincent"><p>
Anyone see the release info for Mozilla 1.4 Beta? It says:
<ul>
 "As of Mozilla 1.4b, it is possible to build Mozilla for
 Win32 using GCC."
</ul></p><p>
Here's the specific build instructions for Windows:
<ul>
 <a href="http://www.mozilla.org/build/win32.html">http://www.mozilla.org/build/win32.html</a>
</ul></p><p>

It notes:
<ul>
"GCC for Win32 is available as part of the MinGW project.
The following mingw packages are required for building:
<ul>
 <li>gcc >= 3.2.2 (20030208)</li>
 <li>binutils >= 2.13.90 (20030104)</li>
 <li>w32api >= 2.3</li>
 <li>mingw-runtime >= 2.4"</li>
</ul></ul></p></quote>

<p>Mozilla used to be listed on the 
<a href="http://www.winehq.org/?page=fun_projects">fun
projects</a> page.  It was removed last month because
Mozilla could only be compiled with MSVC.  Yes, we all
know Mozilla has native versions for zillions of platforms,
but compiling the Win32 version with Winelib would stress
the toolchain and uncover things that need to be fixed.
Dimi wrote back with a list of known issues that still
need to be resolved:</p>

<quote who="Dimitrie Paun"><p>
 Yes, the 1.4 release will build on MinGW/Cygwin.
 With a bit of luck, we'll have a binutils release
 in a week or two, so we can remove some of the
 ugly, ugly hacks that were put it to work around
 windres problems that have since been fixed.
</p><p>
 Some of this fixes will help a little with an eventual
 Wine port, but this one will be tough. We still need
 a lot of work on winegcc/winewrap to get this to work,
 let alone possible enhancements to gcc for -mthread
 support.
</p><p>
We are currently failing on simple things with winegcc.
For example:
<ol>
  <li> It seems that MinGW's gcc support both main()
     and WinMain() as entry points irregardless of
     the -mwindows flags. We don't. This results in
     configure tests. For example, we can't currently
     build wxWindows using their configure script
     because configure invokes winegcc with the
     -mwindows flag even though it builds simple
     console apps that have a simple main() function.
     This obviously works under MinGW. I have little
     knowledge about linking issues like this, how
     can we support that in wingcc/winewrap?
	</li>
  <li> We need to add support for the -shared flag
     to winegcc. This is a big task, and we haven't
     even started to look at these issues.
	</li>
  <li> I haven't tried, but I don't think we do the
     right thing when we're invoked with the -mthread
     flag. Alexandre, what extensions (if any) we
     need to gcc to be able to support Windows programs
     that use the -mthread flag?
	</li></ol>
</p></quote>

<p>Alexandre replied and felt the first issue shouldn't
be hard to support.  As far as the 
<a href="http://gcc.gnu.org/onlinedocs/gcc-3.2.2/gcc/i386-and-x86-64-Options.html#i386%20and%20x86-64%20Options">-mthread</a>
option goes, he thought maybe it could be ignored.</p>

</section>




<section 
	title="Solaris x86 Status" 
	subject="solaris x86 development?"
	archive="http://www.winehq.org/hypermail/wine-devel/2003/05/0138.html" 
	posts="3"
	startdate="05/05/2003"
	enddate="05/07/2003"
>
<topic>Ports</topic>
<p>In the you're-the-one-who-uses-that-OS category,
Peter Lees wanted to know the status of Wine on Solaris
x86:</p>
<quote who="Peter Lees"><p>
what is the status of WINE development for solaris x86?
</p><p>
i'm running into some fairly fundamental build bugs &amp; would
like to know if anyone has got it working.
</p></quote>

<p>Robert Lunnon reported working on it recently and 
gave some pointers:</p>
<quote who="Robert Lunnon"><p>
Wine can be made to work on Solaris X86 with a few patches. To compile you 
will need the patch kit and a copy of gcc that uses gas rather than AS. the 
Solaris assembler expect intel assembly while gas expects AT&amp;T.
</p><p>
I sent diffs last week but I don't know how long it will take for them to 
reach cvs or if they will ever get there.
</p></quote>

<p>Alexandre reported that some of the patches were applied
but other parts needed to be cleaned up before he would 
commit them.</p>



</section>



<section 
	title="Broken flex" 
	subject="Can't compile wine.. CVS or release."
	archive="http://www.winehq.org/hypermail/wine-devel/2003/04/0014.html" 
	posts="5"
	startdate="05/01/2003"
>
<topic>Build Process</topic>
<p>I meant to put this one in last week, but it slipped through the
cracks.  Someone had a problem compiling Wine out of CVS and posted some
info on their tools and the error generated:</p>
<quote who="mdew"><p>
<ul>
<li>Debian Sid x86</li>
<li>kernel: 2.4.20</li>
<li>flex version: 2.5.31-4</li>
<li>bison: 1.875a-1</li>
<li>gcc: 3.2.3</li>
<li>binutils: 2.13.90.0.18-1</li>
</ul></p>
<p>
<ul><code>
gcc -c -I. -I. -I../../include -I../../include   -Wall 
-mpreferred-stack-boundary=2 -gstabs+ -Wpointer-arith 
-g -O2 -o lex.yy.o lex.yy.c<br />
./ppl.l:97:1: warning: "/*" within comment<br />
./ppl.l: In function `pplex':<br />
./ppl.l:309: `pp_incl_state' undeclared (first use in this function)<br />
./ppl.l:309: (Each undeclared identifier is reported only once<br />
./ppl.l:309: for each function it appears in.)<br />
./ppl.l:309: `pp_pp' undeclared (first use in this function)<br />
[....]
/usr/include/stdlib.h: At top level:<br />
lex.yy.c:15493: warning: `yyunput' defined but not used<br />
make[2]: *** [lex.yy.o] Error 1<br />
make[2]: Leaving directory `/root/cvs/wine/libs/wpp'</code></ul></p></quote>



<p>

A few minutes later Rein Klazes responded with the solution,
<quote who="Rein Klazes">
Flex 2.5.31 bug. Downgrade to 2.5.3a, "make clean" in the tools
directory and you are back.</quote></p>





</section>






<section 
	title="Building a Windows API Database" 
	subject="Volunteers needed - windows API db script ready"
	archive="http://www.winehq.org/hypermail/wine-devel/2003/05/0045.html" 
	posts="14"
	startdate="05/02/2003"
	enddate="05/05/2003"
>
<topic>Utilities</topic>
<p>Back in <a href="http://www.winehq.org/index.phpwwn/156#Windows%20API%20Database%20(cont'd)">issue #156</a>
we discussed building a 
table or database of how Windows DLLs are interrelated.
By running a perl utility you can scan a Windows installation
to locate DLLs and dump API imports and exports using
winedump.  
Dave Miller wrote in to announce more work he'd done on this tool:</p>
<quote who="Dave Miller"><p>
The script which dumps dll imports and exports now seems to parse
everything correctly and organize it nicely in a text file.  We need the
script run against various windows versions.  The output can be sent
directly to me, but please verify I do not already have the data for that
particular version of windows.  I don't need 10 copies of win2k SP3 for
example.  :)
</p><p>
The script is available at 
<a href="http://home.ptd.net/~compsol">http://home.ptd.net/~compsol</a>.
Please make sure
you get createdb.pl.  There is another script, createwinedb.pl which will
ONLY parse the wine spec files.
</p><p>
To run this you will need winedump, perl, and access to your windows
directory from within Linux.  The cleaner the windows install the
better.  We don't want to clutter the database with info from dlls
not provided with windows.  Usage is as follows:
<ul><code>
createdb.pl -d -p &lt;path to windows dir&gt; -o &lt;winver&gt;</code> (ex. win98)
</ul></p><p>
This will save the imports and exports and also create winver.ref, where
winver is specified on the command line with -o.  The .ref file is the one
which will contain all the info we need.  This will be a large file, so I
recommend compressing with gzip if you are going to email it to me.  It
may be large enough to bounce back into your mailbox if you do not.  :)
</p></quote>
<p>The resulting filename was discussed and everyone decided the
output should be named something like  
&lt;name&gt;-&lt;version&gt;-&lt;service-pack&gt;.ref, such as
wine98-4.00.123-SP6a.ref</p>

</section>




<section 
	title="WinZip Registry Patch" 
	subject="WinZip registry patch"
	archive="http://www.winehq.org/hypermail/wine-devel/2003/05/0093.html" 
	posts="3"
	startdate="05/04/2003"
>
<topic>Fixes</topic>
<p>Nick Brereton announced a small patch to help
Winzip work better:</p>
<quote who="Nick Brereton"><p>
<a href="http://www.winehq.org/hypermail/wine-devel/2003/05/att-0093/01-winzip_plain_comments.reg">Attachment</a>
is a windows registry file.
</p><p>
Integration of this file directs WinZip to not use the Rich Edit control
when displaying comments in Zip files by changing a flag that WinZip read
from the registry. This means that it will work with all zip files rather
than crashing out on zip files with comments.
</p><p>
Should I post this anywhere else? eg the wine-patch list? Any comments would
be appreciated.
</p></quote>

<p>Dimi liked the idea and suggested submitting a patch against
the default Wine registry.  Sylvain Petreolle felt more should
be done,
<quote who="Sylvain Petreolle">
Im not against this patch, but this is hiding a problem and not
resolving it.
We should make sure a bug is open about this or add  comments into
richedit/winedefault.reg.</quote></p>


</section>

</kc>
