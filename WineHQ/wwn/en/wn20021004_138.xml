<?xml version="1.0" ?>
<kc>

<title>Kernel Cousin Wine</title>

<author email="vinn@theshell.com">Brian Vincent</author>

<issue num="138" date="10/04/2002" />

<intro>

<p>This is the 138th release of the Wine's kernel cousin publication. Its
main goal is to distribute widely what's going on around Wine (the Un*x 
Windows emulator).</p>

</intro>




<stats posts="172" size="538" contrib="49" multiples="24" lastweek="26">

<person posts="30" size="75" who="Alexandre Julliard &lt;julliard@winehq.org&gt;" />
<person posts="20" size="71" who="Dimitrie O. Paun &lt;dpaun@rogers.com&gt;" />
<person posts="16" size="35" who="Sylvain Petreolle &lt;spetreolle@yahoo.fr&gt;" />
<person posts="11" size="65" who="Greg Turner &lt;gmturner007@ameritech.net&gt;" />
<person posts="9" size="41" who="Dmitry Timoshkov &lt;dmitry@baikal.ru&gt;" />
<person posts="8" size="25" who="Uwe Bonnes &lt;bon@elektron.ikp.physik.tu-darmstadt.de&gt;" />
<person posts="6" size="15" who="Eric Pouech &lt;eric.pouech@wanadoo.fr&gt;" />
<person posts="5" size="11" who="Ove Kaaven &lt;ovehk@ping.uio.no&gt;" />
<person posts="4" size="15" who="Thomas Wickline &lt;twickline2@triad.rr.com&gt;" />
<person posts="4" size="12" who="Miguel Feitosa &lt;list@vmn.com.br&gt;" />
<person posts="4" size="10" who="Chris Morgan &lt;cmorgan@alum.wpi.edu&gt;" />
<person posts="4" size="8" who="Guy L. Albertelli &lt;galberte@neo.lrun.com&gt;" />
<person posts="3" size="9" who="Ann and Jason Edmeades &lt;us@the-edmeades.demon.co.uk&gt;" />
<person posts="3" size="8" who="Bill Medland &lt;billmedland@look.ca&gt;" />
<person posts="3" size="7" who="Dan Kegel &lt;dank@kegel.com&gt;" />
<person posts="2" size="7" who="Sean Millichamp &lt;sean@compu-aid.net&gt;" />
<person posts="2" size="7" who="Shachar Shemesh &lt;wine-devel@sun.consumer.org.il&gt;" />
<person posts="2" size="6" who="&lt;chrismorgan@rcn.com&gt;" />
<person posts="2" size="6" who="Mason Kidd &lt;mrkidd@nettaxi.com&gt;" />
<person posts="2" size="6" who="Ender &lt;winedev@admdev.com&gt;" />
<person posts="2" size="5" who="Paul Rupe &lt;prupe@myrealbox.com&gt;" />
<person posts="2" size="5" who="Dag Wieers &lt;dag@wieers.com&gt;" />
<person posts="2" size="4" who="Jeremy Newman &lt;jnewman@codeweavers.com&gt;" />
<person posts="2" size="4" who="Andreas Mohr &lt;andi@rhlx01.fht-esslingen.de&gt;" />
<person posts="1" size="12" who="Gavriel State &lt;gav@transgaming.com&gt;" />
<person posts="2" size="6" who="Gyorgy Szombathelyi &lt;nog@sdf.lonestar.org&gt;" />
<person posts="1" size="3" who="Boris &lt;boris@thinovations.com&gt;" />
<person posts="1" size="3" who="Juraj Hercek &lt;juraj@syncad.com&gt;" />
<person posts="1" size="3" who="Rizsanyi Zsolt &lt;rizsanyi@myrealbox.com&gt;" />
<person posts="1" size="3" who="Michael Cardenas &lt;michaelc@lindows.com&gt;" />
<person posts="1" size="3" who="Michael Stefaniuc &lt;mstefani@redhat.com&gt;" />
<person posts="1" size="2" who="Patrik Stridvall &lt;ps@leissner.se&gt;" />
<person posts="1" size="2" who="Tony Lambregts &lt;tony_lambregts@telusplanet.net&gt;" />
<person posts="1" size="2" who="Rein Klazes &lt;rklazes@xs4all.nl&gt;" />
<person posts="1" size="2" who="Duane Clark &lt;dclark@akamail.com&gt;" />
<person posts="1" size="2" who="Michael Stefaniuc &lt;mstefani@redhat.de&gt;" />
<person posts="1" size="2" who="Stefan Leichter &lt;Stefan.Leichter@camLine.com&gt;" />
<person posts="1" size="2" who="Igor &lt;furlan@telocity.com&gt;" />
<person posts="1" size="2" who="Fabian Cenedese &lt;Cenedese@indel.ch&gt;" />
<person posts="1" size="2" who="steve.lustbader@philips.com" />
<person posts="1" size="2" who="Jeremy White &lt;jwhite@codeweavers.com&gt;" />
<person posts="1" size="2" who="Jukka Heinonen &lt;jhei@iki.fi&gt;" />
<person posts="1" size="1" who="Huw Davies &lt;huw@codeweavers.com&gt;" />
<person posts="1" size="1" who="Juergen Schmied &lt;juergen.schmied@debitel.net&gt;" />
<person posts="1" size="1" who="Lionel Ulmer &lt;lionel.ulmer@free.fr&gt;" />
<person posts="1" size="1" who="Nick &lt;nick@savs.net&gt;" />

</stats>




<section 
	title="Mews: LindowsOS 2.0 Review" 
	subject="News"
	archive="http://www.msnbc.com/news/813350.asp" 
	posts="1" 
	startdate="09/28/2002"
	enddate="10/04/2002" 
>
<topic>News</topic>
<p>I haven't written that much about Lindows.com 
lately.  There hasn't been much linking LindowsOS
to Wine, hence nothing to write about.  But over
at MSNBC.com there was 
<a href="http://www.msnbc.com/news/813350.asp">a review</a> 
of Lindows.com latest incarnation.  For a measely $199 
you can go to Walmart.com and pick up a Microtel PC
loaded with LindowsOS 2.0.  For AOL users there's 
a Netscape client that can use AOL email and instant
messaging.  Specifically mentioned in the article is
a preview of the AOL 7.0 client available for download.
It goes on to mention Wine and the ability to run MS
Office.  All in all a good summary of what the Lindows.com
folks have been up to.</p>

<p>Posted to wine-devel was a link to 
<a href="http://www-106.ibm.com/developerworks/library/l-ivit.html?n-l-9262">a 
cool interview</a>
with David Mosberger, IA-64 guru.  David talks about the 
Itanium platform, where it's going, and obstacles it faces.
Towards the end of the interview the question comes up
about performance with the current Itanium processor.  
David mentions that even apps that are running in IA-32
emulation mode work good enough for everyday use and
specifically mentions running Taxcut with Wine.</p>

<p>If you're a fan of CodeWeavers' Wine you'll be interested
to know they 
<a href="http://www.codeweavers.com/technology/wine/download.php">
Preview 7</a> a couple of weeks ago.  </p>

</section>










<section 
	title="DIB Engine (cont'd)" 
	subject="Re: DIB engine"
	archive="http://www.winehq.org/hypermail/wine-devel/2002/09/0680.html" 
	posts="3" 
	startdate="09/27/2002"
	enddate="09/27/2002" 
>
<topic></topic>
<p>
 A few months ago 
 <kcref subject="GDI architecture" startdate="06 Aug 2002 00:00:00 -0700" />
 I covered a small thread that alluded to 
 TransGaming releasing a DIB engine to the Wine community.  
 I also covered this back in March with a little better 
 explanation of the whole thing 
 <kcref subject="DIB engine" startdate="30 Mar 2002 00:00:00 -0700" />.
 While not really necessary for Wine to hit 1.0, a lot of people would
 love to see this added.  Last Friday Ove K@#229;ven submitted 
<a href="http://www.winehq.org/hypermail/wine-patches/2002/09/att-0250/01-dib-engine.diff">a patch</a>
to wine-patches and announced:</p>
<quote who="Ove Kaaven"><p>
 Well, here is the DIB engine that a couple of people at TransGaming
 (mostly David Hammerton, I think) did some work on a while ago, I finally
 got around to review it and make sure it compiles against the current
 ReWind (though perhaps it needs a few tweaks to compile against Wine).
 It's not all that complete by any means, but we wanted to get it out
 there, so feel free to comment on it (or even apply it to Wine if it's
 good enough).
</p></quote>
<p>Gav State provided some more details:</p>
<quote who="Gavriel State"><p>
Primary attribution should go to Jonathan Meunier, a co-op student who
worked with us earlier this year.  David Hammerton, Peter Hunniset, and
I all assisted with it to one degree or another.
</p><p> 
 If there is any general interest in pursuing DIB Engine work, we would
 of course appreciate it if developers are willing to license their
 contributions to ReWind.
</p><p> 
 Ove seems to have forgotten to include the documentation, which includes
 some nice background on DIB issues in general, and should go into the
 documentation directory.
</p></quote>

<p>Gav's email contains 
<a href="http://www.winehq.org/hypermail/wine-patches/2002/09/0251.html">a full
description</a> of the DIB engine, how it hooks into Wine, and exactly
what it can and can't do.  A list of features include:</p>
<quote who="Gavriel State"><p>
<ul>
 <li> Drawing of lines</li>
 <li> Partial drawing of ellipses</li>
 <li> Drawing of polygons (several of the implementations, such as Polygon,
   Polyline, etc)</li>
 <li> Filling of polygons (including patterns)</li>
 <li> Pattern blitting</li>
 <li> ROP2 and ROP3 engines</li></ul>
</p></quote>


</section>










<section 
	title="That Darn $!$!" 
	subject="Re: Fix to protect users from selves."
	archive="http://www.winehq.org/hypermail/wine-devel/2002/09/0704.html" 
	posts="5" 
	startdate="09/29/2002"
	enddate="09/29/2002" 
>
<topic>Fixes</topic>
<p>
Guy Albertelli submitted 
<a href="http://www.winehq.org/hypermail/wine-patches/2002/09/0263.html">a patch</a> 
to
<quote who="Guy Albertelli">
 Prevent Explorer.exe from renaming directories to !$!$...
</quote>  This is likely something a wine user has come
across if they've used explorer.exe and likely a cause of
frustration (that's why the Wine docs say not to run it.)
Anyway, patching file.c to not allow it drew a bunch of 
complaints.  Sylvain Petreolle noted that Windows allows
such a naming convention, <quote who="Sylvain Petreolle">
 This name is absolutely correct and could be used by another
 program.
 I verified it : I created a file called !$!$.txt and a directory on my
 desktop under Windows NT.</quote></p>
<p>So what is the proper solution?  Andi Mohr felt the
answer lay in the registry,
<quote who="Andreas Mohr">
 Please research the exact names/content of certain registry keys instead
 that some people suspected to be necessary to prevent Explorer
 from setting the World on fire.</quote></p>
<p>Rein Klazes recognized the problem and explained how to
avoid it:</p>
<quote who="Rein Klazes"><p>
 After removing such entries from system.reg:
<ul><code>
 | [Software\\Microsoft\\Windows\\CurrentVersion\\RenameFiles\\ProgramFilesRen] 976188522<br />
 | @="D:\\"<br />
 | "!$!$!$!$.pfr"="Program Files,1"<br />
 | "PROGRA~1"="!$!$!$!$.pfr"
</code></ul></p><p>
 it stops.</p></quote>




</section>









<section 
	title="Anti-alias For Smaller Fonts" 
	subject="Fix: Anti-aliasing for font sizes &gt;8"
	archive="http://www.winehq.org/hypermail/wine-devel/2002/09/0712.html" 
	posts="2" 
	startdate="09/30/2002"
>
<topic>Fixes</topic>
<p>
Dag Wieers posted one-liner that made working with Lotus Notes
easier on the eyes:</p>
<quote who="Dag Wieers"><p>
 I noticed recently that Wine was able to do anti-aliasing for font sizes &gt;16
 although my Gnome 2 looked nice with anti-aliasing of &lt;16. I started to 
 look why Wine apps were only anti-aliased for &gt;16, and I came across this:
</p><p><code>
--- dlls/x11drv/xrender.c.orig  2002-09-29 12:56:27.000000000 +0200<br />
+++ dlls/x11drv/xrender.c       2002-09-29 12:56:56.000000000 +0200<br />
@@ -322,7 +322,7 @@<br />
   assert(entry-&gt;nrealized == 0);<br />
 <br />
 <br />
-  if(antialias &amp;&amp; abs(plfsz-&gt;lf.lfHeight * plfsz-&gt;xform.eM22) &gt; 16) {<br />
+  if(antialias &amp;&amp; abs(plfsz-&gt;lf.lfHeight * plfsz-&gt;xform.eM22) &gt; 8) {<br />
 <ul>
     pf.depth = 8;<br />
     pf.direct.alphaMask = 0xff;<br />
 </ul>
   } else {
</code></p><p>
When I changed this, my Notes was much nicer to work with. I presume there 
is a reason why anti-aliasing was off, but I would reconsider that 
decision. You can look for yourself on these 2 screenshots:
</p><p><ul>
	<li><a href="http://dag.wieers.com/Screenshot-2.png">
	http://dag.wieers.com/Screenshot-2.png</a></li>
	<li><a href="http://dag.wieers.com/Screenshot-3.png">
	http://dag.wieers.com/Screenshot-3.png</a></li>
</ul></p><p>
 Especially look at the widgets.</p></quote>


</section>
















<section 
	title="Remote Procedure Call Patch" 
	subject="Re: some rpcrt4 stuff"
	archive="http://www.winehq.org/hypermail/wine-devel/2002/10/0010.html" 
	posts="8" 
	startdate="10/01/2002"
	enddate="10/03/2002" 
>
<topic>Patches</topic>
Greg Turner submitted a patch filling in some stubs in the
rpcrt4 DLL - the Microsoft remote procedure call run-time 
library.  Ove K&#229;ven said he had already done the
same work and much more:
<quote who="Ove Kaaven"><p>
Implementations of these and much more can be found in this patch
submission, which was apparently never applied:
<a href="http://www.winehq.org/hypermail/wine-patches/2002/06/0103.html">
 http://www.winehq.org/hypermail/wine-patches/2002/06/0103.html</a>
</p><p>
You can probably try to extract what you need from that patch if you want
more rpcrt4 stuff.
</p></quote>

<p>Juergen Schmied mentioned Alexandre hadn't applied the patch 
because of the changes necessary to the server component of Wine.  
However, he felt large portions of the patch could be safely applied.  
Alexandre clarified his position, <quote who="Alexandre Julliard">

 As Juergen said, I think the server bits are a bit problematic, but
 even that could be applied as a short term hack if someone wants to
 work on the right implementation. The real problem is the size of the
 patch; but if you were to extract small self-contained patches that
 can be reviewed, tested, and applied independently from the others,
 then certainly most of that stuff could be merged.</quote></p>

<p>Greg decided to take him up on it:</p>
<quote who="Greg Turner"><p>
 OK, howsabout I slowly merge these in by hand, feeding them to
 you in chunks, kind of like Dimitrie's recent storm of ListView
 patches, and doing a little testing of my own along the way?
</p><p>
 Auditing the server stuff may be a problem for me since I really don't 
 grok that aspect of the system yet; but I can defer that for last and
 maybe by then I'll have an idea of what The Right Thing To Do is.
</p></quote>

<p>The next day Greg began separating out parts and submitting patches.</p>

</section>






<section 
	title="Listview Changes" 
	subject="Listview"
	archive="http://www.winehq.org/hypermail/wine-devel/2002/10/0029.html" 
	posts="1" 
	startdate="10/03/2002"
>
<topic>Patches</topic>
<p>
 The changes referenced above with regards to the listview
 control have been occurring over the last few weeks.  Dimi
 Paun has submitted a bunch of patches and a bunch have
 been merged in.  Dimi explained the changes:</p>
<quote who="Dimitrie Paun"><p>
Hi folks,
</p><p>
Here's a quick status update on the listview.
</p><p>
Currently, the listview goes through a major cleanup.
It is required -- the file is huge (over 10000 lines
when I started, now it's 9200 with more features!),
and has accumulated a lot of cruft over the last few years.
This is very normal for such a complex control as listview,
and we need to prep the code to add more features.
</p><p>
At the same time, I go over the code, review it for correctness, 
fix bugs, and implement the missing functionality. While it may
look I do mostly code reorganizations, this is not the case:
a lot of corner bugs have been fixed, functionality has been
enhanced, code has been cleaned up, and simplified. Due to the
cleaner code base, we are in a better position to fix problem,
and add features.
</p><p>
The downside of all this is that (1) old bugs, and missing
functionality is exposed, (2) new bugs are introduced. On top
of it all, two major efforts were happening simultaneously:
Guy's ICON mode work, and mine. Guy did a wonderful job at
fixing some of the issues in ICON mode, unfortunately my changes
interacted with his in a nasty way.
</p><p>
So we have some problems. I am aware of some of them, and I'm
working to fix them. But it will take some time, as I trying to
fix a problem, I see some cleanup that needs doing _before_
I work on the bug itself.
</p><p>
Currently, I am aware of the following problems:
<ul>
  <li> selection (clicking on items sometimes does not select them)</li>
  <li> drawing (focus, background, etc.)</li>
  <li> calculating item rectangles</li>
</ul></p>
<p>
If you are experience problems with the listview, I'd like to hear
from you. If you want to help, some test cases will help quite a bit.
</p></quote>

<p>Ender reported,
<quote who="Ender">
I've noticed a lot of regression problems since these patches started
coming in.. for the last few days Listviews have been pretty much totally
broken in most of the applications I frequently run under WINE -
expecially IDA Pro (the Windows GUI version), which exibits at least two
problems... the Names window doesn't show the description column text, and
neither the Names or Strings window listboxes are clickable.. usually
you'd double-click to jump to a position, but that is no longer working.
</quote></p>

<p>He gave a link to a demo program that was having problems.</p>

</section>


</kc>

