From alexd4 at inbox.lv  Tue Jan  1 04:19:50 2008
From: alexd4 at inbox.lv (Alexander Dorofeyev)
Date: Tue, 01 Jan 2008 02:19:50 -0800
Subject: [5/6] ddraw: fix palette copying when destination palette is NULL
In-Reply-To: <200712311351.13994.stefan@codeweavers.com>
References: <47784E12.1080800@inbox.lv>
	<200712310108.18304.stefan@codeweavers.com>
	<4778D5E9.1010002@inbox.lv>
	<200712311351.13994.stefan@codeweavers.com>
Message-ID: <477A13C6.4030105@inbox.lv>

OK, I'll see what I can do with the test. Speaking of tests, I submitted test
for zero vertex rhw case (as suggested by H.Verbeet to avoid future
regressions), but I think it didn't get accepted. Perhaps, you can look through
it and provide some feedback? Would be good to hear the bad news now, before I
submit more wrong stuff (esp. considering that I'm also trying to write a test
for another issue with Aliens vs Predator 1 that I want to fix). I'm attaching
the zero rhw test.

Stefan D?singer wrote:
> Am Montag, 31. Dezember 2007 12:43:37 schrieb Alexander Dorofeyev:
>> The thing that it tries this copy palette thing at all (AVP1 doesn't depend
>> on that BTW, it does SetPalette on both source and target) - that shouldn't
>> be difficult to test, I think I could write it. Beyond that, I don't know,
>> the documentation on these old interfaces seems non-existant. Is there a
>> way to obtain DX6 docs?
> I suspect that we shouldn't copy the palette at all, I think Texture::Load and 
> friends just copy the bytes over. A test could verify / falsify that. As for 
> the docs, there were older dx docs available on some websites, but I lost the 
> link. I'll see if I can find it.



-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: rhw_zero_test.diff.txt
Url: http://www.winehq.org/pipermail/wine-devel/attachments/20080101/0385f399/attachment-0001.txt 

From dmitry at codeweavers.com  Tue Jan  1 00:30:44 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Tue, 1 Jan 2008 14:30:44 +0800
Subject: comdlg32: 2/2 PageSetupDlgW: Draw paper preview
References: <200712302140.05652.alex@thehandofagony.com><019b01c84b78$dcebaa90$a600fea9@DMITRY>
	<200712311614.09282.alex@thehandofagony.com>
Message-ID: <003b01c84c3f$d7f9ebb0$a600fea9@DMITRY>

"Alexander Nicolaysen S?rnes" <alex at thehandofagony.com> wrote:

> > What's the reason of moving PRINTDLG_PS_ChangePrinterW and changing
> > its indentation?
>
>
> I added a few new functions which it depends on.  The change of indentation
> was accidental.

I fail to see how you can satisfy new functions by moving it down, not up.

-- 
Dmitry.



From hans at it.vu.nl  Tue Jan  1 07:37:02 2008
From: hans at it.vu.nl (Hans Leidekker)
Date: Tue, 1 Jan 2008 14:37:02 +0100
Subject: Commit stats
Message-ID: <200801011437.02229.hans@it.vu.nl>


$ for y in {2002..2007}; do \
  n=$( git log | grep ^Date: | grep $y | wc -l ); \
  echo "Number of commits in $y: $n"; \
  done
Number of commits in 2002: 3094
Number of commits in 2003: 3283
Number of commits in 2004: 3851
Number of commits in 2005: 6006
Number of commits in 2006: 8431
Number of commits in 2007: 9526

 -Hans


From stefan at codeweavers.com  Tue Jan  1 07:42:41 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Tue, 1 Jan 2008 14:42:41 +0100
Subject: [5/6] ddraw: fix palette copying when destination palette is NULL
In-Reply-To: <477A13C6.4030105@inbox.lv>
References: <47784E12.1080800@inbox.lv>
	<200712311351.13994.stefan@codeweavers.com>
	<477A13C6.4030105@inbox.lv>
Message-ID: <200801011442.41388.stefan@codeweavers.com>

Am Dienstag, 1. Januar 2008 11:19:50 schrieb Alexander Dorofeyev:
> OK, I'll see what I can do with the test. Speaking of tests, I submitted
> test for zero vertex rhw case (as suggested by H.Verbeet to avoid future
> regressions), but I think it didn't get accepted. Perhaps, you can look
> through it and provide some feedback? Would be good to hear the bad news
> now, before I submit more wrong stuff (esp. considering that I'm also
> trying to write a test for another issue with Aliens vs Predator 1 that I
> want to fix). I'm attaching the zero rhw test.
It is likely that Alexandre was waiting for an OK from me or Henri. He is the 
only committer, but when someone he doesn't know sends a patch he usually 
waits for the OK from someone who is maintaining the part of Wine. I think I 
forgot to send an OK mail to the test when you submitted it.

A few minor suggestions for the test:
* The vertex structure should be declared somewhere else already, as part of 
the lighting test I think. You can reuse that instead of redeclaring it.

* You don't have to AND the color if 0xffffff, getPixelColor should do that 
already.

* You don't have to set the render states unless you need a different setting 
than the previous tests leave behind

* The "if(hr == D3D_OK)" after BeginScene should be changed 
to "if(SUCCEEDED(hr))"


From jan.wine at zerebecki.de  Tue Jan  1 09:17:09 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Tue, 1 Jan 2008 16:17:09 +0100
Subject: bugs audit volunteers required
In-Reply-To: <47798E0A.5010703@sprintpcs.com>
References: <36bf289b0712311505n2b413183t9b5e2b3b6da7cdb5@mail.gmail.com>
	<477984ED.7050408@codeweavers.com>
	<36bf289b0712311626w52eb6339n7a433eeed74f326c@mail.gmail.com>
	<36bf289b0712311627n1ca35d75ibd929dddd241824d@mail.gmail.com>
	<b6bb06270712311638l3dab6c70g93bc332a1e137d9c@mail.gmail.com>
	<47798E0A.5010703@sprintpcs.com>
Message-ID: <20080101151709.GB3426@crissy.swd.zerebecki.de>

On Mon, Dec 31, 2007 at 05:49:14PM -0700, James McKenzie wrote:
> Austin English wrote:
> > On Dec 31, 2007 6:10 PM, Maarten Lankhorst <maarten at codeweavers.com> wrote:
> >> The situation isn't improved by the fact that bugs are reopened by those
> >> persons after minimal additions. Perhaps we should have a bug
> >> moderation? Only allow bugs that follow the criterion, then have a way
> >> for bugzilla admins to accept bug reports and then a new bug report
> >> entry is created in bugzilla.
> >
> > Does bugzilla support this? How about not allowing someone without
> > higher bugzilla privileges to reopen bugs?
> >   
> It should.  Some of the other projects I work on will only allow a
> person with admin level to change
> the status of a submitted bug, including re-opening.   I would also like
> to see this with bugzilla, even
> though I am an ordinary 'user'.   This would prevent users from closing
> a bug report and then opening
> it again, even if the problem affects a different module.   IMHO, these
> are two separate bugs.

If you know how to configure bugzilla to prevent the bug creator
from reopening it, I'd like to hear about it (AFAIK it's not
possible). As far as I remember regular users who are not the
creator are already disallowed from changing the resolution.


Jan



From alexd4 at inbox.lv  Tue Jan  1 19:16:13 2008
From: alexd4 at inbox.lv (Alexander Dorofeyev)
Date: Tue, 01 Jan 2008 17:16:13 -0800
Subject: [5/6] ddraw: fix palette copying when destination palette is NULL
In-Reply-To: <200801011442.41388.stefan@codeweavers.com>
References: <47784E12.1080800@inbox.lv>
	<200712311351.13994.stefan@codeweavers.com>
	<477A13C6.4030105@inbox.lv>
	<200801011442.41388.stefan@codeweavers.com>
Message-ID: <477AE5DD.4080702@inbox.lv>

OK, thanks a lot. Regarding vertex structure - I'm afraid I can't reuse struct
vertex/nvertex, because I need a very specific format for this test
(D3DFVF_XYZRHW | D3DFVF_DIFFUSE). I could probably reuse sVertexT from fogtest,
but then I'll also have to set specular, that I don't really need. I looks
easier to declare a custom format that has just what I need.

I'll make changes according to other suggestions.

I've ran into some issues while trying to write a test for the old D3D
TEXTUREMAPBLEND state AVP1 game uses. I hope you can help me a bit with it.

The problem is, interfaces at least as recent as DX7 seem to be refusing this
state (I can't make it work on XP). So I probably have to use something older.
Unfortunately, so far I had no luck in creating interfaces that are older than
IDirect3DDevice7, but less painful to use than the very first IDirect3DDevice: I
don't have any DX6 docs and all working examples I can find including AVP1 use
either IDirect3DDevice or something from DX7 or later, and trivial modifications
to examples with IDirect3DDevice I've made fail on XP, usually on the step when
I create IDirect3DDevice3 or something like that. So grudgingly I settled for
IDirect3DDevice and I even have an almost complete test. But it's longer that it
could be with DrawPrimitive calls, because of all that executebuffer horror.
So the question is, is it ok if I submit it like this? From a certain point of
view, there can even be benefits from using IDirect3DDevice, as it may also test
some functions and codepaths not covered by other tests. Or do I have to
continue to look for ways to write it with newer interfaces so that to make it
more compact by getting rid of executebuffer? And, also, where to put it?
ddraw/tests/visual.c seems mostly IDirect3DDevice7-centric, so, perhaps, visual
tests involving earlier interfaces should go in a separate file? Or put it into
visual.c and simply ignore / release DX7 interfaces?

Stefan D?singer wrote:
> It is likely that Alexandre was waiting for an OK from me or Henri. He is the 
> only committer, but when someone he doesn't know sends a patch he usually 
> waits for the OK from someone who is maintaining the part of Wine. I think I 
> forgot to send an OK mail to the test when you submitted it.
> 
> A few minor suggestions for the test:
> * The vertex structure should be declared somewhere else already, as part of 
> the lighting test I think. You can reuse that instead of redeclaring it.
> 
> * You don't have to AND the color if 0xffffff, getPixelColor should do that 
> already.
> 
> * You don't have to set the render states unless you need a different setting 
> than the previous tests leave behind
> 
> * The "if(hr == D3D_OK)" after BeginScene should be changed 
> to "if(SUCCEEDED(hr))"
> 
> 











From jan.wine at zerebecki.de  Tue Jan  1 09:33:34 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Tue, 1 Jan 2008 16:33:34 +0100
Subject: bugs audit volunteers required
In-Reply-To: <b6bb06270712311649g2e382983t11e2684d503aca60@mail.gmail.com>
References: <36bf289b0712311505n2b413183t9b5e2b3b6da7cdb5@mail.gmail.com>
	<477984ED.7050408@codeweavers.com> <47798C5E.5070008@sprintpcs.com>
	<b6bb06270712311649g2e382983t11e2684d503aca60@mail.gmail.com>
Message-ID: <20080101153334.GC3426@crissy.swd.zerebecki.de>

On Mon, Dec 31, 2007 at 06:49:56PM -0600, Austin English wrote:
> On Dec 31, 2007 6:42 PM, James McKenzie <jjmckenzie51 at sprintpcs.com> wrote:
> > I agree.  If you cannot find the application or a demo version to work
> > with, how can you fix the
> > bug.  Logs and other helpers go a long way.  Maybe an intro page as to
> > what is needed and how
> > to get it.  This will become more and more critical as the project
> > approaches 'release' status (1.0).
> > Also, marking bugs as having insufficient information to fix advises the
> > reporter that the project
> > needs more information to help or troubleshoot.
> 
> Maybe add a resolution of NEEDMOREINFO?

We could add flags for "needs more information" and perhaps one
for "reproducible bug report with enough initial information".

(A flag is something that can be requested to be set and can then
be granted or denied by someone who was given the required rights.)

> > Clicking on the "NEW BUG" link should take a person to
> > a web page with reporting
> > criteria.  At this point, the reporter will read through a page of what
> > should be done to report a
> > bug.  After clicking a 'I read and understand the reporting
> > requirements', then the reporter will be
> > able to submit a bug.  After a few cycles of this, regular reporters
> > will not be subject to this page and
> > will be taken instead to the regular bug reporting page.  For the
> > occasional reporter, this is a good way
> > to handle bug reports, IMHO.

Our bugzilla is in git, patches are welcome.

I think a small and easy explanation on the new-bug form, that
refers one to a wiki page for the full guide is a good thing.

(I guess it's probably hard to filter bad bug reports
automatically and even harder to not inconvenience our good bug
reporters at the same time.)


Jan



From stefan at codeweavers.com  Tue Jan  1 09:47:57 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Tue, 1 Jan 2008 16:47:57 +0100
Subject: [5/6] ddraw: fix palette copying when destination palette is NULL
In-Reply-To: <477AE5DD.4080702@inbox.lv>
References: <47784E12.1080800@inbox.lv>
	<200801011442.41388.stefan@codeweavers.com>
	<477AE5DD.4080702@inbox.lv>
Message-ID: <200801011647.57354.stefan@codeweavers.com>

Am Mittwoch, 2. Januar 2008 02:16:13 schrieb Alexander Dorofeyev:
> OK, thanks a lot. Regarding vertex structure - I'm afraid I can't reuse
> struct vertex/nvertex, because I need a very specific format for this test
> (D3DFVF_XYZRHW | D3DFVF_DIFFUSE). I could probably reuse sVertexT from
> fogtest, but then I'll also have to set specular, that I don't really need.
> I looks easier to declare a custom format that has just what I need.
Ah, that's ok then. I forgot that the other vertex has a specular color, so a 
new vertex type is fine.

> I've ran into some issues while trying to write a test for the old D3D
> TEXTUREMAPBLEND state AVP1 game uses. I hope you can help me a bit with it.
Yeah, IDirect3DDevice(1) and IDirect3DExecuteBuffer are a royal pain in the 
ass. Here's some popular rant about it to ease your pain:

http://www.exaflop.org/docs/d3dogl/d3dogl_jc_plan.html

I think that a test using execute buffers is a great thing. This interface is 
terribly obscured and we have only one small test for it. You can add it to 
visual.c if you want, or a new file(maybe executebuffer.c, or something), I 
think both places are ok.

You can also try to QueryInterface old IDirect3DDevice* versions from 
IDirect3DDevice7, but I think this doesn't work as the COM theory says on 
Windows. I haven't yet tested the restrictions and implemented them because I 
haven't seen a game yet that depends on them.


From jan.wine at zerebecki.de  Tue Jan  1 10:15:07 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Tue, 1 Jan 2008 17:15:07 +0100
Subject: New bugzilla components (round 3)
In-Reply-To: <476D5D59.8050809@kievinfo.com>
References: <476D5D59.8050809@kievinfo.com>
Message-ID: <20080101161507.GD3426@crissy.swd.zerebecki.de>

I think I will be able to do the changes next weekend.

If no one objects until Friday, I'll assume that everyone is fine
with the changes as proposed in this thread.

I'll furthermore assume that I can modify the descriptions of
categories as I see fit (I explained in a previous mail on this
topic on how those could be made to convey more exactly which
parts of wine they cover).

I just saw that there still are overlaping categories in at least
one case, but that can be fixed in another step.


Jan



From jan.wine at zerebecki.de  Tue Jan  1 10:19:20 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Tue, 1 Jan 2008 17:19:20 +0100
Subject: Where are the bugzilla admins?
In-Reply-To: <477671A5.6040403@kievinfo.com>
References: <477671A5.6040403@kievinfo.com>
Message-ID: <20080101161920.GE3426@crissy.swd.zerebecki.de>

On Sat, Dec 29, 2007 at 09:11:17AM -0700, Vitaliy Margolen wrote:
> Where did our buzilla admins go? 3 weeks and nothing is changing!

I'd assume you mean the category changes to bugzilla (I just sent
a mail regarding that), otherwise please help me out on what I
missed.


Jan



From hverbeet at gmail.com  Tue Jan  1 10:38:07 2008
From: hverbeet at gmail.com (H. Verbeet)
Date: Tue, 1 Jan 2008 17:38:07 +0100
Subject: [5/6] ddraw: fix palette copying when destination palette is NULL
In-Reply-To: <200801011442.41388.stefan@codeweavers.com>
References: <47784E12.1080800@inbox.lv>
	<200712311351.13994.stefan@codeweavers.com>
	<477A13C6.4030105@inbox.lv>
	<200801011442.41388.stefan@codeweavers.com>
Message-ID: <d658b69e0801010838u66d4ee18hb06a31865408939@mail.gmail.com>

On 01/01/2008, Stefan D?singer <stefan at codeweavers.com> wrote:
> It is likely that Alexandre was waiting for an OK from me or Henri. He is the
> only committer, but when someone he doesn't know sends a patch he usually
> waits for the OK from someone who is maintaining the part of Wine. I think I
> forgot to send an OK mail to the test when you submitted it.
I didn't see anything obviously wrong with the test, except perhaps
checking hr against D3D_OK, but ddraw is more your area.

> * You don't have to set the render states unless you need a different setting
> than the previous tests leave behind
>
I don't think it's a bad thing to do though... it's pretty useful the
be able to comment out the other tests without breaking the current
test, especially when writing new tests. In general, we might want to
consider using a new device for each test to prevent states from one
test interfering with those from another test.


From alexd4 at inbox.lv  Tue Jan  1 20:33:51 2008
From: alexd4 at inbox.lv (Alexander Dorofeyev)
Date: Tue, 01 Jan 2008 18:33:51 -0800
Subject: [5/6] ddraw: fix palette copying when destination palette is NULL
In-Reply-To: <200801011647.57354.stefan@codeweavers.com>
References: <47784E12.1080800@inbox.lv>
	<200801011442.41388.stefan@codeweavers.com>
	<477AE5DD.4080702@inbox.lv>
	<200801011647.57354.stefan@codeweavers.com>
Message-ID: <477AF80F.4040506@inbox.lv>

Stefan D?singer wrote:
> You can also try to QueryInterface old IDirect3DDevice* versions from 
> IDirect3DDevice7, but I think this doesn't work as the COM theory says on 
> Windows. I haven't yet tested the restrictions and implemented them because I 
> haven't seen a game yet that depends on them.

Yes, I think it doesn't run on Windows, IIRC that was the first thing I tried.
At least this is so for XP, which itself is partly broken in DX6 and less
support though, from what I see (e.g. AVP1 3D engine is broken).

Just one more question - I'm looking into this hr==D3D_OK vs SUCCEEDED(hr) thing
and there appears to be some problems with consistency. In ddraw/tests/visual.c
I see both hr==D3D_OK and SUCCEEDED, in one place even result of BeginScene are
checked as hr==D3D_OK, so it's somewhat confusing. How do I tell, generally,
what to use for ok(), if() etc, hr==D3D_OK or SUCCEDED? Do all checks ultimately
need to be turned into SUCCEEDED or it's just that some of the calls have been
found to return undocumented values other than D3D_OK, but are no errors?




From austinenglish at gmail.com  Tue Jan  1 12:54:54 2008
From: austinenglish at gmail.com (Austin English)
Date: Tue, 1 Jan 2008 12:54:54 -0600
Subject: bugs audit volunteers required
In-Reply-To: <20080101153334.GC3426@crissy.swd.zerebecki.de>
References: <36bf289b0712311505n2b413183t9b5e2b3b6da7cdb5@mail.gmail.com>
	<477984ED.7050408@codeweavers.com> <47798C5E.5070008@sprintpcs.com>
	<b6bb06270712311649g2e382983t11e2684d503aca60@mail.gmail.com>
	<20080101153334.GC3426@crissy.swd.zerebecki.de>
Message-ID: <b6bb06270801011054p4048eefdve6d7fb2bc5f6632@mail.gmail.com>

On Jan 1, 2008 9:33 AM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> We could add flags for "needs more information" and perhaps one
> for "reproducible bug report with enough initial information".
>
> (A flag is something that can be requested to be set and can then
> be granted or denied by someone who was given the required rights.)

That could work as well.

> I think a small and easy explanation on the new-bug form, that
> refers one to a wiki page for the full guide is a good thing.
>
> (I guess it's probably hard to filter bad bug reports
> automatically and even harder to not inconvenience our good bug
> reporters at the same time.)

Maybe on the page for registering a bugzilla and/or on first login?


-Austin


From jjmckenzie51 at sprintpcs.com  Tue Jan  1 14:31:42 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Tue, 01 Jan 2008 13:31:42 -0700
Subject: bugs audit volunteers required
In-Reply-To: <20080101153334.GC3426@crissy.swd.zerebecki.de>
References: <36bf289b0712311505n2b413183t9b5e2b3b6da7cdb5@mail.gmail.com>
	<477984ED.7050408@codeweavers.com> <47798C5E.5070008@sprintpcs.com>
	<b6bb06270712311649g2e382983t11e2684d503aca60@mail.gmail.com>
	<20080101153334.GC3426@crissy.swd.zerebecki.de>
Message-ID: <477AA32E.6010807@sprintpcs.com>

Jan Zerebecki wrote:
> On Mon, Dec 31, 2007 at 06:49:56PM -0600, Austin English wrote:
>   
>> On Dec 31, 2007 6:42 PM, James McKenzie <jjmckenzie51 at sprintpcs.com> wrote:
>>     
>>> I agree.  If you cannot find the application or a demo version to work
>>> with, how can you fix the
>>> bug.  Logs and other helpers go a long way.  Maybe an intro page as to
>>> what is needed and how
>>> to get it.  This will become more and more critical as the project
>>> approaches 'release' status (1.0).
>>> Also, marking bugs as having insufficient information to fix advises the
>>> reporter that the project
>>> needs more information to help or troubleshoot.
>>>       
>> Maybe add a resolution of NEEDMOREINFO?
>>     
>
> We could add flags for "needs more information" and perhaps one
> for "reproducible bug report with enough initial information".
>
> (A flag is something that can be requested to be set and can then
> be granted or denied by someone who was given the required rights.)
>
>   
A resolution is much better.  Using a flag of needsmoreinfo usually does
not get answered.
>>> Clicking on the "NEW BUG" link should take a person to
>>> a web page with reporting
>>> criteria.  At this point, the reporter will read through a page of what
>>> should be done to report a
>>> bug.  After clicking a 'I read and understand the reporting
>>> requirements', then the reporter will be
>>> able to submit a bug.  After a few cycles of this, regular reporters
>>> will not be subject to this page and
>>> will be taken instead to the regular bug reporting page.  For the
>>> occasional reporter, this is a good way
>>> to handle bug reports, IMHO.
>>>       
>
> Our bugzilla is in git, patches are welcome.
>
> I think a small and easy explanation on the new-bug form, that
> refers one to a wiki page for the full guide is a good thing.
>
>   
I like the recommendation that a page be read before submitting bugs. 
There are a growing number of duplicates (I'm responsible for at least
one of them and I've been at the bug business for a long time) and
incomplete reports points to the need for a readme type of page.  The
regulars should not be subject to reading the page (this could be a
cookie function that just counts the number of bugs submitted and should
be a very simple cookie as far as name and function.)
> (I guess it's probably hard to filter bad bug reports
> automatically and even harder to not inconvenience our good bug
> reporters at the same time.)
>
>   
+1 to this.  Automatic filtering can lead to some necessary reports
being skipped or deleted when additional, useful information will make
them usable.

Thank you for taking time to read through my suggestions as well.

One last comment, the OpenOffice.org project (I think) stopped the
ability for anyone without the canconfirm permission to reopen a bug.  I
might want to look at this in the future if time allows.

James



From hverbeet at gmail.com  Tue Jan  1 14:53:02 2008
From: hverbeet at gmail.com (H. Verbeet)
Date: Tue, 1 Jan 2008 21:53:02 +0100
Subject: [5/6] ddraw: fix palette copying when destination palette is NULL
In-Reply-To: <477AF80F.4040506@inbox.lv>
References: <47784E12.1080800@inbox.lv>
	<200801011442.41388.stefan@codeweavers.com>
	<477AE5DD.4080702@inbox.lv>
	<200801011647.57354.stefan@codeweavers.com>
	<477AF80F.4040506@inbox.lv>
Message-ID: <d658b69e0801011253u542d5768t15942add91a3ad24@mail.gmail.com>

On 02/01/2008, Alexander Dorofeyev <alexd4 at inbox.lv> wrote:
> Stefan D?singer wrote:
> > You can also try to QueryInterface old IDirect3DDevice* versions from
> > IDirect3DDevice7, but I think this doesn't work as the COM theory says on
> > Windows. I haven't yet tested the restrictions and implemented them because I
> > haven't seen a game yet that depends on them.
>
> Yes, I think it doesn't run on Windows, IIRC that was the first thing I tried.
> At least this is so for XP, which itself is partly broken in DX6 and less
> support though, from what I see (e.g. AVP1 3D engine is broken).
>
> Just one more question - I'm looking into this hr==D3D_OK vs SUCCEEDED(hr) thing
> and there appears to be some problems with consistency. In ddraw/tests/visual.c
> I see both hr==D3D_OK and SUCCEEDED, in one place even result of BeginScene are
> checked as hr==D3D_OK, so it's somewhat confusing. How do I tell, generally,
> what to use for ok(), if() etc, hr==D3D_OK or SUCCEDED? Do all checks ultimately
> need to be turned into SUCCEEDED or it's just that some of the calls have been
> found to return undocumented values other than D3D_OK, but are no errors?
>
Unless you actually want to test the exact return value, you should
use SUCCEEDED / FAILED. Some of the tests do get this wrong,
unfortunately.


From hans at it.vu.nl  Tue Jan  1 14:56:37 2008
From: hans at it.vu.nl (Hans Leidekker)
Date: Tue, 1 Jan 2008 21:56:37 +0100
Subject: Commit stats
In-Reply-To: <811b48bd0801011225t1b7dfa91x5e9cb20fa2d9b4e7@mail.gmail.com>
References: <200801011437.02229.hans@it.vu.nl>
	<811b48bd0801011225t1b7dfa91x5e9cb20fa2d9b4e7@mail.gmail.com>
Message-ID: <200801012156.37196.hans@it.vu.nl>

On Tuesday 01 January 2008 21:25:02 Clarence Risher wrote:

> Because I like to nitpick, does your 2007 count include any commits to
> your local tree that arent actually submitted/accepted?
> 
> On Jan 1, 2008 7:37 AM, Hans Leidekker <hans at it.vu.nl> wrote:
> >
> > $ for y in {2002..2007}; do \
> >   n=$( git log | grep ^Date: | grep $y | wc -l ); \
> >   echo "Number of commits in $y: $n"; \
> >   done
> > Number of commits in 2002: 3094
> > Number of commits in 2003: 3283
> > Number of commits in 2004: 3851
> > Number of commits in 2005: 6006
> > Number of commits in 2006: 8431
> > Number of commits in 2007: 9526

Oops, yes there were some local commits in that count, the correct
upstream count for 2007 is 9513.

 -Hans


From stefan at codeweavers.com  Tue Jan  1 16:42:21 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Tue, 1 Jan 2008 23:42:21 +0100
Subject: [5/6] ddraw: fix palette copying when destination palette is NULL
In-Reply-To: <d658b69e0801011253u542d5768t15942add91a3ad24@mail.gmail.com>
References: <47784E12.1080800@inbox.lv> <477AF80F.4040506@inbox.lv>
	<d658b69e0801011253u542d5768t15942add91a3ad24@mail.gmail.com>
Message-ID: <200801012342.21204.stefan@codeweavers.com>

Am Dienstag, 1. Januar 2008 21:53:02 schrieb H. Verbeet:
> Unless you actually want to test the exact return value, you should
> use SUCCEEDED / FAILED. Some of the tests do get this wrong,
> unfortunately.
I usually test against the exact return value(D3D_OK) in the ok() statements, 
and SUCCEEDED / FAILED when deciding the codepath the test takes(e.g. 
if(SUCCEEDED(BeginScene())) )


From guillaume.benny at sympatico.ca  Tue Jan  1 19:43:53 2008
From: guillaume.benny at sympatico.ca (Guillaume B.)
Date: Tue, 01 Jan 2008 20:43:53 -0500
Subject: IDirectSound and Unknown IID
References: <fl5tv2$kmn$1@ger.gmane.org>
	<36bf289b0712310125iece5425p8b68a6ce6e1bbc5a@mail.gmail.com>
	<200712311344.53047.stefan@codeweavers.com>
	<flas4u$81o$1@ger.gmane.org>
	<3f4fd2640712311216m69788544q1793962914e6ca6a@mail.gmail.com>
Message-ID: <fleq8p$6fp$1@ger.gmane.org>

Reece Dunn wrote:

> On 31/12/2007, Guillaume B. <guillaume.benny at sympatico.ca> wrote:
>> Stefan D?singer wrote:
>>
>> > Am Montag, 31. Dezember 2007 10:25:15 schrieb Vijay Kiran Kamuju:
>> >> >  So the problem is that the interace
>> >> > {2a8af120-e9de-4132-aaa5-4bdda5f325b8} is not supported by the
>> >> > {current
>> >> > Wine implementation. I've searched around but I couldn't find
>> >> > anything about this IID. If I knew what interface it was, maybe I
>> >> > could implement a stub and it might make the sound work.
> 
> I can't see it in the Vista and XP CLSID section of the registry.
> 
> Is it an interface that is being queried for internally by dmime or
> dswave (as you are using the native versions)? That is, MS may not be
> publicizing it (as it is not part of the DirectSound API), but are
> using it to coordinate interaction between dswave and dsound.
> 
> It would be useful to find out if it is the game that is querying for
> this interface, or if it is the native DLLs.
> 

 Hi,

 I think you are right: the interface seems to be queried from dmime,
although I can't confirm it since I can't make the debugger stop in my
function to see the backtrace... and I can't see the assembly code that
called my function.

 I've tried to use the builtin dmime but it doesn't make a sound altough it
seems to call DSound functions frequently with code executed in a timer.
It's probably because IDirectMusicPerformance8Impl_PlaySegmentEx is not
implemented. I've tried to add some code to make it work but since I don't
really know how it works, my small hack doesn't play a sound!

 So now I'm stuck. Thanks anyway for your help.

 Guillaume





From dmitry at codeweavers.com  Tue Jan  1 22:14:00 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Wed, 2 Jan 2008 12:14:00 +0800
Subject: bugs audit volunteers required
References: <36bf289b0712311505n2b413183t9b5e2b3b6da7cdb5@mail.gmail.com><477984ED.7050408@codeweavers.com>
	<47798C5E.5070008@sprintpcs.com>
	<b6bb06270712311649g2e382983t11e2684d503aca60@mail.gmail.com>
Message-ID: <003e01c84cf5$e958f980$a600fea9@DMITRY>

"Austin English" <austinenglish at gmail.com> wrote:

>> Also, marking bugs as having insufficient information to fix advises the
>> reporter that the project
>> needs more information to help or troubleshoot.
> 
> Maybe add a resolution of NEEDMOREINFO?

There is no need to add one more reason for a bug resolution IMHO,
INVALID with appropriate comment does the job.

-- 
Dmitry.


From gerald at pfeifer.com  Tue Jan  1 11:03:05 2008
From: gerald at pfeifer.com (Gerald Pfeifer)
Date: Tue, 1 Jan 2008 18:03:05 +0100 (CET)
Subject: dlls/wintab32/context.c -- simpflication and HEADS UP!
In-Reply-To: <Pine.LNX.4.64.0712010053550.19271@acrux.dbai.tuwien.ac.at>
References: <Pine.LNX.4.64.0712010053550.19271@acrux.dbai.tuwien.ac.at>
Message-ID: <Pine.LNX.4.64.0801011759560.25278@acrux.dbai.tuwien.ac.at>

On Sat, 1 Dec 2007, Gerald Pfeifer wrote:
> This change of mine is obvious since InExt and OutExt are DWORD, thus
> unsigned, and thus always greater or equal zero so my patch should be
> fine in any case.
> 
> However, looking at the else-part of the if-statement, I have some
> doubts this is working as designed, and in general the abs() invocations 
> are bogus.
> 
> Any expert who could help with a more extensive patch?

Both the two <0 checks and the abs() invocations are needless since
DWORDS are positive by definition.

(I did not get _any_ response for my first mail a month ago and I still 
believe the else-part looks bogus, but can we get at least this first 
cleanup in?)

Gerald

ChangeLog:
Simplify condition in ScaleForContext().

Index: dlls/wintab32/context.c
===================================================================
RCS file: /home/wine/wine/dlls/wintab32/context.c,v
retrieving revision 1.26
diff -u -3 -p -r1.26 context.c
--- dlls/wintab32/context.c	31 Dec 2007 18:34:43 -0000	1.26
+++ dlls/wintab32/context.c	1 Jan 2008 16:59:56 -0000
@@ -160,10 +160,10 @@ int TABLET_PostTabletMessage(LPOPENCONTE
 static inline DWORD ScaleForContext(DWORD In, DWORD InOrg, DWORD InExt, DWORD
                                     OutOrg, DWORD OutExt)
 {
-    if (((InExt > 0 )&&(OutExt > 0)) || ((InExt<0) && (OutExt < 0)))
-        return ((In - InOrg) * abs(OutExt) / abs(InExt)) + OutOrg;
+    if ((InExt > 0) && (OutExt > 0))
+        return ( (In - InOrg) * OutExt / InExt ) + OutOrg;
     else
-        return ((abs(InExt) - (In - InOrg))*abs(OutExt) / abs(InExt)) + OutOrg;
+        return ( (InExt - (In - InOrg)) * OutExt / InExt ) + OutOrg;
 }
 
 LPOPENCONTEXT AddPacketToContextQueue(LPWTPACKET packet, HWND hwnd)


From msclrhd at googlemail.com  Tue Jan  1 15:58:06 2008
From: msclrhd at googlemail.com (Reece Dunn)
Date: Tue, 1 Jan 2008 21:58:06 +0000
Subject: Is there any reason why these patches were not applied to the git
	repository?
Message-ID: <3f4fd2640801011358j46a505cj16ca5b06effad185@mail.gmail.com>

I sent these patches to wine-patches, but they have not been applied.

gdiplus: added the ProfileNotFound status
code.	[0001-gdiplus-added-the-ProfileNotFound-status-code.patch]
	30/12/2007

?include: added the new Vista theme schema
headers.	[0001-include-added-the-new-Vista-theme-schema-headers.patch]
	30/12/2007

include: added the BUTTON parts and
states.	[0001-include-added-the-BUTTON-parts-and-states.patch]
	30/12/2007

?include: added the AEROWIZARD parts and
states.	[0001-include-added-the-AEROWIZARD-parts-and-states.patch]
	30/12/2007

include: added the COMBOBOX parts and
states.	[0001-include-added-the-COMBOBOX-parts-and-states.patch]
	30/12/2007

- Reece

From taril_laszlo at yahoo.co.uk  Tue Jan  1 17:04:30 2008
From: taril_laszlo at yahoo.co.uk (=?iso-8859-1?Q?L=E1szl=F3_Tari?=)
Date: Tue, 1 Jan 2008 23:04:30 +0000 (GMT)
Subject: Pixel Shader Problem in 0.9.52
Message-ID: <38798.82856.qm@web26106.mail.ukl.yahoo.com>

Hi,

Problem occurs when Depth Of Filed is turned on in Tomb Raider Anniversary.

I simply overwrote the 0.9.52 wined3d.dll.so file with the 0.9.44 wined3d.dll.so in /usr/lib/wine, it works, but a little bit slower.

See attachment!

Regards,

Laszlo




       Sent from Yahoo! - a smarter inbox.





      __________________________________________________________
Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080101/532c7947/attachment-0001.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DepthOfField0.9.44.jpg
Type: image/jpeg
Size: 123581 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080101/532c7947/attachment-0002.jpg 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DepthOfField0.9.52.jpg
Type: image/jpeg
Size: 123213 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080101/532c7947/attachment-0003.jpg 

From hverbeet at gmail.com  Wed Jan  2 02:21:14 2008
From: hverbeet at gmail.com (H. Verbeet)
Date: Wed, 2 Jan 2008 09:21:14 +0100
Subject: [3/5] ddraw/tests: add test for D3DRENDERSTATE_TEXTUREMAPBLEND
	state
In-Reply-To: <477B85D7.3050405@inbox.lv>
References: <477B85D7.3050405@inbox.lv>
Message-ID: <d658b69e0801020021x62c6f5dxff152289ede679aa@mail.gmail.com>

On 02/01/2008, Alexander Dorofeyev <alexd4 at inbox.lv> wrote:
> Tests of behavior introduced by patches 4/5 and 5/5.
> ---
Going by the commit message, I assume this test would currently fail?
You can't do that. You either have to send the patches that fix the
problem first, or you have to wrap the failing tests in todo_wine
blocks, and remove the todo_wine blocks in the patch that fixes the
tests they wrap.


From dank at kegel.com  Wed Jan  2 03:19:35 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 2 Jan 2008 01:19:35 -0800
Subject: bugs audit volunteers require
Message-ID: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>

>> Maybe add a resolution of NEEDMOREINFO?
>
>There is no need to add one more reason for a bug resolution IMHO,
>INVALID with appropriate comment does the job.

INVALID seems harsh, it may scare away novice reporters.

Do we want to make it easy to search for bugs stuck
in a needmoreinfo kind of state?  If so, a keyword or state
might be handy.

Does anybody remember good old gnu gnats, the old bug
tracking system?  It was great this way; it had an explicit
notion of whose ball the court was in.  I miss that.
- Dan
-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From kai.blin at gmail.com  Wed Jan  2 03:22:42 2008
From: kai.blin at gmail.com (Kai Blin)
Date: Wed, 2 Jan 2008 10:22:42 +0100
Subject: bugs audit volunteers required
In-Reply-To: <003e01c84cf5$e958f980$a600fea9@DMITRY>
References: <36bf289b0712311505n2b413183t9b5e2b3b6da7cdb5@mail.gmail.com>
	<b6bb06270712311649g2e382983t11e2684d503aca60@mail.gmail.com>
	<003e01c84cf5$e958f980$a600fea9@DMITRY>
Message-ID: <200801021022.55325.kai.blin@gmail.com>

On Wednesday 02 January 2008 05:14:00 Dmitry Timoshkov wrote:
> "Austin English" <austinenglish at gmail.com> wrote:
> >> Also, marking bugs as having insufficient information to fix advises the
> >> reporter that the project
> >> needs more information to help or troubleshoot.
> >
> > Maybe add a resolution of NEEDMOREINFO?
>
> There is no need to add one more reason for a bug resolution IMHO,
> INVALID with appropriate comment does the job.

As far as I've seen NEEDMOREINFO used in bugzilla, it is on the same level as 
NEW, ACCEPTED and FIXED. So new bugs come in as new, and someone looks at 
them and accepts the bug if the information is complete enough to work on the 
bug, and sets it to FIXED INVALID or NEEDMOREINFO if it's invalid or doesn't 
have enough information to reproduce it.

So far I've always left a bug on NEW until I could reproduce it, NEEDMOREINFO 
would be more clear, but I don't feel very strong about this either way.

Cheers,
Kai

-- 
Kai Blin
WorldForge developer  http://www.worldforge.org/
Wine developer        http://wiki.winehq.org/KaiBlin
Samba team member     http://www.samba.org/samba/team/
--
Will code for cotton.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080102/2399142f/attachment.pgp 

From po at danielnylander.se  Wed Jan  2 04:09:47 2008
From: po at danielnylander.se (Daniel Nylander)
Date: Wed, 02 Jan 2008 11:09:47 +0100
Subject: Norwegian language files using wrong locale
Message-ID: <1199268587.18345.16.camel@fatbastard>


I noticed that the Norwegian (bokm?l) locale files are using the locale
"no". Correct locale for Norwegian Bokm?l is "nb" (Nynorsk is "nn").

-- 
Daniel Nylander (CISSP, GCUX, GCFA)
Stockholm, Sweden
http://www.DanielNylander.se





From dmitry at codeweavers.com  Wed Jan  2 04:29:38 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Wed, 2 Jan 2008 18:29:38 +0800
Subject: Norwegian language files using wrong locale
References: <1199268587.18345.16.camel@fatbastard>
Message-ID: <036f01c84d2a$62c741d0$a600fea9@DMITRY>

"Daniel Nylander" <po at danielnylander.se> wrote:

> I noticed that the Norwegian (bokm?l) locale files are using the locale
> "no". Correct locale for Norwegian Bokm?l is "nb" (Nynorsk is "nn").

I don't see a lower cased "no" in dlls/kernel32/nls/nor.nls. Where did you
notice that? Wine has the same data as for instance my XP SP2 reports:
LOCALE_SISO3166CTRYNAME "NO"
LOCALE_SISO639LANGNAME "nb"

-- 
Dmitry. 



From po at danielnylander.se  Wed Jan  2 05:03:22 2008
From: po at danielnylander.se (Daniel Nylander)
Date: Wed, 02 Jan 2008 12:03:22 +0100
Subject: Norwegian language files using wrong locale
In-Reply-To: <036f01c84d2a$62c741d0$a600fea9@DMITRY>
References: <1199268587.18345.16.camel@fatbastard>
	<036f01c84d2a$62c741d0$a600fea9@DMITRY>
Message-ID: <1199271802.18345.55.camel@fatbastard>

On ons, 2008-01-02 at 18:29 +0800, Dmitry Timoshkov wrote:
> "Daniel Nylander" <po at danielnylander.se> wrote:
> 
> > I noticed that the Norwegian (bokm?l) locale files are using the locale
> > "no". Correct locale for Norwegian Bokm?l is "nb" (Nynorsk is "nn").
> 
> I don't see a lower cased "no" in dlls/kernel32/nls/nor.nls. Where did you
> notice that? Wine has the same data as for instance my XP SP2 reports:
> LOCALE_SISO3166CTRYNAME "NO"
> LOCALE_SISO639LANGNAME "nb"

I did see them in the git tree. The files include "LANGUAGE
LANG_NORWEGIAN, SUBLANG_NORWEGIAN_BOKMAL" (which is correct) but what
happens when Norwegian Nynorsk (no_NN) is added? The filenames should be
changed according to ISO 639-1. But I could be wrong.

Examples:
./programs/wordpad/No.rc
./programs/winemine/No.rc
./programs/winecfg/No.rc
./programs/winhelp/No.rc


-- 
Daniel Nylander (CISSP, GCUX, GCFA)
Stockholm, Sweden
http://www.DanielNylander.se





From r.kalbermatter at hccnet.nl  Wed Jan  2 05:06:57 2008
From: r.kalbermatter at hccnet.nl (Rolf Kalbermatter)
Date: Wed, 2 Jan 2008 12:06:57 +0100
Subject: dlls/wintab32/context.c -- simpflication and HEADS UP!
In-Reply-To: <Pine.LNX.4.64.0801011759560.25278@acrux.dbai.tuwien.ac.at>
References: <Pine.LNX.4.64.0712010053550.19271@acrux.dbai.tuwien.ac.at>
	<Pine.LNX.4.64.0801011759560.25278@acrux.dbai.tuwien.ac.at>
Message-ID: <006401c84d2f$978756d0$4001a8c0@NATERS>

Gerald Pfeifer wrote on Tuesday, January 01, 2008 6:03 PM:

This code obviously was written with signed operands in mind. I wonder if
they could get signed somewhere and this function simply uses the wrong
datatype.

> (I did not get _any_ response for my first mail a month ago 
> and I still believe the else-part looks bogus, but can we get 
> at least this first cleanup in?)

In the else statement InExt could be 0 (either that or OutExt would be 0)
which would cause a division by 0 exception. Definitely doesn't sound right
to me. But I have no idea what that code is supposed to do.

> @@ -160,10 +160,10 @@ int TABLET_PostTabletMessage(LPOPENCONTE
>  static inline DWORD ScaleForContext(DWORD In, DWORD InOrg, 
> DWORD InExt, DWORD
>                                      OutOrg, DWORD OutExt)  {
> -    if (((InExt > 0 )&&(OutExt > 0)) || ((InExt<0) && (OutExt < 0)))
> -        return ((In - InOrg) * abs(OutExt) / abs(InExt)) + OutOrg;
> +    if ((InExt > 0) && (OutExt > 0))
> +        return ( (In - InOrg) * OutExt / InExt ) + OutOrg;
>      else
> -        return ((abs(InExt) - (In - InOrg))*abs(OutExt) / 
> abs(InExt)) + OutOrg;
> +        return ( (InExt - (In - InOrg)) * OutExt / InExt ) + OutOrg;
>  }
>  
>  LPOPENCONTEXT AddPacketToContextQueue(LPWTPACKET packet, HWND hwnd)

Rolf Kalbermatter



From stefan at codeweavers.com  Wed Jan  2 05:39:45 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Wed, 2 Jan 2008 12:39:45 +0100
Subject: [3/5] ddraw/tests: add test for D3DRENDERSTATE_TEXTUREMAPBLEND
	state
In-Reply-To: <d658b69e0801020021x62c6f5dxff152289ede679aa@mail.gmail.com>
References: <477B85D7.3050405@inbox.lv>
	<d658b69e0801020021x62c6f5dxff152289ede679aa@mail.gmail.com>
Message-ID: <200801021239.45336.stefan@codeweavers.com>

Am Mittwoch, 2. Januar 2008 09:21:14 schrieb H. Verbeet:
> On 02/01/2008, Alexander Dorofeyev <alexd4 at inbox.lv> wrote:
> > Tests of behavior introduced by patches 4/5 and 5/5.
> > ---
>
> Going by the commit message, I assume this test would currently fail?
> You can't do that. You either have to send the patches that fix the
> problem first, or you have to wrap the failing tests in todo_wine
> blocks, and remove the todo_wine blocks in the patch that fixes the
> tests they wrap.
Appart of this issue I recommend to move the D3D1 creation into a separate 
function. Eventually more D3D1 tests will be written, and we want to 
discourage copypasting that huge block of code.


From stefan at codeweavers.com  Wed Jan  2 05:44:24 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Wed, 2 Jan 2008 12:44:24 +0100
Subject: [5/5] wined3d: change colorkey fixup for stage 0 alphaop /
	alphaarg
In-Reply-To: <477B85E1.40704@inbox.lv>
References: <477B85E1.40704@inbox.lv>
Message-ID: <200801021244.24329.stefan@codeweavers.com>

Am Mittwoch, 2. Januar 2008 13:38:57 schrieb Alexander Dorofeyev:
> In case of colorkey emulation for a texture, if the application wants to
> select alpha from diffuse color at stage 0, a fixup to modulate with
> texture alpha more closely matches what the application wants than fixup to
> just select alpha from texture.
I am not sure about this. From my understanding of color keying, the color 
keying should only depend on the texture, not the diffuse color. 
Unfortunately, this is mutually exclusive with always honoring the app's 
blending settings. I have two games which use color keying, Moto Racer 2 and 
Prince of Persia 3D. I'll test the patches with those two games.

The problem is that our color keying is emulated, so we'll always have to 
fiddle to get it working properly everywhere. The correct, but complex and 
incomplete fix would be a replacement shader for the fixed function pipeline 
which can implement color keying properly using 'KIL' or 'discard'. 
Unfortunately that won't fix the problem for cards without fragment shader 
support.

The other patches look good to me


From julliard at winehq.org  Wed Jan  2 06:28:49 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 02 Jan 2008 13:28:49 +0100
Subject: [2/5][try 2] ddraw/tests: add test for rendering vertices with
	zero rhw
In-Reply-To: <477B85D3.10704@inbox.lv> (Alexander Dorofeyev's message of "Wed, 
	02 Jan 2008 04:38:43 -0800")
References: <477B85D3.10704@inbox.lv>
Message-ID: <87zlvoe7i6.fsf@wine.dyndns.org>

Alexander Dorofeyev <alexd4 at inbox.lv> writes:

> Fixed some issues pointed out by Stefan D?singer.
> ---
>     dlls/ddraw/tests/visual.c |   41 +++++++++++++++++++++++++++++++++++++++++
>     1 files changed, 41 insertions(+), 0 deletions(-)

This is failing occasionally here:

../../../tools/runtest -q -P wine -M ddraw.dll -T ../../.. -p ddraw_test.exe.so visual.c && touch visual.ok
visual.c:797: Test failed: Got color 00000000, expected 00ffffff
make: *** [visual.ok] Error 1

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Wed Jan  2 06:30:49 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 02 Jan 2008 13:30:49 +0100
Subject: Norwegian language files using wrong locale
In-Reply-To: <1199271802.18345.55.camel@fatbastard> (Daniel Nylander's message
	of "Wed, 02 Jan 2008 12:03:22 +0100")
References: <1199268587.18345.16.camel@fatbastard>
	<036f01c84d2a$62c741d0$a600fea9@DMITRY>
	<1199271802.18345.55.camel@fatbastard>
Message-ID: <87ve6ce7eu.fsf@wine.dyndns.org>

Daniel Nylander <po at danielnylander.se> writes:

> I did see them in the git tree. The files include "LANGUAGE
> LANG_NORWEGIAN, SUBLANG_NORWEGIAN_BOKMAL" (which is correct) but what
> happens when Norwegian Nynorsk (no_NN) is added? The filenames should be
> changed according to ISO 639-1. But I could be wrong.

There's no reason to use a separate file for every variant. Both
Norwegian locales should go into the same No.rc file.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Wed Jan  2 06:31:55 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 02 Jan 2008 13:31:55 +0100
Subject: include: added the new Vista theme schema headers.
In-Reply-To: <3f4fd2640712300246k71a7a58fk4cd5fc9cb5a35fa@mail.gmail.com>
	(Reece Dunn's message of "Sun, 30 Dec 2007 10:46:03 +0000")
References: <3f4fd2640712300246k71a7a58fk4cd5fc9cb5a35fa@mail.gmail.com>
Message-ID: <87r6h0e7d0.fsf@wine.dyndns.org>

"Reece Dunn" <msclrhd at googlemail.com> writes:

> diff --git a/include/tmschema.h b/include/tmschema.h
> index 910de19..3a3e3e3 100644
> --- a/include/tmschema.h
> +++ b/include/tmschema.h
> @@ -20,6 +20,10 @@
>  #ifndef __WINE_TMSCHEMA_H
>  #define __WINE_TMSCHEMA_H
>  
> +#if defined(__WINE_VSSYM32_H)
> +#  error tmschema.h (XP) cannot be included along side vssym32.h (Vista).
> +#endif

That's not the way it's done in the SDK.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Wed Jan  2 06:42:56 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 02 Jan 2008 13:42:56 +0100
Subject: #4 msvcrt: Correct search strategy for the wide exec/spawn
	functions.
In-Reply-To: <200801011625.01038.hans@it.vu.nl> (Hans Leidekker's message of
	"Tue, 1 Jan 2008 16:25:00 +0100")
References: <200801011625.01038.hans@it.vu.nl>
Message-ID: <87myroe6un.fsf@wine.dyndns.org>

Hans Leidekker <hans at it.vu.nl> writes:

> Changelog
>  Correct search strategy for the wide exec/spawn functions.

I don't think we want to duplicate all that code. The Ascii functions
should convert their arguments and call the Unicode ones.

-- 
Alexandre Julliard
julliard at winehq.org


From stefan at codeweavers.com  Wed Jan  2 08:14:11 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Wed, 2 Jan 2008 15:14:11 +0100
Subject: Pixel Shader Problem in 0.9.52
In-Reply-To: <38798.82856.qm@web26106.mail.ukl.yahoo.com>
References: <38798.82856.qm@web26106.mail.ukl.yahoo.com>
Message-ID: <200801021514.11473.stefan@codeweavers.com>

Am Mittwoch, 2. Januar 2008 00:04:30 schrieb L?szl? Tari:
> Hi,
>
> Problem occurs when Depth Of Filed is turned on in Tomb Raider Anniversary.
>
> I simply overwrote the 0.9.52 wined3d.dll.so file with the 0.9.44
> wined3d.dll.so in /usr/lib/wine, it works, but a little bit slower.
This doesn't look like a pixel shader problem, more like a blitting or 
offscreen rendering problem. Can you run a regression test and file a bug?



From stefandoesinger at gmx.at  Wed Jan  2 09:53:18 2008
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Wed, 2 Jan 2008 16:53:18 +0100
Subject: [5/5] wined3d: change colorkey fixup for stage 0 alphaop /
	alphaarg
In-Reply-To: <200801021244.24329.stefan@codeweavers.com>
References: <477B85E1.40704@inbox.lv>
	<200801021244.24329.stefan@codeweavers.com>
Message-ID: <200801021653.18803.stefandoesinger@gmx.at>

Am Mittwoch, 2. Januar 2008 12:44:24 schrieb Stefan D?singer:
> Am Mittwoch, 2. Januar 2008 13:38:57 schrieb Alexander Dorofeyev:
> > In case of colorkey emulation for a texture, if the application wants to
> > select alpha from diffuse color at stage 0, a fixup to modulate with
> > texture alpha more closely matches what the application wants than fixup
> > to just select alpha from texture.
I tested pop3d and Moto Racer 2. Pop3d still works as expected, but moto racer 
2 has some missing geometry. It draws some opaque parts of the scene with 
color keying on, and a diffuse alpha of 0.0, so the alpha test kicks in and 
the geometry is missing.

The moto racer 2 demo is available online, e.g. 
http://downloads.gamezone.com/demos/d1576.htm. Note that the installer 
refuses to run, unless you set your X server's depth to 16. I also caused a 
regression in that game when I fixed some bugs with native d3drm.dll, so you 
need the attached hack.
(I didn't have time and energy to write a test to test that, but I think that 
BRANCHFORWARD tokens with offset 0 are special, and that the existing 
executebuffer test in d3d.c just points out the special case, but the common 
case is implemented incorrectly)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: moto2-hack.diff
Type: text/x-diff
Size: 655 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080102/230654e2/attachment.diff 

From ovek at arcticnet.no  Wed Jan  2 12:29:14 2008
From: ovek at arcticnet.no (Ove Kaaven)
Date: Wed, 02 Jan 2008 19:29:14 +0100
Subject: Norwegian language files using wrong locale
In-Reply-To: <1199271802.18345.55.camel@fatbastard>
References: <1199268587.18345.16.camel@fatbastard>	<036f01c84d2a$62c741d0$a600fea9@DMITRY>
	<1199271802.18345.55.camel@fatbastard>
Message-ID: <477BD7FA.1090605@arcticnet.no>

Daniel Nylander skrev:
> On ons, 2008-01-02 at 18:29 +0800, Dmitry Timoshkov wrote:
>> "Daniel Nylander" <po at danielnylander.se> wrote:
>>
>>> I noticed that the Norwegian (bokm?l) locale files are using the locale
>>> "no". Correct locale for Norwegian Bokm?l is "nb" (Nynorsk is "nn").
>> I don't see a lower cased "no" in dlls/kernel32/nls/nor.nls. Where did you
>> notice that? Wine has the same data as for instance my XP SP2 reports:
>> LOCALE_SISO3166CTRYNAME "NO"
>> LOCALE_SISO639LANGNAME "nb"
> 
> I did see them in the git tree. The files include "LANGUAGE
> LANG_NORWEGIAN, SUBLANG_NORWEGIAN_BOKMAL" (which is correct) but what
> happens when Norwegian Nynorsk (no_NN) is added?

You've got it reversed. The proper locale setting is nn_NO.

The Nynorsk is in non.nls.




From kgbricola at web.de  Wed Jan  2 12:57:21 2008
From: kgbricola at web.de (=?windows-1256?Q?Rico_Sch=FCller?=)
Date: Wed, 02 Jan 2008 19:57:21 +0100
Subject: Is there any reason why these patches were not applied to the
	git	repository?
In-Reply-To: <3f4fd2640801011358j46a505cj16ca5b06effad185@mail.gmail.com>
References: <3f4fd2640801011358j46a505cj16ca5b06effad185@mail.gmail.com>
Message-ID: <477BDE91.3070101@web.de>

Reece Dunn wrote:
> I sent these patches to wine-patches, but they have not been applied.
> 
> gdiplus: added the ProfileNotFound status
> code.	[0001-gdiplus-added-the-ProfileNotFound-status-code.patch]
> 	30/12/2007
> 
> ?include: added the new Vista theme schema
> headers.	[0001-include-added-the-new-Vista-theme-schema-headers.patch]
> 	30/12/2007
> 
> include: added the BUTTON parts and
> states.	[0001-include-added-the-BUTTON-parts-and-states.patch]
> 	30/12/2007
> 
> ?include: added the AEROWIZARD parts and
> states.	[0001-include-added-the-AEROWIZARD-parts-and-states.patch]
> 	30/12/2007
> 
> include: added the COMBOBOX parts and
> states.	[0001-include-added-the-COMBOBOX-parts-and-states.patch]
> 	30/12/2007
> 
> - Reece
> 

My patches from the 30/12/2007 haven't been applied, too.

cabinet: Fix memory leak (found by Smatch)
mshtml: Fix memory leak (found by Smatch)
msi: Fix memory leak (found by Smatch)

What's the reason?

Cheers
Rico


From alexd4 at inbox.lv  Wed Jan  2 23:20:26 2008
From: alexd4 at inbox.lv (Alexander Dorofeyev)
Date: Wed, 02 Jan 2008 21:20:26 -0800
Subject: [5/5] wined3d: change colorkey fixup for stage 0 alphaop
	/	alphaarg
In-Reply-To: <200801021653.18803.stefandoesinger@gmx.at>
References: <477B85E1.40704@inbox.lv>	<200801021244.24329.stefan@codeweavers.com>
	<200801021653.18803.stefandoesinger@gmx.at>
Message-ID: <477C709A.1020501@inbox.lv>

Stefan D?singer wrote:
> Am Mittwoch, 2. Januar 2008 12:44:24 schrieb Stefan D?singer:
>> Am Mittwoch, 2. Januar 2008 13:38:57 schrieb Alexander Dorofeyev:
>>> In case of colorkey emulation for a texture, if the application wants to
>>> select alpha from diffuse color at stage 0, a fixup to modulate with
>>> texture alpha more closely matches what the application wants than fixup
>>> to just select alpha from texture.
> I tested pop3d and Moto Racer 2. Pop3d still works as expected, but moto racer 
> 2 has some missing geometry. It draws some opaque parts of the scene with 
> color keying on, and a diffuse alpha of 0.0, so the alpha test kicks in and 
> the geometry is missing.
Oh now I see this case I haven't thought about. For some reason, or maybe no
reason at all, Moto racer sets alphaop to selectarg1 and alphaarg1 to current
(diffuse)! That looks kind of strange (if it then gives vertices with diffuse
alpha = 0), but maybe it's just "optimizing" by setting states it will need
later. And it expects it to work despite diffuse alpha is 0 because it disables
alpha blending and alpha test. In wine though the latter state is overriden by
colorkey emulation so the result is bad. But I think this can be sorted out by
checking ALPHABLENDENABLE, because it's probably a reasonable indicator for
telling whether the app is going to give something meaningful in diffuse alpha
or not. Do you think something along the lines of attached patch can be an
acceptable solution? With it, AVP1 game works properly and it also seems to
bring back geometry in moto racer, at least as far as I can tell.


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: colorkey_fixup2.diff.txt
Url: http://www.winehq.org/pipermail/wine-devel/attachments/20080102/92394f5d/attachment.txt 

From julliard at winehq.org  Wed Jan  2 13:57:35 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 02 Jan 2008 20:57:35 +0100
Subject: Is there any reason why these patches were not applied to the
	git	repository?
In-Reply-To: <477BDE91.3070101@web.de> ("Rico =?utf-8?Q?Sch=C3=BCller=22's?=
	message of "Wed, 02 Jan 2008 19:57:21 +0100")
References: <3f4fd2640801011358j46a505cj16ca5b06effad185@mail.gmail.com>
	<477BDE91.3070101@web.de>
Message-ID: <87abnodmq8.fsf@wine.dyndns.org>

Rico Sch?ller <kgbricola at web.de> writes:

> My patches from the 30/12/2007 haven't been applied, too.
>
> cabinet: Fix memory leak (found by Smatch)
> mshtml: Fix memory leak (found by Smatch)
> msi: Fix memory leak (found by Smatch)
>
> What's the reason?

You sent the 3 patches in a single mail. The rule is one patch per mail.

-- 
Alexandre Julliard
julliard at winehq.org


From jgardou at yahoo.fr  Wed Jan  2 14:25:56 2008
From: jgardou at yahoo.fr (=?iso-8859-1?q?J=E9r=F4me_Gardou?=)
Date: Wed, 2 Jan 2008 21:25:56 +0100
Subject: wine gdiplus <-> mono gdiplus wrapper
Message-ID: <200801022125.56920.jgardou@yahoo.fr>

I wrote a little script in order to wrap gdiplus with the mono one;
Here are the source file and the spec file (this one made with winedump), but 
I have no idea how to compile it and/or include it in the wine source tree.

Could you tell me what you think about it ? And if it has some utility ?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdiplus.c
Type: text/x-csrc
Size: 76543 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080102/3dbf08c0/attachment-0001.c 
-------------- next part --------------
# Generated from gdiplus.dll by winedump

1 stdcall GdipAddPathArc( ptr long long long long long long ) wine_GdipAddPathArc
2 stdcall GdipAddPathArcI( ptr long long long long long long ) wine_GdipAddPathArcI
3 stdcall GdipAddPathBezier( ptr long long long long long long long long ) wine_GdipAddPathBezier
4 stdcall GdipAddPathBezierI( ptr long long long long long long long long ) wine_GdipAddPathBezierI
5 stdcall GdipAddPathBeziers( ptr long long ) wine_GdipAddPathBeziers
6 stdcall GdipAddPathBeziersI( ptr long long ) wine_GdipAddPathBeziersI
7 stdcall GdipAddPathClosedCurve2( ptr long long long ) wine_GdipAddPathClosedCurve2
8 stdcall GdipAddPathClosedCurve2I( ptr long long long ) wine_GdipAddPathClosedCurve2I
9 stdcall GdipAddPathClosedCurve( ptr long long ) wine_GdipAddPathClosedCurve
10 stdcall GdipAddPathClosedCurveI( ptr long long ) wine_GdipAddPathClosedCurveI
11 stdcall GdipAddPathCurve2( ptr long long long ) wine_GdipAddPathCurve2
12 stdcall GdipAddPathCurve2I( ptr long long long ) wine_GdipAddPathCurve2I
13 stdcall GdipAddPathCurve3( ptr long long long long long ) wine_GdipAddPathCurve3
14 stdcall GdipAddPathCurve3I( ptr long long long long long ) wine_GdipAddPathCurve3I
15 stdcall GdipAddPathCurve( ptr long long ) wine_GdipAddPathCurve
16 stdcall GdipAddPathCurveI( ptr long long ) wine_GdipAddPathCurveI
17 stdcall GdipAddPathEllipse( ptr long long long long ) wine_GdipAddPathEllipse
18 stdcall GdipAddPathEllipseI( ptr long long long long ) wine_GdipAddPathEllipseI
19 stdcall GdipAddPathLine2( ptr long long ) wine_GdipAddPathLine2
20 stdcall GdipAddPathLine2I( ptr long long ) wine_GdipAddPathLine2I
21 stdcall GdipAddPathLine( ptr long long long long ) wine_GdipAddPathLine
22 stdcall GdipAddPathLineI( ptr long long long long ) wine_GdipAddPathLineI
23 stdcall GdipAddPathPath( ptr long long ) wine_GdipAddPathPath
24 stdcall GdipAddPathPie( ptr long long long long long long ) wine_GdipAddPathPie
25 stdcall GdipAddPathPieI( ptr long long long long long long ) wine_GdipAddPathPieI
26 stdcall GdipAddPathPolygon( ptr long long ) wine_GdipAddPathPolygon
27 stdcall GdipAddPathPolygonI( ptr long long ) wine_GdipAddPathPolygonI
28 stdcall GdipAddPathRectangle( ptr long long long long ) wine_GdipAddPathRectangle
29 stdcall GdipAddPathRectangleI( ptr long long long long ) wine_GdipAddPathRectangleI
30 stdcall GdipAddPathRectangles( ptr long long ) wine_GdipAddPathRectangles
31 stdcall GdipAddPathRectanglesI( ptr long long ) wine_GdipAddPathRectanglesI
32 stdcall GdipAddPathString( ptr long long long long long long long ) wine_GdipAddPathString
33 stdcall GdipAddPathStringI( ptr long long long long long long long ) wine_GdipAddPathStringI
34 stdcall GdipAlloc( long ) wine_GdipAlloc
35 stdcall GdipBeginContainer2( ptr ptr ) wine_GdipBeginContainer2
36 stdcall GdipBeginContainer( ptr long long long ptr ) wine_GdipBeginContainer
37 stdcall GdipBeginContainerI( ptr long long long ptr ) wine_GdipBeginContainerI
38 stdcall GdipBitmapGetPixel( ptr long long ptr ) wine_GdipBitmapGetPixel
39 stdcall GdipBitmapLockBits( ptr long long ptr ptr ) wine_GdipBitmapLockBits
40 stdcall GdipBitmapSetPixel( ptr long long long ) wine_GdipBitmapSetPixel
41 stdcall GdipBitmapSetResolution( ptr long long ) wine_GdipBitmapSetResolution
42 stdcall GdipBitmapUnlockBits( ptr ptr ) wine_GdipBitmapUnlockBits
43 stub GdipClearPathMarkers
44 stdcall GdipCloneBitmapArea( long long long long ptr ptr ptr ) wine_GdipCloneBitmapArea
45 stdcall GdipCloneBitmapAreaI( long long long long ptr ptr ptr ) wine_GdipCloneBitmapAreaI
46 stdcall GdipCloneBrush( ptr ptr ) wine_GdipCloneBrush
47 stdcall GdipCloneCustomLineCap( ptr ptr ) wine_GdipCloneCustomLineCap
48 stub GdipCloneFont
49 stdcall GdipCloneFontFamily( ptr ptr ) wine_GdipCloneFontFamily
50 stdcall GdipCloneImage( ptr ptr ) wine_GdipCloneImage
51 stdcall GdipCloneImageAttributes( long ptr ) wine_GdipCloneImageAttributes
52 stdcall GdipCloneMatrix( ptr ptr ) wine_GdipCloneMatrix
53 stdcall GdipClonePath( ptr ptr ) wine_GdipClonePath
54 stdcall GdipClonePen( ptr ptr ) wine_GdipClonePen
55 stdcall GdipCloneRegion( ptr ptr ) wine_GdipCloneRegion
56 stdcall GdipCloneStringFormat( long ptr ) wine_GdipCloneStringFormat
57 stdcall GdipClosePathFigure( ptr ) wine_GdipClosePathFigure
58 stdcall GdipClosePathFigures( ptr ) wine_GdipClosePathFigures
59 stdcall GdipCombineRegionPath( ptr ptr long ) wine_GdipCombineRegionPath
60 stdcall GdipCombineRegionRect( ptr long long ) wine_GdipCombineRegionRect
61 stdcall GdipCombineRegionRectI( ptr long long ) wine_GdipCombineRegionRectI
62 stdcall GdipCombineRegionRegion( ptr ptr long ) wine_GdipCombineRegionRegion
63 stub GdipComment
64 stdcall GdipCreateAdjustableArrowCap( long long long ptr ) wine_GdipCreateAdjustableArrowCap
65 stub GdipCreateBitmapFromDirectDrawSurface
66 stdcall GdipCreateBitmapFromFile( long ptr ) wine_GdipCreateBitmapFromFile
67 stdcall GdipCreateBitmapFromFileICM( long ptr ) wine_GdipCreateBitmapFromFileICM
68 stub GdipCreateBitmapFromGdiDib
69 stdcall GdipCreateBitmapFromGraphics( long long ptr ptr ) wine_GdipCreateBitmapFromGraphics
70 stdcall GdipCreateBitmapFromHBITMAP( ptr ptr ptr ) wine_GdipCreateBitmapFromHBITMAP
71 stdcall GdipCreateBitmapFromHICON( ptr ptr ) wine_GdipCreateBitmapFromHICON
72 stdcall GdipCreateBitmapFromResource( ptr long ptr ) wine_GdipCreateBitmapFromResource
73 stdcall GdipCreateBitmapFromScan0( long long long ptr ptr ptr ) wine_GdipCreateBitmapFromScan0
74 stub GdipCreateBitmapFromStream
75 stub GdipCreateBitmapFromStreamICM
76 stub GdipCreateCachedBitmap
77 stdcall GdipCreateCustomLineCap( ptr ptr long long ptr ) wine_GdipCreateCustomLineCap
78 stdcall GdipCreateFont( long long long long ptr ) wine_GdipCreateFont
79 stdcall GdipCreateFontFamilyFromName( long ptr ptr ) wine_GdipCreateFontFamilyFromName
80 stdcall GdipCreateFontFromDC() wine_GdipCreateFontFromDC
81 stub GdipCreateFontFromLogfontA
82 stub GdipCreateFontFromLogfontW
83 stub GdipCreateFromHDC2
84 stdcall GdipCreateFromHDC( ptr ptr ) wine_GdipCreateFromHDC
85 stub GdipCreateFromHWND
86 stub GdipCreateFromHWNDICM
87 stdcall GdipCreateHBITMAPFromBitmap( ptr ptr long ) wine_GdipCreateHBITMAPFromBitmap
88 stdcall GdipCreateHICONFromBitmap( ptr ptr ) wine_GdipCreateHICONFromBitmap
89 stub GdipCreateHalftonePalette
90 stdcall GdipCreateHatchBrush( long long long ptr ) wine_GdipCreateHatchBrush
91 stdcall GdipCreateImageAttributes( ptr ) wine_GdipCreateImageAttributes
92 stub GdipCreateLineBrush
93 stub GdipCreateLineBrushFromRect
94 stub GdipCreateLineBrushFromRectI
95 stub GdipCreateLineBrushFromRectWithAngle
96 stub GdipCreateLineBrushFromRectWithAngleI
97 stub GdipCreateLineBrushI
98 stdcall GdipCreateMatrix2( long long long long long long ptr ) wine_GdipCreateMatrix2
99 stdcall GdipCreateMatrix3( long long ptr ) wine_GdipCreateMatrix3
100 stdcall GdipCreateMatrix3I( long long ptr ) wine_GdipCreateMatrix3I
101 stdcall GdipCreateMatrix( ptr ) wine_GdipCreateMatrix
102 stub GdipCreateMetafileFromEmf
103 stub GdipCreateMetafileFromFile
104 stub GdipCreateMetafileFromStream
105 stub GdipCreateMetafileFromWmf
106 stub GdipCreateMetafileFromWmfFile
107 stdcall GdipCreatePath2( long long long long ptr ) wine_GdipCreatePath2
108 stdcall GdipCreatePath2I( long long long long ptr ) wine_GdipCreatePath2I
109 stdcall GdipCreatePath( long ptr ) wine_GdipCreatePath
110 stub GdipCreatePathGradient
111 stub GdipCreatePathGradientFromPath
112 stub GdipCreatePathGradientI
113 stub GdipCreatePathIter
114 stdcall GdipCreatePen1( long long long ptr ) wine_GdipCreatePen1
115 stdcall GdipCreatePen2( ptr long long ptr ) wine_GdipCreatePen2
116 stdcall GdipCreateRegion( ptr ) wine_GdipCreateRegion
117 stub GdipCreateRegionHrgn
118 stdcall GdipCreateRegionPath( ptr ptr ) wine_GdipCreateRegionPath
119 stdcall GdipCreateRegionRect( long ptr ) wine_GdipCreateRegionRect
120 stdcall GdipCreateRegionRectI( long ptr ) wine_GdipCreateRegionRectI
121 stdcall GdipCreateRegionRgnData( long long ptr ) wine_GdipCreateRegionRgnData
122 stdcall GdipCreateSolidFill( long ptr ) wine_GdipCreateSolidFill
123 stub GdipCreateStreamOnFile
124 stdcall GdipCreateStringFormat( long long ptr ) wine_GdipCreateStringFormat
125 stub GdipCreateTexture2
126 stub GdipCreateTexture2I
127 stub GdipCreateTexture
128 stub GdipCreateTextureIA
129 stub GdipCreateTextureIAI
130 stdcall GdipDeleteBrush( ptr ) wine_GdipDeleteBrush
131 stub GdipDeleteCachedBitmap
132 stdcall GdipDeleteCustomLineCap( ptr ) wine_GdipDeleteCustomLineCap
133 stdcall GdipDeleteFont( ptr ) wine_GdipDeleteFont
134 stdcall GdipDeleteFontFamily( ptr ) wine_GdipDeleteFontFamily
135 stdcall GdipDeleteGraphics( ptr ) wine_GdipDeleteGraphics
136 stdcall GdipDeleteMatrix( ptr ) wine_GdipDeleteMatrix
137 stdcall GdipDeletePath( ptr ) wine_GdipDeletePath
138 stub GdipDeletePathIter
139 stdcall GdipDeletePen( ptr ) wine_GdipDeletePen
140 stdcall GdipDeletePrivateFontCollection( ptr ) wine_GdipDeletePrivateFontCollection
141 stdcall GdipDeleteRegion( ptr ) wine_GdipDeleteRegion
142 stdcall GdipDeleteStringFormat( ptr ) wine_GdipDeleteStringFormat
143 stdcall GdipDisposeImage( ptr ) wine_GdipDisposeImage
144 stdcall GdipDisposeImageAttributes( ptr ) wine_GdipDisposeImageAttributes
145 stdcall GdipDrawArc( ptr ptr long long long long long long ) wine_GdipDrawArc
146 stdcall GdipDrawArcI( ptr ptr long long long long long long ) wine_GdipDrawArcI
147 stdcall GdipDrawBezier( ptr ptr long long long long long long long long ) wine_GdipDrawBezier
148 stdcall GdipDrawBezierI( ptr ptr long long long long long long long long ) wine_GdipDrawBezierI
149 stdcall GdipDrawBeziers( ptr ptr long long ) wine_GdipDrawBeziers
150 stdcall GdipDrawBeziersI( ptr ptr long long ) wine_GdipDrawBeziersI
151 stub GdipDrawCachedBitmap
152 stdcall GdipDrawClosedCurve2( ptr ptr long long long ) wine_GdipDrawClosedCurve2
153 stdcall GdipDrawClosedCurve2I( ptr ptr long long long ) wine_GdipDrawClosedCurve2I
154 stdcall GdipDrawClosedCurve( ptr ptr long long ) wine_GdipDrawClosedCurve
155 stdcall GdipDrawClosedCurveI( ptr ptr long long ) wine_GdipDrawClosedCurveI
156 stdcall GdipDrawCurve2( ptr ptr long long long ) wine_GdipDrawCurve2
157 stdcall GdipDrawCurve2I( ptr ptr long long long ) wine_GdipDrawCurve2I
158 stdcall GdipDrawCurve3( ptr ptr long long long long long ) wine_GdipDrawCurve3
159 stdcall GdipDrawCurve3I( ptr ptr long long long long long ) wine_GdipDrawCurve3I
160 stdcall GdipDrawCurve( ptr ptr long long ) wine_GdipDrawCurve
161 stdcall GdipDrawCurveI( ptr ptr long long ) wine_GdipDrawCurveI
162 stub GdipDrawDriverString
163 stdcall GdipDrawEllipse( ptr ptr long long long long ) wine_GdipDrawEllipse
164 stdcall GdipDrawEllipseI( ptr ptr long long long long ) wine_GdipDrawEllipseI
165 stdcall GdipDrawImage( ptr ptr long long ) wine_GdipDrawImage
166 stdcall GdipDrawImageI( ptr ptr long long ) wine_GdipDrawImageI
167 stdcall GdipDrawImagePointRect( ptr ptr long long long long long long long ) wine_GdipDrawImagePointRect
168 stdcall GdipDrawImagePointRectI( ptr ptr long long long long long long long ) wine_GdipDrawImagePointRectI
169 stdcall GdipDrawImagePoints( ptr ptr long long ) wine_GdipDrawImagePoints
170 stdcall GdipDrawImagePointsI( ptr ptr long long ) wine_GdipDrawImagePointsI
171 stdcall GdipDrawImagePointsRect( ptr ptr long long long long long long long long long ptr ) wine_GdipDrawImagePointsRect
172 stdcall GdipDrawImagePointsRectI( ptr ptr long long long long long long long long long ptr ) wine_GdipDrawImagePointsRectI
173 stdcall GdipDrawImageRect( ptr ptr long long long long ) wine_GdipDrawImageRect
174 stdcall GdipDrawImageRectI( ptr ptr long long long long ) wine_GdipDrawImageRectI
175 stdcall GdipDrawImageRectRect( ptr ptr long long long long long long long long long long long ptr ) wine_GdipDrawImageRectRect
176 stdcall GdipDrawImageRectRectI( ptr ptr long long long long long long long long long long long ptr ) wine_GdipDrawImageRectRectI
177 stdcall GdipDrawLine( ptr ptr long long long long ) wine_GdipDrawLine
178 stdcall GdipDrawLineI( ptr ptr long long long long ) wine_GdipDrawLineI
179 stdcall GdipDrawLines( ptr ptr long long ) wine_GdipDrawLines
180 stdcall GdipDrawLinesI( ptr ptr long long ) wine_GdipDrawLinesI
181 stdcall GdipDrawPath( ptr ptr ptr ) wine_GdipDrawPath
182 stdcall GdipDrawPie( ptr ptr long long long long long long ) wine_GdipDrawPie
183 stdcall GdipDrawPieI( ptr ptr long long long long long long ) wine_GdipDrawPieI
184 stdcall GdipDrawPolygon( ptr ptr long long ) wine_GdipDrawPolygon
185 stdcall GdipDrawPolygonI( ptr ptr long long ) wine_GdipDrawPolygonI
186 stdcall GdipDrawRectangle( ptr ptr long long long long ) wine_GdipDrawRectangle
187 stdcall GdipDrawRectangleI( ptr ptr long long long long ) wine_GdipDrawRectangleI
188 stdcall GdipDrawRectangles( ptr ptr long long ) wine_GdipDrawRectangles
189 stdcall GdipDrawRectanglesI( ptr ptr long long ) wine_GdipDrawRectanglesI
190 stdcall GdipDrawString( ptr long long long long long ptr ) wine_GdipDrawString
191 stub GdipEmfToWmfBits
192 stdcall GdipEndContainer( ptr long ) wine_GdipEndContainer
193 stub GdipEnumerateMetafileDestPoint
194 stub GdipEnumerateMetafileDestPointI
195 stub GdipEnumerateMetafileDestPoints
196 stub GdipEnumerateMetafileDestPointsI
197 stub GdipEnumerateMetafileDestRect
198 stub GdipEnumerateMetafileDestRectI
199 stub GdipEnumerateMetafileSrcRectDestPoint
200 stub GdipEnumerateMetafileSrcRectDestPointI
201 stub GdipEnumerateMetafileSrcRectDestPoints
202 stub GdipEnumerateMetafileSrcRectDestPointsI
203 stub GdipEnumerateMetafileSrcRectDestRect
204 stub GdipEnumerateMetafileSrcRectDestRectI
205 stdcall GdipFillClosedCurve2( ptr ptr long long long ) wine_GdipFillClosedCurve2
206 stdcall GdipFillClosedCurve2I( ptr ptr long long long ) wine_GdipFillClosedCurve2I
207 stdcall GdipFillClosedCurve( ptr ptr long long ) wine_GdipFillClosedCurve
208 stdcall GdipFillClosedCurveI( ptr ptr long long ) wine_GdipFillClosedCurveI
209 stdcall GdipFillEllipse( ptr ptr long long long long ) wine_GdipFillEllipse
210 stdcall GdipFillEllipseI( ptr ptr long long long long ) wine_GdipFillEllipseI
211 stdcall GdipFillPath( ptr ptr ptr ) wine_GdipFillPath
212 stdcall GdipFillPie( ptr ptr long long long long long long ) wine_GdipFillPie
213 stdcall GdipFillPieI( ptr ptr long long long long long long ) wine_GdipFillPieI
214 stdcall GdipFillPolygon2( ptr ptr long long ) wine_GdipFillPolygon2
215 stdcall GdipFillPolygon2I( ptr ptr long long ) wine_GdipFillPolygon2I
216 stdcall GdipFillPolygon( ptr ptr long long long ) wine_GdipFillPolygon
217 stdcall GdipFillPolygonI( ptr ptr long long long ) wine_GdipFillPolygonI
218 stdcall GdipFillRectangle( ptr ptr long long long long ) wine_GdipFillRectangle
219 stdcall GdipFillRectangleI( ptr ptr long long long long ) wine_GdipFillRectangleI
220 stdcall GdipFillRectangles( ptr ptr long long ) wine_GdipFillRectangles
221 stdcall GdipFillRectanglesI( ptr ptr long long ) wine_GdipFillRectanglesI
222 stdcall GdipFillRegion( ptr ptr ptr ) wine_GdipFillRegion
223 stdcall GdipFlattenPath( ptr ptr long ) wine_GdipFlattenPath
224 stub GdipFlush
225 stdcall GdipFree() wine_GdipFree
226 stdcall GdipGetAdjustableArrowCapFillState( ptr ptr ) wine_GdipGetAdjustableArrowCapFillState
227 stdcall GdipGetAdjustableArrowCapHeight( ptr ptr ) wine_GdipGetAdjustableArrowCapHeight
228 stdcall GdipGetAdjustableArrowCapMiddleInset( ptr ptr ) wine_GdipGetAdjustableArrowCapMiddleInset
229 stdcall GdipGetAdjustableArrowCapWidth( ptr ptr ) wine_GdipGetAdjustableArrowCapWidth
230 stub GdipGetAllPropertyItems
231 stdcall GdipGetBrushType( ptr ptr ) wine_GdipGetBrushType
232 stdcall GdipGetCellAscent( long long ptr ) wine_GdipGetCellAscent
233 stdcall GdipGetCellDescent( long long ptr ) wine_GdipGetCellDescent
234 stdcall GdipGetClip( ptr ptr ) wine_GdipGetClip
235 stdcall GdipGetClipBounds( ptr ptr ) wine_GdipGetClipBounds
236 stdcall GdipGetClipBoundsI( ptr ptr ) wine_GdipGetClipBoundsI
237 stdcall GdipGetCompositingMode( ptr ptr ) wine_GdipGetCompositingMode
238 stdcall GdipGetCompositingQuality( ptr ptr ) wine_GdipGetCompositingQuality
239 stdcall GdipGetCustomLineCapBaseCap( ptr ptr ) wine_GdipGetCustomLineCapBaseCap
240 stdcall GdipGetCustomLineCapBaseInset( ptr ptr ) wine_GdipGetCustomLineCapBaseInset
241 stdcall GdipGetCustomLineCapStrokeCaps( ptr ptr ptr ) wine_GdipGetCustomLineCapStrokeCaps
242 stdcall GdipGetCustomLineCapStrokeJoin( ptr ptr ) wine_GdipGetCustomLineCapStrokeJoin
243 stub GdipGetCustomLineCapType
244 stdcall GdipGetCustomLineCapWidthScale( ptr ptr ) wine_GdipGetCustomLineCapWidthScale
245 stdcall GdipGetDC( ptr ptr ) wine_GdipGetDC
246 stdcall GdipGetDpiX( ptr ptr ) wine_GdipGetDpiX
247 stdcall GdipGetDpiY( ptr ptr ) wine_GdipGetDpiY
248 stdcall GdipGetEmHeight( long long ptr ) wine_GdipGetEmHeight
249 stub GdipGetEncoderParameterList
250 stub GdipGetEncoderParameterListSize
251 stub GdipGetFamily
252 stdcall GdipGetFamilyName( long long long ) wine_GdipGetFamilyName
253 stdcall GdipGetFontCollectionFamilyCount( ptr ptr ) wine_GdipGetFontCollectionFamilyCount
254 stdcall GdipGetFontCollectionFamilyList( ptr long ptr ptr ) wine_GdipGetFontCollectionFamilyList
255 stdcall GdipGetFontHeight( long long ptr ) wine_GdipGetFontHeight
256 stdcall GdipGetFontHeightGivenDPI( long long ptr ) wine_GdipGetFontHeightGivenDPI
257 stdcall GdipGetFontSize( ptr ptr ) wine_GdipGetFontSize
258 stub GdipGetFontStyle
259 stub GdipGetFontUnit
260 stdcall GdipGetGenericFontFamilyMonospace( ptr ) wine_GdipGetGenericFontFamilyMonospace
261 stdcall GdipGetGenericFontFamilySansSerif( ptr ) wine_GdipGetGenericFontFamilySansSerif
262 stdcall GdipGetGenericFontFamilySerif( ptr ) wine_GdipGetGenericFontFamilySerif
263 stdcall GdipGetHatchBackgroundColor( ptr ptr ) wine_GdipGetHatchBackgroundColor
264 stdcall GdipGetHatchForegroundColor( ptr ptr ) wine_GdipGetHatchForegroundColor
265 stdcall GdipGetHatchStyle( ptr ptr ) wine_GdipGetHatchStyle
266 stub GdipGetHemfFromMetafile
267 stdcall GdipGetImageAttributesAdjustedPalette( ptr ptr long ) wine_GdipGetImageAttributesAdjustedPalette
268 stdcall GdipGetImageBounds( ptr ptr ptr ) wine_GdipGetImageBounds
269 stdcall GdipGetImageDecoders( long long ptr ) wine_GdipGetImageDecoders
270 stdcall GdipGetImageDecodersSize( ptr ptr ) wine_GdipGetImageDecodersSize
271 stdcall GdipGetImageDimension( ptr ptr ptr ) wine_GdipGetImageDimension
272 stdcall GdipGetImageEncoders( long long ptr ) wine_GdipGetImageEncoders
273 stdcall GdipGetImageEncodersSize( ptr ptr ) wine_GdipGetImageEncodersSize
274 stdcall GdipGetImageFlags( ptr ptr ) wine_GdipGetImageFlags
275 stdcall GdipGetImageGraphicsContext( ptr ptr ) wine_GdipGetImageGraphicsContext
276 stdcall GdipGetImageHeight( ptr ptr ) wine_GdipGetImageHeight
277 stdcall GdipGetImageHorizontalResolution( ptr ptr ) wine_GdipGetImageHorizontalResolution
278 stdcall GdipGetImagePalette( ptr ptr long ) wine_GdipGetImagePalette
279 stdcall GdipGetImagePaletteSize( ptr ptr ) wine_GdipGetImagePaletteSize
280 stdcall GdipGetImagePixelFormat( ptr ptr ) wine_GdipGetImagePixelFormat
281 stdcall GdipGetImageRawFormat( ptr ptr ) wine_GdipGetImageRawFormat
282 stdcall GdipGetImageThumbnail( ptr long long ptr long ptr ) wine_GdipGetImageThumbnail
283 stdcall GdipGetImageType( ptr ptr ) wine_GdipGetImageType
284 stdcall GdipGetImageVerticalResolution( ptr ptr ) wine_GdipGetImageVerticalResolution
285 stdcall GdipGetImageWidth( ptr ptr ) wine_GdipGetImageWidth
286 stub GdipGetInterpolationMode
287 stub GdipGetLineBlend
288 stub GdipGetLineBlendCount
289 stub GdipGetLineColors
290 stub GdipGetLineGammaCorrection
291 stub GdipGetLinePresetBlend
292 stub GdipGetLinePresetBlendCount
293 stub GdipGetLineRect
294 stub GdipGetLineRectI
295 stdcall GdipGetLineSpacing( long long ptr ) wine_GdipGetLineSpacing
296 stub GdipGetLineTransform
297 stub GdipGetLineWrapMode
298 stdcall GdipGetLogFontA( ptr ptr ptr ) wine_GdipGetLogFontA
299 stdcall GdipGetLogFontW( ptr ptr ptr ) wine_GdipGetLogFontW
300 stdcall GdipGetMatrixElements( ptr ptr ) wine_GdipGetMatrixElements
301 stub GdipGetMetafileDownLevelRasterizationLimit
302 stub GdipGetMetafileHeaderFromEmf
303 stub GdipGetMetafileHeaderFromFile
304 stub GdipGetMetafileHeaderFromMetafile
305 stub GdipGetMetafileHeaderFromStream
306 stub GdipGetMetafileHeaderFromWmf
307 stdcall GdipGetNearestColor( ptr ptr ) wine_GdipGetNearestColor
308 stdcall GdipGetPageScale( ptr ptr ) wine_GdipGetPageScale
309 stdcall GdipGetPageUnit( ptr ptr ) wine_GdipGetPageUnit
310 stdcall GdipGetPathData( ptr ptr ) wine_GdipGetPathData
311 stdcall GdipGetPathFillMode( ptr ptr ) wine_GdipGetPathFillMode
312 stub GdipGetPathGradientBlend
313 stub GdipGetPathGradientBlendCount
314 stub GdipGetPathGradientCenterColor
315 stub GdipGetPathGradientCenterPoint
316 stub GdipGetPathGradientCenterPointI
317 stub GdipGetPathGradientFocusScales
318 stub GdipGetPathGradientGammaCorrection
319 stub GdipGetPathGradientPath
320 stub GdipGetPathGradientPointCount
321 stub GdipGetPathGradientPresetBlend
322 stub GdipGetPathGradientPresetBlendCount
323 stub GdipGetPathGradientRect
324 stub GdipGetPathGradientRectI
325 stub GdipGetPathGradientSurroundColorCount
326 stub GdipGetPathGradientSurroundColorsWithCount
327 stub GdipGetPathGradientTransform
328 stub GdipGetPathGradientWrapMode
329 stdcall GdipGetPathLastPoint( ptr ptr ) wine_GdipGetPathLastPoint
330 stdcall GdipGetPathPoints( ptr ptr long ) wine_GdipGetPathPoints
331 stdcall GdipGetPathPointsI( ptr ptr long ) wine_GdipGetPathPointsI
332 stdcall GdipGetPathTypes( ptr ptr long ) wine_GdipGetPathTypes
333 stdcall GdipGetPathWorldBounds( ptr ptr long long ) wine_GdipGetPathWorldBounds
334 stdcall GdipGetPathWorldBoundsI( ptr ptr long long ) wine_GdipGetPathWorldBoundsI
335 stdcall GdipGetPenBrushFill( ptr ptr ) wine_GdipGetPenBrushFill
336 stdcall GdipGetPenColor( ptr ptr ) wine_GdipGetPenColor
337 stdcall GdipGetPenCompoundArray( ptr ptr long ) wine_GdipGetPenCompoundArray
338 stdcall GdipGetPenCompoundCount( ptr ptr ) wine_GdipGetPenCompoundCount
339 stdcall GdipGetPenCustomEndCap( ptr ptr ) wine_GdipGetPenCustomEndCap
340 stdcall GdipGetPenCustomStartCap( ptr ptr ) wine_GdipGetPenCustomStartCap
341 stdcall GdipGetPenDashArray( ptr ptr long ) wine_GdipGetPenDashArray
342 stdcall GdipGetPenDashCap197819( ptr ptr ) wine_GdipGetPenDashCap197819
343 stdcall GdipGetPenDashCount( ptr ptr ) wine_GdipGetPenDashCount
344 stdcall GdipGetPenDashOffset( ptr ptr ) wine_GdipGetPenDashOffset
345 stdcall GdipGetPenDashStyle( ptr ptr ) wine_GdipGetPenDashStyle
346 stdcall GdipGetPenEndCap( ptr ptr ) wine_GdipGetPenEndCap
347 stdcall GdipGetPenFillType( ptr ptr ) wine_GdipGetPenFillType
348 stdcall GdipGetPenLineJoin( ptr ptr ) wine_GdipGetPenLineJoin
349 stdcall GdipGetPenMiterLimit( ptr ptr ) wine_GdipGetPenMiterLimit
350 stdcall GdipGetPenMode( ptr ptr ) wine_GdipGetPenMode
351 stdcall GdipGetPenStartCap( ptr ptr ) wine_GdipGetPenStartCap
352 stdcall GdipGetPenTransform( ptr ptr ) wine_GdipGetPenTransform
353 stub GdipGetPenUnit
354 stdcall GdipGetPenWidth( ptr ptr ) wine_GdipGetPenWidth
355 stdcall GdipGetPixelOffsetMode( ptr ptr ) wine_GdipGetPixelOffsetMode
356 stdcall GdipGetPointCount( ptr ptr ) wine_GdipGetPointCount
357 stdcall GdipGetPropertyCount( ptr ptr ) wine_GdipGetPropertyCount
358 stdcall GdipGetPropertyIdList( ptr long ptr ) wine_GdipGetPropertyIdList
359 stdcall GdipGetPropertyItem( ptr ptr long ptr ) wine_GdipGetPropertyItem
360 stdcall GdipGetPropertyItemSize( ptr ptr ptr ) wine_GdipGetPropertyItemSize
361 stdcall GdipGetPropertySize( ptr ptr ptr ) wine_GdipGetPropertySize
362 stdcall GdipGetRegionBounds( ptr ptr ptr ) wine_GdipGetRegionBounds
363 stub GdipGetRegionBoundsI
364 stdcall GdipGetRegionData( ptr ptr long ptr ) wine_GdipGetRegionData
365 stdcall GdipGetRegionDataSize( ptr ptr ) wine_GdipGetRegionDataSize
366 stub GdipGetRegionHRgn
367 stdcall GdipGetRegionScans( ptr ptr ptr ptr ) wine_GdipGetRegionScans
368 stdcall GdipGetRegionScansCount( ptr ptr ptr ) wine_GdipGetRegionScansCount
369 stub GdipGetRegionScansI
370 stdcall GdipGetRenderingOrigin( ptr ptr ptr ) wine_GdipGetRenderingOrigin
371 stdcall GdipGetSmoothingMode( ptr ptr ) wine_GdipGetSmoothingMode
372 stdcall GdipGetSolidFillColor( ptr ptr ) wine_GdipGetSolidFillColor
373 stdcall GdipGetStringFormatAlign( long ptr ) wine_GdipGetStringFormatAlign
374 stdcall GdipGetStringFormatDigitSubstitution( long ptr ptr ) wine_GdipGetStringFormatDigitSubstitution
375 stdcall GdipGetStringFormatFlags( long ptr ) wine_GdipGetStringFormatFlags
376 stdcall GdipGetStringFormatHotkeyPrefix( long ptr ) wine_GdipGetStringFormatHotkeyPrefix
377 stdcall GdipGetStringFormatLineAlign( long ptr ) wine_GdipGetStringFormatLineAlign
378 stdcall GdipGetStringFormatMeasurableCharacterRangeCount( long ptr ) wine_GdipGetStringFormatMeasurableCharacterRangeCount
379 stdcall GdipGetStringFormatTabStopCount( long ptr ) wine_GdipGetStringFormatTabStopCount
380 stdcall GdipGetStringFormatTabStops( long long ptr ptr ) wine_GdipGetStringFormatTabStops
381 stdcall GdipGetStringFormatTrimming( long ptr ) wine_GdipGetStringFormatTrimming
382 stdcall GdipGetTextContrast( ptr ptr ) wine_GdipGetTextContrast
383 stdcall GdipGetTextRenderingHint( ptr ptr ) wine_GdipGetTextRenderingHint
384 stub GdipGetTextureImage
385 stub GdipGetTextureTransform
386 stub GdipGetTextureWrapMode
387 stdcall GdipGetVisibleClipBounds( ptr ptr ) wine_GdipGetVisibleClipBounds
388 stdcall GdipGetVisibleClipBoundsI( ptr ptr ) wine_GdipGetVisibleClipBoundsI
389 stdcall GdipGetWorldTransform( ptr ptr ) wine_GdipGetWorldTransform
390 stdcall GdipGraphicsClear( ptr long ) wine_GdipGraphicsClear
391 stub GdipImageForceValidation
392 stdcall GdipImageGetFrameCount( ptr long ptr ) wine_GdipImageGetFrameCount
393 stdcall GdipImageGetFrameDimensionsCount( ptr ptr ) wine_GdipImageGetFrameDimensionsCount
394 stdcall GdipImageGetFrameDimensionsList( ptr ptr long ) wine_GdipImageGetFrameDimensionsList
395 stdcall GdipImageRotateFlip( ptr long ) wine_GdipImageRotateFlip
396 stdcall GdipImageSelectActiveFrame( ptr long long ) wine_GdipImageSelectActiveFrame
397 stdcall GdipInvertMatrix( ptr ) wine_GdipInvertMatrix
398 stdcall GdipIsClipEmpty( ptr ptr ) wine_GdipIsClipEmpty
399 stdcall GdipIsEmptyRegion( ptr ptr ptr ) wine_GdipIsEmptyRegion
400 stdcall GdipIsEqualRegion( ptr ptr ptr ptr ) wine_GdipIsEqualRegion
401 stdcall GdipIsInfiniteRegion( ptr ptr ptr ) wine_GdipIsInfiniteRegion
402 stdcall GdipIsMatrixEqual( ptr ptr ptr ) wine_GdipIsMatrixEqual
403 stdcall GdipIsMatrixIdentity( ptr ptr ) wine_GdipIsMatrixIdentity
404 stdcall GdipIsMatrixInvertible( ptr ptr ) wine_GdipIsMatrixInvertible
405 stdcall GdipIsOutlineVisiblePathPoint( ptr long long ptr ptr ptr ) wine_GdipIsOutlineVisiblePathPoint
406 stdcall GdipIsOutlineVisiblePathPointI( ptr long long ptr ptr ptr ) wine_GdipIsOutlineVisiblePathPointI
407 stdcall GdipIsStyleAvailable( long long ptr ) wine_GdipIsStyleAvailable
408 stdcall GdipIsVisibleClipEmpty( ptr ptr ) wine_GdipIsVisibleClipEmpty
409 stdcall GdipIsVisiblePathPoint( ptr long long ptr ptr ) wine_GdipIsVisiblePathPoint
410 stdcall GdipIsVisiblePathPointI( ptr long long ptr ptr ) wine_GdipIsVisiblePathPointI
411 stdcall GdipIsVisiblePoint( ptr long long ptr ) wine_GdipIsVisiblePoint
412 stdcall GdipIsVisiblePointI( ptr long long ptr ) wine_GdipIsVisiblePointI
413 stdcall GdipIsVisibleRect( ptr long long long long ptr ) wine_GdipIsVisibleRect
414 stdcall GdipIsVisibleRectI( ptr long long long long ptr ) wine_GdipIsVisibleRectI
415 stdcall GdipIsVisibleRegionPoint( ptr long long ptr ptr ) wine_GdipIsVisibleRegionPoint
416 stdcall GdipIsVisibleRegionPointI( ptr long long ptr ptr ) wine_GdipIsVisibleRegionPointI
417 stdcall GdipIsVisibleRegionRect( ptr long long long long ptr ptr ) wine_GdipIsVisibleRegionRect
418 stdcall GdipIsVisibleRegionRectI( ptr long long long long ptr ptr ) wine_GdipIsVisibleRegionRectI
419 stdcall GdipLoadImageFromFile( long ptr ) wine_GdipLoadImageFromFile
420 stdcall GdipLoadImageFromFileICM( long ptr ) wine_GdipLoadImageFromFileICM
421 stdcall GdipLoadImageFromStream() wine_GdipLoadImageFromStream
422 stub GdipLoadImageFromStreamICM
423 stdcall GdipMeasureCharacterRanges( ptr long long long long long long ptr ) wine_GdipMeasureCharacterRanges
424 stub GdipMeasureDriverString
425 stdcall GdipMeasureString( ptr long long long long long ptr ptr ptr ) wine_GdipMeasureString
426 stub GdipMultiplyLineTransform
427 stdcall GdipMultiplyMatrix( ptr ptr long ) wine_GdipMultiplyMatrix
428 stub GdipMultiplyPathGradientTransform
429 stdcall GdipMultiplyPenTransform( ptr ptr long ) wine_GdipMultiplyPenTransform
430 stub GdipMultiplyTextureTransform
431 stdcall GdipMultiplyWorldTransform( ptr ptr long ) wine_GdipMultiplyWorldTransform
432 stdcall GdipNewInstalledFontCollection( ptr ) wine_GdipNewInstalledFontCollection
433 stdcall GdipNewPrivateFontCollection( ptr ) wine_GdipNewPrivateFontCollection
434 stub GdipPathIterCopyData
435 stub GdipPathIterEnumerate
436 stub GdipPathIterGetCount
437 stub GdipPathIterGetSubpathCount
438 stub GdipPathIterHasCurve
439 stub GdipPathIterIsValid
440 stub GdipPathIterNextMarker
441 stub GdipPathIterNextMarkerPath
442 stub GdipPathIterNextPathType
443 stub GdipPathIterNextSubpath
444 stub GdipPathIterNextSubpathPath
445 stub GdipPathIterRewind
446 stub GdipPlayMetafileRecord
447 stdcall GdipPrivateAddFontFile( ptr long ) wine_GdipPrivateAddFontFile
448 stdcall GdipPrivateAddMemoryFont( ptr long long ) wine_GdipPrivateAddMemoryFont
449 stub GdipRecordMetafile
450 stub GdipRecordMetafileFileName
451 stub GdipRecordMetafileFileNameI
452 stub GdipRecordMetafileI
453 stub GdipRecordMetafileStream
454 stub GdipRecordMetafileStreamI
455 stdcall GdipReleaseDC( ptr ptr ) wine_GdipReleaseDC
456 stub GdipRemovePropertyItem
457 stdcall GdipResetClip( ptr ) wine_GdipResetClip
458 stub GdipResetImageAttributes
459 stub GdipResetLineTransform
460 stub GdipResetPageTransform
461 stdcall GdipResetPath( ptr ) wine_GdipResetPath
462 stub GdipResetPathGradientTransform
463 stdcall GdipResetPenTransform( ptr ) wine_GdipResetPenTransform
464 stub GdipResetTextureTransform
465 stdcall GdipResetWorldTransform( ptr ) wine_GdipResetWorldTransform
466 stdcall GdipRestoreGraphics( ptr long ) wine_GdipRestoreGraphics
467 stdcall GdipReversePath( ptr ) wine_GdipReversePath
468 stub GdipRotateLineTransform
469 stdcall GdipRotateMatrix( ptr long long ) wine_GdipRotateMatrix
470 stub GdipRotatePathGradientTransform
471 stdcall GdipRotatePenTransform( ptr long long ) wine_GdipRotatePenTransform
472 stub GdipRotateTextureTransform
473 stdcall GdipRotateWorldTransform( ptr long long ) wine_GdipRotateWorldTransform
474 stdcall GdipSaveAdd( ptr long ) wine_GdipSaveAdd
475 stdcall GdipSaveAddImage( ptr ptr long ) wine_GdipSaveAddImage
476 stdcall GdipSaveGraphics( ptr ptr ) wine_GdipSaveGraphics
477 stdcall GdipSaveImageToFile( ptr long long long ) wine_GdipSaveImageToFile
478 stdcall GdipSaveImageToStream( ptr ptr long long ) wine_GdipSaveImageToStream
479 stub GdipScaleLineTransform
480 stdcall GdipScaleMatrix( ptr long long long ) wine_GdipScaleMatrix
481 stub GdipScalePathGradientTransform
482 stdcall GdipScalePenTransform( ptr long long long ) wine_GdipScalePenTransform
483 stub GdipScaleTextureTransform
484 stdcall GdipScaleWorldTransform( ptr long long long ) wine_GdipScaleWorldTransform
485 stdcall GdipSetAdjustableArrowCapFillState( ptr long ) wine_GdipSetAdjustableArrowCapFillState
486 stdcall GdipSetAdjustableArrowCapHeight( ptr long ) wine_GdipSetAdjustableArrowCapHeight
487 stdcall GdipSetAdjustableArrowCapMiddleInset( ptr long ) wine_GdipSetAdjustableArrowCapMiddleInset
488 stdcall GdipSetAdjustableArrowCapWidth( ptr long ) wine_GdipSetAdjustableArrowCapWidth
489 stdcall GdipSetClipGraphics( ptr ptr long ) wine_GdipSetClipGraphics
490 stdcall GdipSetClipHrgn( ptr ptr long ) wine_GdipSetClipHrgn
491 stdcall GdipSetClipPath( ptr ptr long ) wine_GdipSetClipPath
492 stdcall GdipSetClipRect( ptr long long long long long ) wine_GdipSetClipRect
493 stdcall GdipSetClipRectI( ptr long long long long long ) wine_GdipSetClipRectI
494 stdcall GdipSetClipRegion( ptr ptr long ) wine_GdipSetClipRegion
495 stdcall GdipSetCompositingMode( ptr long ) wine_GdipSetCompositingMode
496 stdcall GdipSetCompositingQuality( ptr long ) wine_GdipSetCompositingQuality
497 stdcall GdipSetCustomLineCapBaseCap( ptr long ) wine_GdipSetCustomLineCapBaseCap
498 stdcall GdipSetCustomLineCapBaseInset( ptr long ) wine_GdipSetCustomLineCapBaseInset
499 stdcall GdipSetCustomLineCapStrokeCaps( ptr long long ) wine_GdipSetCustomLineCapStrokeCaps
500 stdcall GdipSetCustomLineCapStrokeJoin( ptr long ) wine_GdipSetCustomLineCapStrokeJoin
501 stdcall GdipSetCustomLineCapWidthScale( ptr long ) wine_GdipSetCustomLineCapWidthScale
502 stdcall GdipSetEmpty( ptr ) wine_GdipSetEmpty
503 stub GdipSetImageAttributesCachedBackground
504 stdcall GdipSetImageAttributesColorKeys( ptr long long long long ) wine_GdipSetImageAttributesColorKeys
505 stdcall GdipSetImageAttributesColorMatrix( ptr long long long long long ) wine_GdipSetImageAttributesColorMatrix
506 stdcall GdipSetImageAttributesGamma( ptr long long long ) wine_GdipSetImageAttributesGamma
507 stdcall GdipSetImageAttributesNoOp( ptr long long ) wine_GdipSetImageAttributesNoOp
508 stdcall GdipSetImageAttributesOutputChannel( ptr long long long ) wine_GdipSetImageAttributesOutputChannel
509 stdcall GdipSetImageAttributesOutputChannelColorProfile( ptr long long long ) wine_GdipSetImageAttributesOutputChannelColorProfile
510 stdcall GdipSetImageAttributesRemapTable( ptr long long long long ) wine_GdipSetImageAttributesRemapTable
511 stdcall GdipSetImageAttributesThreshold( ptr long long long ) wine_GdipSetImageAttributesThreshold
512 stub GdipSetImageAttributesToIdentity
513 stdcall GdipSetImageAttributesWrapMode( ptr long long long ) wine_GdipSetImageAttributesWrapMode
514 stdcall GdipSetImagePalette( ptr long ) wine_GdipSetImagePalette
515 stdcall GdipSetInfinite( ptr ) wine_GdipSetInfinite
516 stub GdipSetInterpolationMode
517 stub GdipSetLineBlend
518 stub GdipSetLineColors
519 stub GdipSetLineGammaCorrection
520 stub GdipSetLineLinearBlend
521 stub GdipSetLinePresetBlend
522 stub GdipSetLineSigmaBlend
523 stub GdipSetLineTransform
524 stub GdipSetLineWrapMode
525 stdcall GdipSetMatrixElements( ptr long long long long long long ) wine_GdipSetMatrixElements
526 stub GdipSetMetafileDownLevelRasterizationLimit
527 stdcall GdipSetPageScale( ptr long ) wine_GdipSetPageScale
528 stdcall GdipSetPageUnit( ptr long ) wine_GdipSetPageUnit
529 stdcall GdipSetPathFillMode( ptr long ) wine_GdipSetPathFillMode
530 stub GdipSetPathGradientBlend
531 stub GdipSetPathGradientCenterColor
532 stub GdipSetPathGradientCenterPoint
533 stub GdipSetPathGradientCenterPointI
534 stub GdipSetPathGradientFocusScales
535 stub GdipSetPathGradientGammaCorrection
536 stub GdipSetPathGradientLinearBlend
537 stub GdipSetPathGradientPath
538 stub GdipSetPathGradientPresetBlend
539 stub GdipSetPathGradientSigmaBlend
540 stub GdipSetPathGradientSurroundColorsWithCount
541 stub GdipSetPathGradientTransform
542 stub GdipSetPathGradientWrapMode
543 stdcall GdipSetPathMarker( ptr ) wine_GdipSetPathMarker
544 stdcall GdipSetPenBrushFill( ptr ptr ) wine_GdipSetPenBrushFill
545 stdcall GdipSetPenColor( ptr long ) wine_GdipSetPenColor
546 stdcall GdipSetPenCompoundArray( ptr long long ) wine_GdipSetPenCompoundArray
547 stdcall GdipSetPenCustomEndCap( ptr ptr ) wine_GdipSetPenCustomEndCap
548 stdcall GdipSetPenCustomStartCap( ptr ptr ) wine_GdipSetPenCustomStartCap
549 stdcall GdipSetPenDashArray( ptr long long ) wine_GdipSetPenDashArray
550 stdcall GdipSetPenDashCap197819( ptr long ) wine_GdipSetPenDashCap197819
551 stdcall GdipSetPenDashOffset( ptr long ) wine_GdipSetPenDashOffset
552 stdcall GdipSetPenDashStyle( ptr long ) wine_GdipSetPenDashStyle
553 stdcall GdipSetPenEndCap( ptr long ) wine_GdipSetPenEndCap
554 stdcall GdipSetPenLineCap197819( ptr long long long ) wine_GdipSetPenLineCap197819
555 stdcall GdipSetPenLineJoin( ptr long ) wine_GdipSetPenLineJoin
556 stdcall GdipSetPenMiterLimit( ptr long ) wine_GdipSetPenMiterLimit
557 stdcall GdipSetPenMode( ptr long ) wine_GdipSetPenMode
558 stdcall GdipSetPenStartCap( ptr long ) wine_GdipSetPenStartCap
559 stdcall GdipSetPenTransform( ptr ptr ) wine_GdipSetPenTransform
560 stub GdipSetPenUnit
561 stdcall GdipSetPenWidth( ptr long ) wine_GdipSetPenWidth
562 stdcall GdipSetPixelOffsetMode( ptr ptr ) wine_GdipSetPixelOffsetMode
563 stub GdipSetPropertyItem
564 stdcall GdipSetRenderingOrigin( ptr long long ) wine_GdipSetRenderingOrigin
565 stdcall GdipSetSmoothingMode( ptr long ) wine_GdipSetSmoothingMode
566 stdcall GdipSetSolidFillColor( ptr long ) wine_GdipSetSolidFillColor
567 stdcall GdipSetStringFormatAlign( ptr long ) wine_GdipSetStringFormatAlign
568 stdcall GdipSetStringFormatDigitSubstitution( ptr long long ) wine_GdipSetStringFormatDigitSubstitution
569 stdcall GdipSetStringFormatFlags( ptr long ) wine_GdipSetStringFormatFlags
570 stdcall GdipSetStringFormatHotkeyPrefix( ptr long ) wine_GdipSetStringFormatHotkeyPrefix
571 stdcall GdipSetStringFormatLineAlign( ptr long ) wine_GdipSetStringFormatLineAlign
572 stdcall GdipSetStringFormatMeasurableCharacterRanges( ptr long long ) wine_GdipSetStringFormatMeasurableCharacterRanges
573 stdcall GdipSetStringFormatTabStops( ptr long long long ) wine_GdipSetStringFormatTabStops
574 stdcall GdipSetStringFormatTrimming( ptr long ) wine_GdipSetStringFormatTrimming
575 stdcall GdipSetTextContrast( ptr long ) wine_GdipSetTextContrast
576 stdcall GdipSetTextRenderingHint( ptr long ) wine_GdipSetTextRenderingHint
577 stub GdipSetTextureTransform
578 stub GdipSetTextureWrapMode
579 stdcall GdipSetWorldTransform( ptr ptr ) wine_GdipSetWorldTransform
580 stdcall GdipShearMatrix( ptr long long long ) wine_GdipShearMatrix
581 stdcall GdipStartPathFigure( ptr ) wine_GdipStartPathFigure
582 stdcall GdipStringFormatGetGenericDefault( ptr ) wine_GdipStringFormatGetGenericDefault
583 stdcall GdipStringFormatGetGenericTypographic( ptr ) wine_GdipStringFormatGetGenericTypographic
584 stub GdipTestControl
585 stdcall GdipTransformMatrixPoints( ptr ptr long ) wine_GdipTransformMatrixPoints
586 stdcall GdipTransformMatrixPointsI( ptr ptr long ) wine_GdipTransformMatrixPointsI
587 stdcall GdipTransformPath( ptr ptr ) wine_GdipTransformPath
588 stdcall GdipTransformPoints( ptr long long ptr long ) wine_GdipTransformPoints
589 stdcall GdipTransformPointsI( ptr long long ptr long ) wine_GdipTransformPointsI
590 stdcall GdipTransformRegion( ptr ptr ) wine_GdipTransformRegion
591 stdcall GdipTranslateClip( ptr long long ) wine_GdipTranslateClip
592 stdcall GdipTranslateClipI( ptr long long ) wine_GdipTranslateClipI
593 stub GdipTranslateLineTransform
594 stdcall GdipTranslateMatrix( ptr long long long ) wine_GdipTranslateMatrix
595 stub GdipTranslatePathGradientTransform
596 stdcall GdipTranslatePenTransform( ptr long long long ) wine_GdipTranslatePenTransform
597 stdcall GdipTranslateRegion( ptr long long ) wine_GdipTranslateRegion
598 stdcall GdipTranslateRegionI( ptr long long ) wine_GdipTranslateRegionI
599 stub GdipTranslateTextureTransform
600 stdcall GdipTranslateWorldTransform( ptr long long long ) wine_GdipTranslateWorldTransform
601 stdcall GdipVectorTransformMatrixPoints( ptr ptr long ) wine_GdipVectorTransformMatrixPoints
602 stdcall GdipVectorTransformMatrixPointsI( ptr ptr long ) wine_GdipVectorTransformMatrixPointsI
603 stdcall GdipWarpPath( ptr ptr long long long long long long long long ) wine_GdipWarpPath
604 stdcall GdipWidenPath( ptr ptr ptr long ) wine_GdipWidenPath
605 stdcall GdipWindingModeOutline( ptr ptr long ) wine_GdipWindingModeOutline
606 stub GdiplusNotificationHook
607 stub GdiplusNotificationUnhook
608 stdcall GdiplusShutdown( long ) wine_GdiplusShutdown
609 stdcall GdiplusStartup( ptr ptr ptr ) wine_GdiplusStartup

From dank at kegel.com  Wed Jan  2 16:18:38 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 2 Jan 2008 14:18:38 -0800
Subject: wine gdiplus <-> mono gdiplus wrapper
Message-ID: <a71bd89a0801021418r1aed6e70q689c26a8ed4840ff@mail.gmail.com>

Jerome wrote:
> I wrote a little script in order to wrap gdiplus with the mono one;
> Here are the source file and the spec file (this one made with winedump), but
> I have no idea how to compile it and/or include it in the wine source tree.
> Could you tell me what you think about it ? And if it has some utility ?

IIRC, the Mono gdiplus isn't so useful for us because it doesn't
deal with GDI handles the way we need.
That's one reason we have our own gdiplus now.
It might be more useful if you would look at fixing bugs
in our gdiplus rather than trying to wrap Mono's.
- Dan


From rob at codeweavers.com  Wed Jan  2 17:16:45 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Wed, 02 Jan 2008 23:16:45 +0000
Subject: comdlg32: Remove unneeded casts (Resend)
In-Reply-To: <200801022310.52502.andrew.talbot@talbotville.com>
References: <200801022310.52502.andrew.talbot@talbotville.com>
Message-ID: <477C1B5D.5010505@codeweavers.com>

Andrew Talbot wrote:
>            if (fodInfos->ofnInfos->Flags & OFN_ALLOWMULTISELECT)
>               size += 1;
>            /* return needed size in first two bytes of lpstrFile */
> -          *(WORD *)fodInfos->ofnInfos->lpstrFile = size;
> +          *fodInfos->ofnInfos->lpstrFile = size;
>            FILEDLG95_Clean(hwnd);
>            ret = EndDialog(hwnd, FALSE);
>            COMDLG32_SetCommDlgExtendedError(FNERR_BUFFERTOOSMALL);
> @@ -763,7 +763,7 @@ static BOOL PRINTDLG_SetUpPaperComboBoxW(HWND hDlg,
>      NrOfEntries = DeviceCapabilitiesW(PrinterName, PortName,
>                                        fwCapability_Names, Names, dm);
>      NrOfEntries = DeviceCapabilitiesW(PrinterName, PortName,
> -				      fwCapability_Words, (LPWSTR)Words, dm);
> +                                      fwCapability_Words, Words, dm);
>  
>      /* reset any current content in the combobox */
>      SendDlgItemMessageW(hDlg, nIDComboBox, CB_RESETCONTENT, 0, 0);
>   

I think these two casts should stay as LPWSTR is compatible with WORD * 
only by coincidence - one is intended to hold characters and the other 
numbers.

-- 
Rob Shearman



From dank at kegel.com  Wed Jan  2 17:28:20 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 2 Jan 2008 15:28:20 -0800
Subject: wine gdiplus <-> mono gdiplus wrapper
In-Reply-To: <3f4fd2640801021457padd93bdv63b583f18af6b494@mail.gmail.com>
References: <a71bd89a0801021418r1aed6e70q689c26a8ed4840ff@mail.gmail.com>
	<3f4fd2640801021457padd93bdv63b583f18af6b494@mail.gmail.com>
Message-ID: <a71bd89a0801021528n4c76fed6rfc8bd0371b2d4dc@mail.gmail.com>

On Jan 2, 2008 2:57 PM, Reece Dunn <msclrhd at googlemail.com> wrote:
> Are there any plans to use cairo in the Wine gdiplus implementation
> like mono does?

Not that I know of.  But I don't think that's a problem.

I think a more interesting question is, when are we going to
buckle down and implement a DIB engine?
- Dan


From olympia at skydreams.org  Wed Jan  2 18:12:26 2008
From: olympia at skydreams.org (olympia at skydreams.org)
Date: Thu, 3 Jan 2008 01:12:26 +0100 (CET)
Subject: TrackPopupMenu() and TPM_RECURSE 
Message-ID: <51450.80.216.209.132.1199319146.squirrel@webmail01.one.com>

Hi,

According to the MSDN documentation (see below), TrackPopupMenu() should
only display multiple popupmenus if TPM_RECURSE is used. At the moment,
Wine always seems to allow this and in some applications this results in
very confusing menu overlaps.

Moreover, the old popup menus will never be closed. This seems to
particularly be the case in applications that use TrackPopupMenuEx() for
their application menus.

I was looking at the code and was unsure of how existing popup menus in a
window should be safely closed when the application calls TrackPopupMenu()
a second or third time. Does anyone have a suggestion?

Best regards,

Nicholai



Windows 98/Me, Windows 2000/XP: Use the TPM_RECURSE flag to display a menu
when another menu is already displayed. This is intended to support
context menus within a menu.



From ovek at arcticnet.no  Wed Jan  2 20:42:32 2008
From: ovek at arcticnet.no (Ove Kaaven)
Date: Thu, 03 Jan 2008 03:42:32 +0100
Subject: wine gdiplus <-> mono gdiplus wrapper
In-Reply-To: <a71bd89a0801021528n4c76fed6rfc8bd0371b2d4dc@mail.gmail.com>
References: <a71bd89a0801021418r1aed6e70q689c26a8ed4840ff@mail.gmail.com>	<3f4fd2640801021457padd93bdv63b583f18af6b494@mail.gmail.com>
	<a71bd89a0801021528n4c76fed6rfc8bd0371b2d4dc@mail.gmail.com>
Message-ID: <477C4B98.8000408@arcticnet.no>

Dan Kegel skrev:
> On Jan 2, 2008 2:57 PM, Reece Dunn <msclrhd at googlemail.com> wrote:
>> Are there any plans to use cairo in the Wine gdiplus implementation
>> like mono does?
> 
> Not that I know of.  But I don't think that's a problem.
> 
> I think a more interesting question is, when are we going to
> buckle down and implement a DIB engine?

Maybe use cairo there... an advanced GDI-like "DIB engine" is part of it.




From damjan.jov at gmail.com  Thu Jan  3 02:41:44 2008
From: damjan.jov at gmail.com (Damjan Jovanovic)
Date: Thu, 3 Jan 2008 10:41:44 +0200
Subject: wine gdiplus <-> mono gdiplus wrapper
In-Reply-To: <477C4B98.8000408@arcticnet.no>
References: <a71bd89a0801021418r1aed6e70q689c26a8ed4840ff@mail.gmail.com>
	<3f4fd2640801021457padd93bdv63b583f18af6b494@mail.gmail.com>
	<a71bd89a0801021528n4c76fed6rfc8bd0371b2d4dc@mail.gmail.com>
	<477C4B98.8000408@arcticnet.no>
Message-ID: <9e89675b0801030041t6a3edaa5x7f2f0e5077ca315a@mail.gmail.com>

On Jan 3, 2008 4:42 AM, Ove Kaaven <ovek at arcticnet.no> wrote:
> Dan Kegel skrev:
>
> > On Jan 2, 2008 2:57 PM, Reece Dunn <msclrhd at googlemail.com> wrote:
> >> Are there any plans to use cairo in the Wine gdiplus implementation
> >> like mono does?
> >
> > Not that I know of.  But I don't think that's a problem.
> >
> > I think a more interesting question is, when are we going to
> > buckle down and implement a DIB engine?
>
> Maybe use cairo there... an advanced GDI-like "DIB engine" is part of it.

It probably isn't pixel-for-pixel identical to the Windows GDI.

Damjan


From blake at mcbride.name  Thu Jan  3 03:54:54 2008
From: blake at mcbride.name (Blake McBride)
Date: Thu, 03 Jan 2008 03:54:54 -0600
Subject: Can't figure out how tolink a program
Message-ID: <477CB0EE.2040309@mcbride.name>


I have a library built under Linux with Wine (mylib.a) that uses various 
Windows API (mainly GUI) that built fine.  I compiled the main program 
from .c to .o and from .rc to .res just fine.  My problem is I can't 
figure our what command line to use to link:

    myprogram.o
    myprogram.res
    mylib.a

In other words, when I try to link it all together I get a bunch of 
unresolved externals on things like:

    ReleaseDC
    GetDC
    SendMessageA
    MulDiv
    GlobalAlloc
    etc.......

I don't know what gcc command line argument to load the normal API's.

I checked all the online docs.  There are no examples and the docs that 
do exist state that hey are out-of-date.

I would really appreciate a few simple example command lines to link a 
program with the normal API's AND my .res file.

Thank you.

Blake McBride
blake at mcbride.name



From msclrhd at googlemail.com  Wed Jan  2 16:57:12 2008
From: msclrhd at googlemail.com (Reece Dunn)
Date: Wed, 2 Jan 2008 22:57:12 +0000
Subject: wine gdiplus <-> mono gdiplus wrapper
In-Reply-To: <a71bd89a0801021418r1aed6e70q689c26a8ed4840ff@mail.gmail.com>
References: <a71bd89a0801021418r1aed6e70q689c26a8ed4840ff@mail.gmail.com>
Message-ID: <3f4fd2640801021457padd93bdv63b583f18af6b494@mail.gmail.com>

On 02/01/2008, Dan Kegel <dank at kegel.com> wrote:
> Jerome wrote:
> > I wrote a little script in order to wrap gdiplus with the mono one;
> > Here are the source file and the spec file (this one made with winedump), but
> > I have no idea how to compile it and/or include it in the wine source tree.
> > Could you tell me what you think about it ? And if it has some utility ?
>
> IIRC, the Mono gdiplus isn't so useful for us because it doesn't
> deal with GDI handles the way we need.
> That's one reason we have our own gdiplus now.
> It might be more useful if you would look at fixing bugs
> in our gdiplus rather than trying to wrap Mono's.

Are there any plans to use cairo in the Wine gdiplus implementation
like mono does? Or would that need a winecairo.drv?

- Reece


From jcmontes at cert.inteco.es  Thu Jan  3 01:01:53 2008
From: jcmontes at cert.inteco.es (Juan Carlos Montes)
Date: Thu, 03 Jan 2008 08:01:53 +0100
Subject: Bow and question
Message-ID: <fli191$69i$1@ger.gmane.org>

Hi all,

I am new in this list, so... Hello!!!

Well, I work in a CERT and we are create a automatic malware detection tool with
wine.

On the first part the project we use the debug log to monitorize the file
access, registry...

I want know where can i find the option to WINEDEBUG.

In this time, we are used trace+file, trace+reg.

Can trace the sockets??

Kind regards

PD: Sorry for my english, :P

_______________________________________________________________________________
Juan Carlos Montes Senra
INTECO-CERT
Instituto Nacional de Tecnolog?as de la Comunicaci?n
email: juancarlos.montes at inteco.es | jcmontes at cert.inteco.es
Tlf. 0034 987 877 189 - ext. 532
_______________________________________________________________________________




From dmitry at codeweavers.com  Thu Jan  3 04:51:24 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Thu, 3 Jan 2008 18:51:24 +0800
Subject: wine gdiplus <-> mono gdiplus wrapper
References: <a71bd89a0801021418r1aed6e70q689c26a8ed4840ff@mail.gmail.com>
	<3f4fd2640801021457padd93bdv63b583f18af6b494@mail.gmail.com>
Message-ID: <023a01c84df6$974cb760$a600fea9@DMITRY>

"Reece Dunn" <msclrhd at googlemail.com> wrote:

> Are there any plans to use cairo in the Wine gdiplus implementation
> like mono does? Or would that need a winecairo.drv?

gdiplus is just a wrapper (mostly) around gdi32 APIs. IMHO spreding
around ideas about introducing a Wine dependency on cairo missing
the point of its usefulness.

-- 
Dmitry.


From julliard at winehq.org  Thu Jan  3 04:56:50 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 03 Jan 2008 11:56:50 +0100
Subject: [1/7] msxml3:  Implement setNamedItem
In-Reply-To: <flestb$bg7$1@ger.gmane.org> (Alistair Leslie-Hughes's message of
	"Wed, 02 Jan 2008 13:27:22 +1100")
References: <flestb$bg7$1@ger.gmane.org>
Message-ID: <87ir2bb2j1.fsf@wine.dyndns.org>

Alistair Leslie-Hughes <leslie_alistair at hotmail.com> writes:

> +    /* Must be an Attribute */
> +    IUnknown_QueryInterface(newItem, &IID_IXMLDOMNode, (LPVOID*)&pAttr);
> +    if(pAttr)
> +    {
> +        ThisNew = impl_from_IXMLDOMNode( pAttr );
> +
> +        IUnknown_Release(pAttr);
> +        
> +        if(ThisNew->node->type != XML_ATTRIBUTE_NODE)
> +            return E_FAIL;    

You shouldn't access the object after having released it.

-- 
Alexandre Julliard
julliard at winehq.org


From dank at kegel.com  Thu Jan  3 05:30:16 2008
From: dank at kegel.com (Dan Kegel)
Date: Thu, 3 Jan 2008 03:30:16 -0800
Subject: Bow and question
Message-ID: <a71bd89a0801030330g3ae74a7uebc4e172b63bd65d@mail.gmail.com>

Juan wrote:
> I want know where can i find the option to WINEDEBUG.
> In this time, we are used trace+file, trace+reg.
> Can trace the sockets??

When I need to figure out WINEDEBUG flags, I always use grep, e.g.

dank at lappy:~/wine-git/dlls$ grep DEFAULT_DEBUG ws*/*.c
ws2_32/async.c:WINE_DEFAULT_DEBUG_CHANNEL(winsock);
ws2_32/protocol.c:WINE_DEFAULT_DEBUG_CHANNEL(winsock);
ws2_32/socket16.c:WINE_DEFAULT_DEBUG_CHANNEL(winsock);
ws2_32/socket.c:WINE_DEFAULT_DEBUG_CHANNEL(winsock);
wsock32/service.c:WINE_DEFAULT_DEBUG_CHANNEL(winsock);
wsock32/socket.c:WINE_DEFAULT_DEBUG_CHANNEL(winsock);

So yes, try +winsock.

So how well is Wine running the malware you're interested in?
- Dan


From saulius2 at ar.fi.lt  Thu Jan  3 06:03:37 2008
From: saulius2 at ar.fi.lt (Saulius Krasuckas)
Date: Thu, 3 Jan 2008 14:03:37 +0200 (EET)
Subject: I am at the Ubuntu Developer Summit, do we need anything from
	other projects?
In-Reply-To: <20071031033957.GA16097@tuzakey>
References: <20071030225458.GB14718@tuzakey>
	<1193801516.3040.458.camel@dimi.lattica.com>
	<20071031033957.GA16097@tuzakey>
Message-ID: <Pine.LNX.4.62.0801031359110.9676@tvarka.ar.fi.lt>

* On Tue, 30 Oct 2007 scott at tuzakey.com wrote:
> * On Tue, Oct 30, 2007 at 11:31:56PM -0400, Dimi Paun wrote:
> > * On Tue, 2007-10-30 at 15:54 -0700, scott at tuzakey.com wrote:
> > > 
> > > The other day an X.org developer asked me if Wine needed anything 
> > > from X.  Off the top of my head, all I could think to tell him was 
> > > relative mouse movements.
> > > 
> > > There are people from many free software projects here, including 
> > > the kernel and Samba.  Should I voice anything else?
> > 
> > http://wiki.winehq.org/FromOtherProjects
> 
> Heh, I did make that page after all ;)
> 
> If anyone has any updates to it, please do them now.

I am probably too late, but a way to get exact amount of memory of active 
graphics controller would be usefull for Wine too.


From dank06 at kegel.com  Thu Jan  3 08:35:35 2008
From: dank06 at kegel.com (Dan Kegel)
Date: Thu, 3 Jan 2008 06:35:35 -0800
Subject: So, you want to fix typos?
In-Reply-To: <a71bd89a0712292148i394d4004habfca647842f3715@mail.gmail.com>
References: <a71bd89a0712292148i394d4004habfca647842f3715@mail.gmail.com>
Message-ID: <a71bd89a0801030635y6c051a09qde0dd6be73825f50@mail.gmail.com>

On Dec 29, 2007 9:48 PM, Dan Kegel <dank at kegel.com> wrote:
> That reminds me that I worked out some time ago how
> to find such typos efficiently.  At the risk of encouraging lots
> of silly typo-fixing patches, I've documented the process here:
> http://kegel.com/wine/spellingpolice/

It looks like Alexandre is accepting patches to fix typos in comments.
See
 http://www.winehq.org/pipermail/wine-cvs/2008-January/039273.html
 http://www.winehq.org/pipermail/wine-cvs/2008-January/039274.html


From julliard at winehq.org  Thu Jan  3 09:26:29 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 03 Jan 2008 16:26:29 +0100
Subject: mshtml #1: Includes clean up. (resend)
In-Reply-To: <477D009C.50608@codeweavers.com> (Jacek Caban's message of "Thu, 
	03 Jan 2008 16:34:52 +0100")
References: <477D009C.50608@codeweavers.com>
Message-ID: <877iiraq1m.fsf@wine.dyndns.org>

Jacek Caban <jacek at codeweavers.com> writes:

> diff --git a/dlls/mshtml/mshtml_private.h b/dlls/mshtml/mshtml_private.h
> index c981348..e0c94c3 100644
> --- a/dlls/mshtml/mshtml_private.h
> +++ b/dlls/mshtml/mshtml_private.h
> @@ -16,6 +16,19 @@
>   * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
>   */
>  
> +#include "config.h"
> +
> +#include <stdarg.h>
> +#include <stdio.h>

You can't use config.h from a header file.

-- 
Alexandre Julliard
julliard at winehq.org


From stefandoesinger at gmx.at  Thu Jan  3 09:27:27 2008
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Thu, 3 Jan 2008 16:27:27 +0100
Subject: [5/5] wined3d: change colorkey fixup for stage 0 alphaop
	=?iso-8859-1?q?/=09alphaarg?=
In-Reply-To: <477C709A.1020501@inbox.lv>
References: <477B85E1.40704@inbox.lv>
	<200801021653.18803.stefandoesinger@gmx.at>
	<477C709A.1020501@inbox.lv>
Message-ID: <200801031627.27350.stefandoesinger@gmx.at>

Am Donnerstag, 3. Januar 2008 06:20:26 schrieb Alexander Dorofeyev:
> Oh now I see this case I haven't thought about. For some reason, or maybe
> no reason at all, Moto racer sets alphaop to selectarg1 and alphaarg1 to
> current (diffuse)! That looks kind of strange (if it then gives vertices
> with diffuse alpha = 0), but maybe it's just "optimizing" by setting states
> it will need later. And it expects it to work despite diffuse alpha is 0
> because it disables alpha blending and alpha test. In wine though the
> latter state is overriden by colorkey emulation so the result is bad. But I
> think this can be sorted out by checking ALPHABLENDENABLE, because it's
> probably a reasonable indicator for telling whether the app is going to
> give something meaningful in diffuse alpha or not. Do you think something
> along the lines of attached patch can be an acceptable solution? With it,
> AVP1 game works properly and it also seems to bring back geometry in moto
> racer, at least as far as I can tell.
Yes, I think this idea is quite nice. It makes a bit of a hacky impression, 
but the color keying emulation is a hack after all. Only one small 
suggestion, I think you don't have to call tex_alphaop unconditionally in 
state_blend, I think this is only needed if COLORKEYENABLE is on.

On a sidenode, somewhere I've seen a document stating that the Nvidia Windows 
driver emulates color keying with the alpha test as well:

http://developer.nvidia.com/object/ColorKey_in_D3D.html

It implements the alpha setting in a slightly different way, and I am not sure 
if we can emulate that without a fragment shader. Still it's an interesting 
read.


From lich at math.spbu.ru  Thu Jan  3 09:39:46 2008
From: lich at math.spbu.ru (Kirill K. Smirnov)
Date: Thu, 3 Jan 2008 18:39:46 +0300
Subject: missed patches
Message-ID: <200801031839.47129.lich@math.spbu.ru>

  Hi,
Is there something wrong with these couple of patches?

http://www.winehq.org/pipermail/wine-patches/2007-December/048436.html
kernel32/console: convert newborn wineserver handle to kernel32 console 
handle.
This patch makes screenbuffer handle, returned by CreateConsoleScreenBuffer 
function, be a really "console" handle (h&3 == 3). Fixes behaviour of 
WriteFile function called upon this handle.

and

http://www.winehq.org/pipermail/wine-patches/2007-December/048291.html
tools/wineshelllink: do not execute applications directly, use 'start' utility 
instead
This patch allows to create correct desktop/menu shortcuts for console 
applications (e.g. Far Manager).
I've caught on the idea suggested by Vitaliy (If console needs to be created 
for those apps and there isn't one, then Wine should do it when starting an 
app.), but I cannot understand how to check it - dumb console always present 
(even redirected to /dev/null):
http://www.winehq.org/pipermail/wine-devel/2007-December/061399.html

If I missed something important just let me know.

Thanks,
--
Kirill


From jcmontes at cert.inteco.es  Thu Jan  3 05:48:50 2008
From: jcmontes at cert.inteco.es (Juan Carlos Montes Senra)
Date: Thu, 03 Jan 2008 12:48:50 +0100
Subject: Bow and question
In-Reply-To: <a71bd89a0801030330g3ae74a7uebc4e172b63bd65d@mail.gmail.com>
References: <a71bd89a0801030330g3ae74a7uebc4e172b63bd65d@mail.gmail.com>
Message-ID: <477CCBA2.6040902@cert.inteco.es>

Dan Kegel escribi?:
> So how well is Wine running the malware you're interested in?
> - Dan


Thanks, I found a lot options in the web but didnt know DEFAULT_DEBUG_CHANNEL
const, :)

So, we only try a few malware, [ 3 files ], but all ran correctly.
Two files was compiled in VisualC, and the last one in VisualBasic. We was
needed to install the visualbasic runtime, but it was the only problem.

Well, if you need anything, tell me it, :)


thanks another time,

_______________________________________________________________________________
Juan Carlos Montes Senra
INTECO-CERT
Instituto Nacional de Tecnolog?as de la Comunicaci?n
email: juancarlos.montes at inteco.es | jcmontes at cert.inteco.es
Tlf. 0034 987 877 189 - ext. 532
_______________________________________________________________________________




From taril_laszlo at yahoo.co.uk  Thu Jan  3 10:35:53 2008
From: taril_laszlo at yahoo.co.uk (=?iso-8859-1?Q?L=E1szl=F3_Tari?=)
Date: Thu, 3 Jan 2008 16:35:53 +0000 (GMT)
Subject: Another Shader/Offscreenrender problem
Message-ID: <419236.7924.qm@web26101.mail.ukl.yahoo.com>

Tomb Raider Anniversary/Need 4 Speed Carbon
When these fog-thing appear n the game, the frame rate suddenly decreased. (Depth of Field is on)





      __________________________________________________________
Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080103/e478e228/attachment-0001.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: fog.jpg
Type: image/jpeg
Size: 120192 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080103/e478e228/attachment-0001.jpg 

From jcmontes at cert.inteco.es  Thu Jan  3 10:39:49 2008
From: jcmontes at cert.inteco.es (Juan Carlos Montes Senra)
Date: Thu, 03 Jan 2008 17:39:49 +0100
Subject: Bow and question
In-Reply-To: <a71bd89a0801030330g3ae74a7uebc4e172b63bd65d@mail.gmail.com>
References: <a71bd89a0801030330g3ae74a7uebc4e172b63bd65d@mail.gmail.com>
Message-ID: <477D0FD5.9040009@cert.inteco.es>

Dan Kegel escribi?:
> > So how well is Wine running the malware you're interested in?
> > - Dan


Thanks, I found a lot options in the web but didnt know DEFAULT_DEBUG_CHANNEL
const,  :)

So, we only try a few malware, [ 3 files ], but all ran correctly.
Two files was compiled in VisualC, and the last one in VisualBasic. We was
needed to install the visualbasic runtime, but it was the only problem.

Well, if you need anything, tell me it,  :)


thanks another time,

_______________________________________________________________________________
Juan Carlos Montes Senra
INTECO-CERT
Instituto Nacional de Tecnolog?as de la Comunicaci?n
email: juancarlos.montes at inteco.es | jcmontes at cert.inteco.es
Tlf. 0034 987 877 189 - ext. 532
_______________________________________________________________________________





From thestig at google.com  Thu Jan  3 12:50:39 2008
From: thestig at google.com (Lei Zhang)
Date: Thu, 3 Jan 2008 10:50:39 -0800
Subject: What happened to the videos from WineConf?
In-Reply-To: <47752A3A.7010704@codeweavers.com>
References: <47752A3A.7010704@codeweavers.com>
Message-ID: <558b2f5c0801031050h3ea3bb4aq35a696884ef68836@mail.gmail.com>

On Dec 28, 2007 8:54 AM, Maarten Lankhorst <maarten at codeweavers.com> wrote:
> I remember at wineconf there were some videos created, what happened
> with those? I tried to look on youtube for wineconf, but I didn't find
> anything. Are they online yet? Or will they be put online?
>
> -Maarten
>
>
>

Three videos were uploaded to Youtube last night:

Alexandre's Keynote
http://www.youtube.com/watch?v=GqEp8psjv5s

Detlef Riekenberg - Printing in Wine
http://www.youtube.com/watch?v=1-n6mClDdBQ

Kai Blin - Wine and Samba
http://www.youtube.com/watch?v=ToKeJbQ87c0

- Lei


From donpedro at tdcadsl.dk  Thu Jan  3 18:49:25 2008
From: donpedro at tdcadsl.dk (Peter Dons Tychsen)
Date: Fri, 04 Jan 2008 01:49:25 +0100
Subject: xrandx responds with too many modes.
Message-ID: <1199407765.4321.21.camel@dhcppc4>

The xrandx X11 extension is very handy.
Using it for wine makes great sense.

But... the extension also enumerates a whopping amount of modes.
Each resolution has a multitude of frequencies and bit-depth variants.

Some applications are simply not prepared for that magnitude of
information when they call EnumDisplaySettings() (user32) or
EnumDisplayModes (ddraw).

When using "normal" windows, only a few modes are returned.

I know its not a bug, as it could happen on Windows if someone published
a driver which implemented tons of silly and crooked modes.

Would it be acceptable to insert a filter in xrandx.c (X11-drv),
which only allowed "normal" windows resolutions to be enumerated?
Does anyone need those awkward ones? 

The filter would look allot like the one in desktop.c (X11-drv) which is
currently used by the desktop mode.

I already fixed a portion of the bugs caused by this, as there was a 
natural limitation which should be set by EnumDisplayModes() which was
not honored. I sent in patch for this already. So at least now we can
play the classic "Grand Theft Auto"....

Thanks,

/p



From donpedro at tdcadsl.dk  Thu Jan  3 21:39:16 2008
From: donpedro at tdcadsl.dk (Peter Dons Tychsen)
Date: Fri, 04 Jan 2008 04:39:16 +0100
Subject: USER32 - SPI_GETMOUSE missing a default value.
Message-ID: <1199417956.4321.30.camel@dhcppc4>

I have an app which is bailing out because it cannot get valid data
from SPI_GETMOUSE - and indeed this reg key does not exist.

The key should be in "Control Panel\\Colors" under CURRENT_USER.

There are similar values in the "Control Panel" folder in the registry.

Is there a reason this value is not initialized ?

If i want to fix it, then:

1) Where is the best place to initialize values like these? I presume
its during boot, where the mouse values should be read?

2) Should i get the mouse data from X11 or just simulate something?

/p



From leslie_alistair at hotmail.com  Thu Jan  3 22:53:47 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Fri, 4 Jan 2008 15:53:47 +1100
Subject: Local file in Web Browser doesnt load
Message-ID: <flke7u$lkt$1@ger.gmane.org>

Hi,

An application that I'm using contains a internal web browser based off the 
IWebBrowser2 interface.

Loading a webpage from a web server works as expected, but when I try to use 
the
"file://C:\myTestPage.html" syntax the file fails to load.

NOTE: myTestPage.html has a single paragraph with one line of text

Are local files supported in the web browser?
Do I need to call a function besides Naviagate2() to load the file?

Best Regards
 Alistair Leslie-Hughes 




From dmitry at codeweavers.com  Fri Jan  4 00:16:48 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Fri, 4 Jan 2008 14:16:48 +0800
Subject: USER32 - SPI_GETMOUSE missing a default value.
References: <1199417956.4321.30.camel@dhcppc4>
Message-ID: <013001c84e99$665e5480$a600fea9@DMITRY>

"Peter Dons Tychsen" <donpedro at tdcadsl.dk> wrote:

> I have an app which is bailing out because it cannot get valid data
> from SPI_GETMOUSE - and indeed this reg key does not exist.
> 
> The key should be in "Control Panel\\Colors" under CURRENT_USER.

That's a wrong key name.

> There are similar values in the "Control Panel" folder in the registry.
> 
> Is there a reason this value is not initialized ?

SPI_GETMOUSE should work just fine, do you have a sample code which
doesn't work? Is the app trying to read the registry directly without
using SystemParametersInfo?

-- 
Dmitry.


From hverbeet at gmail.com  Fri Jan  4 02:22:04 2008
From: hverbeet at gmail.com (H. Verbeet)
Date: Fri, 4 Jan 2008 09:22:04 +0100
Subject: xrandx responds with too many modes.
In-Reply-To: <1199407765.4321.21.camel@dhcppc4>
References: <1199407765.4321.21.camel@dhcppc4>
Message-ID: <d658b69e0801040022v16357fe6v5ced3696f315b6c6@mail.gmail.com>

On 04/01/2008, Peter Dons Tychsen <donpedro at tdcadsl.dk> wrote:
> The xrandx X11 extension is very handy.
> Using it for wine makes great sense.
>
> But... the extension also enumerates a whopping amount of modes.
> Each resolution has a multitude of frequencies and bit-depth variants.
>
> Some applications are simply not prepared for that magnitude of
> information when they call EnumDisplaySettings() (user32) or
> EnumDisplayModes (ddraw).
>
> When using "normal" windows, only a few modes are returned.
>
> I know its not a bug, as it could happen on Windows if someone published
> a driver which implemented tons of silly and crooked modes.
>
> Would it be acceptable to insert a filter in xrandx.c (X11-drv),
> which only allowed "normal" windows resolutions to be enumerated?
> Does anyone need those awkward ones?
>
> The filter would look allot like the one in desktop.c (X11-drv) which is
> currently used by the desktop mode.
>
> I already fixed a portion of the bugs caused by this, as there was a
> natural limitation which should be set by EnumDisplayModes() which was
> not honored. I sent in patch for this already. So at least now we can
> play the classic "Grand Theft Auto"....
>
> Thanks,
>
> /p
>
Is this with a specific X driver? The binary nvidia driver only lists
modes explicitly declared in xorg.conf.


From hverbeet at gmail.com  Fri Jan  4 02:31:05 2008
From: hverbeet at gmail.com (H. Verbeet)
Date: Fri, 4 Jan 2008 09:31:05 +0100
Subject: [PATCH] ddraw: Return a nullpointer as lpSurface in Lock() if the
	rect is invalid.
In-Reply-To: <1199395133.3581.2.camel@localhost>
References: <1199395133.3581.2.camel@localhost>
Message-ID: <d658b69e0801040031n15574e44h24b120ddfc59f40b@mail.gmail.com>

On 03/01/2008, G?nther Brammer <GBrammer at gmx.de> wrote:
> +            ok(!locked_desc.lpSurface, "IDirectDrawSurface_Lock did not set lpSurface in the surface desc\n");
>
That isn't the clearest message. It should probably say it didn't set
lpSurface to NULL.


From julliard at winehq.org  Fri Jan  4 05:05:51 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 04 Jan 2008 12:05:51 +0100
Subject: mshtml #4: Includes clean up. (fixed)
In-Reply-To: <477D82C7.9030202@codeweavers.com> (Jacek Caban's message of
	"Fri, 04 Jan 2008 01:50:15 +0100")
References: <477D82C7.9030202@codeweavers.com>
Message-ID: <87hchtam0g.fsf@wine.dyndns.org>

Jacek Caban <jacek at codeweavers.com> writes:

> diff --git a/dlls/mshtml/install.c b/dlls/mshtml/install.c
> index 731af60..2437797 100644
> --- a/dlls/mshtml/install.c
> +++ b/dlls/mshtml/install.c
> @@ -18,33 +18,23 @@
>  
>  #include "config.h"
>  
> -#include <stdarg.h>
> +#include "mshtml_private.h"
> +#include "resource.h"
> +
>  #include <fcntl.h>
>  #ifdef HAVE_UNISTD_H
>  # include <unistd.h>
>  #endif

It's not a good idea to include Unix headers after the Windows ones,
that can create trouble.

I have to admit I'm not a big fan of that sort of one include to rule
them all approach, I think it's better to have each file maintain
control over what it includes and in which order. The global
mshtml_private.h header should only include the stuff it itself depends
on, not every single header that any source file may want to use.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Fri Jan  4 05:11:52 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 04 Jan 2008 12:11:52 +0100
Subject: dlls/kernel32/task.c -- minor improvement
In-Reply-To: <Pine.LNX.4.64.0801032234190.23403@acrux.dbai.tuwien.ac.at>
	(Gerald Pfeifer's message of "Thu, 3 Jan 2008 22:46:56 +0100 (CET)")
References: <Pine.LNX.4.64.0801032234190.23403@acrux.dbai.tuwien.ac.at>
Message-ID: <87d4shalqf.fsf@wine.dyndns.org>

Gerald Pfeifer <gerald at pfeifer.com> writes:

> Index: dlls/kernel32/task.c
> ===================================================================
> RCS file: /home/wine/wine/dlls/kernel32/task.c,v
> retrieving revision 1.2
> diff -u -3 -p -r1.2 task.c
> --- dlls/kernel32/task.c	13 Oct 2006 10:27:19 -0000	1.2
> +++ dlls/kernel32/task.c	3 Jan 2008 21:33:44 -0000
> @@ -57,7 +57,7 @@ typedef struct
>      WORD  magic;      /* Thunks signature */
>      WORD  unused;
>      WORD  free;       /* Head of the free list */
> -    WORD  thunks[4];  /* Each thunk is 4 words long */
> +    WORD  thunks[];   /* Each thunk is 4 words long */
>  } THUNKS;

That syntax is not portable.

-- 
Alexandre Julliard
julliard at winehq.org


From Donnette39 at aol.com  Fri Jan  4 03:29:33 2008
From: Donnette39 at aol.com (Donnette39 at aol.com)
Date: Fri, 4 Jan 2008 04:29:33 EST
Subject: DIB Driver code available
Message-ID: <c7c.1e4030d5.34af567d@aol.com>

Bonjour,
 
Je cherche le "DIB Driver" qui me permettrait de faire fonctionner le  
logiciel PSDWin.
Pouvez-vous m'aider ?
Merci,
Lyonel Donnette



   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080104/01982ad8/attachment.htm 

From tony.wasserka at freenet.de  Fri Jan  4 06:46:22 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Fri, 04 Jan 2008 13:46:22 +0100
Subject: d3dx implementation senseless?
Message-ID: <E1JAlwM-0008Kq-96@www13.emo.freenet-rz.de>

Hi,
I enjoyed the current wine development of the D3DX libraries and also tried to implement an interface.
However, while testing it I noticed that Wine seems to fully support everything when it has a native
d3dx9.dll (though it even was able to run one of my games without any dll...). So I was asking myself
if there's even a reason to implement anything other than the inlined functions of D3DX, when we only
lose performance and development time with it. Also, what would we do at functions like
D3DXCreateTextureFromFile which supports 9 file formats? Would we implement e.g. a BMP file
loader ourselves or would we use a 3rd party library for that? Are there any patents regarding the
DX specific file formats (.x/.dds)? Don't misunderstand me, I'd also like to help out at D3DX, but I
really think we'd be better off by removing everything of D3DX but the inlined stuff.
    Best regards,
        Tony Wasserka


(PS: if one argues that we need the implementation for WineLib, I _think_ it'd be enough to just
stub all functions so that the program compiles fine and then use the native dll again)













From marcus at jet.franken.de  Fri Jan  4 07:12:33 2008
From: marcus at jet.franken.de (Marcus Meissner)
Date: Fri, 4 Jan 2008 14:12:33 +0100
Subject: d3dx implementation senseless?
In-Reply-To: <E1JAlwM-0008Kq-96@www13.emo.freenet-rz.de>
References: <E1JAlwM-0008Kq-96@www13.emo.freenet-rz.de>
Message-ID: <20080104131232.GB11485@galeere>

On Fri, Jan 04, 2008 at 01:46:22PM +0100, tony.wasserka at freenet.de wrote:
> Hi,
> I enjoyed the current wine development of the D3DX libraries and also tried to implement an interface.
> However, while testing it I noticed that Wine seems to fully support everything when it has a native
> d3dx9.dll (though it even was able to run one of my games without any dll...). So I was asking myself
> if there's even a reason to implement anything other than the inlined functions of D3DX, when we only
> lose performance and development time with it. Also, what would we do at functions like
> D3DXCreateTextureFromFile which supports 9 file formats? Would we implement e.g. a BMP file
> loader ourselves or would we use a 3rd party library for that? Are there any patents regarding the
> DX specific file formats (.x/.dds)? Don't misunderstand me, I'd also like to help out at D3DX, but I
> really think we'd be better off by removing everything of D3DX but the inlined stuff.
>     Best regards,
>         Tony Wasserka
> 

Well, does the d3dx* DLL license permit redistribution and use with 
Wine?

I pretty much doubt so.

So this alone would be a reason to implement them.

Ciao, Marcus


From mstefani at redhat.com  Fri Jan  4 08:47:13 2008
From: mstefani at redhat.com (Michael Stefaniuc)
Date: Fri, 04 Jan 2008 15:47:13 +0100
Subject: xrandx responds with too many modes.
In-Reply-To: <d658b69e0801040022v16357fe6v5ced3696f315b6c6@mail.gmail.com>
References: <1199407765.4321.21.camel@dhcppc4>
	<d658b69e0801040022v16357fe6v5ced3696f315b6c6@mail.gmail.com>
Message-ID: <477E46F1.3000004@redhat.com>

H. Verbeet wrote:
> On 04/01/2008, Peter Dons Tychsen <donpedro at tdcadsl.dk> wrote:
>> The xrandx X11 extension is very handy.
>> Using it for wine makes great sense.
>>
>> But... the extension also enumerates a whopping amount of modes.
>> Each resolution has a multitude of frequencies and bit-depth variants.
>>
>> Some applications are simply not prepared for that magnitude of
>> information when they call EnumDisplaySettings() (user32) or
>> EnumDisplayModes (ddraw).
>>
>> When using "normal" windows, only a few modes are returned.
>>
>> I know its not a bug, as it could happen on Windows if someone published
>> a driver which implemented tons of silly and crooked modes.
>>
>> Would it be acceptable to insert a filter in xrandx.c (X11-drv),
>> which only allowed "normal" windows resolutions to be enumerated?
>> Does anyone need those awkward ones?
>>
>> The filter would look allot like the one in desktop.c (X11-drv) which is
>> currently used by the desktop mode.
>>
>> I already fixed a portion of the bugs caused by this, as there was a
>> natural limitation which should be set by EnumDisplayModes() which was
>> not honored. I sent in patch for this already. So at least now we can
>> play the classic "Grand Theft Auto"....
>>
>> Thanks,
>>
>> /p
>>
> Is this with a specific X driver? The binary nvidia driver only lists
> modes explicitly declared in xorg.conf.
Huh? I don't declare any mode in the xorg.conf and i'm using the nvidia
binary driver. The drivers can figure out nowadays what works or
doesn't. I get 9 modes back but i have a max resolution of only 1280x1024.

bye
	michael
-- 
Michael Stefaniuc                           Tel.: +49-711-96437-199
Consulting Communications Engineer          Fax.: +49-711-96437-111
--------------------------------------------------------------------
Reg. Adresse: Red Hat GmbH, Hauptst?tter Strasse 58, 70178 Stuttgart
Handelsregister: Amtsgericht Stuttgart HRB 153243
Gesch?ftsf?hrer: Brendan Lane, Charlie Peters, Michael Cunningham,
                 Werner Knoblich


From jonathan at ernstfamily.ch  Fri Jan  4 09:12:51 2008
From: jonathan at ernstfamily.ch (Jonathan Ernst)
Date: Fri, 04 Jan 2008 16:12:51 +0100
Subject: French LTEXT correction
In-Reply-To: <477E0943.9050100@gmail.com>
References: <477E0943.9050100@gmail.com>
Message-ID: <1199459571.6824.7.camel@jernst-desktop>


On ven, 2008-01-04 at 11:24 +0100, Vincent Hardy wrote:
> Regedit displays "Rechercher::". Now Regedit displays "Rechercher :" and 
> so on...

It doesn't here (?). Furthermore in French ":" should be preceded by an
unbreakable space (like it's the case now) and not a normal space.




From donpedro at tdcadsl.dk  Fri Jan  4 09:29:19 2008
From: donpedro at tdcadsl.dk (Peter Dons Tychsen)
Date: Fri, 04 Jan 2008 16:29:19 +0100
Subject: xrandx responds with too many modes.
Message-ID: <1199460559.3032.9.camel@dhcppc4>

On Thu, 2008-01-03 at 22:46 -0600, Clarence Risher wrote:
> I regularly use 640x512 in wine, when that resolution wouldnt be
> reported by the driver in windows.  Dunno if you consider that a
> "normal" resolution.

Just out of curiosity, what do you use this for?
Whats wrong with the 640 x 480? Why do you need the extra 640x32 pixels?

Another way of fixing the problem could be to limit the amount
of frequency variants. Not sure if wine can use them for anything 
useful anyway. Could we report all modes at just 60Hz, or
would that be too naughty? 

This is actually what is done for the desktop implementation, so it
might work. This would also be easy to change in xrandx.c as the 
frequencies are handled separately.

/p



From donpedro at tdcadsl.dk  Fri Jan  4 09:48:14 2008
From: donpedro at tdcadsl.dk (Peter Dons Tychsen)
Date: Fri, 04 Jan 2008 16:48:14 +0100
Subject: d3dx implementation senseless?
In-Reply-To: <20080104130338.OYLI5833.fep27.mail.dk@wine.codeweavers.com>
References: <20080104130338.OYLI5833.fep27.mail.dk@wine.codeweavers.com>
Message-ID: <1199461694.3032.26.camel@dhcppc4>

I do not think patents which are blocking your ability to use the DLLs
in Wine. It is your Windows license.

I believe that if you have a Windows license for your machine, you are
free to use Windows or its DLLs. This includes all the "free" downloads
from their web-pages. I think, if you do not have a license for that
machine, you are in violation of the license, which is illegal.

I am not sure i got all the details right but you can probably find more
on their web-page.

If i understand it correctly, it of course means that there are no
really free downloads on their web-page, as they all rely on a purchase
of Windows. This makes the "free" download kind of expensive. 

For Wine it means that anything the user has to D/L from their homepage
is a no-no.

/p

On Fri, 2008-01-04 at 13:46 +0100, tony.wasserka at freenet.de wrote:
> Hi,
> I enjoyed the current wine development of the D3DX libraries and also tried to implement an interface.
> However, while testing it I noticed that Wine seems to fully support everything when it has a native
> d3dx9.dll (though it even was able to run one of my games without any dll...). So I was asking myself
> if there's even a reason to implement anything other than the inlined functions of D3DX, when we only
> lose performance and development time with it. Also, what would we do at functions like
> D3DXCreateTextureFromFile which supports 9 file formats? Would we implement e.g. a BMP file
> loader ourselves or would we use a 3rd party library for that? Are there any patents regarding the
> DX specific file formats (.x/.dds)? Don't misunderstand me, I'd also like to help out at D3DX, but I
> really think we'd be better off by removing everything of D3DX but the inlined stuff.
>     Best regards,
>         Tony Wasserka
> 
> 
> (PS: if one argues that we need the implementation for WineLib, I _think_ it'd be enough to just
> stub all functions so that the program compiles fine and then use the native dll again)
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 



From fgouget at free.fr  Fri Jan  4 09:58:15 2008
From: fgouget at free.fr (Francois Gouget)
Date: Fri, 4 Jan 2008 16:58:15 +0100 (CET)
Subject: Some more spelling fixes.
In-Reply-To: <b6bb06270801030956t40831340r666e5c76cb72874d@mail.gmail.com>
References: <b6bb06270801030956t40831340r666e5c76cb72874d@mail.gmail.com>
Message-ID: <alpine.DEB.0.99999.0801041651340.12546@amboise.dolphin>


> -	       /* test has been removed 'coz MMSYSERR_BASE is 0, and gcc did emit
> +	       /* test has been removed because MMSYSERR_BASE is 0, and gcc did emit

I'd say "'coz" is not a typo, but was written that way intentionally to 
give a 'slang-ish' tone to the comment by someone who knows full well 
the standard spelling. As such it should not be modified.


> -    /* wmd must be inserted in list before sending opening the driver, coz' it
> +    /* wmd must be inserted in list before sending opening the driver, because it

This one however should have its spelling fixed to "'coz".


-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
     Linux, WinNT, MS-DOS - also known as the Good, the Bad and the Ugly.


From sparr0 at gmail.com  Fri Jan  4 09:59:39 2008
From: sparr0 at gmail.com (Clarence Risher)
Date: Fri, 4 Jan 2008 09:59:39 -0600
Subject: xrandx responds with too many modes.
In-Reply-To: <1199460559.3032.9.camel@dhcppc4>
References: <1199460559.3032.9.camel@dhcppc4>
Message-ID: <811b48bd0801040759k317c6f8eid4428c348aaab24f@mail.gmail.com>

On Jan 4, 2008 2:22 AM, H. Verbeet <hverbeet at gmail.com> wrote:
> Is this with a specific X driver? The binary nvidia driver only lists
> modes explicitly declared in xorg.conf.

I would disagree.  I have only 3 modes in my xorg.conf, and am usinb
the binary nvidia driver, but xrandr from the command line (which I
assume mirrors the API function's output) offers the following:

Screen 0: minimum 320 x 240, current 1280 x 1024, maximum 1280 x 1024
default connected 1280x1024+0+0 0mm x 0mm
   1280x1024      50.0*    54.0
   1024x768       51.0     60.0     61.0     62.0
   800x600        52.0     66.0     67.0     68.0     69.0
   640x512        53.0     72.0
   1280x960       55.0
   1280x800       56.0
   1280x768       57.0
   1152x864       58.0
   1152x768       59.0
   960x600        63.0
   840x525        64.0
   832x624        65.0
   800x512        70.0
   720x450        71.0
   640x480        73.0     74.0     75.0     76.0
   640x400        77.0
   640x384        78.0
   576x432        79.0
   576x384        80.0
   512x384        81.0     82.0     83.0
   416x312        84.0
   400x300        85.0     86.0     87.0     88.0
   320x240        89.0     90.0     91.0


On Jan 4, 2008 9:29 AM, Peter Dons Tychsen <donpedro at tdcadsl.dk> wrote:
> On Thu, 2008-01-03 at 22:46 -0600, Clarence Risher wrote:
> > I regularly use 640x512 in wine, when that resolution wouldnt be
> > reported by the driver in windows.  Dunno if you consider that a
> > "normal" resolution.
> Just out of curiosity, what do you use this for?
> Whats wrong with the 640 x 480? Why do you need the extra 640x32 pixels?

640x480 does not integer-scale to my 1280x1024 display.  With 640x512
I have perfect pixel alignment (2x zoom), no blurriness from the
scaling.  I'll take 640x512 over 800x600 even because of the graphical
nicety of it, and there are plenty of games (with options turned all
the way up) that I cannot run at a good framerate at 1024 or 1280.


From donpedro at tdcadsl.dk  Fri Jan  4 10:05:22 2008
From: donpedro at tdcadsl.dk (Peter Dons Tychsen)
Date: Fri, 04 Jan 2008 17:05:22 +0100
Subject: USER32 - SPI_GETMOUSE missing a default value.
In-Reply-To: <20080104061653.ZVYU5833.fep27.mail.dk@mail.codeweavers.com>
References: <1199417956.4321.30.camel@dhcppc4>
	<20080104061653.ZVYU5833.fep27.mail.dk@mail.codeweavers.com>
Message-ID: <1199462722.3032.32.camel@dhcppc4>

> SPI_GETMOUSE should work just fine, do you have a sample code which
> doesn't work? Is the app trying to read the registry directly without
> using SystemParametersInfo?
> 

The application is the game "World In Conflict".
The application is reading correctly through SystemParametersInfo().

The problem as i see it, is that there is no default value for the mouse
parameters in the registry. You can see this by doing a clean wine
install, and checking the registry. I think this value should have a
default which should be set every time the DLL is loaded, so
applications can read the value via SystemParametersInfo().
Alternatively, the DLL could detect the missing info at runtime, but
that would not handle the case where the app tries to read the key
directly, so i still think the first version is the best.

/p





From tony.wasserka at freenet.de  Fri Jan  4 10:00:46 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Fri, 04 Jan 2008 17:00:46 +0100
Subject: d3dx implementation senseless?
Message-ID: <E1JAoyU-0003xr-6E@www9.emo.freenet-rz.de>

> I do not think patents which are blocking your ability to use the DLLs
> in Wine. It is your Windows license.
> 
> I believe that if you have a Windows license for your machine, you are
> free to use Windows or its DLLs. This includes all the "free" downloads
> from their web-pages. I think, if you do not have a license for that
> machine, you are in violation of the license, which is illegal.
> 
> I am not sure i got all the details right but you can probably find more
> on their web-page.
> 
> If i understand it correctly, it of course means that there are no
> really free downloads on their web-page, as they all rely on a purchase
> of Windows. This makes the "free" download kind of expensive.
> 
> For Wine it means that anything the user has to D/L from their homepage
> is a no-no.

Oh well, I didn't think about that, sorry.
Then it of course is a good thing if we implement our own d3dx.












From dank at kegel.com  Fri Jan  4 11:28:17 2008
From: dank at kegel.com (Dan Kegel)
Date: Fri, 4 Jan 2008 09:28:17 -0800
Subject: Some more spelling fixes.
Message-ID: <a71bd89a0801040928j2cd85fc3l7a3d6e342ca586d@mail.gmail.com>

Francois wrote:
> I'd say "'coz" is not a typo, but was written that way intentionally to
> give a 'slang-ish' tone to the comment by someone who knows full well
> the standard spelling. As such it should not be modified.

I've seen too many people who aren't
even aware of the difference between slang and standard
english.   So (without looking back at who committed it)
I'm tempted to correct that kind of thing, just because
it annoys me, and annoyance was my guide for what's
worth fixing...
- Dan

-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From austinenglish at gmail.com  Fri Jan  4 11:35:42 2008
From: austinenglish at gmail.com (Austin English)
Date: Fri, 4 Jan 2008 11:35:42 -0600
Subject: Some more spelling fixes.
In-Reply-To: <a71bd89a0801040928j2cd85fc3l7a3d6e342ca586d@mail.gmail.com>
References: <a71bd89a0801040928j2cd85fc3l7a3d6e342ca586d@mail.gmail.com>
Message-ID: <b6bb06270801040935s398a53f3hd74e821e1721dea4@mail.gmail.com>

I changed that in two places. The first one had another typo in the
same file, so I went ahead and fixed both typos. The second occurrence
was in a separate file, but I corrected it for consistency.

- Austin

On Jan 4, 2008 11:28 AM, Dan Kegel <dank at kegel.com> wrote:
> Francois wrote:
> > I'd say "'coz" is not a typo, but was written that way intentionally to
> > give a 'slang-ish' tone to the comment by someone who knows full well
> > the standard spelling. As such it should not be modified.
>
> I've seen too many people who aren't
> even aware of the difference between slang and standard
> english.   So (without looking back at who committed it)
> I'm tempted to correct that kind of thing, just because
> it annoys me, and annoyance was my guide for what's
> worth fixing...
> - Dan
>
> --
> Wine for Windows ISVs: http://kegel.com/wine/isv
>
>
>


From zgold550 at gmail.com  Fri Jan  4 11:48:30 2008
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Fri, 4 Jan 2008 12:48:30 -0500
Subject: DIB Driver code available
In-Reply-To: <c7c.1e4030d5.34af567d@aol.com>
References: <c7c.1e4030d5.34af567d@aol.com>
Message-ID: <b050a5e70801040948rbeeb866w4e166f19e93afb17@mail.gmail.com>

Translating his question:
I'm looking for a DIB driver which will let me run the program "PSDWin"

Donnette,

Le plupart de personne qui travaille avec WINE parlent seulement
anglais au cette listserv.  A respondre de ta question,
malheureusement, cette driver n'exist pas maintenant.  Possible au
future.  C'est un piece du wine tres difficile.

"Most people who work with wine speak only english in this listserv.
However to respond to your question, unfortunately there isn't a DIB
driver yet.  Its a very hard part of wine to write."


--ZGold


On Jan 4, 2008 4:29 AM,  <Donnette39 at aol.com> wrote:
>
>
> Bonjour,
>
> Je cherche le "DIB Driver" qui me permettrait de faire fonctionner le
> logiciel PSDWin.
> Pouvez-vous m'aider ?
> Merci,
> Lyonel Donnette
>
>
>



-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From stefandoesinger at gmx.at  Fri Jan  4 11:51:50 2008
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Fri, 4 Jan 2008 18:51:50 +0100
Subject: d3dx implementation senseless?
In-Reply-To: <E1JAoyU-0003xr-6E@www9.emo.freenet-rz.de>
References: <E1JAoyU-0003xr-6E@www9.emo.freenet-rz.de>
Message-ID: <200801041851.50778.stefandoesinger@gmx.at>

Am Freitag, 4. Januar 2008 17:00:46 schrieb tony.wasserka at freenet.de:
> Oh well, I didn't think about that, sorry.
> Then it of course is a good thing if we implement our own d3dx.
The directx license as far as I understand it, allows installing and using the 
dx runtime, which d3dx* is a part of, on Wine, even if the user does not have 
a Windows license. However, it does not allow shipping the DLLs with any 
application that it intended to run on non-windows platforms. So we need the 
d3dx DLLs if anyone wants to port an app that uses them using Wine.

Appart of that, there's a usability argument. Since Windows XP SP2 and Windows 
Vista ship many of those DLLs, apps forget to ship them. Even if apps ship 
the dx runtime, there are some tricks needed to install it. Just having the 
DLLs available helps the usability of Wine.

> Would we implement e.g. a BMP file loader ourselves or would we use a 3rd
> party library for that? Are there any patents regarding the DX specific file 
> formats (.x/.dds)  
just fyi, at least the .dds file format is well documented. I don't know 
about .x, but I think it is just plain text as well. Applications like 
kuickshow(the kde image viewer) have an implementation for it, and I think 
Gimp supports it as well. DXTn makes problems, especially writing DXTn 
images, but we can maybe use the Nvidia texture tools(MIT license) to solve 
both technical and legal problems.


From donpedro at tdcadsl.dk  Fri Jan  4 12:03:55 2008
From: donpedro at tdcadsl.dk (Peter Dons Tychsen)
Date: Fri, 04 Jan 2008 19:03:55 +0100
Subject: d3dx implementation senseless?
In-Reply-To: <20080104161222.HZCU12098.fep26.mail.dk@wine.codeweavers.com>
References: <20080104161222.HZCU12098.fep26.mail.dk@wine.codeweavers.com>
Message-ID: <1199469835.3032.47.camel@dhcppc4>

Now that i think of it, Marcus's point about redistribution is even
more relevant than the problem with licensing.

If one was was allowed (legally) to copy DLLs from Windows without a
license, i could do it..... because i know how.... could my mother?....
no way!

The only people that i have any success in convincing to switch
to Linux/Wine were in situations where it worked "out of the box".

Having to download tons of redistributeables and DLLs from the web
is not a good solution for "non technical users". Even on real Windows
this is a problem.

I cannot count the many times family & friends have
called me saying: "Help! it says... Unable to find blabla.dll or blabla
not installed" (using 2K/XP/Vista). Lets not copy this scenario. I want
them to stop calling :-).

/p


On Fri, 2008-01-04 at 17:00 +0100, tony.wasserka at freenet.de wrote:
> > I do not think patents which are blocking your ability to use the DLLs
> > in Wine. It is your Windows license.
> > 
> > I believe that if you have a Windows license for your machine, you are
> > free to use Windows or its DLLs. This includes all the "free" downloads
> > from their web-pages. I think, if you do not have a license for that
> > machine, you are in violation of the license, which is illegal.
> > 
> > I am not sure i got all the details right but you can probably find more
> > on their web-page.
> > 
> > If i understand it correctly, it of course means that there are no
> > really free downloads on their web-page, as they all rely on a purchase
> > of Windows. This makes the "free" download kind of expensive.
> > 
> > For Wine it means that anything the user has to D/L from their homepage
> > is a no-no.
> 
> Oh well, I didn't think about that, sorry.
> Then it of course is a good thing if we implement our own d3dx.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 



From donpedro at tdcadsl.dk  Fri Jan  4 12:24:36 2008
From: donpedro at tdcadsl.dk (Peter Dons Tychsen)
Date: Fri, 04 Jan 2008 19:24:36 +0100
Subject: xrandx responds with too many modes.
In-Reply-To: <20080104160024.YSDS10334.fep25.mail.dk@wine.codeweavers.com>
References: <1199460559.3032.9.camel@dhcppc4>
	<20080104160024.YSDS10334.fep25.mail.dk@wine.codeweavers.com>
Message-ID: <1199471076.3032.52.camel@dhcppc4>

> 640x480 does not integer-scale to my 1280x1024 display.  With 640x512
> I have perfect pixel alignment (2x zoom), no blurriness from the
> scaling.  I'll take 640x512 over 800x600 even because of the graphical
> nicety of it, and there are plenty of games (with options turned all
> the way up) that I cannot run at a good framerate at 1024 or 1280.

Ah... yes of course. Damn those flat-panel screens :-)

I have a similar monitor in 1280x1024 but only use 640x480 for games,
where i don't notice the problem.

Point taken. Scrap that idea!

But what about sacking the variants with different frequencies?
Would anyone have a problem with that idea? As mentioned, i doubt
if Wine users can use the frequency adjustment for anything useful
anyway? But then again i might have missed something again.

/p



From truiken at gmail.com  Fri Jan  4 12:30:10 2008
From: truiken at gmail.com (James Hawkins)
Date: Fri, 4 Jan 2008 12:30:10 -0600
Subject: Wiki account missing
Message-ID: <22821af30801041030n4c1e4497ofb530dc0742d34fa@mail.gmail.com>

Hi,

My Wiki account has gone missing:

Unknown user name: "truiken at gmail.com". Please enter user name and password.

Also, what's going on with the massive slew of wine-users spam?

-- 
James Hawkins


From the3dfxdude at gmail.com  Fri Jan  4 12:36:22 2008
From: the3dfxdude at gmail.com (Jesse Allen)
Date: Fri, 4 Jan 2008 11:36:22 -0700
Subject: DIB Driver code available
In-Reply-To: <c7c.1e4030d5.34af567d@aol.com>
References: <c7c.1e4030d5.34af567d@aol.com>
Message-ID: <530468570801041036u78ba6904vee473edbbcd018ca@mail.gmail.com>

On Jan 4, 2008 2:29 AM,  <Donnette39 at aol.com> wrote:
>
>
> Bonjour,
>
> Je cherche le "DIB Driver" qui me permettrait de faire fonctionner le
> logiciel PSDWin.
> Pouvez-vous m'aider ?
> Merci,
> Lyonel Donnette
>
>
>

Vous avez essay? mon DIB driver?
http://repo.or.cz/w/wine/dibdrv.git


From dimi at lattica.com  Fri Jan  4 12:38:01 2008
From: dimi at lattica.com (Dimi Paun)
Date: Fri, 04 Jan 2008 13:38:01 -0500
Subject: Wiki account missing
In-Reply-To: <22821af30801041030n4c1e4497ofb530dc0742d34fa@mail.gmail.com>
References: <22821af30801041030n4c1e4497ofb530dc0742d34fa@mail.gmail.com>
Message-ID: <1199471881.4670.124.camel@dimi.lattica.com>


On Fri, 2008-01-04 at 12:30 -0600, James Hawkins wrote:
> My Wiki account has gone missing:
> 
> Unknown user name: "truiken at gmail.com". Please enter user name and
> password.

No, it's still there, I've double checked. Maybe you are not using
the right password?

-- 
Dimi Paun <dimi at lattica.com>
Lattica, Inc.



From thestig at google.com  Fri Jan  4 12:40:51 2008
From: thestig at google.com (Lei Zhang)
Date: Fri, 4 Jan 2008 10:40:51 -0800
Subject: Wiki account missing
In-Reply-To: <22821af30801041030n4c1e4497ofb530dc0742d34fa@mail.gmail.com>
References: <22821af30801041030n4c1e4497ofb530dc0742d34fa@mail.gmail.com>
Message-ID: <558b2f5c0801041040r7e802b04vbe4f16f8e644f287@mail.gmail.com>

On Jan 4, 2008 10:30 AM, James Hawkins <truiken at gmail.com> wrote:
> Hi,
>
> My Wiki account has gone missing:
>
> Unknown user name: "truiken at gmail.com". Please enter user name and password.
>
> Also, what's going on with the massive slew of wine-users spam?
>
> --
> James Hawkins
>
>
>

That person has been spamming mailing lists all over the place. [1]
[2] Can someone unsubscribe the spammer from our mailing lists? I will
file a complain with gmail.

- Lei

[1] http://www.gossamer-threads.com/lists/cisco/nsp/78038
[2] http://www.opensolaris.org/jive/thread.jspa?threadID=48367&tstart=0


From truiken at gmail.com  Fri Jan  4 12:44:11 2008
From: truiken at gmail.com (James Hawkins)
Date: Fri, 4 Jan 2008 12:44:11 -0600
Subject: Wiki account missing
In-Reply-To: <1199471881.4670.124.camel@dimi.lattica.com>
References: <22821af30801041030n4c1e4497ofb530dc0742d34fa@mail.gmail.com>
	<1199471881.4670.124.camel@dimi.lattica.com>
Message-ID: <22821af30801041044p2704a060u9a23bf6a631158f@mail.gmail.com>

On Jan 4, 2008 12:38 PM, Dimi Paun <dimi at lattica.com> wrote:
>
> On Fri, 2008-01-04 at 12:30 -0600, James Hawkins wrote:
> > My Wiki account has gone missing:
> >
> > Unknown user name: "truiken at gmail.com". Please enter user name and
> > password.
>
> No, it's still there, I've double checked. Maybe you are not using
> the right password?
>

I'm using the same password I've always used, but it doesn't work anymore.

-- 
James Hawkins


From jnewman at codeweavers.com  Fri Jan  4 14:39:07 2008
From: jnewman at codeweavers.com (Jeremy Newman)
Date: Fri, 04 Jan 2008 14:39:07 -0600
Subject: Wiki account missing
In-Reply-To: <558b2f5c0801041040r7e802b04vbe4f16f8e644f287@mail.gmail.com>
References: <22821af30801041030n4c1e4497ofb530dc0742d34fa@mail.gmail.com>
	<558b2f5c0801041040r7e802b04vbe4f16f8e644f287@mail.gmail.com>
Message-ID: <477E996B.3000702@codeweavers.com>

I have removed that person from the mailing list and added that email to 
the black list.

Lei Zhang wrote:
> That person has been spamming mailing lists all over the place. [1]
> [2] Can someone unsubscribe the spammer from our mailing lists? I will
> file a complain with gmail.
> 
> - Lei
> 
> [1] http://www.gossamer-threads.com/lists/cisco/nsp/78038
> [2] http://www.opensolaris.org/jive/thread.jspa?threadID=48367&tstart=0



From thestig at google.com  Fri Jan  4 16:32:50 2008
From: thestig at google.com (Lei Zhang)
Date: Fri, 4 Jan 2008 14:32:50 -0800
Subject: What happened to the videos from WineConf?
In-Reply-To: <558b2f5c0801031050h3ea3bb4aq35a696884ef68836@mail.gmail.com>
References: <47752A3A.7010704@codeweavers.com>
	<558b2f5c0801031050h3ea3bb4aq35a696884ef68836@mail.gmail.com>
Message-ID: <558b2f5c0801041432pb71d6b3l9fc390db28357e28@mail.gmail.com>

On Jan 3, 2008 10:50 AM, Lei Zhang <thestig at google.com> wrote:
> On Dec 28, 2007 8:54 AM, Maarten Lankhorst <maarten at codeweavers.com> wrote:
>
> > I remember at wineconf there were some videos created, what happened
> > with those? I tried to look on youtube for wineconf, but I didn't find
> > anything. Are they online yet? Or will they be put online?
> >
> > -Maarten
> >
> >
> >
>
> Three videos were uploaded to Youtube last night:
>
> Alexandre's Keynote
> http://www.youtube.com/watch?v=GqEp8psjv5s
>
> Detlef Riekenberg - Printing in Wine
> http://www.youtube.com/watch?v=1-n6mClDdBQ
>
> Kai Blin - Wine and Samba
> http://www.youtube.com/watch?v=ToKeJbQ87c0
>
> - Lei
>

Two more videos:

Martin Pilka - CxTest
http://www.youtube.com/watch?v=VBZNOTngyeo

Marteen Lankhorst - Wine and Sound
http://www.youtube.com/watch?v=qKaYqsm4I_Q

- Lei


From dimi at lattica.com  Fri Jan  4 19:02:07 2008
From: dimi at lattica.com (Dimi Paun)
Date: Fri, 04 Jan 2008 20:02:07 -0500
Subject: Wiki account missing
In-Reply-To: <22821af30801041044p2704a060u9a23bf6a631158f@mail.gmail.com>
References: <22821af30801041030n4c1e4497ofb530dc0742d34fa@mail.gmail.com>
	<1199471881.4670.124.camel@dimi.lattica.com>
	<22821af30801041044p2704a060u9a23bf6a631158f@mail.gmail.com>
Message-ID: <1199494927.4670.131.camel@dimi.lattica.com>


On Fri, 2008-01-04 at 12:44 -0600, James Hawkins wrote:
> I'm using the same password I've always used, but it doesn't work anymore.

Well, that's odd. Can you please try to reset your password?
    http://wiki.winehq.org/UserPreferences

-- 
Dimi Paun <dimi at lattica.com>
Lattica, Inc.



From dank at kegel.com  Fri Jan  4 19:25:25 2008
From: dank at kegel.com (Dan Kegel)
Date: Fri, 4 Jan 2008 17:25:25 -0800
Subject: Jacek Caban : shdocvw: Use BindToObject to load document ...
Message-ID: <a71bd89a0801041725o3dd5f64dyb9112cf822203833@mail.gmail.com>

I'm seeing a new crash in shdocvw/tests/webbrowser.c since yesterday.
I haven't verified this with bisect, but the stack traces
seem to point to Jacek's set of changes.  Both can be seen here:
http://kegel.com/wine/valgrind/logs-2008-01-04/vg-shdocvw_webbrowser-diff.txt

The first one is a new valgrind warning:
+ Syscall param writev(vector[2]) points to uninitialised byte(s)
+    at  (within /lib/ld-2.5.so)
+    by  wine_server_call (server.c:244)
+    by  send_debug_event (exception.c:200)
+    by  raise_exception (exception.c:357)
+    by  __regs_RtlRaiseException (exception.c:388)
+    by  raise_segv_exception (signal_i386.c:1032)
+    by  ???
+    by  set_moniker (persist.c:326)
+    by  PersistMoniker_Load (persist.c:427)
+    by  report_data (binding.c:400)
+    by  InternetProtocolSink_ReportData (binding.c:1073)
+    by  BPInternetProtocolSink_ReportData (bindprot.c:518)
+    by  AboutProtocol_Start (protocol.c:275)
+    by  BindProtocol_Start (bindprot.c:192)
+    by  start_binding (binding.c:1446)
+    by  bind_to_object (binding.c:1513)
+    by  URLMonikerImpl_BindToObject (umon.c:490)
+    by  navigate_mon (navigate.c:563)
+    by  navigate_url (navigate.c:659)
+    by  WebBrowser_Navigate2 (webbrowser.c:695)

And the second one is a new crash:
+Unhandled exception: page fault on read access to 0xffffffff in
32-bit code (0x06ce27c6).
+=>1 0x06ce27c6 set_document_bscallback+0xb6(doc=0x7f018f80,
callback=0x7f01b748) [dlls/mshtml/mshtml_private.h:563] in mshtml
(0x7f22f488)
+  2 0x06cf732a set_moniker+0x6ba(This=0x7f018f80, mon=0x7f017e38,
pibc=0x7f019570, bind_complete=0x7f22f628) [dlls/mshtml/persist.c:327]
in mshtml (0x7f22f5e8)
+  3 0x06cf7a35 PersistMoniker_Load+0x45(iface=0x7f018f90,
fFullyAvailable=0x1, pimkName=0x7f017e38, pibc=<?>, grfMode=0x12)
[dlls/mshtml/persist.c:428] in mshtml (0x7f22f638)
+  4 0x06c088a1 report_data+0x761(This=0x7f018970, bscf=<?>,
progress=<?>, progress_max=0x1e) [dlls/urlmon/binding.c:400] in urlmon
(0x7f22f6d8)
+  5 0x06c08ba4 InternetProtocolSink_ReportData+0xb4(iface=0x7f018974,
grfBSCF=0xd, ulProgress=0x1e, ulProgressMax=<?>)
[dlls/urlmon/binding.c:1073] in urlmon (0x7f22f718)
+  6 0x06c0a23f
BPInternetProtocolSink_ReportData+0x4f(iface=0x7f018e18, grfBSCF=0xd,
ulProgress=0x1e, ulProgressMax=<?>) [dlls/urlmon/bindprot.c:518] in
urlmon (0x7f22f758)
+  7 0x06cf8e1c AboutProtocol_Start+0x1cc(iface=0x7f018e48, szUrl=<?>,
pOIProtSink=0x7f018e18, pOIBindInfo=0x7f018e0c, grfPI=0x0,
dwReserved=0x0) [dlls/mshtml/protocol.c:279] in mshtml (0x7f22f808)
+  8 0x06c0b49e BindProtocol_Start+0x1ce(iface=0x7f018e08,
szUrl=0x7f018540, pOIProtSink=<?>, pOIBindInfo=0x7f018978, grfPI=0x0,
dwReserved=0x0) [dlls/urlmon/bindprot.c:192] in urlmon (0x7f22f888)
+  9 0x06c09881 start_binding+0xa91(mon=0x7f017e38, binding_ctx=0x0,
url=<?>, pbc=0x7f018838, to_obj=0x1, riid=0x6bdfda8, ret=0x7f22f9ac)
[dlls/urlmon/binding.c:1446] in urlmon (0x7f22f988)
+  10 0x06c099ca bind_to_object+0x3a(mon=0x7f017e38, url=0x7f018540,
pbc=0x7f018838, riid=0x6bdfda8, ppv=0x7f22fc34)
[dlls/urlmon/binding.c:1514] in urlmon (0x7f22f9b8)
+  11 0x06c17c88 URLMonikerImpl_BindToObject+0xe8(iface=0x7f017e38,
pbc=<?>, pmkToLeft=0x0, riid=<?>, ppv=0x7f22fc34)
[dlls/urlmon/umon.c:491] in urlmon (0x7f22fa18)
+  12 0x06bd1937 navigate_mon+0x507(This=0x7f0176d8, mon=0x7f017e38,
post_data=0x0, post_data_len=0x0, headers=0x0)
[dlls/shdocvw/navigate.c:563] in shdocvw (0x7f22fc58)
+  13 0x06bd1ec3 navigate_url+0xd3(This=0x7f0176d8, url=0x7f017e14,
Flags=0x0, TargetFrameName=0x0, PostData=0x0, Headers=0x0)
[dlls/shdocvw/navigate.c:659] in shdocvw (0x7f22fca8)
+  14 0x06bd98b9 WebBrowser_Navigate2+0x79(iface=<?>, URL=<?>,
Flags=0x0, TargetFrameName=0x0, PostData=0x0, Headers=0x0)
[dlls/shdocvw/webbrowser.c:696] in shdocvw (0x7f22fce8)
+  15 0x045e68d4 test_Navigate2+0x154(unk=<?>)
[dlls/shdocvw/tests/webbrowser.c:1540] in shdocvw_test (0x7f22fd48)
+  16 0x045e7634 test_WebBrowser+0x934()
[dlls/shdocvw/tests/webbrowser.c:1609] in shdocvw_test (0x7f22fe18)
+  17 0x045e8a6c func_webbrowser+0xac()
[dlls/shdocvw/tests/webbrowser.c:1658] in shdocvw_test (0x7f22fe58)
+  18 0x045e8c98 run_test+0x128(name=0x7f0003f8)
[include/wine/test.h:389] in shdocvw_test (0x7f22fea8)


From dank at kegel.com  Fri Jan  4 19:57:32 2008
From: dank at kegel.com (Dan Kegel)
Date: Fri, 4 Jan 2008 17:57:32 -0800
Subject: Bugzilla preening status
Message-ID: <a71bd89a0801041757j5e13b65cg628bb8ceb13022ef@mail.gmail.com>

Bugzilla has some nice "Change Over Time" graphs.
These show there's been a nice chunk of bugs
moved into 'Fixed' state in the last week:

http://bugs.winehq.org/reports.cgi?product=Wine&datasets=NEW%3A&datasets=UNCONFIRMED%3A&datasets=CLOSED%3A&datasets=FIXED%3A

BTW somebody should give Jeff Zaroyko bugzilla
privs, he's doing a nice job, and should be able
to mark bugs fixed.


From dmitry at codeweavers.com  Fri Jan  4 21:24:25 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sat, 5 Jan 2008 11:24:25 +0800
Subject: USER32 - SPI_GETMOUSE missing a default value.
References: <1199417956.4321.30.camel@dhcppc4><20080104061653.ZVYU5833.fep27.mail.dk@mail.codeweavers.com>
	<1199462722.3032.32.camel@dhcppc4>
Message-ID: <001101c84f4a$7a988810$a600fea9@DMITRY>

"Peter Dons Tychsen" <donpedro at tdcadsl.dk> wrote:

> The application is the game "World In Conflict".
> The application is reading correctly through SystemParametersInfo().
> 
> The problem as i see it, is that there is no default value for the mouse
> parameters in the registry. You can see this by doing a clean wine
> install, and checking the registry. I think this value should have a
> default which should be set every time the DLL is loaded, so
> applications can read the value via SystemParametersInfo().
> Alternatively, the DLL could detect the missing info at runtime, but
> that would not handle the case where the app tries to read the key
> directly, so i still think the first version is the best.

SystemParametersInfo should already handle the case of missing settings
in the registry providing default values. Unless you have an application
which reads registry directly, so that's not a hypothetical case there is
no need to fix it. Again, do you have a code snippet or a piece of relay
log showing a failure?

-- 
Dmitry.


From kgbricola at web.de  Sat Jan  5 05:05:53 2008
From: kgbricola at web.de (=?ISO-8859-1?Q?Rico_Sch=FCller?=)
Date: Sat, 05 Jan 2008 12:05:53 +0100
Subject: Fix a memory leak in cabinet (try 2)
Message-ID: <477F6491.2000306@web.de>


-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0001-cabinet-Fix-memory-leak-found-by-Smatch.patch
Type: text/x-diff
Size: 0 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080105/57dd96c7/attachment.patch 

From kgbricola at web.de  Sat Jan  5 05:06:38 2008
From: kgbricola at web.de (=?ISO-8859-1?Q?Rico_Sch=FCller?=)
Date: Sat, 05 Jan 2008 12:06:38 +0100
Subject: Fix a memory leak in mshtml (try 2)
Message-ID: <477F64BE.3000003@web.de>


-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0002-mshtml-Fix-memory-leak-found-by-Smatch.patch
Type: text/x-diff
Size: 0 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080105/7608f049/attachment.patch 

From kgbricola at web.de  Sat Jan  5 05:07:13 2008
From: kgbricola at web.de (=?ISO-8859-1?Q?Rico_Sch=FCller?=)
Date: Sat, 05 Jan 2008 12:07:13 +0100
Subject: Fix a memory leak in msi (try 2)
Message-ID: <477F64E1.50406@web.de>


-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0003-msi-Fix-memory-leak-found-by-Smatch.patch
Type: text/x-diff
Size: 0 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080105/75b1d493/attachment.patch 

From kgbricola at web.de  Sat Jan  5 05:07:45 2008
From: kgbricola at web.de (=?ISO-8859-1?Q?Rico_Sch=FCller?=)
Date: Sat, 05 Jan 2008 12:07:45 +0100
Subject: Fix a memory leak in msi (try 2)
Message-ID: <477F6501.9030800@web.de>


-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0005-msi-Fix-memory-leak-found-by-Smatch.patch
Type: text/x-diff
Size: 0 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080105/cbf70830/attachment.patch 

From andrew.talbot at talbotville.com  Sat Jan  5 05:23:27 2008
From: andrew.talbot at talbotville.com (Andrew Talbot)
Date: Sat, 5 Jan 2008 11:23:27 +0000
Subject: Fix a memory leak in msi (try 2), etc.
Message-ID: <200801051123.27392.andrew.talbot@talbotville.com>

Hi Rico,

Please send your patches to wine-patches, not wine-devel.

Thanks,

-- 
Andy.


From kgbricola at web.de  Sat Jan  5 05:23:31 2008
From: kgbricola at web.de (=?ISO-8859-1?Q?Rico_Sch=FCller?=)
Date: Sat, 05 Jan 2008 12:23:31 +0100
Subject: wrong mailing list
In-Reply-To: <477F6501.9030800@web.de>
References: <477F6501.9030800@web.de>
Message-ID: <477F68B3.5090705@web.de>

Sorry the last 4 patches were send to the wrong mailing list ;-).
Ignore them.

Cheers
Rico


From mjung at iss.tu-darmstadt.de  Sat Jan  5 07:40:48 2008
From: mjung at iss.tu-darmstadt.de (Michael Jung)
Date: Sat, 05 Jan 2008 14:40:48 +0100
Subject: ImmNotifyIMM with CPS_CANCEL fully clears the composition string.
	Also enable respective tests
In-Reply-To: <477E794B.5010204@codeweavers.com>
References: <477E794B.5010204@codeweavers.com>
Message-ID: <477F88E0.20406@iss.tu-darmstadt.de>

This fixes the hang in Excel 2003 Viewer for me. Thanks!
--
Michael Jung
mjung at iss.tu-darmstadt.de


From patrol at sinus.cz  Sat Jan  5 15:44:11 2008
From: patrol at sinus.cz (Pavel Troller)
Date: Sat, 5 Jan 2008 22:44:11 +0100
Subject: Gates of Skeldal - d3d problem ?
Message-ID: <20080105214411.GA19053@tangens.sinus.cz>

Hi!
  A classic Czech RPG game, Gates of Skeldal, has been released for free
download.
  I've tried the game for my children, but it seems to have a problem in wine.
  Installation is perfect. Running the game basically works, intro video plays
well, but then the problem occurs. Starting the game causes that every mouse
move or other activity quickly swaps forth and back the correct window contents
with a previous one, which should not be displayed anymore (like the in-game
window and  main menu window). Not all the window is always swapped, sometimes
just some areas flash forth/back. To be even worse, the mouse pointer is not
properly erased, so the window begins filled with its traces. After a while,
the window is totally garbled and playing is impossible.

Synchronously with this problem, the wine console starts to be flooded with
the following message:

fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd58/0x33fd48
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd38/0x33fd28
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd4c/0x33fd3c
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd7c/0x33fd6c
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd80/0x33fd70
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd38/0x33fd28
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd4c/0x33fd3c
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd7c/0x33fd6c
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd38/0x33fd28
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd4c/0x33fd3c
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd7c/0x33fd6c
fixme:d3d:IWineD3DSwapChainImpl_Present Unhandled present options 0x33fd38/0x33fd28

Is it possible that this fixme refers to the real cause or the problem, or
are these messages just harmless, not related to the problem ?

Tested on a today's git.
The game can be freely downloaded (cca 188 MB) there (it is in Czech, but the
menu is easy and anybody can find how to control the game):

http://www.napoleongames.cz/download/brany_skeldalu_setup.exe

With regards, Pavel Troller


From wine-devel at kievinfo.com  Sat Jan  5 16:23:53 2008
From: wine-devel at kievinfo.com (Vitaliy Margolen)
Date: Sat, 05 Jan 2008 15:23:53 -0700
Subject: bugs audit volunteers require
In-Reply-To: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
References: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
Message-ID: <47800379.7030709@kievinfo.com>

Dan Kegel wrote:
>>> Maybe add a resolution of NEEDMOREINFO?
>> There is no need to add one more reason for a bug resolution IMHO,
>> INVALID with appropriate comment does the job.
> 
> INVALID seems harsh, it may scare away novice reporters.
> 
> Do we want to make it easy to search for bugs stuck
> in a needmoreinfo kind of state?  If so, a keyword or state
> might be handy.
> 
> Does anybody remember good old gnu gnats, the old bug
> tracking system?  It was great this way; it had an explicit
> notion of whose ball the court was in.  I miss that.
> - Dan

This is useless. Most bugs marked invalid are not Wine bugs. Only few are 
those that reporters did not include enough information.

Vitaliy


From wine-devel at kievinfo.com  Sat Jan  5 16:32:10 2008
From: wine-devel at kievinfo.com (Vitaliy Margolen)
Date: Sat, 05 Jan 2008 15:32:10 -0700
Subject: Where are the bugzilla admins?
In-Reply-To: <20080101161920.GE3426@crissy.swd.zerebecki.de>
References: <477671A5.6040403@kievinfo.com>
	<20080101161920.GE3426@crissy.swd.zerebecki.de>
Message-ID: <4780056A.5060306@kievinfo.com>

Jan Zerebecki wrote:
> On Sat, Dec 29, 2007 at 09:11:17AM -0700, Vitaliy Margolen wrote:
>> Where did our buzilla admins go? 3 weeks and nothing is changing!
> 
> I'd assume you mean the category changes to bugzilla (I just sent
> a mail regarding that), otherwise please help me out on what I
> missed.
> 
> 
> Jan
> 
> 
> 
Yes that. If we have only one bugzilla admin and we can not get any response 
from that admin for the 4!!! weeks - REGARDLESS what the reasons are, we 
need more admins period.

Sorry, but I expect more people to be involved and having appropriate 
access. Also if some key person decides to take a vacation, then he/she 
better notify the list.

Vitaliy


From jan.wine at zerebecki.de  Sat Jan  5 19:36:59 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sun, 6 Jan 2008 02:36:59 +0100
Subject: Where are the bugzilla admins?
In-Reply-To: <4780056A.5060306@kievinfo.com>
References: <477671A5.6040403@kievinfo.com>
	<20080101161920.GE3426@crissy.swd.zerebecki.de>
	<4780056A.5060306@kievinfo.com>
Message-ID: <20080106013659.GG3426@crissy.swd.zerebecki.de>

On Sat, Jan 05, 2008 at 03:32:10PM -0700, Vitaliy Margolen wrote:
> Jan Zerebecki wrote:
> > On Sat, Dec 29, 2007 at 09:11:17AM -0700, Vitaliy Margolen wrote:
> >> Where did our buzilla admins go? 3 weeks and nothing is changing!

> If we have only one bugzilla admin and we can not get any response 
> from that admin for the 4!!! weeks - REGARDLESS what the reasons are, we 
> need more admins period.

In case of these component changes I felt that there was too much
controversy (and no final proposal where the only response was
"yes"; this paired with that some bugzilla admins wanted me to
have an -devel approved list of changes) for me to do changes to
bugzilla before waiting some more. (Though some delay can
probably be attributed to the fact that I am currently without
Internet on weekdays, outside of work.) Anyway no part of that
was in any way urgent.

> Sorry, but I expect more people to be involved and having appropriate 
> access. Also if some key person decides to take a vacation, then he/she 
> better notify the list.

I feel honored to be titled a key person of the Wine project, but
contrary to some belief I'm not the only bugzilla admin. Dan
Kegel ( who according to a recent mail from himself might be
unaware of his permissions ;) ), Jeremy Newman and Tony Lambregts are
also bugzilla admins.

If anyone would like to do things that need bugzilla admin
permissions, one can post a reasonable request for those
permissions to -devel.

Usually one can get changes made to bugzilla that need admin by
posting an _exact_ and detailed request to -devel and achieve
general agreement. ( And I'll also probably stop ignoring
component requests :) when the current component changes are
done. )

That being said, I do think that we don't need more bugzilla
admins, there is just not that much work to be done that really
needs those permissions.


Jan



From jjmckenzie51 at sprintpcs.com  Sat Jan  5 20:02:07 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Sat, 05 Jan 2008 19:02:07 -0700
Subject: bugs audit volunteers require
In-Reply-To: <47800379.7030709@kievinfo.com>
References: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
	<47800379.7030709@kievinfo.com>
Message-ID: <4780369F.6020303@sprintpcs.com>

Vitaliy Margolen wrote:
> Dan Kegel wrote:
>   
>>>> Maybe add a resolution of NEEDMOREINFO?
>>>>         
>>> There is no need to add one more reason for a bug resolution IMHO,
>>> INVALID with appropriate comment does the job.
>>>       
>> INVALID seems harsh, it may scare away novice reporters.
>>
>> Do we want to make it easy to search for bugs stuck
>> in a needmoreinfo kind of state?  If so, a keyword or state
>> might be handy.
>>
>> Does anybody remember good old gnu gnats, the old bug
>> tracking system?  It was great this way; it had an explicit
>> notion of whose ball the court was in.  I miss that.
>> - Dan
>>     
>
> This is useless. Most bugs marked invalid are not Wine bugs. Only few are 
> those that reporters did not include enough information.
>   
I disagree.  We need to have a method to let the reporter know that the 
project needs more information in order to properly troubleshoot a 
problem.  Closing a reported bug as INVALID is not applicable in this 
case.  If the bug is outside of the scope of the project, it should be 
marked as such.  The word invalid to me means that the bug could not be 
reproduced or the information provided did not disclose a solvable 
problem OR the bug has already been fixed and that the fix will be in 
the next release.  It may be necessary to add a resolution of 
NOTINPROJECT to handle those problems that are outside the scope of the 
project. 

Just my .02 dollars.

James McKenzie



From jan.wine at zerebecki.de  Sat Jan  5 20:02:23 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sun, 6 Jan 2008 03:02:23 +0100
Subject: bugs audit volunteers require
In-Reply-To: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
References: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
Message-ID: <20080106020223.GH3426@crissy.swd.zerebecki.de>

On Wed, Jan 02, 2008 at 01:19:35AM -0800, Dan Kegel wrote:
> >> Maybe add a resolution of NEEDMOREINFO?
> >
> >There is no need to add one more reason for a bug resolution IMHO,
> >INVALID with appropriate comment does the job.
> 
> INVALID seems harsh, it may scare away novice reporters.

Yes if it's used without waiting for an answer (or even even more
without requesting further clarification) it might make one feel
shot down. And usually it's used too quickly. Most bug
resolutions should probably be only done when some care or
communication was done to check that it's the correct resolution,
to avoid resolution ping-pong.

> Do we want to make it easy to search for bugs stuck
> in a needmoreinfo kind of state?  If so, a keyword or state
> might be handy.

I think a keyword would be appropriate. It would nicely fit with
the "Abandoned?" keyword: first add needmoreinfo, if no answer
for 6 month add "Abandoned?", after further 6 month resolve
abandoned.


Jan



From truiken at gmail.com  Sat Jan  5 22:55:12 2008
From: truiken at gmail.com (James Hawkins)
Date: Sat, 5 Jan 2008 21:55:12 -0700
Subject: Where are the bugzilla admins?
In-Reply-To: <20080106013659.GG3426@crissy.swd.zerebecki.de>
References: <477671A5.6040403@kievinfo.com>
	<20080101161920.GE3426@crissy.swd.zerebecki.de>
	<4780056A.5060306@kievinfo.com>
	<20080106013659.GG3426@crissy.swd.zerebecki.de>
Message-ID: <22821af30801052055y40e073d9hcba7721a76d7ebd0@mail.gmail.com>

On Jan 5, 2008 6:36 PM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> On Sat, Jan 05, 2008 at 03:32:10PM -0700, Vitaliy Margolen wrote:
> > Jan Zerebecki wrote:
> > > On Sat, Dec 29, 2007 at 09:11:17AM -0700, Vitaliy Margolen wrote:
> > >> Where did our buzilla admins go? 3 weeks and nothing is changing!
>
> > If we have only one bugzilla admin and we can not get any response
> > from that admin for the 4!!! weeks - REGARDLESS what the reasons are, we
> > need more admins period.
>
> In case of these component changes I felt that there was too much
> controversy (and no final proposal where the only response was
> "yes"; this paired with that some bugzilla admins wanted me to
> have an -devel approved list of changes) for me to do changes to
> bugzilla before waiting some more. (Though some delay can
> probably be attributed to the fact that I am currently without
> Internet on weekdays, outside of work.) Anyway no part of that
> was in any way urgent.
>

What controversy?  The final list proposed by me and Vitaliy was unchallenged.

-- 
James Hawkins


From truiken at gmail.com  Sat Jan  5 22:59:52 2008
From: truiken at gmail.com (James Hawkins)
Date: Sat, 5 Jan 2008 21:59:52 -0700
Subject: bugs audit volunteers require
In-Reply-To: <20080106020223.GH3426@crissy.swd.zerebecki.de>
References: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
	<20080106020223.GH3426@crissy.swd.zerebecki.de>
Message-ID: <22821af30801052059l5a086efdi89bf4c73f49e4c26@mail.gmail.com>

On Jan 5, 2008 7:02 PM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> On Wed, Jan 02, 2008 at 01:19:35AM -0800, Dan Kegel wrote:
> > >> Maybe add a resolution of NEEDMOREINFO?
> > >
> > >There is no need to add one more reason for a bug resolution IMHO,
> > >INVALID with appropriate comment does the job.
> >
> > INVALID seems harsh, it may scare away novice reporters.
>
> Yes if it's used without waiting for an answer (or even even more
> without requesting further clarification) it might make one feel
> shot down. And usually it's used too quickly. Most bug
> resolutions should probably be only done when some care or
> communication was done to check that it's the correct resolution,
> to avoid resolution ping-pong.
>
> > Do we want to make it easy to search for bugs stuck
> > in a needmoreinfo kind of state?  If so, a keyword or state
> > might be handy.
>
> I think a keyword would be appropriate. It would nicely fit with
> the "Abandoned?" keyword: first add needmoreinfo, if no answer
> for 6 month add "Abandoned?", after further 6 month resolve
> abandoned.
>

12 months to close a bug as abandoned?  6 months is already too long
for abandoned.  The policy has always been: if a reporter does not
respond to an information request within X months, close the bug as
abandoned.  We have 3843 bugs for Wine and the list is only getting
larger.  This fear of closing bugs is only making the problem worse.
People seem to forget that a user can always come back and reopen the
bug report.

-- 
James Hawkins


From truiken at gmail.com  Sat Jan  5 23:04:39 2008
From: truiken at gmail.com (James Hawkins)
Date: Sat, 5 Jan 2008 22:04:39 -0700
Subject: bugs audit volunteers require
In-Reply-To: <4780369F.6020303@sprintpcs.com>
References: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
	<47800379.7030709@kievinfo.com> <4780369F.6020303@sprintpcs.com>
Message-ID: <22821af30801052104r2416533fl6735952a52e78703@mail.gmail.com>

On Jan 5, 2008 7:02 PM, James McKenzie <jjmckenzie51 at sprintpcs.com> wrote:
>
> Vitaliy Margolen wrote:
> > Dan Kegel wrote:
> >
> >>>> Maybe add a resolution of NEEDMOREINFO?
> >>>>
> >>> There is no need to add one more reason for a bug resolution IMHO,
> >>> INVALID with appropriate comment does the job.
> >>>
> >> INVALID seems harsh, it may scare away novice reporters.
> >>
> >> Do we want to make it easy to search for bugs stuck
> >> in a needmoreinfo kind of state?  If so, a keyword or state
> >> might be handy.
> >>
> >> Does anybody remember good old gnu gnats, the old bug
> >> tracking system?  It was great this way; it had an explicit
> >> notion of whose ball the court was in.  I miss that.
> >> - Dan
> >>
> >
> > This is useless. Most bugs marked invalid are not Wine bugs. Only few are
> > those that reporters did not include enough information.
> >
> I disagree.  We need to have a method to let the reporter know that the
> project needs more information in order to properly troubleshoot a
> problem.  Closing a reported bug as INVALID is not applicable in this
> case.  If the bug is outside of the scope of the project, it should be
> marked as such.  The word invalid to me means that the bug could not be
> reproduced or the information provided did not disclose a solvable
> problem OR the bug has already been fixed and that the fix will be in
> the next release.  It may be necessary to add a resolution of
> NOTINPROJECT to handle those problems that are outside the scope of the
> project.
>

We do have a method: asking for information in a comment.  Why would
you close a bug as invalid if it's fixed in the next release?
NOTINPROJECT?  Invalid.  Why make this even more complicated than it
already is.  Just say in a comment that the bug lies with another
project and close it as invalid.  In this case, invalid means 'not a
Wine bug.'

-- 
James Hawkins


From thestig at google.com  Sun Jan  6 03:18:20 2008
From: thestig at google.com (Lei Zhang)
Date: Sun, 6 Jan 2008 01:18:20 -0800
Subject: What happened to the videos from WineConf?
In-Reply-To: <558b2f5c0801041432pb71d6b3l9fc390db28357e28@mail.gmail.com>
References: <47752A3A.7010704@codeweavers.com>
	<558b2f5c0801031050h3ea3bb4aq35a696884ef68836@mail.gmail.com>
	<558b2f5c0801041432pb71d6b3l9fc390db28357e28@mail.gmail.com>
Message-ID: <558b2f5c0801060118l6a1547acj1ddc622d61f04766@mail.gmail.com>

On Jan 4, 2008 2:32 PM, Lei Zhang <thestig at google.com> wrote:
>
> On Jan 3, 2008 10:50 AM, Lei Zhang <thestig at google.com> wrote:
> > On Dec 28, 2007 8:54 AM, Maarten Lankhorst <maarten at codeweavers.com> wrote:
> >
> > > I remember at wineconf there were some videos created, what happened
> > > with those? I tried to look on youtube for wineconf, but I didn't find
> > > anything. Are they online yet? Or will they be put online?
> > >
> > > -Maarten
> > >
> > >
> > >
> >
> > Three videos were uploaded to Youtube last night:
> >
> > Alexandre's Keynote
> > http://www.youtube.com/watch?v=GqEp8psjv5s
> >
> > Detlef Riekenberg - Printing in Wine
> > http://www.youtube.com/watch?v=1-n6mClDdBQ
> >
> > Kai Blin - Wine and Samba
> > http://www.youtube.com/watch?v=ToKeJbQ87c0
> >
> > - Lei
> >
>
> Two more videos:
>
> Martin Pilka - CxTest
> http://www.youtube.com/watch?v=VBZNOTngyeo
>
> Marteen Lankhorst - Wine and Sound
> http://www.youtube.com/watch?v=qKaYqsm4I_Q
>
> - Lei
>

Stefan D?singer's talk on Direct3D
http://www.youtube.com/watch?v=eJ-zyKR1N2A


From jeremielapuree at yahoo.fr  Sun Jan  6 03:31:56 2008
From: jeremielapuree at yahoo.fr (paulo lesgaz)
Date: Sun, 6 Jan 2008 10:31:56 +0100 (CET)
Subject: d3dx implementation senseless?
In-Reply-To: <E1JAoyU-0003xr-6E@www9.emo.freenet-rz.de>
Message-ID: <100822.54440.qm@web26005.mail.ukl.yahoo.com>

Since everybody agrees that we need a built-in d3dx9, we could begin to implement it.
In the last talk about it, no plan was found to implement it: does one create a wined3dx or implement on the top of the last d3dx9 dll?

So, I think that a definitive answer should be given very quickly.

David


             
---------------------------------
 Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080106/39c41716/attachment.htm 

From marcus at jet.franken.de  Sun Jan  6 04:00:18 2008
From: marcus at jet.franken.de (Marcus Meissner)
Date: Sun, 6 Jan 2008 11:00:18 +0100
Subject: What happened to the videos from WineConf?
In-Reply-To: <558b2f5c0801060118l6a1547acj1ddc622d61f04766@mail.gmail.com>
References: <47752A3A.7010704@codeweavers.com>
	<558b2f5c0801031050h3ea3bb4aq35a696884ef68836@mail.gmail.com>
	<558b2f5c0801041432pb71d6b3l9fc390db28357e28@mail.gmail.com>
	<558b2f5c0801060118l6a1547acj1ddc622d61f04766@mail.gmail.com>
Message-ID: <20080106100018.GB22496@galeere>

> > > Three videos were uploaded to Youtube last night:
> > >
> > > Alexandre's Keynote
> > > http://www.youtube.com/watch?v=GqEp8psjv5s
> > >
> > > Detlef Riekenberg - Printing in Wine
> > > http://www.youtube.com/watch?v=1-n6mClDdBQ
> > >
> > > Kai Blin - Wine and Samba
> > > http://www.youtube.com/watch?v=ToKeJbQ87c0
> > >
> > Martin Pilka - CxTest
> > http://www.youtube.com/watch?v=VBZNOTngyeo
> >
> > Marteen Lankhorst - Wine and Sound
> > http://www.youtube.com/watch?v=qKaYqsm4I_Q
> 
> Stefan D?singer's talk on Direct3D
> http://www.youtube.com/watch?v=eJ-zyKR1N2A

I added the links to http://wiki.winehq.org/WineConf2007

Ciao, Marcus


From shachar at shemesh.biz  Sun Jan  6 06:29:21 2008
From: shachar at shemesh.biz (Shachar Shemesh)
Date: Sun, 06 Jan 2008 14:29:21 +0200
Subject: Bow and question
In-Reply-To: <fli191$69i$1@ger.gmane.org>
References: <fli191$69i$1@ger.gmane.org>
Message-ID: <4780C9A1.9050802@shemesh.biz>

Juan Carlos Montes wrote:

> Hi all,
>
> I am new in this list, so... Hello!!!
>
> Well, I work in a CERT and we are create a automatic malware detection tool with
> wine.
>
>   
I think you should be aware that Wine is no replacement for a security 
tool. If you run a malware using Wine, it is possible for this malware 
to interact directly with your Linux machine, bypassing your protection.

Shachar


From jan.wine at zerebecki.de  Sun Jan  6 06:39:05 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sun, 6 Jan 2008 13:39:05 +0100
Subject: Where are the bugzilla admins?
In-Reply-To: <22821af30801052055y40e073d9hcba7721a76d7ebd0@mail.gmail.com>
References: <477671A5.6040403@kievinfo.com>
	<20080101161920.GE3426@crissy.swd.zerebecki.de>
	<4780056A.5060306@kievinfo.com>
	<20080106013659.GG3426@crissy.swd.zerebecki.de>
	<22821af30801052055y40e073d9hcba7721a76d7ebd0@mail.gmail.com>
Message-ID: <20080106123905.GI3426@crissy.swd.zerebecki.de>

On Sat, Jan 05, 2008 at 09:55:12PM -0700, James Hawkins wrote:
> On Jan 5, 2008 6:36 PM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> > On Sat, Jan 05, 2008 at 03:32:10PM -0700, Vitaliy Margolen wrote:
> > > Jan Zerebecki wrote:
> > > > On Sat, Dec 29, 2007 at 09:11:17AM -0700, Vitaliy Margolen wrote:
> > > >> Where did our buzilla admins go? 3 weeks and nothing is changing!
> >
> > > If we have only one bugzilla admin and we can not get any response
> > > from that admin for the 4!!! weeks - REGARDLESS what the reasons are, we
> > > need more admins period.
> >
> > In case of these component changes I felt that there was too much
> > controversy (and no final proposal where the only response was
> > "yes"; this paired with that some bugzilla admins wanted me to
> > have an -devel approved list of changes) for me to do changes to
> > bugzilla before waiting some more. (Though some delay can
> > probably be attributed to the fact that I am currently without
> > Internet on weekdays, outside of work.) Anyway no part of that
> > was in any way urgent.
> >
> 
> What controversy?  The final list proposed by me and Vitaliy was unchallenged.

With controversy I was refering to the discussion before. Btw.
the last mail on that thread is now only 2 weeks old and was not
even one week old when Vitaliy sent the first mail in this
thread.

Anyone who wants to to do stuff is welcome, just speak up.


Jan



From jan.wine at zerebecki.de  Sun Jan  6 07:06:37 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sun, 6 Jan 2008 14:06:37 +0100
Subject: bugs audit volunteers require
In-Reply-To: <22821af30801052059l5a086efdi89bf4c73f49e4c26@mail.gmail.com>
References: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
	<20080106020223.GH3426@crissy.swd.zerebecki.de>
	<22821af30801052059l5a086efdi89bf4c73f49e4c26@mail.gmail.com>
Message-ID: <20080106130637.GJ3426@crissy.swd.zerebecki.de>

On Sat, Jan 05, 2008 at 09:59:52PM -0700, James Hawkins wrote:
> On Jan 5, 2008 7:02 PM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> > On Wed, Jan 02, 2008 at 01:19:35AM -0800, Dan Kegel wrote:
> > > >> Maybe add a resolution of NEEDMOREINFO?
> > > >
> > > >There is no need to add one more reason for a bug resolution IMHO,
> > > >INVALID with appropriate comment does the job.
> > >
> > > INVALID seems harsh, it may scare away novice reporters.
> >
> > Yes if it's used without waiting for an answer (or even even more
> > without requesting further clarification) it might make one feel
> > shot down. And usually it's used too quickly. Most bug
> > resolutions should probably be only done when some care or
> > communication was done to check that it's the correct resolution,
> > to avoid resolution ping-pong.
> >
> > > Do we want to make it easy to search for bugs stuck
> > > in a needmoreinfo kind of state?  If so, a keyword or state
> > > might be handy.
> >
> > I think a keyword would be appropriate. It would nicely fit with
> > the "Abandoned?" keyword: first add needmoreinfo, if no answer
> > for 6 month add "Abandoned?", after further 6 month resolve
> > abandoned.
> >
> 
> 12 months to close a bug as abandoned?  6 months is already too long
> for abandoned.  The policy has always been: if a reporter does not
> respond to an information request within X months, close the bug as
> abandoned.  We have 3843 bugs for Wine and the list is only getting
> larger.  This fear of closing bugs is only making the problem worse.
> People seem to forget that a user can always come back and reopen the
> bug report.

Afaik only selected users can reopen bugs. Users that can edit
bugs and the reporter can do that and if I remember correctly we
seem to want to also prevent the reporter from doing that.

Open bugs lingering in needmoreinfo or "Abandoned?" don't hurt.
Othoh closing bugs too quickly as invalid or abandoned may drive
bug reporters away which would hurt us in the long run.

If you'd just want to get less bugs we could have a special
permission for filing bugs and only let selected people who we
trust to report really useful bugs (though I think that is not
what we want).

Anyway the 12 month were only an example, I'm fine with 6 month.
I'm more concerned about closing bugs (e.g. as invalid) where
someone is active and disagrees.

It might make sense to rename "Abandoned?" to needmoreinfo, so
that one can key a bug as needmoreinfo and after x month with
that keyword and no response resolve it abandoned.

Though we probably don't want to use needmoreinfo on bugs where
it's possible for someone to retest if the bug is still there
(e.g. where there is a download for the application and the bug
is described sufficiently to check for it oneself).


Jan



From maarten at codeweavers.com  Sun Jan  6 07:47:24 2008
From: maarten at codeweavers.com (Maarten Lankhorst)
Date: Sun, 06 Jan 2008 14:47:24 +0100
Subject: What happened to the videos from WineConf?
In-Reply-To: <20080106100018.GB22496@galeere>
References: <47752A3A.7010704@codeweavers.com>	<558b2f5c0801031050h3ea3bb4aq35a696884ef68836@mail.gmail.com>	<558b2f5c0801041432pb71d6b3l9fc390db28357e28@mail.gmail.com>	<558b2f5c0801060118l6a1547acj1ddc622d61f04766@mail.gmail.com>
	<20080106100018.GB22496@galeere>
Message-ID: <4780DBEC.8080503@codeweavers.com>

Hi all,

Marcus Meissner schreef:
> I added the links to http://wiki.winehq.org/WineConf2007

I updated that wiki page a little, and added my and newman's photos of
wineconf, and the big group photo. Does anyone else have a photo album
they want to share? I created mine with picasa for linux, which uses wine.

Cheers,
Maarten


From alex at thehandofagony.com  Sun Jan  6 08:29:26 2008
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Sun, 6 Jan 2008 15:29:26 +0100
Subject: comdlg32: 1/2 PageSetupDlg: Convert paint procs to Unicode
In-Reply-To: <018c01c84b77$e5f095c0$a600fea9@DMITRY>
References: <200712302139.43152.alex@thehandofagony.com>
	<018c01c84b77$e5f095c0$a600fea9@DMITRY>
Message-ID: <200801061529.27002.alex@thehandofagony.com>

On Monday 31 December 2007 07:39:28 Dmitry Timoshkov wrote:
> "Alexander Nicolaysen S?rnes" <alex at thehandofagony.com> wrote:
> > comdlg32: 1/2 PageSetupDlg: Convert paint procs to Unicod
>
> What's the purpose of this patch? It improves nothing IMO except of
> making the code less readable, making it not thread safe, calling
> CallWindowProcW where it shouldn't.


Would it be better to have separate A/W painting functions?


Alexander


From dmitry at codeweavers.com  Sun Jan  6 08:29:46 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sun, 6 Jan 2008 22:29:46 +0800
Subject: comdlg32: 1/2 PageSetupDlg: Convert paint procs to Unicode
References: <200712302139.43152.alex@thehandofagony.com><018c01c84b77$e5f095c0$a600fea9@DMITRY>
	<200801061529.27002.alex@thehandofagony.com>
Message-ID: <008101c85070$98407720$a600fea9@DMITRY>

"Alexander Nicolaysen S?rnes" <alex at thehandofagony.com> wrote:

> Would it be better to have separate A/W painting functions?

What that would improve?

-- 
Dmitry.



From alex at thehandofagony.com  Sun Jan  6 08:45:07 2008
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Sun, 6 Jan 2008 15:45:07 +0100
Subject: comdlg32: 1/2 PageSetupDlg: Convert paint procs to Unicode
In-Reply-To: <008101c85070$98407720$a600fea9@DMITRY>
References: <200712302139.43152.alex@thehandofagony.com>
	<200801061529.27002.alex@thehandofagony.com>
	<008101c85070$98407720$a600fea9@DMITRY>
Message-ID: <200801061545.07891.alex@thehandofagony.com>

On Sunday 06 January 2008 15:29:46 Dmitry Timoshkov wrote:
> "Alexander Nicolaysen S?rnes" <alex at thehandofagony.com> wrote:
> > Would it be better to have separate A/W painting functions?
>
> What that would improve?


Nothing that I can think of, but you know the code much beter than me.  It 
just seemed like you disagreed with the intention of my original patch as 
well as the patch itself.


Alexander


From julliard at winehq.org  Sun Jan  6 09:42:33 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Sun, 06 Jan 2008 16:42:33 +0100
Subject: dlls/kernel32/task.c -- minor improvement
In-Reply-To: <Pine.LNX.4.64.0801061333090.23403@acrux.dbai.tuwien.ac.at>
	(Gerald Pfeifer's message of "Sun, 6 Jan 2008 15:56:28 +0100 (CET)")
References: <Pine.LNX.4.64.0801032234190.23403@acrux.dbai.tuwien.ac.at>
	<87d4shalqf.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0801061333090.23403@acrux.dbai.tuwien.ac.at>
Message-ID: <87tzlr6jva.fsf@wine.dyndns.org>

Gerald Pfeifer <gerald at pfeifer.com> writes:

> That depends. ;-)  You're right, it is not ISO C90, but it is in the
> C99 standard which is now close to ten years old.

We don't use C99 features in Wine.

> That said, if you don't want to take the original patch, can we take
> the one below?

I don't think that's an improvement, thunks are not really words, they
are code.

-- 
Alexandre Julliard
julliard at winehq.org


From dank at kegel.com  Sun Jan  6 09:48:42 2008
From: dank at kegel.com (Dan Kegel)
Date: Sun, 6 Jan 2008 07:48:42 -0800
Subject: Why the dash in the new "-unknown" category?
Message-ID: <a71bd89a0801060748k71559769t72cfe077fd333be0@mail.gmail.com>

Is it to make it show up first in the list?


From jmayer at loplof.de  Sun Jan  6 09:52:23 2008
From: jmayer at loplof.de (Joerg Mayer)
Date: Sun, 6 Jan 2008 16:52:23 +0100
Subject: What happened to the videos from WineConf?
In-Reply-To: <4780DBEC.8080503@codeweavers.com>
References: <47752A3A.7010704@codeweavers.com>
	<558b2f5c0801031050h3ea3bb4aq35a696884ef68836@mail.gmail.com>
	<558b2f5c0801041432pb71d6b3l9fc390db28357e28@mail.gmail.com>
	<558b2f5c0801060118l6a1547acj1ddc622d61f04766@mail.gmail.com>
	<20080106100018.GB22496@galeere> <4780DBEC.8080503@codeweavers.com>
Message-ID: <20080106155223.GA672@thot.informatik.uni-kl.de>

On Sun, Jan 06, 2008 at 02:47:24PM +0100, Maarten Lankhorst wrote:
> and the big group photo

OK, and now for those who were not there: An annotated version of that
photo with a who is who pretty please :-)

 Ciao
     Joerg

-- 
Joerg Mayer                                           <jmayer at loplof.de>
We are stuck with technology when what we really want is just stuff that
works. Some say that should read Microsoft instead of technology.


From kumbayo84 at arcor.de  Sun Jan  6 09:54:13 2008
From: kumbayo84 at arcor.de (Peter Oberndorfer)
Date: Sun, 6 Jan 2008 16:54:13 +0100
Subject: [PATCH] ntdll: remove bogus VALGRIND_DISCARD
In-Reply-To: <200801061558.44944.kumbayo84@arcor.de>
References: <200801061558.44944.kumbayo84@arcor.de>
Message-ID: <200801061654.13924.kumbayo84@arcor.de>

On Sonntag 06 Januar 2008, Peter Oberndorfer wrote:
> 
> VALGRIND_DISCARD is used to discard block description handles
> (which are created by VALGRIND_CREATE_BLOCK)
> but it was called with the return value of VALGRIND_MAKE_xxx macros
> which all return 0xffffffff
> dlls/ntdll/signal_i386.c uses this macros already without VALGRIND_DISCARD 
> ---
>  dlls/ntdll/heap.c |   16 ++++++++--------
>  1 files changed, 8 insertions(+), 8 deletions(-)
> 

Please don't apply this yet, it needs further research.
The valgrind manual tells us in the Client Requests section
that VALGRIND_MAKE_xxx functions return such a block handle [1],
But looking at the implementation of valgrind/adding traces to valgind DISCARD request
show it returns 0xffffffff ?

Greetings Peter

[1] valgrind manual Release 3.3.0 - 4.6. Client Requests
* VALGRIND_MAKE_MEM_NOACCESS, VALGRIND_MAKE_MEM_UNDEFINED and VALGRIND_MAKE_MEM_DE
  These mark address ranges as completely inaccessible, accessible but containing unde?ned data, and accessible
  and containing de?ned data, respectively. Subsequent errors may have their faulting addresses described in terms
  of these blocks. _Returns a "block handle"_. Returns zero when not run on Valgrind.
* VALGRIND_MAKE_MEM_DEFINED_IF_ADDRESSABLE. This is just like VALGRIND_MAKE_MEM_DEFINED
  but only affects those bytes that are already addressable.
* VALGRIND_DISCARD: At some point you may want Valgrind to stop reporting errors in terms of the blocks
  de?ned by the previous three macros. To do this, the above macros return a small-integer "block handle". You
  can pass this block handle to VALGRIND_DISCARD. After doing so, Valgrind will no longer be able to relate
  addressing errors to the user-de?ned block associated with the handle. The permissions settings associated with
  the handle remain in place; this just affects how errors are reported, not whether they are reported. Returns 1 for
  an invalid handle and 0 for a valid handle (although passing invalid handles is harmless). Always returns 0 when
  not run on Valgrind.



From marcus at jet.franken.de  Sun Jan  6 10:12:40 2008
From: marcus at jet.franken.de (Marcus Meissner)
Date: Sun, 6 Jan 2008 17:12:40 +0100
Subject: What happened to the videos from WineConf?
In-Reply-To: <20080106155223.GA672@thot.informatik.uni-kl.de>
References: <47752A3A.7010704@codeweavers.com>
	<558b2f5c0801031050h3ea3bb4aq35a696884ef68836@mail.gmail.com>
	<558b2f5c0801041432pb71d6b3l9fc390db28357e28@mail.gmail.com>
	<558b2f5c0801060118l6a1547acj1ddc622d61f04766@mail.gmail.com>
	<20080106100018.GB22496@galeere> <4780DBEC.8080503@codeweavers.com>
	<20080106155223.GA672@thot.informatik.uni-kl.de>
Message-ID: <20080106161239.GB8264@galeere>

On Sun, Jan 06, 2008 at 04:52:23PM +0100, Joerg Mayer wrote:
> On Sun, Jan 06, 2008 at 02:47:24PM +0100, Maarten Lankhorst wrote:
> > and the big group photo
> 
> OK, and now for those who were not there: An annotated version of that
> photo with a who is who pretty please :-)

Be there or be a rectangular thing :)

Actually I started marking one up, but at one point in time run out of
names and time :/

Anyway, the result as I stopped:
http://www.lst.de/~mm/wineconf2007group_annotated.jpg

And the GIMP xcf with every name as another layer:
http://www.lst.de/~mm/IMG_1187.xcf		(26 MB)

If someone mails me what names to fill in where I can update it further.

Ciao, Marcus


From rob at codeweavers.com  Sun Jan  6 10:21:57 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Sun, 06 Jan 2008 16:21:57 +0000
Subject: ole32: Fix a failed call to DllGetClassObject while retrieving
	class object interface pointer.
In-Reply-To: <b4cc5a3d0712220746y4a883afau649a5f22aec8a59@mail.gmail.com>
References: <b4cc5a3d0712200653t738a43c4rcbd00ff8e779e128@mail.gmail.com>	
	<476ABF8B.1080509@codeweavers.com>
	<b4cc5a3d0712220746y4a883afau649a5f22aec8a59@mail.gmail.com>
Message-ID: <47810025.3030209@codeweavers.com>

Huang, Zhangrong wrote:
> Hi,
> Sorry for the delay.
> Here is a test, pls import the attached registry files, and copy
> native activeds.dll, adsldpc.dll,
> adsldp.dll to your windows system32 dir, and patch
> wine/dlls/ole32/tests/moniker.c
>
> Then run the test:
> $ ../../../wine ole32_test.exe.so moniker
> err:ole:apartment_getclassobject DllGetClassObject returned error 0x80004002
> err:ole:create_server class {228d9a81-c302-11cf-9aa4-00aa004a5691} not
> registered
> fixme:ole:CoGetClassObject CLSCTX_REMOTE_SERVER not supported
> err:ole:CoGetClassObject no class object
> {228d9a81-c302-11cf-9aa4-00aa004a5691} could be created for context
> 0x15
> moniker.c:783: Test failed: ****************LDAP**************
> moniker: 2 tests executed (0 marked as todo, 1 failure), 0 skipped.
>
> after my patch:
> $ ../../../wine ole32_test.exe.so moniker
> moniker.c:783: Test failed: ****************LDAP**************
> moniker: 2 tests executed (0 marked as todo, 1 failure), 0 skipped.
>
> Although the test failed, but loading class
> {228d9a81-c302-11cf-9aa4-00aa004a5691} success.
>   

I've just sent a patch for this. Thanks for reporting it and going to 
the trouble of describing how to reproduce it and proposing a patch.

-- 
Rob Shearman



From dank at kegel.com  Sun Jan  6 10:36:28 2008
From: dank at kegel.com (Dan Kegel)
Date: Sun, 6 Jan 2008 08:36:28 -0800
Subject: Strange bash error "shell-init: error retrieving current directory"
Message-ID: <a71bd89a0801060836h4b5d5fcbj8ed3b3f32fb1155a@mail.gmail.com>

I've been seeing the error

shell-init: error retrieving current directory: getcwd: cannot access
parent directories: No such file or directory

a lot recently when running Wine, probably when installers
finish.   It started a couple weeks ago.
I think it's a bash error message.
Anyone else seeing that, or know what causes it?
(Do we run our wrapper script in a directory that goes away, say?)


From jan.wine at zerebecki.de  Sun Jan  6 10:55:55 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sun, 6 Jan 2008 17:55:55 +0100
Subject: bugzilla component and keyword cleanup
Message-ID: <20080106165555.GA4687@crissy.swd.zerebecki.de>

I'm done with one step of the changes.

See the following URLs for how things currently look:
http://bugs.winehq.org/describekeywords.cgi
http://bugs.winehq.org/describecomponents.cgi?product=Wine

Improvement suggestions are welcome.

Does anyone know how the CVS/GIT version is marked so that it
gets selected on the new bug page and if that is also possible
for the component?


Now for further improvements:

Changes which IMHO should not be done:
wine-help -> hhctrl - Help viewer implementation
    help is currently not for the various help APIs but for user
    that want help. We should obsolete this component. We can
    create a new component for the help APIs if there is demand.
(new) -> vdm - Wine 16-bit compatibility layer
(new) -> win16 - Wine 16-bit compatibility layer
    vdm is part of the component dos, right?
    A win16 keyword is probably useful as win16 support is
    intertwined in quite some other DLLs and thus components.

Components that are marked as obsolete now, but where it's not
sure how to replace them:
multimedia
    Should we really replace this? Replace it with what? An mci and winmm component?
console
    I didn't really made my mind up about this one yet...
files
ipc
ports
winelib
    Possibly replace each with a keyword, see below.

Changes to the keywords:
    conformance (delete)
        Delete this keyword, because it fits probably most wine bugs.
    testcase (new)
        Bugs that have a testcase attached, in source form but
        not necessarily integrated into the Wine test suite.
    win16 (new)
        Bugs in the win16 parts of Wine.
    dotnet (new)
        Bugs that appear in applications using dotNet and that
        are related to this dotNet useage.
    winelib (new)
        Bugs during winelib useage but not during useage through
        windows native executables.
    ports (new)
        Bugs regarding porting to specific platforms or OSs.
    FIXME
        needs clarification
    tasklet
        needs clarification
    tasklist
        needs clarification
    Abandoned? -> needmoreinfo
        This is currently discussed in another thread.
    filesystem (new)
        Do we want such a component? Is it maybe related with
        console? What exactly should it cover? Only things that
        possibly can destroy data? 
    console (new)
        I didn't really made my mind up about this one yet...


Jan



From jan.wine at zerebecki.de  Sun Jan  6 10:57:07 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sun, 6 Jan 2008 17:57:07 +0100
Subject: Why the dash in the new "-unknown" category?
In-Reply-To: <a71bd89a0801060748k71559769t72cfe077fd333be0@mail.gmail.com>
References: <a71bd89a0801060748k71559769t72cfe077fd333be0@mail.gmail.com>
Message-ID: <20080106165706.GK3426@crissy.swd.zerebecki.de>

On Sun, Jan 06, 2008 at 07:48:42AM -0800, Dan Kegel wrote:
> Is it to make it show up first in the list?

Yes.


Jan


From tony.wasserka at freenet.de  Sun Jan  6 12:20:13 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Sun, 06 Jan 2008 19:20:13 +0100
Subject: d3dx implementation senseless?
Message-ID: <E1JBa6X-00006m-O8@www20.emo.freenet-rz.de>

> Since everybody agrees that we need a built-in d3dx9, we could begin to implement it.
> In the last talk about it, no plan was found to implement it: does one create a wined3dx or implement on the top of the last d3dx9
> dll?
> 
> So, I think that a definitive answer should be given very quickly.
> 
> David

As far as I read, we decided to create the dlls/d3dx9_** directories, use the latest one for all the code
and forward all calls from older dlls to this one. However, I don't think that it is a problem if a dll contains
more functions than the native dll, so we could also just use 12 (sth. around that) copies of the same dll.

And about starting development: I have already began to implement the D3DXRenderToSurface interface,
but I'm new to COM programming so the progress is quite slow, so I'd recommend someone other to do the
base of the dll. A suggestion I'd like to do is a message that Wine should print out when a program wants to
use the d3dx9 dll, sth. like:
        MESSAGE("The application you want to run makes use of the D3DX9 library!n");
        MESSAGE("tIts implementation under Wine is very young and far away from complete.n");
        MESSAGE("tYou may be better off using a native d3dx9_24.dll file.n");












From julliard at winehq.org  Sun Jan  6 12:35:37 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Sun, 06 Jan 2008 19:35:37 +0100
Subject: dlls/kernel32/task.c -- minor improvement
In-Reply-To: <Pine.LNX.4.64.0801061703190.23403@acrux.dbai.tuwien.ac.at>
	(Gerald Pfeifer's message of "Sun, 6 Jan 2008 18:03:24 +0100 (CET)")
References: <Pine.LNX.4.64.0801032234190.23403@acrux.dbai.tuwien.ac.at>
	<87d4shalqf.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0801061333090.23403@acrux.dbai.tuwien.ac.at>
	<87tzlr6jva.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0801061703190.23403@acrux.dbai.tuwien.ac.at>
Message-ID: <87fxxals3q.fsf@wine.dyndns.org>

Gerald Pfeifer <gerald at pfeifer.com> writes:

> On Sun, 6 Jan 2008, Alexandre Julliard wrote:
>> We don't use C99 features in Wine.
>
> Actually we do.
>
>   % egrep -r "^(static )?inline " $WINE_SOURCE/ | wc -l
>   2031
>
> "inline" is pretty similar to flexible array members in that both were
> not in C90, both are in C99, and both have been GNU extensions before
> C99, so I'm not sure why we use one but not the other.

inline is automatically disabled if the compiler doesn't support it.

-- 
Alexandre Julliard
julliard at winehq.org


From truiken at gmail.com  Sun Jan  6 12:42:19 2008
From: truiken at gmail.com (James Hawkins)
Date: Sun, 6 Jan 2008 11:42:19 -0700
Subject: bugzilla component and keyword cleanup
In-Reply-To: <20080106165555.GA4687@crissy.swd.zerebecki.de>
References: <20080106165555.GA4687@crissy.swd.zerebecki.de>
Message-ID: <22821af30801061042v4bb59au5a3f9284a22f928e@mail.gmail.com>

On Jan 6, 2008 9:55 AM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> I'm done with one step of the changes.
>
> See the following URLs for how things currently look:
> http://bugs.winehq.org/describekeywords.cgi
> http://bugs.winehq.org/describecomponents.cgi?product=Wine
>
> Improvement suggestions are welcome.
>
> Does anyone know how the CVS/GIT version is marked so that it
> gets selected on the new bug page and if that is also possible
> for the component?
>
>
> Now for further improvements:
>
> Changes which IMHO should not be done:
> wine-help -> hhctrl - Help viewer implementation
>     help is currently not for the various help APIs but for user
>     that want help. We should obsolete this component. We can
>     create a new component for the help APIs if there is demand.
>

There is demand.  Using the now _obsolete_help keyword, there are 7
bugs relating to the help APIs.

> (new) -> vdm - Wine 16-bit compatibility layer
> (new) -> win16 - Wine 16-bit compatibility layer
>     vdm is part of the component dos, right?
>     A win16 keyword is probably useful as win16 support is
>     intertwined in quite some other DLLs and thus components.
>
> Components that are marked as obsolete now, but where it's not
> sure how to replace them:
> multimedia
>     Should we really replace this? Replace it with what? An mci and winmm component?
>

Yes it should be replaced with the appropriate components, whichever
Dlls they belong to.  We can start arranging those and then remove the
component when that's done.

> console
>     I didn't really made my mind up about this one yet...
>

Yes, the bug is either in wine-programs (wineconsole) or the console
APIs, kernel32.

> files
> ipc
> ports
> winelib
>     Possibly replace each with a keyword, see below.
>
> Changes to the keywords:
>     conformance (delete)
>         Delete this keyword, because it fits probably most wine bugs.
>     testcase (new)
>         Bugs that have a testcase attached, in source form but
>         not necessarily integrated into the Wine test suite.
>     win16 (new)
>         Bugs in the win16 parts of Wine.
>     dotnet (new)
>         Bugs that appear in applications using dotNet and that
>         are related to this dotNet useage.
>     winelib (new)
>         Bugs during winelib useage but not during useage through
>         windows native executables.
>     ports (new)
>         Bugs regarding porting to specific platforms or OSs.
>     FIXME
>         needs clarification
>     tasklet
>         needs clarification
>     tasklist
>         needs clarification
>     Abandoned? -> needmoreinfo
>         This is currently discussed in another thread.
>     filesystem (new)
>         Do we want such a component? Is it maybe related with
>         console? What exactly should it cover? Only things that
>         possibly can destroy data?
>     console (new)
>         I didn't really made my mind up about this one yet...
>
>
> Jan
>


-- 
James Hawkins


From leslie_alistair at hotmail.com  Sun Jan  6 13:43:05 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Mon, 07 Jan 2008 06:43:05 +1100
Subject: msxml3: IXMLDOMAttribute does not support get_nextSibling
In-Reply-To: <flq8g3$8ik$1@ger.gmane.org>
References: <flq8g3$8ik$1@ger.gmane.org>
Message-ID: <flrb0t$gpd$1@ger.gmane.org>

Ignore this patch.

Alistair Leslie-Hughes wrote:
> Hi,
> 
> Changelog:
>     msxml3: IXMLDOMAttribute does not support get_nextSibling
> 
> 
> Best Regards
> Alistair Leslie-Hughes
> 
> 
> ------------------------------------------------------------------------
> 
> 



From leslie_alistair at hotmail.com  Sun Jan  6 13:43:19 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Mon, 07 Jan 2008 06:43:19 +1100
Subject: msxml3: IXMLDOMDocument does not support get_nextSibling
In-Reply-To: <flq8g3$8il$1@ger.gmane.org>
References: <flq8g3$8il$1@ger.gmane.org>
Message-ID: <flrb1b$gpd$2@ger.gmane.org>

Ignore this patch.

Alistair Leslie-Hughes wrote:
> Hi,
> 
> Changelog:
>     msxml3: IXMLDOMDocument does not support get_nextSibling
> 
> Best Regards
> Alistair Leslie-Hughes
> 
> 
> ------------------------------------------------------------------------
> 
> 



From alexd4 at inbox.lv  Mon Jan  7 00:55:08 2008
From: alexd4 at inbox.lv (Alexander Dorofeyev)
Date: Sun, 06 Jan 2008 22:55:08 -0800
Subject: question about fixing D3DRENDERSTATE_TEXTUREMAPBLEND
Message-ID: <4781CCCC.8030307@inbox.lv>

Hi.

I found some problems with D3DRENDERSTATE_TEXTUREMAPBLEND state =
D3DTBLEND_MODULATE in ddraw and handling the alpha channel. This old state is
currently mapped to texture stage states, with alpha part done as

IWineD3DDevice_SetTextureStageState(This->wineD3DDevice, 0,
WINED3DTSS_ALPHAARG1, WINED3DTA_TEXTURE);
IWineD3DDevice_SetTextureStageState(This->wineD3DDevice, 0,
WINED3DTSS_ALPHAOP, WINED3DTOP_SELECTARG1);

This isn't correct, I believe, because in some cases it should be taken from
diffuse color (Aliens vs Predator 1 depends on it). But the latter behavior
isn't correct in all cases either.

I found this description of this state on some random website via google:

"D3DTBLEND_MODULATE Modulate texture-blending is supported. In this mode, the
RGB values of the texture are multiplied with the RGB values that would have
been used with no texturing. Any alpha values in the texture replace the alpha
values that would have been used with no texturing."

http://www.hi.is/~snorri/SDK-docs/x/exten203.htm

I guess, this means that it either takes alpha from texture or from diffuse
color, depending on whether the current texture has alpha channel (which takes
priority). I've submitted a test for this to wine-patches that includes checks
with both kinds of textures. It passes on XP and thus supports that this is the
way it is supposed to happen. Unfortunately, this doesn't easily translate to
available texture stage states. So it looks like something more hacky is needed
to make it work correctly in all cases in wine. There are two approaches I can
think of:

1) introduce an internal D3DTOP_ value in wined3d that will map to texture alpha
or diffuse alpha, depending on the pixel format of the currently selected texture.

2) move D3DRENDERSTATE_TEXTUREMAPBLEND handling to wined3d;

So it would be nice if Stefan D?singer or maybe somebody else of d3d devs gave
me some directions - which approach (if any) is ok and acceptable for wine
project. I'll attach a diff with my current hacks that show how 1st approach is
about to look.

BTW, this worked in wine around 0.9.15

http://source.winehq.org/git/wine.git/?a=blob;f=dlls/ddraw/opengl_utils.c;h=a2b021985acfe3fbae888cb0e954b8fb47c86db3;hb=0fa7170dc318a6624f960c49e459cb521d2ae999

There it wasn't mapping to texture stage states, but instead was using such call:

glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

 From what I read about GL_MODULATE, I'm not sure it always does exactly the
thing TEXTUREMAPBLEND=MODULATE is supposed to do, but with Aliens vs Predator it
worked better.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: avp1_texmapblend_fixes.diff.txt
Url: http://www.winehq.org/pipermail/wine-devel/attachments/20080106/82c38220/attachment.txt 

From hverbeet at gmail.com  Sun Jan  6 15:33:04 2008
From: hverbeet at gmail.com (H. Verbeet)
Date: Sun, 6 Jan 2008 22:33:04 +0100
Subject: [1/2][try 3] ddraw/tests: add test for rendering vertices with
	zero rhw
In-Reply-To: <4781A5E4.2070001@inbox.lv>
References: <4781A5E4.2070001@inbox.lv>
Message-ID: <d658b69e0801061333k3e8355cevddc30294c77e4d48@mail.gmail.com>

On 07/01/2008, Alexander Dorofeyev <alexd4 at inbox.lv> wrote:
> Hi.
>
> I couldn't reproduce any problems with this patch on wine or on windows, but I
> moved coordinates of retrieved pixel a bit away from edges. I hope this was the
> problem :-/
>
It could've been a depth buffer issue as well. I'm not exactly sure
what the state of the depth buffer is when the test is run, but in
general it appears the GF8 rounds slightly different compared to
previous nvidia cards.


From jjmckenzie51 at sprintpcs.com  Sun Jan  6 17:32:20 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Sun, 06 Jan 2008 16:32:20 -0700
Subject: bugs audit volunteers require
In-Reply-To: <20080106130637.GJ3426@crissy.swd.zerebecki.de>
References: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
	<20080106020223.GH3426@crissy.swd.zerebecki.de>
	<22821af30801052059l5a086efdi89bf4c73f49e4c26@mail.gmail.com>
	<20080106130637.GJ3426@crissy.swd.zerebecki.de>
Message-ID: <47816504.9050804@sprintpcs.com>

Jan Zerebecki wrote:
>
> It might make sense to rename "Abandoned?" to needmoreinfo, so
> that one can key a bug as needmoreinfo and after x month with
> that keyword and no response resolve it abandoned.
>
> Though we probably don't want to use needmoreinfo on bugs where
> it's possible for someone to retest if the bug is still there
> (e.g. where there is a download for the application and the bug
> is described sufficiently to check for it oneself).
>
>   
Jan:

1.  I would give the original reporter less than six months to respond.  
I would wait no more than a month for a response before closing as 
abandoned.

2.  The purpose of needsmoreinfo is that the original reporter did not 
supply sufficient information to reproduce the reported problem.  If a 
reported problem can be tested, and the problem determined, then the bug 
should not be placed in a needsmoreinfo status.  Another status would 
apply, like NEW or CONFIRMED, at this point.

James McKenzie



From maarten at codeweavers.com  Mon Jan  7 00:29:48 2008
From: maarten at codeweavers.com (Maarten Lankhorst)
Date: Mon, 07 Jan 2008 07:29:48 +0100
Subject: d3dx implementation senseless?
In-Reply-To: <E1JBa6X-00006m-O8@www20.emo.freenet-rz.de>
References: <E1JBa6X-00006m-O8@www20.emo.freenet-rz.de>
Message-ID: <4781C6DC.6090607@codeweavers.com>

tony.wasserka at freenet.de schreef:
>> Since everybody agrees that we need a built-in d3dx9, we could begin to implement it.
>> In the last talk about it, no plan was found to implement it: does one create a wined3dx or implement on the top of the last d3dx9
>> dll?
>>
>> So, I think that a definitive answer should be given very quickly.
>>
>> David
>>     
>
> As far as I read, we decided to create the dlls/d3dx9_** directories, use the latest one for all the code
> and forward all calls from older dlls to this one. However, I don't think that it is a problem if a dll contains
> more functions than the native dll, so we could also just use 12 (sth. around that) copies of the same dll.
>
> And about starting development: I have already began to implement the D3DXRenderToSurface interface,
> but I'm new to COM programming so the progress is quite slow, so I'd recommend someone other to do the
> base of the dll. A suggestion I'd like to do is a message that Wine should print out when a program wants to
> use the d3dx9 dll, sth. like:
>         MESSAGE("The application you want to run makes use of the D3DX9 library!n");
>         MESSAGE("tIts implementation under Wine is very young and far away from complete.n");
>         MESSAGE("tYou may be better off using a native d3dx9_24.dll file.n");
>   
Just copy the DllMain from sfc/sfc_main.c for example.

Cheers,
Maarten



From jonathan at ernstfamily.ch  Mon Jan  7 01:54:49 2008
From: jonathan at ernstfamily.ch (Jonathan Ernst)
Date: Mon, 07 Jan 2008 08:54:49 +0100
Subject: [Fwd: Re: French LTEXT correction]
Message-ID: <1199692489.6608.13.camel@jernst-desktop>

Hello,

Please use "reply-to all" so that everybody on the list can read your
answer.

-------- Forwarded Message --------
From: Vincent Hardy <vincent.hardy.be at gmail.com>
Reply-To: vincent.hardy.be at gmail.com
To: Jonathan Ernst <jonathan at ernstfamily.ch>
Subject: Re: French LTEXT correction
Date: Mon, 07 Jan 2008 08:45:19 +0100

Jonathan Ernst a ?crit :
> On ven, 2008-01-04 at 11:24 +0100, Vincent Hardy wrote:
>> Regedit displays "Rechercher::". Now Regedit displays "Rechercher :" and 
>> so on...
> 
> It doesn't here (?). Furthermore in French ":" should be preceded by an
> unbreakable space (like it's the case now) and not a normal space.
> 
> 
> 
Thank you for your explanation.

Nevertheless, it is not normal "::". See capture...

(sorry for my poor english, I'm french speaking)


-------------- next part --------------
A non-text attachment was scrubbed...
Name: regedit.png
Type: image/png
Size: 5274 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080107/4eb82388/attachment.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080107/4eb82388/attachment.pgp 

From jonathan at ernstfamily.ch  Mon Jan  7 02:04:44 2008
From: jonathan at ernstfamily.ch (Jonathan Ernst)
Date: Mon, 07 Jan 2008 09:04:44 +0100
Subject: [Fwd: Re: French LTEXT correction]
In-Reply-To: <1199692489.6608.13.camel@jernst-desktop>
References: <1199692489.6608.13.camel@jernst-desktop>
Message-ID: <1199693084.6608.18.camel@jernst-desktop>

Hello,

On lun, 2008-01-07 at 08:54 +0100, Jonathan Ernst wrote:
> From: Vincent Hardy <vincent.hardy.be at gmail.com>
> Date: Mon, 07 Jan 2008 08:45:19 +0100
> 
> Jonathan Ernst a ?crit :
> > On ven, 2008-01-04 at 11:24 +0100, Vincent Hardy wrote:
> >> Regedit displays "Rechercher::". Now Regedit displays "Rechercher :" and 
> >> so on...
> > 
> > It doesn't here (?). Furthermore in French ":" should be preceded by an
> > unbreakable space (like it's the case now) and not a normal space.
> > 
> > 
> > 
> Thank you for your explanation.
> 
> Nevertheless, it is not normal "::". See capture...

As I said, I don't have this problem here. We first have to understand
why you have a different rendering than mine.

What is your locale ? (I have fr_CH.UTF-8)

Is it a font problem (missing &nbsp; character) ?

Does someone else here know about the difference we are seeing and how
to fix it properly ?

> 
> (sorry for my poor english, I'm french speaking)

So do I, don't worry.

Best regards.

Jonathan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: me.png
Type: image/png
Size: 5084 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080107/2850a735/attachment.png 

From jonathan at ernstfamily.ch  Mon Jan  7 02:04:45 2008
From: jonathan at ernstfamily.ch (Jonathan Ernst)
Date: Mon, 07 Jan 2008 09:04:45 +0100
Subject: [Fwd: Re: French LTEXT correction]
In-Reply-To: <1199692489.6608.13.camel@jernst-desktop>
References: <1199692489.6608.13.camel@jernst-desktop>
Message-ID: <1199693084.6608.18.camel@jernst-desktop>

Hello,

On lun, 2008-01-07 at 08:54 +0100, Jonathan Ernst wrote:
> From: Vincent Hardy <vincent.hardy.be at gmail.com>
> Date: Mon, 07 Jan 2008 08:45:19 +0100
> 
> Jonathan Ernst a ?crit :
> > On ven, 2008-01-04 at 11:24 +0100, Vincent Hardy wrote:
> >> Regedit displays "Rechercher::". Now Regedit displays "Rechercher :" and 
> >> so on...
> > 
> > It doesn't here (?). Furthermore in French ":" should be preceded by an
> > unbreakable space (like it's the case now) and not a normal space.
> > 
> > 
> > 
> Thank you for your explanation.
> 
> Nevertheless, it is not normal "::". See capture...

As I said, I don't have this problem here. We first have to understand
why you have a different rendering than mine.

What is your locale ? (I have fr_CH.UTF-8)

Is it a font problem (missing &nbsp; character) ?

Does someone else here know about the difference we are seeing and how
to fix it properly ?

> 
> (sorry for my poor english, I'm french speaking)

So do I, don't worry.

Best regards.

Jonathan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: me.png
Type: image/png
Size: 5084 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080107/2850a735/attachment-0001.png 

From stefandoesinger at gmx.at  Mon Jan  7 06:15:18 2008
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Mon, 7 Jan 2008 13:15:18 +0100
Subject: d3dx implementation senseless?
In-Reply-To: <4781C6DC.6090607@codeweavers.com>
References: <E1JBa6X-00006m-O8@www20.emo.freenet-rz.de>
	<4781C6DC.6090607@codeweavers.com>
Message-ID: <200801071315.19188.stefandoesinger@gmx.at>

Am Montag, 7. Januar 2008 07:29:48 schrieb Maarten Lankhorst:
> tony.wasserka at freenet.de schreef:
> >> Since everybody agrees that we need a built-in d3dx9, we could begin to
> >> implement it. In the last talk about it, no plan was found to implement
> >> it: does one create a wined3dx or implement on the top of the last d3dx9
> >> dll?
> >>
> >> So, I think that a definitive answer should be given very quickly.
> >>
> >> David
> >
> > As far as I read, we decided to create the dlls/d3dx9_** directories, use
> > the latest one for all the code and forward all calls from older dlls to
> > this one. However, I don't think that it is a problem if a dll contains
> > more functions than the native dll, so we could also just use 12 (sth.
> > around that) copies of the same dll.
> >
> > And about starting development: I have already began to implement the
> > D3DXRenderToSurface interface, but I'm new to COM programming so the
> > progress is quite slow, so I'd recommend someone other to do the base of
> > the dll. A suggestion I'd like to do is a message that Wine should print
> > out when a program wants to use the d3dx9 dll, sth. like:
> >         MESSAGE("The application you want to run makes use of the D3DX9
> > library!n"); MESSAGE("tIts implementation under Wine is very young and
> > far away from complete.n"); MESSAGE("tYou may be better off using a
> > native d3dx9_24.dll file.n");
>
> Just copy the DllMain from sfc/sfc_main.c for example.
Just make WINE_DLL_PREATTACH return FALSE and wine will prefer the native 
version if available



From blake at mcbride.name  Mon Jan  7 06:44:56 2008
From: blake at mcbride.name (Blake McBride)
Date: Mon, 07 Jan 2008 06:44:56 -0600
Subject: Can't figure out how to link a program
In-Reply-To: <878x35a97n.fsf@wine.dyndns.org>
References: <477E4633.9070800@mcbride.name> <878x35a97n.fsf@wine.dyndns.org>
Message-ID: <47821EC8.9080001@mcbride.name>


Dear Alexandre,

Thank you for your response.  With that little information I was able to 
get my entire system working.  Two or three very simple examples showing 
all the steps in the docs would be worth their weight in gold and would 
be so easy to do.  It's also a shame I had to send the inquiry through 
three different channels before getting an answer.

Thank you very much for your quick response.  I t made all the difference.

Respectfully,

Blake McBride

Alexandre Julliard wrote:
> Blake McBride <blake at mcbride.name> writes:
>
>   
>> I apologize for bothering you with this.  I have tried getting an
>> answer to this on comp.emulators.ms-windows.wine and on
>> wine-devel at winehq.org without any responses.  Actually, I am quite
>> surprised that neither is this information available in the
>> documentation, the examples, nor the faq.  It seems like being able to
>> compile and link a simple hello-world program without all kinds of
>> convoluted / cygwin compatible / shared library wrapper stuff is
>> either impossible or a deeply guarded secret.  I used to use Willows
>> and everything build cleanly and simply.  Basically I'm just trying to
>> compile a C program that uses the Win32 API.  I would think there
>> would be some simple way of compiling with your include files and
>> linking with your libraries in a straight forward and simple way (like
>> every other development system).
>>     
>
> There is, you have to use winegcc instead of plain gcc. It does all the
> magic for you.
>
>   


From madewokherd+d41d at gmail.com  Mon Jan  7 06:47:20 2008
From: madewokherd+d41d at gmail.com (Vincent Povirk)
Date: Mon, 7 Jan 2008 07:47:20 -0500
Subject: Fwd: [alkyproject-announce] End of an era
In-Reply-To: <4987c3660801070046w109c6d7et76e82b7c94f27893@mail.gmail.com>
References: <4987c3660801070046w109c6d7et76e82b7c94f27893@mail.gmail.com>
Message-ID: <ced95fe0801070447i455280cfnd7f4e012fb3fe88d@mail.gmail.com>

Forwarding in case this might be useful to anyone here.


---------- Forwarded message ----------
From: Cody Brocious <cody.brocious at gmail.com>
Date: Jan 7, 2008 3:46 AM
Subject: [alkyproject-announce] End of an era
To: alkyproject-announce at googlegroups.com



It is with great sadness that I announce the closing of Falling Leaf
Systems, LLC. We set out over a year ago to provide users of both "old
and unsupported" as well as "alternative" Operating Systems the
ability to run the latest games for the PC. Unfortunately, Falling
Leaf Systems was unable to achieve that goal.

However, every ending tends to open another door for opportunity and
though we are saddened to announce our departure, we are almost as
excited to announce the immediate availability of ALL source code for
the Alky Project! It is licensed under the LGPL and includes both the
orginal Alky Converter source used to convert the popular Prey Demo to
run on OSX and Linux, as well as the alpha release of the Alky
Compatibility Libraries which attempted to provide a DirectX10
compatible runtime for Windows XP.  All of this is available at
http://www.fallingleafsystems.com/

We have also created some new forums on the site for users to discuss
the coming cycle of DirectX 10 based games. We hope that you'll pop in
there from time to time, and we also hope you join our mailing list to
receive an announcement in case some other Open Source project decides
to carry on the Alky banner.

We appreciate all your past support; Happy gaming!

--~--~---------~--~----~------------~-------~--~----~
You received this message because you are subscribed to the Google
Groups "Alky Project Announcements" group.
To post to this group, send email to alkyproject-announce at googlegroups.com
To unsubscribe from this group, send email to
alkyproject-announce-unsubscribe at googlegroups.com
For more options, visit this group at
http://groups.google.com/group/alkyproject-announce?hl=en
-~----------~----~----~----~------~----~------~--~---




-- 
Vincent Povirk


From julliard at winehq.org  Mon Jan  7 06:49:20 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 07 Jan 2008 13:49:20 +0100
Subject: Can't figure out how to link a program
In-Reply-To: <47821EC8.9080001@mcbride.name> (Blake McBride's message of "Mon, 
	07 Jan 2008 06:44:56 -0600")
References: <477E4633.9070800@mcbride.name> <878x35a97n.fsf@wine.dyndns.org>
	<47821EC8.9080001@mcbride.name>
Message-ID: <87bq7xls1b.fsf@wine.dyndns.org>

Blake McBride <blake at mcbride.name> writes:

> Thank you for your response.  With that little information I was able
> to get my entire system working.  Two or three very simple examples
> showing all the steps in the docs would be worth their weight in gold
> and would be so easy to do.

Patches are welcome...

-- 
Alexandre Julliard
julliard at winehq.org


From marcodasilva at gmail.com  Mon Jan  7 08:46:43 2008
From: marcodasilva at gmail.com (Marco da Silva)
Date: Mon, 07 Jan 2008 14:46:43 +0000
Subject: Fwd: [alkyproject-announce] End of an era 
Message-ID: <47823B53.2080002@gmail.com>

Can that code be used in wine? the DX implementation could help I think




From tony.wasserka at freenet.de  Mon Jan  7 10:30:40 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Mon, 07 Jan 2008 17:30:40 +0100
Subject: d3dx implementation senseless?
Message-ID: <E1JBus4-0000D8-RT@www11.emo.freenet-rz.de>

Okay, I have a bit time now and tomorrow, so I'll probably have submitted a basic d3dx9 dll patch
until Wednesday. So I'll create a new d3dx9 directory inside dlls, but I'm not that familiar with
Wine's makefile system (not very much with makefiles in general honestly), so can anyone
tell me how to tell make that it should create several copies of our dll?











From julliard at winehq.org  Mon Jan  7 11:11:25 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 07 Jan 2008 18:11:25 +0100
Subject: [PATCH] Fix REG_MULTI_SZ save fromat - bug 824
In-Reply-To: <76af6e3c0801050652q56b7daf3q1ee6ac1bd214321@mail.gmail.com>
	(Michal Piaskowski's message of "Sat, 5 Jan 2008 15:52:26 +0100")
References: <76af6e3c0801050652q56b7daf3q1ee6ac1bd214321@mail.gmail.com>
Message-ID: <873at9lfwi.fsf@wine.dyndns.org>

"Michal Piaskowski" <piaskal at gmail.com> writes:

> Hi!
> This is my first patch for wine. It fixes bug 824.
>
> The problem is that wine stores REG_MULTI_SZ as
> null terminated string and sometimes looses information about data length.
> Without this information wine can't tell if the original string was null
> terminated or not.

I don't think a non null-terminated MULTI_SZ string is very useful. Do
you really have an app that depends on this?

-- 
Alexandre Julliard
julliard at winehq.org


From gerald at pfeifer.com  Sun Jan  6 08:56:28 2008
From: gerald at pfeifer.com (Gerald Pfeifer)
Date: Sun, 6 Jan 2008 15:56:28 +0100 (CET)
Subject: dlls/kernel32/task.c -- minor improvement
In-Reply-To: <87d4shalqf.fsf@wine.dyndns.org>
References: <Pine.LNX.4.64.0801032234190.23403@acrux.dbai.tuwien.ac.at>
	<87d4shalqf.fsf@wine.dyndns.org>
Message-ID: <Pine.LNX.4.64.0801061333090.23403@acrux.dbai.tuwien.ac.at>

On Fri, 4 Jan 2008, Alexandre Julliard wrote:
>> -    WORD  thunks[4];  /* Each thunk is 4 words long */
>> +    WORD  thunks[];   /* Each thunk is 4 words long */
> That syntax is not portable.

That depends. ;-)  You're right, it is not ISO C90, but it is in the
C99 standard which is now close to ten years old.

  % gcc -pedantic x.c -c -o x -std=c99
  % gcc -pedantic x.c -c -o x -std=c89
  x.c:3: warning: ISO C90 does not support flexible array members
  % gcc -pedantic x.c -c -o x
  x.c:3: warning: ISO C90 does not support flexible array members

Which compiler that we care about doesn't support this C99 feature?

That said, if you don't want to take the original patch, can we take
the one below?

Thanks,
Gerald

ChangeLog:
Use 4*sizeof(WORD) instead of the magic constant 8 for THUNKS.thunks,
and explain why we cannot use an open array type THUNKS.thunks[].

Index: dlls/kernel32/task.c
===================================================================
RCS file: /home/wine/wine/dlls/kernel32/task.c,v
retrieving revision 1.2
diff -u -3 -p -r1.2 task.c
--- dlls/kernel32/task.c	13 Oct 2006 10:27:19 -0000	1.2
+++ dlls/kernel32/task.c	6 Jan 2008 12:26:32 -0000
@@ -57,7 +57,10 @@ typedef struct
     WORD  magic;      /* Thunks signature */
     WORD  unused;
     WORD  free;       /* Head of the free list */
-    WORD  thunks[4];  /* Each thunk is 4 words long */
+    WORD  thunks[4];  /* Each thunk is 4 words long, and while we will
+                       * dynamically allocate the whole struct according
+                       * to the actual number of thunks we cannot use the
+                       * thunks[] syntax here because it is not C90. */
 } THUNKS;
 
 #include "poppack.h"
@@ -174,7 +177,7 @@ static void TASK_CreateThunks( HGLOBAL16
     free = pThunk->free;
     for (i = 0; i < count-1; i++)
     {
-        free += 8;  /* Offset of next thunk */
+        free += 4*sizeof(WORD);  /* Offset of next thunk */
         pThunk->thunks[4*i] = free;
     }
     pThunk->thunks[4*i] = 0;  /* Last thunk */
@@ -201,7 +204,8 @@ static SEGPTR TASK_AllocThunk(void)
         sel = pThunk->next;
         if (!sel)  /* Allocate a new segment */
         {
-            sel = GLOBAL_Alloc( GMEM_FIXED, sizeof(THUNKS) + (MIN_THUNKS-1)*8,
+            sel = GLOBAL_Alloc( GMEM_FIXED,
+                                sizeof(THUNKS) + (MIN_THUNKS-1)*4*sizeof(WORD),
                                 pTask->hPDB, WINE_LDT_FLAGS_CODE );
             if (!sel) return (SEGPTR)0;
             TASK_CreateThunks( sel, 0, MIN_THUNKS );


From gerald at pfeifer.com  Sun Jan  6 11:03:24 2008
From: gerald at pfeifer.com (Gerald Pfeifer)
Date: Sun, 6 Jan 2008 18:03:24 +0100 (CET)
Subject: dlls/kernel32/task.c -- minor improvement
In-Reply-To: <87tzlr6jva.fsf@wine.dyndns.org>
References: <Pine.LNX.4.64.0801032234190.23403@acrux.dbai.tuwien.ac.at>
	<87d4shalqf.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0801061333090.23403@acrux.dbai.tuwien.ac.at>
	<87tzlr6jva.fsf@wine.dyndns.org>
Message-ID: <Pine.LNX.4.64.0801061703190.23403@acrux.dbai.tuwien.ac.at>

On Sun, 6 Jan 2008, Alexandre Julliard wrote:
> We don't use C99 features in Wine.

Actually we do.

  % egrep -r "^(static )?inline " $WINE_SOURCE/ | wc -l
  2031

"inline" is pretty similar to flexible array members in that both were
not in C90, both are in C99, and both have been GNU extensions before
C99, so I'm not sure why we use one but not the other.

>> That said, if you don't want to take the original patch, can we take
>> the one below?
> I don't think that's an improvement, thunks are not really words, they 
> are code.

I know, but in the current code we do have WORD thunks[4] and later on we 
twice relyy on the magic constant 8 which comes from that (4*sizeof WORD).

Honestly, I'd hope my patch makes this code easier to grasp.  

It certainly would have helped *me* when first looking at this code! ;-)

Gerald

ChangeLog:
Use 4*sizeof(WORD) instead of the magic constant 8 for THUNKS.thunks,
and explain why we cannot use an open array type THUNKS.thunks[].

Index: dlls/kernel32/task.c
===================================================================
RCS file: /home/wine/wine/dlls/kernel32/task.c,v
retrieving revision 1.2
diff -u -3 -p -r1.2 task.c
--- dlls/kernel32/task.c	13 Oct 2006 10:27:19 -0000	1.2
+++ dlls/kernel32/task.c	6 Jan 2008 12:26:32 -0000
@@ -57,7 +57,10 @@ typedef struct
     WORD  magic;      /* Thunks signature */
     WORD  unused;
     WORD  free;       /* Head of the free list */
-    WORD  thunks[4];  /* Each thunk is 4 words long */
+    WORD  thunks[4];  /* Each thunk is 4 words long, and while we will
+                       * dynamically allocate the whole struct according
+                       * to the actual number of thunks we cannot use the
+                       * thunks[] syntax here because it is not C90. */
 } THUNKS;
 
 #include "poppack.h"
@@ -174,7 +177,7 @@ static void TASK_CreateThunks( HGLOBAL16
     free = pThunk->free;
     for (i = 0; i < count-1; i++)
     {
-        free += 8;  /* Offset of next thunk */
+        free += 4*sizeof(WORD);  /* Offset of next thunk */
         pThunk->thunks[4*i] = free;
     }
     pThunk->thunks[4*i] = 0;  /* Last thunk */
@@ -201,7 +204,8 @@ static SEGPTR TASK_AllocThunk(void)
         sel = pThunk->next;
         if (!sel)  /* Allocate a new segment */
         {
-            sel = GLOBAL_Alloc( GMEM_FIXED, sizeof(THUNKS) + (MIN_THUNKS-1)*8,
+            sel = GLOBAL_Alloc( GMEM_FIXED,
+                                sizeof(THUNKS) + (MIN_THUNKS-1)*4*sizeof(WORD),
                                 pTask->hPDB, WINE_LDT_FLAGS_CODE );
             if (!sel) return (SEGPTR)0;
             TASK_CreateThunks( sel, 0, MIN_THUNKS );



From vincent.hardy.be at gmail.com  Mon Jan  7 03:21:42 2008
From: vincent.hardy.be at gmail.com (Vincent Hardy)
Date: Mon, 07 Jan 2008 10:21:42 +0100
Subject: [Fwd: Re: French LTEXT correction]
In-Reply-To: <1199693084.6608.18.camel@jernst-desktop>
References: <1199692489.6608.13.camel@jernst-desktop>
	<1199693084.6608.18.camel@jernst-desktop>
Message-ID: <4781EF26.10103@gmail.com>

Jonathan Ernst a ?crit :
> Hello,
> 
> On lun, 2008-01-07 at 08:54 +0100, Jonathan Ernst wrote:
>> From: Vincent Hardy <vincent.hardy.be at gmail.com>
>> Date: Mon, 07 Jan 2008 08:45:19 +0100
>>
>> Jonathan Ernst a ?crit :
>>> On ven, 2008-01-04 at 11:24 +0100, Vincent Hardy wrote:
>>>> Regedit displays "Rechercher::". Now Regedit displays "Rechercher :" and 
>>>> so on...
>>> It doesn't here (?). Furthermore in French ":" should be preceded by an
>>> unbreakable space (like it's the case now) and not a normal space.
>>>
>>>
>>>
>> Thank you for your explanation.
>>
>> Nevertheless, it is not normal "::". See capture...
> 
> As I said, I don't have this problem here. We first have to understand
> why you have a different rendering than mine.
> 
> What is your locale ? (I have fr_CH.UTF-8)
I have fr_BE.UTF-8 (on gentoo)
> 
> Is it a font problem (missing &nbsp; character) ?
> 
> Does someone else here know about the difference we are seeing and how
> to fix it properly ?
> 
>> (sorry for my poor english, I'm french speaking)
> 
> So do I, don't worry.
> 
> Best regards.
> 
> Jonathan
> 
> 
> ------------------------------------------------------------------------
> 



From vincent.hardy.be at gmail.com  Mon Jan  7 04:52:39 2008
From: vincent.hardy.be at gmail.com (Vincent Hardy)
Date: Mon, 07 Jan 2008 11:52:39 +0100
Subject: [Fwd: Re: French LTEXT correction]
In-Reply-To: <1199693084.6608.18.camel@jernst-desktop>
References: <1199692489.6608.13.camel@jernst-desktop>
	<1199693084.6608.18.camel@jernst-desktop>
Message-ID: <47820477.4010702@gmail.com>

Jonathan Ernst a ?crit :
> Hello,
> 
> On lun, 2008-01-07 at 08:54 +0100, Jonathan Ernst wrote:
>> From: Vincent Hardy <vincent.hardy.be at gmail.com>
>> Date: Mon, 07 Jan 2008 08:45:19 +0100
>>
>> Jonathan Ernst a ?crit :
>>> On ven, 2008-01-04 at 11:24 +0100, Vincent Hardy wrote:
>>>> Regedit displays "Rechercher::". Now Regedit displays "Rechercher :" and 
>>>> so on...
>>> It doesn't here (?). Furthermore in French ":" should be preceded by an
>>> unbreakable space (like it's the case now) and not a normal space.
>>>
>>>
>>>
>> Thank you for your explanation.
>>
>> Nevertheless, it is not normal "::". See capture...
> 
> As I said, I don't have this problem here. We first have to understand
> why you have a different rendering than mine.
> 
> What is your locale ? (I have fr_CH.UTF-8)

I have fr_BE.UTF-8 (on gentoo)

> 
> Is it a font problem (missing &nbsp; character) ?
> 
> Does someone else here know about the difference we are seeing and how
> to fix it properly ?
> 
>> (sorry for my poor english, I'm french speaking)
> 
> So do I, don't worry.
> 
> Best regards.
> 
> Jonathan
> 
> 
> ------------------------------------------------------------------------
> 



From rob at codeweavers.com  Mon Jan  7 11:38:15 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Mon, 07 Jan 2008 17:38:15 +0000
Subject: dlls/kernel32/task.c -- minor improvement
In-Reply-To: <87d4shalqf.fsf@wine.dyndns.org>
References: <Pine.LNX.4.64.0801032234190.23403@acrux.dbai.tuwien.ac.at>
	<87d4shalqf.fsf@wine.dyndns.org>
Message-ID: <47826387.5090406@codeweavers.com>

Alexandre Julliard wrote:
> Gerald Pfeifer <gerald at pfeifer.com> writes:
>
>   
>> Index: dlls/kernel32/task.c
>> ===================================================================
>> RCS file: /home/wine/wine/dlls/kernel32/task.c,v
>> retrieving revision 1.2
>> diff -u -3 -p -r1.2 task.c
>> --- dlls/kernel32/task.c	13 Oct 2006 10:27:19 -0000	1.2
>> +++ dlls/kernel32/task.c	3 Jan 2008 21:33:44 -0000
>> @@ -57,7 +57,7 @@ typedef struct
>>      WORD  magic;      /* Thunks signature */
>>      WORD  unused;
>>      WORD  free;       /* Head of the free list */
>> -    WORD  thunks[4];  /* Each thunk is 4 words long */
>> +    WORD  thunks[];   /* Each thunk is 4 words long */
>>  } THUNKS;
>>     
>
> That syntax is not portable.

We have the ANYSIZE_ARRAY macro in include/winnt.h for this exact purpose.

-- 
Rob Shearman



From julliard at winehq.org  Mon Jan  7 12:53:08 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 07 Jan 2008 19:53:08 +0100
Subject: [PATCH] Fix REG_MULTI_SZ save fromat - bug 824
In-Reply-To: <76af6e3c0801070937p6eebf031i742a33ea6899b63b@mail.gmail.com>
	(Michal Piaskowski's message of "Mon, 7 Jan 2008 18:37:16 +0100")
References: <76af6e3c0801050652q56b7daf3q1ee6ac1bd214321@mail.gmail.com>
	<873at9lfwi.fsf@wine.dyndns.org>
	<76af6e3c0801070937p6eebf031i742a33ea6899b63b@mail.gmail.com>
Message-ID: <87ve65jwmj.fsf@wine.dyndns.org>

"Michal Piaskowski" <piaskal at gmail.com> writes:

> I don't know of any such application.
> It's just an old bug and one of very few bugs marked as tasklets.
> And it seemed very easy to fix, so i tried fixing it.
> Plus it's different from the way windows XP does it.
>
> If you think it should stay the way it is now, maybe it should be
> resolved with WONTFIX?

I'm not opposed to fixing it, but changing all strings to hex format is
not a good solution, it makes the file much harder to read and modify.

-- 
Alexandre Julliard
julliard at winehq.org


From piaskal at gmail.com  Mon Jan  7 11:37:16 2008
From: piaskal at gmail.com (Michal Piaskowski)
Date: Mon, 7 Jan 2008 18:37:16 +0100
Subject: [PATCH] Fix REG_MULTI_SZ save fromat - bug 824
In-Reply-To: <873at9lfwi.fsf@wine.dyndns.org>
References: <76af6e3c0801050652q56b7daf3q1ee6ac1bd214321@mail.gmail.com>
	<873at9lfwi.fsf@wine.dyndns.org>
Message-ID: <76af6e3c0801070937p6eebf031i742a33ea6899b63b@mail.gmail.com>

I don't know of any such application.
It's just an old bug and one of very few bugs marked as tasklets.
And it seemed very easy to fix, so i tried fixing it.
Plus it's different from the way windows XP does it.

If you think it should stay the way it is now, maybe it should be
resolved with WONTFIX?

-- 
Micha? Piaskowski

On Jan 7, 2008 6:11 PM, Alexandre Julliard <julliard at winehq.org> wrote:
> "Michal Piaskowski" <piaskal at gmail.com> writes:
>
> > Hi!
> > This is my first patch for wine. It fixes bug 824.
> >
> > The problem is that wine stores REG_MULTI_SZ as
> > null terminated string and sometimes looses information about data length.
> > Without this information wine can't tell if the original string was null
> > terminated or not.
>
> I don't think a non null-terminated MULTI_SZ string is very useful. Do
> you really have an app that depends on this?
>
> --
> Alexandre Julliard
> julliard at winehq.org
>

From stefandoesinger at gmx.at  Mon Jan  7 13:07:22 2008
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Mon, 7 Jan 2008 20:07:22 +0100
Subject: Fwd: [alkyproject-announce] End of an era
In-Reply-To: <47823B53.2080002@gmail.com>
References: <47823B53.2080002@gmail.com>
Message-ID: <200801072007.22763.stefandoesinger@gmx.at>

Am Montag, 7. Januar 2008 15:46:43 schrieb Marco da Silva:
> Can that code be used in wine? the DX implementation could help I think
Not really, no. I had a quick look at it, and it is at best a hello world 
implementation.

Looking at their D3D10 implementation, it is comparable to Andras' soc code, 
with the difference that Alky has a few lines to create a gl context and send 
off vertices, but Andras has written a D3D10.idl header. Adding the 
functionality of Alky to Andras' code is a matter of hours, if we do it the 
hacky way. So all in all I think that the not yet integrated d3d10 that Wine 
has is more advanced. (Andras: Do you plan to continue working on that 
somewhen?)

As far as other libraries go, there isn't much to see either. D3D9 isn't even 
comparable to the very first out-of-tree patch Oliver put onto Sourceforge 
years ago. No handling for stateblocks or shaders, no proper texture 
handling, no vertex arrays, etc. The other libraries are in a similar state. 
D3DX has a few math functions implemented, but we have all of that already 
thanks to David and the other D3DX hackers.

While the code may not be of any use for us(or anyone else, since Wine 
exists), Cody seems to have written a lot of code. It might not be comparable 
to Wine, which has enjoyed the work of almost thousand developers and is 
almost 15 years old, it seems to be quite some accomplishment for a project 
which has been developed by apparently one(two?) persons. (I have no 
comparison how Wine started though. I only had a Gameboy back then :-) )

And kudos to them for releasing the source!



From dank at kegel.com  Mon Jan  7 13:38:18 2008
From: dank at kegel.com (Dan Kegel)
Date: Mon, 7 Jan 2008 11:38:18 -0800
Subject: [PATCH] Fix REG_MULTI_SZ save fromat - bug 824
Message-ID: <a71bd89a0801071138k478dc756vc6dcabe0ace4c549@mail.gmail.com>

Alexandre wrote:
> I don't think a non null-terminated MULTI_SZ string is very useful.
> Do you really have an app that depends on this?

http://www.xpregistrycleaner.com/embedded-null-characters/ claims
"some software vendors use the embedded-null registry key technique
as a way to enforce the software license agreement and to reduce the
ability of users to tamper with the license information stored in
these registry keys."

http://forum.sysinternals.com/forum_posts.asp?TID=6030 claims
"iuVCR (www.iulabs.com) 4.11.0.374" might be such an app.

http://forum.sysinternals.com/forum_posts.asp?TID=2628
says
"The Aladdin Privilege Software Commerce Platform (SCP) may be a
common denominator for instances of Registry keys with embedded nulls
detected by RKR.
... [One app that seemed to use them was] a free trial of Adobe
Acrobat Professional 6.0."

http://forum.sysinternals.com/forum_posts.asp?TID=8882&PN=1
mentions that Windows itself uses keys with trailing nulls for some things.

And of course there's all that splendid malware.
- Dan

-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From julliard at winehq.org  Mon Jan  7 13:47:56 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 07 Jan 2008 20:47:56 +0100
Subject: [PATCH] Fix REG_MULTI_SZ save fromat - bug 824
In-Reply-To: <a71bd89a0801071138k478dc756vc6dcabe0ace4c549@mail.gmail.com>
	(Dan Kegel's message of "Mon, 7 Jan 2008 11:38:18 -0800")
References: <a71bd89a0801071138k478dc756vc6dcabe0ace4c549@mail.gmail.com>
Message-ID: <87r6gtju37.fsf@wine.dyndns.org>

"Dan Kegel" <dank at kegel.com> writes:

> Alexandre wrote:
>> I don't think a non null-terminated MULTI_SZ string is very useful.
>> Do you really have an app that depends on this?
>
> http://www.xpregistrycleaner.com/embedded-null-characters/ claims
> "some software vendors use the embedded-null registry key technique
> as a way to enforce the software license agreement and to reduce the
> ability of users to tamper with the license information stored in
> these registry keys."

Embedded nulls should work just fine. The case that doesn't work is
string values that aren't properly null-terminated.

-- 
Alexandre Julliard
julliard at winehq.org


From dank at kegel.com  Mon Jan  7 16:02:48 2008
From: dank at kegel.com (Dan Kegel)
Date: Mon, 7 Jan 2008 14:02:48 -0800
Subject: Dead in the water because of bug 11080
Message-ID: <a71bd89a0801071402m379f0894yadc4873e54162a54@mail.gmail.com>

Today's git (or perhaps Friday's?) seems to cause
every oldish microsoft runtime installer to fail; see
http://bugs.winehq.org/show_bug.cgi?id=11080

This makes it kind of hard for me to verify my
old bugs.


From julliard at winehq.org  Mon Jan  7 16:05:16 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 07 Jan 2008 23:05:16 +0100
Subject: [PATCH] Fix REG_MULTI_SZ save fromat - bug 824
In-Reply-To: <76af6e3c0801071134q29b19363k811ac9b580bdd879@mail.gmail.com>
	(Michal Piaskowski's message of "Mon, 7 Jan 2008 20:34:44 +0100")
References: <76af6e3c0801050652q56b7daf3q1ee6ac1bd214321@mail.gmail.com>
	<873at9lfwi.fsf@wine.dyndns.org>
	<76af6e3c0801070937p6eebf031i742a33ea6899b63b@mail.gmail.com>
	<87ve65jwmj.fsf@wine.dyndns.org>
	<76af6e3c0801071134q29b19363k811ac9b580bdd879@mail.gmail.com>
Message-ID: <87ejctjnqb.fsf@wine.dyndns.org>

"Michal Piaskowski" <piaskal at gmail.com> writes:

> I think it can be done without changing every string to hex.
> How about adding \0 at the end of every null terminated sting,
> and \0\0 at the end of proper REG_MULTI_SZ value which should
> end with an empty string?

It would work, but this can't be changed now, the file format needs to
remain backwards compatible.

It turns out that it's fairly easy to use hex format only for
non-terminated strings, I put in a fix.

-- 
Alexandre Julliard
julliard at winehq.org


From mstefani at redhat.com  Mon Jan  7 17:33:52 2008
From: mstefani at redhat.com (Michael Stefaniuc)
Date: Tue, 08 Jan 2008 00:33:52 +0100
Subject: Commit stats
In-Reply-To: <200801011437.02229.hans@it.vu.nl>
References: <200801011437.02229.hans@it.vu.nl>
Message-ID: <4782B6E0.4030700@redhat.com>

Hans Leidekker wrote:
> $ for y in {2002..2007}; do \
>   n=$( git log | grep ^Date: | grep $y | wc -l ); \
>   echo "Number of commits in $y: $n"; \
>   done
> Number of commits in 2002: 3094
> Number of commits in 2003: 3283
> Number of commits in 2004: 3851
> Number of commits in 2005: 6006
> Number of commits in 2006: 8431
> Number of commits in 2007: 9526
Got reminded but by the WWN that i wanted to send the numbers of authors.

$ for y in `seq 2002 2007`; do
    echo -n "Number of authors in $y: "
    git shortlog -s --since="$y-01-01 00:00" --until="$y-12-31 24:00" |
        wc -l
done

Number of authors in 2002: 185
Number of authors in 2003: 167
Number of authors in 2004: 183
Number of authors in 2005: 212
Number of authors in 2006: 195
Number of authors in 2007: 218


bye
	michael

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: OpenPGP digital signature
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080108/3e09a721/attachment.pgp 

From austinenglish at gmail.com  Mon Jan  7 18:02:20 2008
From: austinenglish at gmail.com (Austin English)
Date: Mon, 7 Jan 2008 18:02:20 -0600
Subject: Dead in the water because of bug 11080
In-Reply-To: <a71bd89a0801071402m379f0894yadc4873e54162a54@mail.gmail.com>
References: <a71bd89a0801071402m379f0894yadc4873e54162a54@mail.gmail.com>
Message-ID: <b6bb06270801071602y3e658020s224c3843f5ba1765@mail.gmail.com>

On Jan 7, 2008 4:02 PM, Dan Kegel <dank at kegel.com> wrote:
> Today's git (or perhaps Friday's?) seems to cause
> every oldish microsoft runtime installer to fail; see
> http://bugs.winehq.org/show_bug.cgi?id=11080
>
> This makes it kind of hard for me to verify my
> old bugs.

It's fixed in current git.


From marcodasilva at gmail.com  Mon Jan  7 18:13:05 2008
From: marcodasilva at gmail.com (Marco da Silva)
Date: Tue, 08 Jan 2008 00:13:05 +0000
Subject: Fwd: [alkyproject-announce] End of an era
In-Reply-To: <200801072007.22763.stefandoesinger@gmx.at>
References: <47823B53.2080002@gmail.com>
	<200801072007.22763.stefandoesinger@gmx.at>
Message-ID: <4782C011.4000505@gmail.com>

Well at least some of the code they created can be used to do something 
and help the project, and how knows, maybe one of them may join Wine and 
help.

Yes I almost forgot about the soc code, any ideas when will that code 
start being used in wine?

And thanks Alky, why not help wine?  ;)


Stefan D?singer escreveu:
> Am Montag, 7. Januar 2008 15:46:43 schrieb Marco da Silva:
>   
>> Can that code be used in wine? the DX implementation could help I think
>>     
> Not really, no. I had a quick look at it, and it is at best a hello world 
> implementation.
>
> Looking at their D3D10 implementation, it is comparable to Andras' soc code, 
> with the difference that Alky has a few lines to create a gl context and send 
> off vertices, but Andras has written a D3D10.idl header. Adding the 
> functionality of Alky to Andras' code is a matter of hours, if we do it the 
> hacky way. So all in all I think that the not yet integrated d3d10 that Wine 
> has is more advanced. (Andras: Do you plan to continue working on that 
> somewhen?)
>
> As far as other libraries go, there isn't much to see either. D3D9 isn't even 
> comparable to the very first out-of-tree patch Oliver put onto Sourceforge 
> years ago. No handling for stateblocks or shaders, no proper texture 
> handling, no vertex arrays, etc. The other libraries are in a similar state. 
> D3DX has a few math functions implemented, but we have all of that already 
> thanks to David and the other D3DX hackers.
>
> While the code may not be of any use for us(or anyone else, since Wine 
> exists), Cody seems to have written a lot of code. It might not be comparable 
> to Wine, which has enjoyed the work of almost thousand developers and is 
> almost 15 years old, it seems to be quite some accomplishment for a project 
> which has been developed by apparently one(two?) persons. (I have no 
> comparison how Wine started though. I only had a Gameboy back then :-) )
>
> And kudos to them for releasing the source!
>
>
>   

-- 

Blog : http://www.formatds.org

Guia Ubuntu : http://www.guiaubuntupt.org

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080108/dba66da7/attachment-0001.htm 

From chmorgan at gmail.com  Mon Jan  7 19:00:59 2008
From: chmorgan at gmail.com (Chris Morgan)
Date: Mon, 7 Jan 2008 20:00:59 -0500
Subject: Fwd: [alkyproject-announce] End of an era
In-Reply-To: <4782C011.4000505@gmail.com>
References: <47823B53.2080002@gmail.com>
	<200801072007.22763.stefandoesinger@gmx.at>
	<4782C011.4000505@gmail.com>
Message-ID: <f3f1b91a0801071700g1cd1264ew6cc389f5fb1386ed@mail.gmail.com>

>  And thanks Alky, why not help wine?  ;)
>

Ahh, the question we've been asking since the Alky project was started :-)

Chris


From stefan at codeweavers.com  Mon Jan  7 20:21:10 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Tue, 8 Jan 2008 03:21:10 +0100
Subject: question about fixing D3DRENDERSTATE_TEXTUREMAPBLEND
In-Reply-To: <4781CCCC.8030307@inbox.lv>
References: <4781CCCC.8030307@inbox.lv>
Message-ID: <200801080321.10500.stefan@codeweavers.com>

Am Montag, 7. Januar 2008 07:55:08 schrieb Alexander Dorofeyev:
> "D3DTBLEND_MODULATE Modulate texture-blending is supported. In this mode,
> the RGB values of the texture are multiplied with the RGB values that would
> have been used with no texturing. Any alpha values in the texture replace
> the alpha values that would have been used with no texturing."
D3DTA_TEXTURE has a somewhat strange behavior. If no texture is set, it 
behaves like D3DTA_PREVIOUS. Perhaps for alphaarg it behaves similarly if 
there is a texture, but it has no alpha. If that is the case, then I think it 
matches what you need for D3DTBLEND_MODULATE. Otherwise I think a private 
value like your D3DTOP_DX6MODULATE is the only way.

So I'd say test how D3DTA_TEXTURE should behave, maybe we implement it 
incorrectly at the moment.


From stefan at codeweavers.com  Mon Jan  7 20:32:49 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Tue, 8 Jan 2008 03:32:49 +0100
Subject: d3dx implementation senseless?
In-Reply-To: <E1JBus4-0000D8-RT@www11.emo.freenet-rz.de>
References: <E1JBus4-0000D8-RT@www11.emo.freenet-rz.de>
Message-ID: <200801080332.49489.stefan@codeweavers.com>

Am Montag, 7. Januar 2008 17:30:40 schrieb tony.wasserka at freenet.de:
> Okay, I have a bit time now and tomorrow, so I'll probably have submitted a
> basic d3dx9 dll patch until Wednesday. So I'll create a new d3dx9 directory
> inside dlls, but I'm not that familiar with Wine's makefile system (not
> very much with makefiles in general honestly), so can anyone tell me how to
> tell make that it should create several copies of our dll?
I think the consent was to create one directory for each version, and make all 
but the newest wrap to the newest dll or d3dx8. This can be done via 
the .spec file, so no thunks have to be coded. If there are version 
differences, then we can implement them in the specific DLLs



From juan.lang at gmail.com  Mon Jan  7 23:57:31 2008
From: juan.lang at gmail.com (Juan Lang)
Date: Mon, 7 Jan 2008 21:57:31 -0800
Subject: Spelling fixes - round 6
Message-ID: <3a768c550801072157i25f78ee1u539a937ab6518f42@mail.gmail.com>

Hi Austin,

-        case 0x32: /* ENABLE/DISABLE VIDEO ADDRERSSING */
+        case 0x32: /* ENABLE/DISABLE VIDEO ADDRRESSING */

That's still misspelled.

- * special virtualalloc, allocates lineary monoton growing memory.
+ * special virtualalloc, allocates linear monoton growing memory.


Monoton isn't a word.  Monotone is, as is monotonic, and
monotonically, which is probably what's meant.

-/* Volume functions derived from Alsaplayer source */
+/* Volume functions derivated from Alsaplayer source */

This change doesn't look correct to me.
--Juan


From austinenglish at gmail.com  Tue Jan  8 00:33:39 2008
From: austinenglish at gmail.com (Austin English)
Date: Tue, 8 Jan 2008 00:33:39 -0600
Subject: Spelling fixes - round 6
In-Reply-To: <3a768c550801072157i25f78ee1u539a937ab6518f42@mail.gmail.com>
References: <3a768c550801072157i25f78ee1u539a937ab6518f42@mail.gmail.com>
Message-ID: <b6bb06270801072233h6e8815f5n5b1a77b1a5a832f2@mail.gmail.com>

On Jan 7, 2008 11:57 PM, Juan Lang <juan.lang at gmail.com> wrote:
> Hi Austin,
>
> -        case 0x32: /* ENABLE/DISABLE VIDEO ADDRERSSING */
> +        case 0x32: /* ENABLE/DISABLE VIDEO ADDRRESSING */
>
> That's still misspelled.
Thanks for catching that/these. After looking at all these
misspellings, some of the incorrect start to look correct. I've got a
replacement patch ready, this time triple checked :-).
>
> - * special virtualalloc, allocates lineary monoton growing memory.
> + * special virtualalloc, allocates linear monoton growing memory.
>
>
> Monoton isn't a word.  Monotone is, as is monotonic, and
> monotonically, which is probably what's meant.
I changed it to monotonically. I wasn't sure what it meant, I was
correcting linear.

> -/* Volume functions derived from Alsaplayer source */
> +/* Volume functions derivated from Alsaplayer source */
>
> This change doesn't look correct to me.
There was one correct and one incorrect spelling. I apparently
switched around my find and replace on that one. I fixed this as well.

I'm sending a replacement patch now. Sorry for the mistake. I'll be
more careful in the future.

-Austin


From dank at kegel.com  Tue Jan  8 01:23:06 2008
From: dank at kegel.com (Dan Kegel)
Date: Mon, 7 Jan 2008 23:23:06 -0800
Subject: Spelling fixes - round 6
Message-ID: <a71bd89a0801072323x6b6a70bfqd0d2df91f7935e0@mail.gmail.com>

A few issues:

1.
  *          DPMI_xalloc
- * special virtualalloc, allocates lineary monoton growing memory.
+ * special virtualalloc, allocates linear monoton growing memory.

Um... Probably should be 'linearly'.
But if you're opening the can of worms, might as well really
improve it.  I suspect this would be better:

  *          DPMI_xalloc
- * special virtualalloc, allocates lineary monoton growing memory.
+ * Try to VirtualAlloc the len bytes just past the last block we allocated
+ * If that's not available, try 64K beyond; if still not available, fail.

2.

-/* Volume functions derived from Alsaplayer source */
+/* Volume functions derivated from Alsaplayer source */

What?  What's wrong with "derived"?  "Derivated" isn't even a word?!

3.
-# include <unistd.h>
+#include <unistd.h>

That's not a spelling fix, and you would have to fix a whole
lot of those.  Best leave alone.

- Dan
-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From shachar at shemesh.biz  Tue Jan  8 02:16:21 2008
From: shachar at shemesh.biz (Shachar Shemesh)
Date: Tue, 08 Jan 2008 10:16:21 +0200
Subject: Bow and question
In-Reply-To: <47832C98.5010802@cert.inteco.es>
References: <fli191$69i$1@ger.gmane.org> <4780C9A1.9050802@shemesh.biz>
	<47832C98.5010802@cert.inteco.es>
Message-ID: <47833155.7030202@shemesh.biz>

Juan Carlos Montes wrote:

> Shachar Shemesh escribi?:
>   
>> I think you should be aware that Wine is no replacement for a security 
>> tool. If you run a malware using Wine, it is possible for this malware 
>> to interact directly with your Linux machine, bypassing your protection.
>>
>> Shachar
>>     
>
> I know it, but we can control all actions that the malware make. If the malware
> bypass the protection and infect the machine... no problem, format, image and
> new malware to check, :)
>   
But what good is a malware study tool if the malware can trivially 
detect it's there? What if it doesn't infect the machine, but just run 
differently?

There are Windows tools that do similar things to what you need (check 
out the sys-internals web site), where the environment is much more 
close to the real thing.

Actually, Dan's question is the more interesting here - did the malwares 
work under wine?

Shachar


From truiken at gmail.com  Tue Jan  8 02:26:55 2008
From: truiken at gmail.com (James Hawkins)
Date: Tue, 8 Jan 2008 01:26:55 -0700
Subject: MSXML3: Exclude member variable when external lib is not present
In-Reply-To: <006201c851cf$53bc7940$4001a8c0@NATERS>
References: <006201c851cf$53bc7940$4001a8c0@NATERS>
Message-ID: <22821af30801080026n5d936c85r69cfb91eaff158de@mail.gmail.com>

On Jan 8, 2008 1:20 AM, Rolf Kalbermatter <r.kalbermatter at hccnet.nl> wrote:
> Recent changes in MSXML3 added a part which is conditionally compiled when
> libxml2 is available but a member variable in a COM interface using such a
> type is present unconditionally. Exclude that variable from the build in
> that case.
>

A patch was already sent by Lei 13 hours ago.

-- 
James Hawkins


From truiken at gmail.com  Tue Jan  8 02:28:21 2008
From: truiken at gmail.com (James Hawkins)
Date: Tue, 8 Jan 2008 01:28:21 -0700
Subject: MSXML3: Exclude member variable when external lib is not present
In-Reply-To: <22821af30801080026n5d936c85r69cfb91eaff158de@mail.gmail.com>
References: <006201c851cf$53bc7940$4001a8c0@NATERS>
	<22821af30801080026n5d936c85r69cfb91eaff158de@mail.gmail.com>
Message-ID: <22821af30801080028m6560f53fgfcd82ba2c4b8b8ab@mail.gmail.com>

On Jan 8, 2008 1:26 AM, James Hawkins <truiken at gmail.com> wrote:
>
> On Jan 8, 2008 1:20 AM, Rolf Kalbermatter <r.kalbermatter at hccnet.nl> wrote:
> > Recent changes in MSXML3 added a part which is conditionally compiled when
> > libxml2 is available but a member variable in a COM interface using such a
> > type is present unconditionally. Exclude that variable from the build in
> > that case.
> >
>
> A patch was already sent by Lei 13 hours ago.
>

..and committed.  Sorry, hadn't rebased yet.

-- 
James Hawkins


From piaskal at gmail.com  Mon Jan  7 13:34:44 2008
From: piaskal at gmail.com (Michal Piaskowski)
Date: Mon, 7 Jan 2008 20:34:44 +0100
Subject: [PATCH] Fix REG_MULTI_SZ save fromat - bug 824
In-Reply-To: <87ve65jwmj.fsf@wine.dyndns.org>
References: <76af6e3c0801050652q56b7daf3q1ee6ac1bd214321@mail.gmail.com>
	<873at9lfwi.fsf@wine.dyndns.org>
	<76af6e3c0801070937p6eebf031i742a33ea6899b63b@mail.gmail.com>
	<87ve65jwmj.fsf@wine.dyndns.org>
Message-ID: <76af6e3c0801071134q29b19363k811ac9b580bdd879@mail.gmail.com>

On Jan 7, 2008 7:53 PM, Alexandre Julliard <julliard at winehq.org> wrote:
> "Michal Piaskowski" <piaskal at gmail.com> writes:
>
> > I don't know of any such application.
> > It's just an old bug and one of very few bugs marked as tasklets.
> > And it seemed very easy to fix, so i tried fixing it.
> > Plus it's different from the way windows XP does it.
> >
> > If you think it should stay the way it is now, maybe it should be
> > resolved with WONTFIX?
>
> I'm not opposed to fixing it, but changing all strings to hex format is
> not a good solution, it makes the file much harder to read and modify.
>
>

I think it can be done without changing every string to hex.
How about adding \0 at the end of every null terminated sting,
and \0\0 at the end of proper REG_MULTI_SZ value which should
end with an empty string?

I might try to do that.


From msclrhd at googlemail.com  Mon Jan  7 14:04:30 2008
From: msclrhd at googlemail.com (Reece Dunn)
Date: Mon, 7 Jan 2008 20:04:30 +0000
Subject: [PATCH] Fix REG_MULTI_SZ save fromat - bug 824
In-Reply-To: <87r6gtju37.fsf@wine.dyndns.org>
References: <a71bd89a0801071138k478dc756vc6dcabe0ace4c549@mail.gmail.com>
	<87r6gtju37.fsf@wine.dyndns.org>
Message-ID: <3f4fd2640801071204l29c0cf78v9e982e9e305b2b9e@mail.gmail.com>

On 07/01/2008, Alexandre Julliard <julliard at winehq.org> wrote:
> "Dan Kegel" <dank at kegel.com> writes:
>
> > Alexandre wrote:
> >> I don't think a non null-terminated MULTI_SZ string is very useful.
> >> Do you really have an app that depends on this?
> >
> > http://www.xpregistrycleaner.com/embedded-null-characters/ claims
> > "some software vendors use the embedded-null registry key technique
> > as a way to enforce the software license agreement and to reduce the
> > ability of users to tamper with the license information stored in
> > these registry keys."
>
> Embedded nulls should work just fine. The case that doesn't work is
> string values that aren't properly null-terminated.

Is it possible to use a format like:

    Message="Hello"

[using the quotes to determine the start/end of the string - this
would require processing on the string data, though]

or

    Message=(5)Hello

[encoding the length in the stored data - this does not need any
processing, and counts any nulls if there are any]

- Reece


From jcmontes at cert.inteco.es  Tue Jan  8 01:56:08 2008
From: jcmontes at cert.inteco.es (Juan Carlos Montes)
Date: Tue, 08 Jan 2008 08:56:08 +0100
Subject: Bow and question
In-Reply-To: <4780C9A1.9050802@shemesh.biz>
References: <fli191$69i$1@ger.gmane.org> <4780C9A1.9050802@shemesh.biz>
Message-ID: <47832C98.5010802@cert.inteco.es>

Shachar Shemesh escribi?:
> I think you should be aware that Wine is no replacement for a security 
> tool. If you run a malware using Wine, it is possible for this malware 
> to interact directly with your Linux machine, bypassing your protection.
> 
> Shachar

I know it, but we can control all actions that the malware make. If the malware
bypass the protection and infect the machine... no problem, format, image and
new malware to check, :)




-- 
_______________________________________________________________________________
Juan Carlos Montes Senra
INTECO-CERT
Instituto Nacional de Tecnolog?as de la Comunicaci?n
email: juancarlos.montes at inteco.es | jcmontes at cert.inteco.es
Tlf. 0034 987 877 189 - ext. 532
_______________________________________________________________________________




From jcmontes at cert.inteco.es  Tue Jan  8 01:56:08 2008
From: jcmontes at cert.inteco.es (Juan Carlos Montes)
Date: Tue, 08 Jan 2008 08:56:08 +0100
Subject: Bow and question
In-Reply-To: <4780C9A1.9050802@shemesh.biz>
References: <fli191$69i$1@ger.gmane.org> <4780C9A1.9050802@shemesh.biz>
Message-ID: <47832C98.5010802@cert.inteco.es>

Shachar Shemesh escribi?:
> I think you should be aware that Wine is no replacement for a security 
> tool. If you run a malware using Wine, it is possible for this malware 
> to interact directly with your Linux machine, bypassing your protection.
> 
> Shachar

I know it, but we can control all actions that the malware make. If the malware
bypass the protection and infect the machine... no problem, format, image and
new malware to check, :)




-- 
_______________________________________________________________________________
Juan Carlos Montes Senra
INTECO-CERT
Instituto Nacional de Tecnolog?as de la Comunicaci?n
email: juancarlos.montes at inteco.es | jcmontes at cert.inteco.es
Tlf. 0034 987 877 189 - ext. 532
_______________________________________________________________________________




From jcmontes at cert.inteco.es  Tue Jan  8 03:20:08 2008
From: jcmontes at cert.inteco.es (Juan Carlos Montes Senra)
Date: Tue, 08 Jan 2008 10:20:08 +0100
Subject: Bow and question
In-Reply-To: <47833155.7030202@shemesh.biz>
References: <fli191$69i$1@ger.gmane.org> <4780C9A1.9050802@shemesh.biz>
	<47832C98.5010802@cert.inteco.es> <47833155.7030202@shemesh.biz>
Message-ID: <47834048.3040903@cert.inteco.es>



Shachar Shemesh escribi?:
> But what good is a malware study tool if the malware can trivially
> detect it's there? What if it doesn't infect the machine, but just run
> differently?
> 
> There are Windows tools that do similar things to what you need (check
> out the sys-internals web site), where the environment is much more
> close to the real thing.
> 
> Actually, Dan's question is the more interesting here - did the malwares
> work under wine?
> 
> Shachar

I know that in windows we can found similar things, but with wine we can make a
first check, make a simple report, and send it to client.
Later, we can make a good manual analysis.

At the moment we can report quickly if a malware delete files, change registry...

"did the malwares work under wine?"
a lot of, :)

Think... if we dont get results, we must made a manual analysis...


-- 
_______________________________________________________________________________
Juan Carlos Montes Senra
INTECO-CERT
Instituto Nacional de Tecnolog?as de la Comunicaci?n
email: juancarlos.montes at inteco.es | jcmontes at cert.inteco.es
Tlf. 0034 987 877 189 - ext. 532
_______________________________________________________________________________




From andrey.turkin at gmail.com  Tue Jan  8 05:19:04 2008
From: andrey.turkin at gmail.com (Andrey Turkin)
Date: Tue, 08 Jan 2008 14:19:04 +0300
Subject: Russian translation of wordpad.
In-Reply-To: <47829908.5080904@esin.name>
References: <47829908.5080904@esin.name>
Message-ID: <47835C28.5040103@gmail.com>

Andrey Esin wrote:
> In patch:
> Full translation of wordpad on russian.
>
> Author: Andrey Esin <andrey at esin.name>
>
> ------------------------------------------------------------------------
>
>
You've messed up indentation, and there is a typo in STRING_ALL_FILES.


From tony.wasserka at freenet.de  Tue Jan  8 08:05:36 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Tue, 08 Jan 2008 15:05:36 +0100
Subject: d3dx implementation senseless?
Message-ID: <E1JCF5E-00065v-LT@www15.emo.freenet-rz.de>

Well, why then hasn't this patch been accepted?
http://www.winehq.org/pipermail/wine-patches/2007-November/047212.html











From tony.wasserka at freenet.de  Tue Jan  8 08:21:52 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Tue, 08 Jan 2008 15:21:52 +0100
Subject: d3dx implementation senseless?
Message-ID: <E1JCFKy-0007Ln-Pz@www15.emo.freenet-rz.de>

> Well, why then hasn't this patch been accepted?
> http://www.winehq.org/pipermail/wine-patches/2007-November/047212.html

Oh well, I see, corrupted...
Seems like I'll spend the day on fixing that one :D











From tony.wasserka at freenet.de  Tue Jan  8 09:50:56 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Tue, 08 Jan 2008 16:50:56 +0100
Subject: [2/2] d3dx9: Add d3dx9core.h
Message-ID: <E1JCGjA-00039U-15@www11.emo.freenet-rz.de>

This patch adds the d3dx9core header file, which is used for the interface declarations.









-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0002-d3dx9-Add-d3dx9core.h.patch
Type: application/octet-stream
Size: 2077 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080108/bc68d841/attachment.obj 

From fgouget at free.fr  Tue Jan  8 10:34:09 2008
From: fgouget at free.fr (Francois Gouget)
Date: Tue, 8 Jan 2008 17:34:09 +0100 (CET)
Subject: Spelling fixes round 6 - resend - don't apply first patch
In-Reply-To: <b6bb06270801072305s4cc98dd1x26ed0fbce2b89005@mail.gmail.com>
References: <b6bb06270801072305s4cc98dd1x26ed0fbce2b89005@mail.gmail.com>
Message-ID: <alpine.DEB.0.99999.0801081731550.31166@amboise.dolphin>


 #ifdef HAVE_UNISTD_H
-# include <unistd.h>
+#include <unistd.h>
 #endif
 #include <stdarg.h>
 #include <stdio.h>

I think this chunk should not be applied because:
 * as pointed out before, it's not a spelling fix
 * it's perfectly valid to have a space there
 * the indentation makes the scope of the #ifdef clearer. So removing it 
makes the code less readable


-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
     You can have my guns when you pry them from my kids cold, dead hands.


From fgouget at free.fr  Tue Jan  8 10:38:50 2008
From: fgouget at free.fr (Francois Gouget)
Date: Tue, 8 Jan 2008 17:38:50 +0100 (CET)
Subject: shell32: Fixed incorrect definitions of CFSTR_*.
In-Reply-To: <4782FF40.3050300@uni-oldenburg.de>
References: <4782FF40.3050300@uni-oldenburg.de>
Message-ID: <alpine.DEB.0.99999.0801081736490.31166@amboise.dolphin>

On Tue, 8 Jan 2008, Yarin Kaul wrote:

> Changes:
> 
>   This patch fixes http://bugs.winehq.org/show_bug.cgi?id=3159 :
> 
>   'Some of the CFSTR_* constants (such as CFSTR_SHELLIDLIST) are
>   incorrectly defined as ANSI strings even when "UNICODE" is defined.'
> 
> Change log:
> 
>   shell32: Fixed incorrect definitions of CFSTR_*.

Just using the TEXT macro is not good enough because it does not work 
on Unix. Check out the definition of STATUSCLASSNAMEA in commctrl.h for 
how this should be handled.


-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
                 There are 10 types of people in the world...
               those who understand binary and those who don't.


From fgouget at free.fr  Tue Jan  8 10:42:08 2008
From: fgouget at free.fr (Francois Gouget)
Date: Tue, 8 Jan 2008 17:42:08 +0100 (CET)
Subject: Spelling fixes - round 6
In-Reply-To: <b6bb06270801071939if44c678xc8d1aee1823b389a@mail.gmail.com>
References: <b6bb06270801071939if44c678xc8d1aee1823b389a@mail.gmail.com>
Message-ID: <alpine.DEB.0.99999.0801081740150.31166@amboise.dolphin>


-     *    3 - controller supports hardware stereoscopic signalling
+     *    3 - controller supports hardware stereoscopic signaling
      *    4 - =0 stereo signalling via external VESA stereo connector
      *        =1 stereo signalling via VESA EVC connector

Why are you changing 'signalling' to 'signaling' in one place, but 
leaving it as is twice two lines down. Note that I'm not sure which form 
is right, but ispell is happy with both so it's possible both are ok.

-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
     We are Pentium of Borg. You will be approximated. Division is futile.


From saulius2 at ar.fi.lt  Tue Jan  8 11:07:34 2008
From: saulius2 at ar.fi.lt (Saulius Krasuckas)
Date: Tue, 8 Jan 2008 19:07:34 +0200 (EET)
Subject: [PATCH 04/14] inetcomm: Add self-registration code.
In-Reply-To: <472BB92A.5070907@codeweavers.com>
References: <1194026657.1374.53.camel@p4> <1194034617.1374.81.camel@p4>
	<472BB92A.5070907@codeweavers.com>
Message-ID: <Pine.LNX.4.62.0801081903150.26019@tvarka.ar.fi.lt>

* On Fri, 2 Nov 2007, Robert Shearman wrote:
> 
> I just thought I'd note that while the From: header said these patches 
> came from me, Huw actually sent them, which I think is a deficiency in 
> some of the git tools. I suspect the time is also the same issue. 

I may be writing this too late, but my MUA (pine) shows all the 
interesting info right there in the message view:

Date: Fri, 2 Nov 2007 11:35:34 +0000
From: Robert Shearman <rob at codeweavers.com>
Reply-To: wine-devel at winehq.org
To: wine-patches <wine-patches at winehq.org>
Subject: [PATCH 01/18] inetcomm: Add stub implementation of inetcomm.dll.
Resent-Date: Fri, 2 Nov 2007 12:21:28 +0000
Resent-From: daviesh at merlot.physics.ox.ac.uk
Resent-To: wine-patches at winehq.org

So I already did know which it was sent (and then resent) by. :)
Well, maybe only time stamp was reset, I am not sure.


From austinenglish at gmail.com  Tue Jan  8 10:54:06 2008
From: austinenglish at gmail.com (Austin English)
Date: Tue, 8 Jan 2008 10:54:06 -0600
Subject: Spelling fixes - round 6
In-Reply-To: <alpine.DEB.0.99999.0801081740150.31166@amboise.dolphin>
References: <b6bb06270801071939if44c678xc8d1aee1823b389a@mail.gmail.com>
	<alpine.DEB.0.99999.0801081740150.31166@amboise.dolphin>
Message-ID: <b6bb06270801080854ke0ae237x7f852f9680e49dd6@mail.gmail.com>

On Jan 8, 2008 10:42 AM, Francois Gouget <fgouget at free.fr> wrote:
>
> -     *    3 - controller supports hardware stereoscopic signalling
> +     *    3 - controller supports hardware stereoscopic signaling
>       *    4 - =0 stereo signalling via external VESA stereo connector
>       *        =1 stereo signalling via VESA EVC connector
>
> Why are you changing 'signalling' to 'signaling' in one place, but
> leaving it as is twice two lines down. Note that I'm not sure which form
> is right, but ispell is happy with both so it's possible both are ok.

Ispell caught steroscopic, and while investigating that, I corrected
signaling. I didn't notice the line below at the time.

Hold off the this patch Alexandre. It's apparently controversial,
since people don't like the whitespace change(s). If you want to apply
certain chunks feel free, otherwise, I'll get a less controversial
patch ready.

Just so I know, are we going with American or British English? There's
a lot of inconsistency, though the majority seems to be American...

-Austin


From juan.lang at gmail.com  Tue Jan  8 11:22:25 2008
From: juan.lang at gmail.com (Juan Lang)
Date: Tue, 8 Jan 2008 09:22:25 -0800
Subject: Spelling fixes - round 6
In-Reply-To: <b6bb06270801080854ke0ae237x7f852f9680e49dd6@mail.gmail.com>
References: <b6bb06270801071939if44c678xc8d1aee1823b389a@mail.gmail.com>
	<alpine.DEB.0.99999.0801081740150.31166@amboise.dolphin>
	<b6bb06270801080854ke0ae237x7f852f9680e49dd6@mail.gmail.com>
Message-ID: <3a768c550801080922w79951e72nbedbb70802cc1da4@mail.gmail.com>

> Just so I know, are we going with American or British English? There's
> a lot of inconsistency, though the majority seems to be American...

I think there's a weak preference for American spelling, but I don't
see much reason to "correct" spelling from British to American
English.
--Juan


From fgouget at free.fr  Tue Jan  8 11:24:49 2008
From: fgouget at free.fr (Francois Gouget)
Date: Tue, 8 Jan 2008 18:24:49 +0100 (CET)
Subject: Spelling fixes - round 6
In-Reply-To: <b6bb06270801080854ke0ae237x7f852f9680e49dd6@mail.gmail.com>
References: <b6bb06270801071939if44c678xc8d1aee1823b389a@mail.gmail.com>
	<alpine.DEB.0.99999.0801081740150.31166@amboise.dolphin>
	<b6bb06270801080854ke0ae237x7f852f9680e49dd6@mail.gmail.com>
Message-ID: <alpine.DEB.0.99999.0801081823090.25732@amboise.dolphin>

On Tue, 8 Jan 2008, Austin English wrote:
[...]
> Just so I know, are we going with American or British English? There's
> a lot of inconsistency, though the majority seems to be American...

We're not standardising on either, that is, both spellings should be 
considered valid. Any other course of action will only bring about 
flamewars.

-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
                      Computers are like airconditioners
                They stop working properly if you open WINDOWS


From jeremielapuree at yahoo.fr  Tue Jan  8 13:51:42 2008
From: jeremielapuree at yahoo.fr (paulo lesgaz)
Date: Tue, 8 Jan 2008 20:51:42 +0100 (CET)
Subject: d3dx9: Implement the different dlls   
Message-ID: <630054.35555.qm@web26012.mail.ukl.yahoo.com>

You need to forward the functions of d3dx9_xx.dll (xx from 24 to 35) to the ones of d3dx9_36.dll

Only the functions of d3dx9_36.dll can be forwarded to the ones of d3dx8.dll

David

             
---------------------------------
 Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080108/6d600fcd/attachment.htm 

From eric.pouech at orange.fr  Tue Jan  8 14:12:47 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Tue, 08 Jan 2008 21:12:47 +0100
Subject: user32: Test destroying the cursor of a parent process.
In-Reply-To: <689de9370801080507h7f7816cfh4271375aab126d45@mail.gmail.com>
References: <689de9370801080507h7f7816cfh4271375aab126d45@mail.gmail.com>
Message-ID: <4783D93F.7060800@orange.fr>

Andrew Riedi a ?crit :
> changelog: user32: Test destroying the cursor of a parent process.
>
> -- 
> Andrew Riedi
> ------------------------------------------------------------------------
>
> From 25a6a6a2eee92c4325d730ff85bd7cdf01bf2ace Mon Sep 17 00:00:00 2001
> From: Andrew Riedi <andrewriedi at gmail.com>
> Date: Tue, 8 Jan 2008 05:03:55 -0800
> Subject: [PATCH] user32: Test destroying the cursor of a parent process.
>
> ---
>  dlls/user32/tests/cursoricon.c |  201 ++++++++++++++++++++++++++++++++++++++++
>  1 files changed, 201 insertions(+), 0 deletions(-)
>
> diff --git a/dlls/user32/tests/cursoricon.c b/dlls/user32/tests/cursoricon.c
> index 781282c..c2beffa 100644
> --- a/dlls/user32/tests/cursoricon.c
> +++ b/dlls/user32/tests/cursoricon.c
> @@ -32,6 +32,205 @@
>  #include "wingdi.h"
>  #include "winuser.h"
>  
> +static char **test_argv;
> +static int test_argc;
> +static HWND child = 0;
> +static HWND parent = 0;
> +static HANDLE child_process;
> +
> +#define PROC_INIT (WM_USER+1)
> +
> +LRESULT CALLBACK callback_child(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
> +{
> +    BOOL ret;
> +    DWORD error;
> +
> +    switch (msg)
> +    {
> +        /* Destroy the cursor. */
> +        case WM_USER+1:
> +            SetLastError(0xdeadbeef);
> +            ret = DestroyCursor((HCURSOR) lParam);
> +            error = GetLastError();
> +            todo_wine {
> +                ok(!ret, "DestroyCursor on the active cursor succeeded.\n");
> +                ok(error == ERROR_DESTROY_OBJECT_OF_OTHER_THREAD,
> +                    "Last error: 0x%08x\n", error);
> +            }
> +            return TRUE;
> +        case WM_DESTROY:
> +            PostQuitMessage(0);
> +            return 0;
> +    }
> +
> +    return DefWindowProc(hwnd, msg, wParam, lParam);
> +}
> +
> +LRESULT CALLBACK callback_parent(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
> +{
> +    if (msg == PROC_INIT)
> +    {
> +        child = (HWND) wParam;
> +        return TRUE;
> +    }
> +
> +    return DefWindowProc(hwnd, msg, wParam, lParam);
> +}
> +
> +static void do_child(void)
> +{
> +    WNDCLASS class;
> +    MSG msg;
> +    BOOL ret;
> +
> +    /* Register a new class. */
> +    class.style = CS_GLOBALCLASS;
> +    class.lpfnWndProc = callback_child;
> +    class.cbClsExtra = 0;
> +    class.cbWndExtra = 0;
> +    class.hInstance = GetModuleHandle(NULL);
> +    class.hIcon = NULL;
> +    class.hCursor = NULL;
> +    class.hbrBackground = NULL;
> +    class.lpszMenuName = NULL;
> +    class.lpszClassName = "cursor_child";
> +
> +    SetLastError(0xdeadbeef);
> +    ret = RegisterClass(&class);
> +    ok(ret, "Failed to register window class. Error: %d\n", GetLastError());
> +
> +    /* Create a window. */
> +    child = CreateWindowA("cursor_child", "cursor_child", WS_POPUP | WS_VISIBLE,
> +        0, 0, 200, 200, 0, 0, 0, NULL);
> +    ok(child != 0, "CreateWindowA error %d\n", GetLastError());
> +
> +    /* Let the parent know our HWND. */
> +    PostMessage(parent, PROC_INIT, (WPARAM) child, 0);
> +    
> +    /* Receive messages. */
> +    while ((ret = GetMessage(&msg, child, 0, 0)))
> +    {
> +        ok(ret != -1, "GetMessage failed.  Error: %d\n", GetLastError());
> +        TranslateMessage(&msg);
> +        DispatchMessage(&msg);
> +    }
> +}
> +
> +static void do_parent(void)
> +{
> +    char path_name[MAX_PATH];
> +    PROCESS_INFORMATION info;
> +    STARTUPINFOA startup;
> +    WNDCLASS class;
> +    MSG msg;
> +    BOOL ret;
> +
> +    /* Register a new class. */
> +    class.style = CS_GLOBALCLASS;
> +    class.lpfnWndProc = callback_parent;
> +    class.cbClsExtra = 0;
> +    class.cbWndExtra = 0;
> +    class.hInstance = GetModuleHandle(NULL);
> +    class.hIcon = NULL;
> +    class.hCursor = NULL;
> +    class.hbrBackground = NULL;
> +    class.lpszMenuName = NULL;
> +    class.lpszClassName = "cursor_parent";
> +
> +    SetLastError(0xdeadbeef);
> +    ret = RegisterClass(&class);
> +    ok(ret, "Failed to register window class. Error: %d\n", GetLastError());
> +
> +    /* Create a window. */
> +    parent = CreateWindowA("cursor_parent", "cursor_parent", WS_POPUP | WS_VISIBLE,
> +        0, 0, 200, 200, 0, 0, 0, NULL);
> +    ok(parent != 0, "CreateWindowA error %d\n", GetLastError());
> +
> +    /* Start child process. */
> +    memset(&startup, 0, sizeof(startup));
> +    startup.cb = sizeof(startup);
> +    startup.dwFlags = STARTF_USESHOWWINDOW;
> +    startup.wShowWindow = SW_SHOWNORMAL;
> +
> +    sprintf(path_name, "%s cursoricon %x", test_argv[0], (unsigned int) parent);
> +    ok(CreateProcessA(NULL, path_name, NULL, NULL, FALSE, 0L, NULL, NULL, &startup, &info), "CreateProcess failed.\n");
> +    child_process = info.hProcess;
> +
> +    /* Wait for child window handle. */
> +    while ((child == 0) && (ret = GetMessage(&msg, parent, 0, 0)))
> +    {
> +        ok(ret != -1, "GetMessage failed.  Error: %d\n", GetLastError());
> +        TranslateMessage(&msg);
> +        DispatchMessage(&msg);
> +    }
> +}
> +
> +static void init(void)
> +{
> +    test_argc = winetest_get_mainargs(&test_argv);
> +
> +    /* Child process. */
> +    if (test_argc >= 3)
> +    {
> +        sscanf (test_argv[2], "%x", (unsigned int *) &parent);
> +
> +        ok(parent != NULL, "Parent not found.\n");
> +        if (parent == NULL)
> +            exit(1);
> +
> +        do_child();
> +        exit(0);
> +    }
> +    else
> +    {
> +        do_parent();
> +    }
> +}
> +
> +static void finish_process(void)
> +{
> +    DWORD exit_code;
> +    BOOL ret;
> +
> +    SendMessage(child, WM_CLOSE, 0, 0);
> +    ok(WaitForSingleObject(child_process, 30000) == WAIT_OBJECT_0, "Child process termination failed.\n");
> +
> +    ret = GetExitCodeProcess(child_process, &exit_code);
> +    ok(ret, "GetExitCodeProcess() failed.  Error: 0x%08x\n", GetLastError());
> +    ok(exit_code == 0, "Exit code == %d.\n", exit_code);
> +}
> +
> +static void test_child_process(void)
> +{
> +    static const BYTE bmp_bits[4096];
> +    HCURSOR cursor;
> +    ICONINFO cursorInfo;
> +    UINT display_bpp;
> +    HDC hdc;
> +
> +    /* Create and set a dummy cursor. */
> +    hdc = GetDC(0);
> +    display_bpp = GetDeviceCaps(hdc, BITSPIXEL);
> +    ReleaseDC(0, hdc);
> +
> +    cursorInfo.fIcon = FALSE;
> +    cursorInfo.xHotspot = 0;
> +    cursorInfo.yHotspot = 0;
> +    cursorInfo.hbmMask = CreateBitmap(32, 32, 1, 1, bmp_bits);
> +    cursorInfo.hbmColor = CreateBitmap(32, 32, 1, display_bpp, bmp_bits);
> +
> +    cursor = CreateIconIndirect(&cursorInfo);
> +    ok(cursor != NULL, "CreateIconIndirect returned %p.\n", cursor);
> +
> +    SetCursor(cursor);
> +
> +    /* Destroy the cursor. */
> +    SendMessage(child, WM_USER+1, (WPARAM) parent, (LPARAM) cursor);
> +
> +    /* Finish the child process. */
> +    finish_process();
> +}
> +
>  static void test_CopyImage_Check(HBITMAP bitmap, UINT flags, INT copyWidth, INT copyHeight,
>                                    INT expectedWidth, INT expectedHeight, WORD expectedDepth, BOOL dibExpected)
>  {
> @@ -471,6 +670,7 @@ static void test_DestroyCursor(void)
>  
>  START_TEST(cursoricon)
>  {
> +    init();
>      test_CopyImage_Bitmap(1);
>      test_CopyImage_Bitmap(4);
>      test_CopyImage_Bitmap(8);
> @@ -480,4 +680,5 @@ START_TEST(cursoricon)
>      test_initial_cursor();
>      test_CreateIcon();
>      test_DestroyCursor();
> +    test_child_process();
>  }
>   
> ------------------------------------------------------------------------
>
>
>   
IMO, the ok() tests in the child process are a bad idea (they won't be 
counted, nor returned as errors, by the parent process)
all the tests should be done in parent, see kernel32/tests/process.c for 
some example on how to do it properly

A+

-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From marco at harddisk.is-a-geek.org  Tue Jan  8 14:18:45 2008
From: marco at harddisk.is-a-geek.org (Marco Schuster)
Date: Tue, 08 Jan 2008 21:18:45 +0100
Subject: [1/2] WineD3D: Detect geforce 7300 cards
In-Reply-To: <200801081431.59169.stefan@codeweavers.com>
References: <200801081431.59169.stefan@codeweavers.com>
Message-ID: <4783DAA5.60107@harddisk.is-a-geek.org>

Wouldn't it be better to differ between the desktop and the Go versions?
Dunno if some games use the information that the Go versions are 
less-featured than the desktop versions, but might get us useful.

Marco


From austinenglish at gmail.com  Tue Jan  8 15:44:23 2008
From: austinenglish at gmail.com (Austin English)
Date: Tue, 8 Jan 2008 15:44:23 -0600
Subject: Spelling fixes - abbreviation question
Message-ID: <b6bb06270801081344i5f66ecf2ne4bc10f834eeb882@mail.gmail.com>

I'm seeing quite a few abbreviations. While they don't hurt anything,
they do give the code a slang tone. I personally think that wine is a
very professional project, and it's code should reflect that. While
this is obviously a very generic question, I wanted to clarify before
submitting some changes for these.

A few examples. These are all in comments, not in actual code, and I'm
checking to make sure compilation/tests still pass before submitting.
mem -> memory
init -> initialize
concat -> concatenate
nr/num -> number
infos -> information
manuf -> manufacturer

Etc. Anyone have any objections to these being changed? Call me a
grammar nazi, but it's easier to read when not shortened like that.

-Austin


From thunderbird2k at gmx.net  Tue Jan  8 16:30:16 2008
From: thunderbird2k at gmx.net (Roderick Colenbrander)
Date: Tue, 08 Jan 2008 23:30:16 +0100
Subject: [1/2] WineD3D: Detect geforce 7300 cards
In-Reply-To: <4783DAA5.60107@harddisk.is-a-geek.org>
References: <200801081431.59169.stefan@codeweavers.com>
	<4783DAA5.60107@harddisk.is-a-geek.org>
Message-ID: <20080108223016.23120@gmx.net>

> Wouldn't it be better to differ between the desktop and the Go versions?
> Dunno if some games use the information that the Go versions are 
> less-featured than the desktop versions, but might get us useful.
> 
> Marco
> 

The only difference between the 7300go and the standard are the gpu clocks. The 7400go runs at the same gpu clock as the standard 7300, the 7300go runs at 100MHz less (at 350MHz instead of 450MHz). I would prefer to default to the non-go variant as well. And even consider merging the 7300 and 7400 detection and let that default to 7300 as both are the same. (a 7400go runs at the gpu clock of a desktop 7300 and there is no desktop 7400)

Roderick
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger?did=10


From truiken at gmail.com  Tue Jan  8 17:18:48 2008
From: truiken at gmail.com (James Hawkins)
Date: Tue, 8 Jan 2008 16:18:48 -0700
Subject: Spelling fixes - abbreviation question
In-Reply-To: <b6bb06270801081344i5f66ecf2ne4bc10f834eeb882@mail.gmail.com>
References: <b6bb06270801081344i5f66ecf2ne4bc10f834eeb882@mail.gmail.com>
Message-ID: <22821af30801081518p48db4c69k493f9310049234f0@mail.gmail.com>

On Jan 8, 2008 2:44 PM, Austin English <austinenglish at gmail.com> wrote:
> I'm seeing quite a few abbreviations. While they don't hurt anything,
> they do give the code a slang tone. I personally think that wine is a
> very professional project, and it's code should reflect that. While
> this is obviously a very generic question, I wanted to clarify before
> submitting some changes for these.
>
> A few examples. These are all in comments, not in actual code, and I'm
> checking to make sure compilation/tests still pass before submitting.
> mem -> memory
> init -> initialize
> concat -> concatenate
> nr/num -> number
> infos -> information
> manuf -> manufacturer
>
> Etc. Anyone have any objections to these being changed? Call me a
> grammar nazi, but it's easier to read when not shortened like that.
>

I object.  They're perfectly readable as abbreviations.  We try to
have as few style rules as possible, and not allowing abbreviations
goes too far.

-- 
James Hawkins


From dank at kegel.com  Tue Jan  8 17:48:43 2008
From: dank at kegel.com (Dan Kegel)
Date: Tue, 8 Jan 2008 15:48:43 -0800
Subject: Spelling fixes - abbreviation question
Message-ID: <a71bd89a0801081548o42e2823g67f027ce034fa9a6@mail.gmail.com>

I also object to removing abbreviations or Britishisms.

The key to being a successful spelling policeman
is to stick to noncontroversial spelling fixes,
and avoiding anything controversial or non-spelling-related.


From mstefani at redhat.com  Tue Jan  8 17:52:08 2008
From: mstefani at redhat.com (Michael Stefaniuc)
Date: Wed, 09 Jan 2008 00:52:08 +0100
Subject: Spelling fixes - abbreviation question
In-Reply-To: <b6bb06270801081344i5f66ecf2ne4bc10f834eeb882@mail.gmail.com>
References: <b6bb06270801081344i5f66ecf2ne4bc10f834eeb882@mail.gmail.com>
Message-ID: <47840CA8.1060606@redhat.com>

Austin English wrote:
> I'm seeing quite a few abbreviations. While they don't hurt anything,
> they do give the code a slang tone. I personally think that wine is a
It's not slang but jargon!

> very professional project, and it's code should reflect that. While
This is an open source project and not an English exam!

> this is obviously a very generic question, I wanted to clarify before
> submitting some changes for these.
> 
> A few examples. These are all in comments, not in actual code, and I'm
> checking to make sure compilation/tests still pass before submitting.
> mem -> memory
> init -> initialize
> concat -> concatenate
> nr/num -> number
> infos -> information
> manuf -> manufacturer
> 
> Etc. Anyone have any objections to these being changed? Call me a
Objection!

> grammar nazi, but it's easier to read when not shortened like that.
No they aren't easier to read quite the contrary. They are part of the
normal jargon and easier to read/write; especially for non native
English speakers aka developers.

Oh, and removing words like "suck", "damn" (too bad "fuck" is missing)
and other swear words isn't a good idea either.

bye
	michael


From alexd4 at inbox.lv  Wed Jan  9 03:54:28 2008
From: alexd4 at inbox.lv (Alexander Dorofeyev)
Date: Wed, 09 Jan 2008 01:54:28 -0800
Subject: question about fixing D3DRENDERSTATE_TEXTUREMAPBLEND
In-Reply-To: <200801080321.10500.stefan@codeweavers.com>
References: <4781CCCC.8030307@inbox.lv>
	<200801080321.10500.stefan@codeweavers.com>
Message-ID: <478499D4.7020804@inbox.lv>

I ran a little test, it didn't show any differences in Wine or XP in such case 
(D3DTA_TEXTURE alpha selected and no alpha in texture pixelformat). This seems 
to give alpha=1.0. I found nothing on this at msdn, but it more or less makes 
sense (no alpha = opaque image). Do you think there would be any use in adding 
such test to ddraw/tests/visual.c?

Stefan D?singer wrote:
> Am Montag, 7. Januar 2008 07:55:08 schrieb Alexander Dorofeyev:
>> "D3DTBLEND_MODULATE Modulate texture-blending is supported. In this mode,
>> the RGB values of the texture are multiplied with the RGB values that would
>> have been used with no texturing. Any alpha values in the texture replace
>> the alpha values that would have been used with no texturing."
> D3DTA_TEXTURE has a somewhat strange behavior. If no texture is set, it 
> behaves like D3DTA_PREVIOUS. Perhaps for alphaarg it behaves similarly if 
> there is a texture, but it has no alpha. If that is the case, then I think it 
> matches what you need for D3DTBLEND_MODULATE. Otherwise I think a private 
> value like your D3DTOP_DX6MODULATE is the only way.
> 
> So I'd say test how D3DTA_TEXTURE should behave, maybe we implement it 
> incorrectly at the moment.
> 
> 



From austinenglish at gmail.com  Tue Jan  8 18:06:20 2008
From: austinenglish at gmail.com (Austin English)
Date: Tue, 8 Jan 2008 18:06:20 -0600
Subject: Spelling fixes - abbreviation question
In-Reply-To: <47840CA8.1060606@redhat.com>
References: <b6bb06270801081344i5f66ecf2ne4bc10f834eeb882@mail.gmail.com>
	<47840CA8.1060606@redhat.com>
Message-ID: <b6bb06270801081606t7779e614hd988fa5c80bc354a@mail.gmail.com>

Glad I asked then. I won't touch these. Sorry for the noise.


From jjmckenzie51 at sprintpcs.com  Tue Jan  8 19:34:54 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Tue, 08 Jan 2008 18:34:54 -0700
Subject: Spelling fixes - round 6
In-Reply-To: <b6bb06270801080854ke0ae237x7f852f9680e49dd6@mail.gmail.com>
References: <b6bb06270801071939if44c678xc8d1aee1823b389a@mail.gmail.com>
	<alpine.DEB.0.99999.0801081740150.31166@amboise.dolphin>
	<b6bb06270801080854ke0ae237x7f852f9680e49dd6@mail.gmail.com>
Message-ID: <478424BE.8080702@sprintpcs.com>

Austin English wrote:
> On Jan 8, 2008 10:42 AM, Francois Gouget <fgouget at free.fr> wrote:
>   
>> -     *    3 - controller supports hardware stereoscopic signalling
>> +     *    3 - controller supports hardware stereoscopic signaling
>>       *    4 - =0 stereo signalling via external VESA stereo connector
>>       *        =1 stereo signalling via VESA EVC connector
>>
>> Why are you changing 'signalling' to 'signaling' in one place, but
>> leaving it as is twice two lines down. Note that I'm not sure which form
>> is right, but ispell is happy with both so it's possible both are ok.
>>     
>
> Ispell caught steroscopic, and while investigating that, I corrected
> signaling. I didn't notice the line below at the time.
>
> Hold off the this patch Alexandre. It's apparently controversial,
> since people don't like the whitespace change(s). If you want to apply
> certain chunks feel free, otherwise, I'll get a less controversial
> patch ready.
>
> Just so I know, are we going with American or British English? There's
> a lot of inconsistency, though the majority seems to be American...
>   
It does not matter to me.  Color is colour.  Slang should be avoided if 
at all possible.

James McKenzie



From jjmckenzie51 at sprintpcs.com  Tue Jan  8 19:38:00 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Tue, 08 Jan 2008 18:38:00 -0700
Subject: Spelling fixes round 6 - resend - don't apply first patch
In-Reply-To: <alpine.DEB.0.99999.0801081731550.31166@amboise.dolphin>
References: <b6bb06270801072305s4cc98dd1x26ed0fbce2b89005@mail.gmail.com>
	<alpine.DEB.0.99999.0801081731550.31166@amboise.dolphin>
Message-ID: <47842578.8000509@sprintpcs.com>

Francois Gouget wrote:
>  #ifdef HAVE_UNISTD_H
> -# include <unistd.h>
> +#include <unistd.h>
>  #endif
>  #include <stdarg.h>
>  #include <stdio.h>
>
> I think this chunk should not be applied because:
>  * as pointed out before, it's not a spelling fix
>  * it's perfectly valid to have a space there
>  * the indentation makes the scope of the #ifdef clearer. So removing it 
> makes the code less readable
>
>
>   
Francois:

I am a long time programmer and expect the include to be next to the # 
sign.  However, you are correct in that it does not break code, and if 
it is not broken, why fix?  Is it possible to indent the entire line by 
two spaces (I think it is not)?

James McKenzie



From blake at mcbride.name  Tue Jan  8 21:46:32 2008
From: blake at mcbride.name (Blake McBride)
Date: Tue, 08 Jan 2008 21:46:32 -0600
Subject: Dynace OO Extension to C and Windows Development System
Message-ID: <47844398.6020306@mcbride.name>


This is an announcement for a new release of the Dynace Object
Oriented Extension to C and the Windows Development System.

Real briefly, Dynace is an OO extension to C which includes multiple
inheritance, meta object protocol (MOP), class library, native thread
support, garbage collection, and is well documented.  The system has
been in production use for over 10 years.

The Windows Development System is a Dynace class library which makes
programming GUI applications under Windows and Linux (WINE) very easy.
It also includes a library for SQL Databases, an interface to Java and
MzScheme, a custom resource editor, etc.

Besides 600+ pages of professional documentation, the system also
includes a language tutorial and a GUI and Database tutorial.

Dynace will run on almost anything with a C compiler.  It has been
tested on many different systems over the years.

The Windows Development System runs on Windows an Linux (with WINE).  This
is open source software.

I can be downloaded at:

    http://blake.mcbride.name

Blake McBride
blake at mcbride.name




From julliard at winehq.org  Wed Jan  9 05:19:36 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 09 Jan 2008 12:19:36 +0100
Subject: server/token.c -- -Wtype-limits changes
In-Reply-To: <Pine.LNX.4.64.0801071458190.15724@acrux.dbai.tuwien.ac.at>
	(Gerald Pfeifer's message of "Wed, 9 Jan 2008 02:18:30 +0100 (CET)")
References: <Pine.LNX.4.64.0801011118230.25278@acrux.dbai.tuwien.ac.at>
	<Pine.LNX.4.64.0801071458190.15724@acrux.dbai.tuwien.ac.at>
Message-ID: <87bq7vp7p3.fsf@wine.dyndns.org>

Gerald Pfeifer <gerald at pfeifer.com> writes:

> diff -u -3 -p -r1.60 token.c
> --- server/token.c	6 Dec 2007 14:27:53 -0000	1.60
> +++ server/token.c	7 Jan 2008 13:57:28 -0000
> @@ -515,8 +515,7 @@ struct token *token_duplicate( struct to
>      struct privilege *privilege;
>      struct group *group;
>  
> -    if ((impersonation_level < SecurityAnonymous) ||
> -        (impersonation_level > SecurityDelegation))
> +    if (impersonation_level > SecurityDelegation)

There's no guarantee that the enum is an unsigned type.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Wed Jan  9 05:41:33 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 09 Jan 2008 12:41:33 +0100
Subject: user32: Add SetProcessDPIAware stub
In-Reply-To: <fm1e4o$gs3$1@ger.gmane.org> (Alistair Leslie-Hughes's message of
	"Wed, 09 Jan 2008 14:12:32 +1100")
References: <fm1e4o$gs3$1@ger.gmane.org>
Message-ID: <877iijp6oi.fsf@wine.dyndns.org>

Alistair Leslie-Hughes <leslie_alistair at hotmail.com> writes:

> diff --git a/dlls/user32/winstation.c b/dlls/user32/winstation.c
> index 75cb286..ec3a620 100644
> --- a/dlls/user32/winstation.c
> +++ b/dlls/user32/winstation.c
> @@ -613,3 +613,13 @@ BOOL WINAPI SetUserObjectSecurity( HANDLE handle, PSECURITY_INFORMATION info,
>      FIXME( "(%p,%p,%p),stub!\n", handle, info, sid );
>      return TRUE;
>  }
> +
> +/***********************************************************************
> + *              SetProcessDPIAware   (USER32.@)
> + */
> +BOOL WINAPI SetProcessDPIAware( VOID )
> +{
> +    FIXME( "stub!\n");
> +    
> +    return TRUE;
> +}

This has nothing to do with window stations, so it doesn't belong in
winstation.c.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Wed Jan  9 06:56:26 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 09 Jan 2008 13:56:26 +0100
Subject: gdi32: Fix the regression caused by the scaling font metrics patch
In-Reply-To: <E1JCRu7-0007Xp-00@mail.codeweavers.com> (Dmitry Timoshkov's
	message of "Wed, 9 Jan 2008 11:47:00 +0800")
References: <E1JCRu7-0007Xp-00@mail.codeweavers.com>
Message-ID: <873at7p37p.fsf@wine.dyndns.org>

Dmitry Timoshkov <dmitry at codeweavers.com> writes:

> Changelog:
>     gdi32: Fix the regression caused by the scaling font metrics patch.

This breaks the tests:

../../../tools/runtest -q -P wine -M riched20.dll -T ../../.. -p riched20_test.exe.so editor.c && touch editor.ok
editor.c:309: Test failed: 0 == 0
editor.c:317: Test failed: 0 == 0
editor.c:865: Test failed: EM_SCROLL page down didn't scroll by a small positive number of lines (r == 0x00010000)
editor.c:869: Test failed: EM_SCROLL page down not functioning (line 0 scrolled to line 0
editor.c:876: Test failed: EM_SCROLL page up didn't scroll by a small negative number of lines (r == 0x00010000)
editor.c:879: Test failed: EM_SCROLL page up not functioning (line 0 scrolled to line 0
editor.c:888: Test failed: EM_SCROLL line down didn't scroll by one line (r == 0x00010000)
editor.c:890: Test failed: EM_SCROLL line down didn't go down by 1 line (0 scrolled to 0)
editor.c:899: Test failed: EM_SCROLL line up didn't scroll by one line (r == 0x00010000)
editor.c:901: Test failed: EM_SCROLL line up didn't go up by 1 line (0 scrolled to 0)
editor.c:865: Test failed: EM_SCROLL page down didn't scroll by a small positive number of lines (r == 0x00010000)
editor.c:869: Test failed: EM_SCROLL page down not functioning (line 0 scrolled to line 0
editor.c:876: Test failed: EM_SCROLL page up didn't scroll by a small negative number of lines (r == 0x00010000)
editor.c:879: Test failed: EM_SCROLL page up not functioning (line 0 scrolled to line 0
editor.c:888: Test failed: EM_SCROLL line down didn't scroll by one line (r == 0x00010000)
editor.c:890: Test failed: EM_SCROLL line down didn't go down by 1 line (0 scrolled to 0)
editor.c:899: Test failed: EM_SCROLL line up didn't scroll by one line (r == 0x00010000)
editor.c:901: Test failed: EM_SCROLL line up didn't go up by 1 line (0 scrolled to 0)
make[2]: *** [editor.ok] Error 18

-- 
Alexandre Julliard
julliard at winehq.org


From tony.wasserka at freenet.de  Wed Jan  9 08:23:32 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Wed, 09 Jan 2008 15:23:32 +0100
Subject: d3dx9: Implement the different dlls
Message-ID: <E1JCbq8-0001yB-QN@www15.emo.freenet-rz.de>

Oh okay, I resent a fixed patch.
Why isn't it possible to forward the functions of the other dlls to the d3dx8 ones?
Or is this just for keeping the code clean so that we don't have mixed d3dx8 and d3dx9_36 forwardings?











From meissner at suse.de  Wed Jan  9 08:39:26 2008
From: meissner at suse.de (Marcus Meissner)
Date: Wed, 9 Jan 2008 15:39:26 +0100
Subject: d3dx9: Implement the different dlls
In-Reply-To: <E1JCbq8-0001yB-QN@www15.emo.freenet-rz.de>
References: <E1JCbq8-0001yB-QN@www15.emo.freenet-rz.de>
Message-ID: <20080109143926.GB15318@suse.de>

On Wed, Jan 09, 2008 at 03:23:32PM +0100, tony.wasserka at freenet.de wrote:
> Oh okay, I resent a fixed patch.
> Why isn't it possible to forward the functions of the other dlls to the d3dx8 ones?
> Or is this just for keeping the code clean so that we don't have mixed d3dx8 and d3dx9_36 forwardings?

You can of course forward to d3dx8 if they are compatible, why not?

Ciao, Marcus


From dmitry at codeweavers.com  Wed Jan  9 09:01:44 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Wed, 9 Jan 2008 23:01:44 +0800
Subject: [PATCH] wineboot: fix installation of SFP protected files
References: <4784DE3A.1010601@gmail.com>
Message-ID: <00e101c852d0$8e99f9f0$a600fea9@DMITRY>

"Andrey Turkin" <andrey.turkin at gmail.com> wrote:

> +    dllcache_wildcard = HeapAlloc(GetProcessHeap(), 0, strlenW( dllcache )*sizeof(WCHAR) * sizeof(wildcardW));

Aren't there too much of multiplications?

-- 
Dmitry.


From andrey.turkin at gmail.com  Wed Jan  9 09:06:34 2008
From: andrey.turkin at gmail.com (Andrey Turkin)
Date: Wed, 09 Jan 2008 18:06:34 +0300
Subject: [PATCH] wineboot: fix installation of SFP protected files
In-Reply-To: <00e101c852d0$8e99f9f0$a600fea9@DMITRY>
References: <4784DE3A.1010601@gmail.com>
	<00e101c852d0$8e99f9f0$a600fea9@DMITRY>
Message-ID: <4784E2FA.5080308@gmail.com>

Dmitry Timoshkov wrote:
> "Andrey Turkin" <andrey.turkin at gmail.com> wrote:
>
>> +    dllcache_wildcard = HeapAlloc(GetProcessHeap(), 0, strlenW(
>> dllcache )*sizeof(WCHAR) * sizeof(wildcardW));
>
> Aren't there too much of multiplications?
>

Whoops, second one should be plus instead. Thanks for catching.


From r.kalbermatter at hccnet.nl  Wed Jan  9 13:05:12 2008
From: r.kalbermatter at hccnet.nl (Rolf Kalbermatter)
Date: Wed, 9 Jan 2008 20:05:12 +0100
Subject: Spelling fixes round 6 - resend - don't apply first patch
In-Reply-To: <47842578.8000509@sprintpcs.com>
References: <b6bb06270801072305s4cc98dd1x26ed0fbce2b89005@mail.gmail.com><alpine.DEB.0.99999.0801081731550.31166@amboise.dolphin>
	<47842578.8000509@sprintpcs.com>
Message-ID: <001601c852f2$90029230$4001a8c0@NATERS>

James McKenzie:

> I am a long time programmer and expect the include to be next 
> to the # sign.  However, you are correct in that it does not 
> break code, and if it is not broken, why fix?  Is it possible 
> to indent the entire line by two spaces (I think it is not)?

Probably not. I know there are (ancient) C compilers that will bark
when the # is not the first character in a line as the preprocessor
will then not see it as a valid preprocessor line and simply ignore
it.

Rolf Kalbermatter 



From r.kalbermatter at hccnet.nl  Wed Jan  9 13:06:46 2008
From: r.kalbermatter at hccnet.nl (Rolf Kalbermatter)
Date: Wed, 9 Jan 2008 20:06:46 +0100
Subject: Advapi32: Service Control RPC 
Message-ID: <001701c852f2$c7976450$4001a8c0@NATERS>

The current service control API directly accesses the registry for most
things.
In native those fucntions are simple wrappers around RPC calls to the actual
service.exe application. Mikolaj Zalewski offered about 3 months ago a
possible
aproach to implement the service.exe program.

In there the proxy code generated through widl directly calls various RPC
functions
to communicate with the service manager executable. When doing some tests
with native
advapi32 under Wine I found that those fucntions seem to be implemented by
simply
calling more or less directly NdrCallClient2. Widl obviously doesn't
generate code
yet using this API and I'm sure wire compatibility can be achieved without
using
NdrCallClient2.

But a few questions that came up here:
- How good or complete is Wine's NdrCallClient(2) implementation? Would it
be feasable
  to use it for the implementation of the service rpc calls?
- Assuming it would be not a whole lot of work to make NdrCallClient(2) work
for this,
  would it be desirable to use this API instead of the code generated by
widl currently
  from complexity and/or performance view?
- Of course this would mean that widl would have to support (some of) the
{Oi | Oic | Oif | Oicf}
  flags to generate the proxy code but as it seems the necessary code
generator at least
  for the client side would be fairly trivial as it is mostly just a wrapper
around
  NdrClientCall(2) and most of the nitty gritty work is done in in that
function.
  A midl generated proxy code using -Oicf looks at least quite trivial. 

Any opinions about this anyone?

Rolf Kalbermatter



From rob at codeweavers.com  Wed Jan  9 13:36:16 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Wed, 09 Jan 2008 19:36:16 +0000
Subject: Advapi32: Service Control RPC
In-Reply-To: <001701c852f2$c7976450$4001a8c0@NATERS>
References: <001701c852f2$c7976450$4001a8c0@NATERS>
Message-ID: <47852230.60706@codeweavers.com>

Rolf Kalbermatter wrote:
> The current service control API directly accesses the registry for most
> things.
> In native those fucntions are simple wrappers around RPC calls to the actual
> service.exe application. Mikolaj Zalewski offered about 3 months ago a
> possible
> aproach to implement the service.exe program.
>   

Yes, we need to dig that out again. I forget what was blocking it being 
committed.

> In there the proxy code generated through widl directly calls various RPC
> functions
> to communicate with the service manager executable. When doing some tests
> with native
> advapi32 under Wine I found that those fucntions seem to be implemented by
> simply
> calling more or less directly NdrCallClient2. Widl obviously doesn't
> generate code
> yet using this API and I'm sure wire compatibility can be achieved without
> using
> NdrCallClient2.
>   

Exactly. The whole point of IDL in DCE/RPC is that it is independent of 
the DCE/RPC implementation as long as the generated code conforms to the 
NDR rules. With Microsoft's implementation, most of the NDR rules are 
implemented in rpcrt4 and all the IDL compiler as to do is output code 
to call the buffer size, marshall, unmarshall and free functions in the 
right order. widl should be correct in this respect. (There are some 
shortcuts that midl/widl take for marshalling base types and the 
alignments would have to be correct for these, but these are simple to 
get right.)

There is no reason to use NdrClientCall2 for any purpose in Wine.

> But a few questions that came up here:
> - How good or complete is Wine's NdrCallClient(2) implementation?

Pretty good, IMHO. We use exactly the code that's in Wine here at 
CodeWeavers for connecting to Exchange servers (the RPC code is 
MIDL-compiled code in DLLs used by Outlook).

> Would it
> be feasable
>   to use it for the implementation of the service rpc calls?
>   

No. Everything (except multi-dimensional arrays, possibly) can already 
be done by the code we output already. Adding code to output -Oicf proc 
format strings in widl would be possible, but unnecessary.

It also adds problems because gcc and MSVC have differing opinions on 
how to return unions from functions. For this reason, we have 
implemented NdrClientCall2 in Wine by pretending it returns a LONG_PTR 
instead. widl would have to decide on whether it wanted to be compatible 
with our signature of the function or the MS one.

> - Assuming it would be not a whole lot of work to make NdrCallClient(2) work
> for this,
>   would it be desirable to use this API instead of the code generated by
> widl currently
>   from complexity and/or performance view?
>   

It reduces code size (and on modern processors that is supposed to lead 
to performance gains), but that is the only advantage that it gives us.

> - Of course this would mean that widl would have to support (some of) the
> {Oi | Oic | Oif | Oicf}
>   flags to generate the proxy code but as it seems the necessary code
> generator at least
>   for the client side would be fairly trivial as it is mostly just a wrapper
> around
>   NdrClientCall(2) and most of the nitty gritty work is done in in that
> function.
>   A midl generated proxy code using -Oicf looks at least quite trivial. 
>
> Any opinions about this anyone?

-- 
Rob Shearman



From dank at kegel.com  Wed Jan  9 15:48:09 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 9 Jan 2008 13:48:09 -0800
Subject: shell32: Check if token references the current user
Message-ID: <a71bd89a0801091348j7e190c04j297db49a85bec4b5@mail.gmail.com>

Ge is looking for feedback on this patch,
could somebody familiar with the innards of
SHGetFolderPath() comment?

http://bugs.winehq.org/show_bug.cgi?id=10905#c6 /
http://www.winehq.org/pipermail/wine-patches/2007-December/048437.html

Thanks,
Dan


From dank at kegel.com  Wed Jan  9 15:56:27 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 9 Jan 2008 13:56:27 -0800
Subject: Please change Bugzilla email settings for wine-bugs
Message-ID: <a71bd89a0801091356w1fa1c48elce2c4c9fc397cd30@mail.gmail.com>

Say, could we set Mr. Bugs' email preferences in Bugzilla
so that mail is never sent to wine-bugs if the CC field changes?
I'm getting mighty tired of clicking on something in the
wine-bugs archive and seeing only


Jaime Rave <jaimerave at gmail.com> changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |jaimerave at gmail.com


Thanks,
Dan


From kuba at mareimbrium.org  Wed Jan  9 16:14:58 2008
From: kuba at mareimbrium.org (Kuba Ober)
Date: Wed, 9 Jan 2008 17:14:58 -0500
Subject: Spelling fixes - round 6
In-Reply-To: <a71bd89a0801072323x6b6a70bfqd0d2df91f7935e0@mail.gmail.com>
References: <a71bd89a0801072323x6b6a70bfqd0d2df91f7935e0@mail.gmail.com>
Message-ID: <200801091714.59199.kuba@mareimbrium.org>

On Tuesday 08 January 2008, Dan Kegel wrote:
> A few issues:
>
> 1.
>   *          DPMI_xalloc
> - * special virtualalloc, allocates lineary monoton growing memory.
> + * special virtualalloc, allocates linear monoton growing memory.
>
> Um... Probably should be 'linearly'.
> But if you're opening the can of worms, might as well really
> improve it.  I suspect this would be better:
>
>   *          DPMI_xalloc
> - * special virtualalloc, allocates lineary monoton growing memory.
> + * Try to VirtualAlloc the len bytes just past the last block we allocated
> + * If that's not available, try 64K beyond; if still not available, fail.
>
> 2.
>
> -/* Volume functions derived from Alsaplayer source */
> +/* Volume functions derivated from Alsaplayer source */
>
> What?  What's wrong with "derived"?  "Derivated" isn't even a word?!

He's translating it to Gerenglish. Maybe we should get a native speaker to do 
it?

Cheers, Kuba


From jnewman at codeweavers.com  Wed Jan  9 16:18:10 2008
From: jnewman at codeweavers.com (Jeremy Newman)
Date: Wed, 09 Jan 2008 16:18:10 -0600
Subject: Please change Bugzilla email settings for wine-bugs
In-Reply-To: <a71bd89a0801091356w1fa1c48elce2c4c9fc397cd30@mail.gmail.com>
References: <a71bd89a0801091356w1fa1c48elce2c4c9fc397cd30@mail.gmail.com>
Message-ID: <47854822.8080207@codeweavers.com>

Not easily. Mr. Bugs is set as a globalwatcher in the main prefs.

'globalwatchers'
     A comma-separated list of users who should receive a copy of every 
notification mail the system sends.

One way I see fixing this is to remove Mr. Bugs from the globalwatchers 
and log in as him and check all the types of mail we want him to 
receive. This is how we used to do it before the globalwatchers option 
was added. I'm not really sure of the ramifications of doing this.

Dan Kegel wrote:
> Say, could we set Mr. Bugs' email preferences in Bugzilla
> so that mail is never sent to wine-bugs if the CC field changes?
> I'm getting mighty tired of clicking on something in the
> wine-bugs archive and seeing only
> 
> 
> Jaime Rave <jaimerave at gmail.com> changed:
> 
>            What    |Removed                     |Added
> ----------------------------------------------------------------------------
>                  CC|                            |jaimerave at gmail.com
> 
> 
> Thanks,
> Dan
> 
> 


From juan.lang at gmail.com  Wed Jan  9 16:21:41 2008
From: juan.lang at gmail.com (Juan Lang)
Date: Wed, 9 Jan 2008 14:21:41 -0800
Subject: shell32: Check if token references the current user
In-Reply-To: <a71bd89a0801091348j7e190c04j297db49a85bec4b5@mail.gmail.com>
References: <a71bd89a0801091348j7e190c04j297db49a85bec4b5@mail.gmail.com>
Message-ID: <3a768c550801091421m6c0d66b6l2dcf6637bb0f8be0@mail.gmail.com>

Hi Ge, sorry I missed this.  I have some stylistic quibbles with your patch:

+static PSID GetUserFromToken(HANDLE Token)

shellpath.c uses the _ prefix for static functions.  It's not pretty,
perhaps, but please be consistent.

@@ -1371,6 +1417,9 @@ static HRESULT _SHGetUserProfilePath(HANDLE
hToken, DWORD dwFlags, BYTE folder,
  LPWSTR pszPath)
 {
     HRESULT hr;
+    PSID UserFromToken;
+    HANDLE ProcessToken;
+    PSID CurrentUser;

These have the wrong scope, as they're only used...

@@ -1391,6 +1441,37 @@ static HRESULT _SHGetUserProfilePath(HANDLE
hToken, DWORD dwFlags, BYTE folder,
      */
     if (hToken != NULL && hToken != (HANDLE)-1)
     {
+        UserFromToken = GetUserFromToken(hToken);

within this block.

But even fixing this, I think it'd be clearer to do something like the
following:

-     if (hToken != NULL && hToken != (HANDLE)-1)
+     if (hToken != NULL && hToken != (HANDLE)-1 &&
!_IsCurrentUserToken(hToken))

That is, make a function that checks whether the token represents the
current user, and returns TRUE if so/FALSE if not.

--Juan


From maarten at codeweavers.com  Wed Jan  9 16:28:26 2008
From: maarten at codeweavers.com (Maarten Lankhorst)
Date: Wed, 09 Jan 2008 23:28:26 +0100
Subject: Please change Bugzilla email settings for wine-bugs
In-Reply-To: <47854822.8080207@codeweavers.com>
References: <a71bd89a0801091356w1fa1c48elce2c4c9fc397cd30@mail.gmail.com>
	<47854822.8080207@codeweavers.com>
Message-ID: <47854A8A.9050708@codeweavers.com>

Jeremy Newman schreef:
> Not easily. Mr. Bugs is set as a globalwatcher in the main prefs.
>
> 'globalwatchers'
>      A comma-separated list of users who should receive a copy of every 
> notification mail the system sends.
>
> One way I see fixing this is to remove Mr. Bugs from the globalwatchers 
> and log in as him and check all the types of mail we want him to 
> receive. This is how we used to do it before the globalwatchers option 
> was added. I'm not really sure of the ramifications of doing this.
>   
If I recall correctly, it was changed to globalwatcher because wine-bugs
wouldn't receive a copy of bug changes any more if the bug wasn't
assigned to him and you didn't explictly add him to cc.

-Maarten


From dank06 at kegel.com  Wed Jan  9 16:33:48 2008
From: dank06 at kegel.com (Dan Kegel)
Date: Wed, 9 Jan 2008 14:33:48 -0800
Subject: Please change Bugzilla email settings for wine-bugs
In-Reply-To: <47854A8A.9050708@codeweavers.com>
References: <a71bd89a0801091356w1fa1c48elce2c4c9fc397cd30@mail.gmail.com>
	<47854822.8080207@codeweavers.com> <47854A8A.9050708@codeweavers.com>
Message-ID: <a71bd89a0801091433j69f4b732wf6c5093bdc485fac@mail.gmail.com>

On Jan 9, 2008 2:28 PM, Maarten Lankhorst <maarten at codeweavers.com> wrote:
> If I recall correctly, it was changed to globalwatcher because wine-bugs
> wouldn't receive a copy of bug changes any more if the bug wasn't
> assigned to him and you didn't explictly add him to cc.

Ah.  OK, can we put in some ad hoc filtering there to
remove just a few noisy sources of emails?


From leslie_alistair at hotmail.com  Wed Jan  9 18:19:08 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Thu, 10 Jan 2008 11:19:08 +1100
Subject: Dmitry Timoshkov : gdi32: Add support for scaling font metrics.
References: <E1JCHD3-0006Zm-Je@wine.codeweavers.com>
Message-ID: <fm3od9$6d9$1@ger.gmane.org>

"Alexandre Julliard" <julliard at winehq.org> wrote in message 
news:E1JCHD3-0006Zm-Je at wine.codeweavers.com...
> Module: wine
> Branch: master
> Commit: 535053b92769ce5f020bb6c5516385cf69da5bf4
> URL: 
> http://source.winehq.org/git/wine.git/?a=commit;h=535053b92769ce5f020bb6c5516385cf69da5bf4
>
> Author: Dmitry Timoshkov <dmitry at codeweavers.com>
> Date:   Tue Jan  8 23:02:09 2008 +0800
>
> gdi32: Add support for scaling font metrics.
This commit cause my application to fail on loading.
Backtrace:

1 0x601bb8ac (0x0219c098)

2 0x672be1cd UploadGlyph+0x33d(physDev=<register EDI not in topmost frame>, 
glyph=0x34, format=0x1) [/home/alh/wine/dlls/winex11.drv/xrender.c:803] in 
winex11 (0x0219c2a8)

3 0x672c0088 X11DRV_XRender_ExtTextOut+0x308(physDev=0x1322c0, x=0x0, y=0x9, 
flags=0x1014, lprect=0x219c8c0, wstr=0x4973fe8, count=0x7, lpDx=0x0) 
[/home/alh/wine/dlls/winex11.drv/xrender.c:1255] in winex11 (0x0219c628)

4 0x672a539d X11DRV_ExtTextOut+0x5d(physDev=0x1322c0, x=0x0, y=0x9, 
flags=0x1014, lprect=0x219c8c0, wstr=0x4973fe8, count=0x7, lpDx=0x0) 
[/home/alh/wine/dlls/winex11.drv/text.c:55] in winex11 (0x0219c6e8)

5 0x75d98e62 ExtTextOutW+0xac2(hdc=0x30c, x=0x0, y=0x9, flags=0x1014, 
lprect=0x219d2fc, str=0x219ca0c, count=0x7, lpDx=0x0) 
[/home/alh/wine/dlls/gdi32/font.c:2225] in gdi32 (0x0219c908)

6 0x75ea5a19 DrawTextExW+0xaa9(hdc=0x30c, str=0x4954198, i_count=0xffffffff, 
rect=0x219d2fc, flags=0x50, dtp=0x219d2a0) 
[/home/alh/wine/dlls/user32/text.c:957] in user32 (0x0219d268)

7 0x75ea693f DrawTextW+0x6f(hdc=0x30c, str=0x4954198, count=0xffffffff, 
rect=0x219d2fc, flags=0x50) [/home/alh/wine/dlls/user32/text.c:1090] in 
user32 (0x0219d2b8)

8 0x75e9cf74 STATIC_PaintTextfn+0x84(hwnd=0x10078, hdc=0x30c, style=0x0) 
[/home/alh/wine/dlls/user32/static.c:744] in user32 (0x0219d318)

If you need any more information , let me know.

Best Regards

 Alistair Leslie-Hughes




From thestig at google.com  Wed Jan  9 18:28:24 2008
From: thestig at google.com (Lei Zhang)
Date: Wed, 9 Jan 2008 16:28:24 -0800
Subject: Dmitry Timoshkov : gdi32: Add support for scaling font metrics.
In-Reply-To: <fm3od9$6d9$1@ger.gmane.org>
References: <E1JCHD3-0006Zm-Je@wine.codeweavers.com>
	<fm3od9$6d9$1@ger.gmane.org>
Message-ID: <558b2f5c0801091628v3c7619a5of24d596bd6fa88c9@mail.gmail.com>

On Jan 9, 2008 4:19 PM, Alistair Leslie-Hughes
<leslie_alistair at hotmail.com> wrote:
> "Alexandre Julliard" <julliard at winehq.org> wrote in message
> news:E1JCHD3-0006Zm-Je at wine.codeweavers.com...
> > Module: wine
> > Branch: master
> > Commit: 535053b92769ce5f020bb6c5516385cf69da5bf4
> > URL:
> > http://source.winehq.org/git/wine.git/?a=commit;h=535053b92769ce5f020bb6c5516385cf69da5bf4
> >
> > Author: Dmitry Timoshkov <dmitry at codeweavers.com>
> > Date:   Tue Jan  8 23:02:09 2008 +0800
> >
> > gdi32: Add support for scaling font metrics.
> This commit cause my application to fail on loading.
> Backtrace:
>
> 1 0x601bb8ac (0x0219c098)
>
> 2 0x672be1cd UploadGlyph+0x33d(physDev=<register EDI not in topmost frame>,
> glyph=0x34, format=0x1) [/home/alh/wine/dlls/winex11.drv/xrender.c:803] in
> winex11 (0x0219c2a8)
>
> 3 0x672c0088 X11DRV_XRender_ExtTextOut+0x308(physDev=0x1322c0, x=0x0, y=0x9,
> flags=0x1014, lprect=0x219c8c0, wstr=0x4973fe8, count=0x7, lpDx=0x0)
> [/home/alh/wine/dlls/winex11.drv/xrender.c:1255] in winex11 (0x0219c628)
>
> 4 0x672a539d X11DRV_ExtTextOut+0x5d(physDev=0x1322c0, x=0x0, y=0x9,
> flags=0x1014, lprect=0x219c8c0, wstr=0x4973fe8, count=0x7, lpDx=0x0)
> [/home/alh/wine/dlls/winex11.drv/text.c:55] in winex11 (0x0219c6e8)
>
> 5 0x75d98e62 ExtTextOutW+0xac2(hdc=0x30c, x=0x0, y=0x9, flags=0x1014,
> lprect=0x219d2fc, str=0x219ca0c, count=0x7, lpDx=0x0)
> [/home/alh/wine/dlls/gdi32/font.c:2225] in gdi32 (0x0219c908)
>
> 6 0x75ea5a19 DrawTextExW+0xaa9(hdc=0x30c, str=0x4954198, i_count=0xffffffff,
> rect=0x219d2fc, flags=0x50, dtp=0x219d2a0)
> [/home/alh/wine/dlls/user32/text.c:957] in user32 (0x0219d268)
>
> 7 0x75ea693f DrawTextW+0x6f(hdc=0x30c, str=0x4954198, count=0xffffffff,
> rect=0x219d2fc, flags=0x50) [/home/alh/wine/dlls/user32/text.c:1090] in
> user32 (0x0219d2b8)
>
> 8 0x75e9cf74 STATIC_PaintTextfn+0x84(hwnd=0x10078, hdc=0x30c, style=0x0)
> [/home/alh/wine/dlls/user32/static.c:744] in user32 (0x0219d318)
>
> If you need any more information , let me know.
>
> Best Regards
>
>  Alistair Leslie-Hughes
>
>
>
>
>

There's already a bug [1] filed for it and Dmitry is in the process of
fixing it. You should give his latest patch [2] a try.

- Lei

[1] http://bugs.winehq.org/show_bug.cgi?id=11085
[2] http://marc.info/?l=wine-patches&m=119988710018653&q=raw


From leslie_alistair at hotmail.com  Wed Jan  9 19:02:50 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Thu, 10 Jan 2008 12:02:50 +1100
Subject: Dmitry Timoshkov : gdi32: Add support for scaling font metrics.
References: <E1JCHD3-0006Zm-Je@wine.codeweavers.com><fm3od9$6d9$1@ger.gmane.org>
	<558b2f5c0801091628v3c7619a5of24d596bd6fa88c9@mail.gmail.com>
Message-ID: <fm3qv8$cpp$1@ger.gmane.org>

> There's already a bug [1] filed for it and Dmitry is in the process of
> fixing it. You should give his latest patch [2] a try.

This patch does fix the issue.

Thanks for point it out.

Best Regards
Alistair Leslie-Hughes



From dank at kegel.com  Wed Jan  9 20:17:11 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 9 Jan 2008 18:17:11 -0800
Subject: Fwd: [Bug 114025] Re: Problem with wine preloader: Warning: failed to
	reserve range 00000000-60000000
In-Reply-To: <20080110012119.26510.10918.malone@gangotri.ubuntu.com>
References: <20070511131511.4465.67066.malonedeb@gandwana.ubuntu.com>
	<20080110012119.26510.10918.malone@gangotri.ubuntu.com>
Message-ID: <a71bd89a0801091817m3a34a249i9de67e02db15b0ad@mail.gmail.com>

Looks like there's a linux platform issue interfering
with our preallocations again...?
See
https://bugs.launchpad.net/bugs/114025

---------- Forwarded message ----------
From: Kees Cook <kees at ubuntu.com>
Date: Jan 9, 2008 5:21 PM
Subject: [Bug 114025] Re: Problem with wine preloader: Warning: failed
to reserve range 00000000-60000000
To: dank06 at kegel.com


This is likely related to the extra security changes added to
/etc/sysctl.conf (vm.mmap_min_addr = 65536).  As a work-around, set this
to 0.  Hopefully wine can be built in a way that it doesn't have to
reserve the lower 64k all the time.


--
Problem with wine preloader: Warning: failed to reserve range 00000000-60000000
https://bugs.launchpad.net/bugs/114025
You received this bug notification because you are a member of Ubuntu
Wine Team, which is a bug assignee.



-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From mikazkow at tlen.pl  Wed Jan  9 21:43:25 2008
From: mikazkow at tlen.pl (Maciej Kowalczyk)
Date: Thu, 10 Jan 2008 04:43:25 +0100
Subject: d3dx9: Implement the different dlls
In-Reply-To: <E1JCbq8-0001yB-QN@www15.emo.freenet-rz.de>
References: <E1JCbq8-0001yB-QN@www15.emo.freenet-rz.de>
Message-ID: <op.t4o3anuxsdreb7@fake>

Hi,
As it was in David Adam's patch case, here also you are forwarding  
d3dx8.D3DXVec3Normalize as D3DXVec2Normalize.
I think it's a typo and strikes me so much because it's a first line of  
the specfile.
I'm new to Wine, so please correct me if I'm wrong.

Maciej


From r.kalbermatter at hccnet.nl  Thu Jan 10 00:19:59 2008
From: r.kalbermatter at hccnet.nl (Rolf Kalbermatter)
Date: Thu, 10 Jan 2008 07:19:59 +0100
Subject: Advapi32: Service Control RPC
In-Reply-To: <47852230.60706@codeweavers.com>
References: <001701c852f2$c7976450$4001a8c0@NATERS>
	<47852230.60706@codeweavers.com>
Message-ID: <005f01c85350$d42baba0$4001a8c0@NATERS>

Robert Shearman [mailto:rob at codeweavers.com] wrote:

>> The current service control API directly accesses the registry for 
>> most things.
>> In native those fucntions are simple wrappers around RPC calls to the 
>> actual service.exe application. Mikolaj Zalewski offered about 3 
>> months ago a possible aproach to implement the service.exe program.  
>
>Yes, we need to dig that out again. I forget what was blocking it being
>committed.

I'm myself not exactly sure what the reasons where. It looks pretty ok
to me except that the way it is now with no real parameter verification
in the API function itself anymore before calling into the proxy stub,
the test framework will cause various debugger breaks because of the
RpcRaiseExceptions() in the proxy stubs. Also Mikolaj himself mentioned
at one point that this is not ready for commitment yet and I guess that
might influence Alexandre's decision quite a bit :-) 

> Exactly. The whole point of IDL in DCE/RPC is that it is 
> independent of the DCE/RPC implementation as long as the 
> generated code conforms to the NDR rules. With Microsoft's 
> implementation, most of the NDR rules are implemented in 
> rpcrt4 and all the IDL compiler as to do is output code to 
> call the buffer size, marshall, unmarshall and free functions 
> in the right order. widl should be correct in this respect. 
> (There are some shortcuts that midl/widl take for marshalling 
> base types and the alignments would have to be correct for 
> these, but these are simple to get right.)
> 
> There is no reason to use NdrClientCall2 for any purpose in Wine.
>
<snip>
> 
> No. Everything (except multi-dimensional arrays, possibly) 
> can already be done by the code we output already. Adding 
> code to output -Oicf proc format strings in widl would be 
> possible, but unnecessary.

Ok, but I have made some parameter protocols to NdrClientCall2
from native advapi32 and believe that using those MIDL format
informations could allow to make an idl file that would result
in a fully wire compatible protocol to the MS services.exe one.
It's not exactly trivial to decode the MIDL_ProcFormatString
but by verifying the generated MIDL generated code against those
protocolled parameters would certainly help a lot. A first not
through check seems to indicate that almost every service control
API has its own services.exe rpc message, so no ANSII to Widechar
translation in the Advapi32.dll! Probably because there was a
services.exe implementation before the widechar APIs got introduced.
Also the protocol message numbers seem to have some holes, probably
some undocumented APIs here.

> It also adds problems because gcc and MSVC have differing 
> opinions on how to return unions from functions. For this 
> reason, we have implemented NdrClientCall2 in Wine by 
> pretending it returns a LONG_PTR instead. widl would have to 
> decide on whether it wanted to be compatible with our 
> signature of the function or the MS one.

Isn't te difference with structs too?

Ok I let it at the way widl generates the svcctl code for now.
It's not like that code generates MBs of code and if widl is
good enough for most datatypes already then let it work that
way. It's also possible that the performance gain by the smaller
code is compensated by the more direct Ndr routine calls compared
to NdrClientCall(2) which has to marshall the data entirely based
on its own runtime type format parsing.

Rolf Kalbermatter



From leslie_alistair at hotmail.com  Thu Jan 10 00:34:26 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Thu, 10 Jan 2008 17:34:26 +1100
Subject: user32: Add SetProcessDPIAware stub
References: <fm1e4o$gs3$1@ger.gmane.org> <877iijp6oi.fsf@wine.dyndns.org>
Message-ID: <fm4e9k$m8b$1@ger.gmane.org>


"Alexandre Julliard" <julliard at winehq.org> wrote in message 
news:877iijp6oi.fsf at wine.dyndns.org...
> Alistair Leslie-Hughes <leslie_alistair at hotmail.com> writes:
>
>> diff --git a/dlls/user32/winstation.c b/dlls/user32/winstation.c
>> index 75cb286..ec3a620 100644
>> --- a/dlls/user32/winstation.c
>> +++ b/dlls/user32/winstation.c
>> @@ -613,3 +613,13 @@ BOOL WINAPI SetUserObjectSecurity( HANDLE handle, 
>> PSECURITY_INFORMATION info,
>>      FIXME( "(%p,%p,%p),stub!\n", handle, info, sid );
>>      return TRUE;
>>  }
>> +
>> +/***********************************************************************
>> + *              SetProcessDPIAware   (USER32.@)
>> + */
>> +BOOL WINAPI SetProcessDPIAware( VOID )
>> +{
>> +    FIXME( "stub!\n");
>> +
>> +    return TRUE;
>> +}
>
> This has nothing to do with window stations, so it doesn't belong in
> winstation.c.

Would win.c be a better place this functions?

Best Regards
 Alistair Leslie-Hughes 




From hans at it.vu.nl  Thu Jan 10 03:12:22 2008
From: hans at it.vu.nl (Hans Leidekker)
Date: Thu, 10 Jan 2008 10:12:22 +0100
Subject: [PATCH] remove strange condition which might lead to crash
In-Reply-To: <200801100856.m0A8u1CQ024887@mail3.vu.nl>
References: <200801100856.m0A8u1CQ024887@mail3.vu.nl>
Message-ID: <200801101012.22506.hans@it.vu.nl>

On Thursday 10 January 2008 09:49:47 Marcus Meissner wrote:

> Coverity spotted "arg" as potentially NULL dereferenced
> and the originating condition looks broken to me.
>
> It should not really handle "delim", but just check arg.

Agreed, but there's another occurrence of this check in msvcrt_argvtos
which has been there all along. Did Coverity spot that one too?

 -Hans


From rob at codeweavers.com  Thu Jan 10 03:24:03 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Thu, 10 Jan 2008 09:24:03 +0000
Subject: Advapi32: Service Control RPC
In-Reply-To: <005f01c85350$d42baba0$4001a8c0@NATERS>
References: <001701c852f2$c7976450$4001a8c0@NATERS>
	<47852230.60706@codeweavers.com>
	<005f01c85350$d42baba0$4001a8c0@NATERS>
Message-ID: <4785E433.2060907@codeweavers.com>

Rolf Kalbermatter wrote:
> Robert Shearman [mailto:rob at codeweavers.com] wrote:
>   
>> No. Everything (except multi-dimensional arrays, possibly) 
>> can already be done by the code we output already. Adding 
>> code to output -Oicf proc format strings in widl would be 
>> possible, but unnecessary.
>>     
>
> Ok, but I have made some parameter protocols to NdrClientCall2
> from native advapi32 and believe that using those MIDL format
> informations could allow to make an idl file that would result
> in a fully wire compatible protocol to the MS services.exe one.
> It's not exactly trivial to decode the MIDL_ProcFormatString
> but by verifying the generated MIDL generated code against those
> protocolled parameters would certainly help a lot.

We really don't want to do development in that way. It would be much 
better to use the information that Samba have gained in a clean way 
combined with documentation with the equivalent Win32 function to figure 
out the compatible IDL file.

> A first not
> through check seems to indicate that almost every service control
> API has its own services.exe rpc message, so no ANSII to Widechar
> translation in the Advapi32.dll! Probably because there was a
> services.exe implementation before the widechar APIs got introduced.
> Also the protocol message numbers seem to have some holes, probably
> some undocumented APIs here.
>   

This kind of work has already been done and the interface fairly well 
documented, so I'll point you at this documentation:
http://www.hsc.fr/ressources/articles/win_net_srv/msrpc_svcctl.html

-- 
Rob Shearman



From meissner at suse.de  Thu Jan 10 03:57:24 2008
From: meissner at suse.de (Marcus Meissner)
Date: Thu, 10 Jan 2008 10:57:24 +0100
Subject: [PATCH] remove strange condition which might lead to crash
In-Reply-To: <200801101012.22506.hans@it.vu.nl>
References: <200801100856.m0A8u1CQ024887@mail3.vu.nl>
	<200801101012.22506.hans@it.vu.nl>
Message-ID: <20080110095723.GC15318@suse.de>

On Thu, Jan 10, 2008 at 10:12:22AM +0100, Hans Leidekker wrote:
> On Thursday 10 January 2008 09:49:47 Marcus Meissner wrote:
> 
> > Coverity spotted "arg" as potentially NULL dereferenced
> > and the originating condition looks broken to me.
> >
> > It should not really handle "delim", but just check arg.
> 
> Agreed, but there's another occurrence of this check in msvcrt_argvtos
> which has been there all along. Did Coverity spot that one too?

Yes, but way down the list. I am usually just looking at the latest
entries ;)

Ciao, Marcus


From l_bratch at yahoo.co.uk  Thu Jan 10 04:53:39 2008
From: l_bratch at yahoo.co.uk (Luke Bratch)
Date: Thu, 10 Jan 2008 10:53:39 +0000 (GMT)
Subject: Please change Bugzilla email settings for wine-bugs
Message-ID: <12339.30792.qm@web26011.mail.ukl.yahoo.com>

Whilst on the subject of Bugzilla email settings, is
it possible to add a message to Bugzilla emails asking
users not to reply, but to post in Bugzilla?

There's now often up to 5 replies a day sent directly
to wine-bugs at winehq.org, instead of being posted in
Bugzilla.

Thanks,

Luke


      ___________________________________________________________
Support the World Aids Awareness campaign this month with Yahoo! For Good http://uk.promotions.yahoo.com/forgood/


From julliard at winehq.org  Thu Jan 10 04:56:52 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 10 Jan 2008 11:56:52 +0100
Subject: [1/2] d3dx9: Implement the different dlls [try 2]
In-Reply-To: <E1JCcpp-0008CP-IX@www11.emo.freenet-rz.de> (tony wasserka's
	message of "Wed, 09 Jan 2008 16:27:17 +0100")
References: <E1JCcpp-0008CP-IX@www11.emo.freenet-rz.de>
Message-ID: <87prwane2z.fsf@wine.dyndns.org>

tony.wasserka at freenet.de writes:

> Forwarding d3dx9_24...35 functions to d3dx9_36 now.

Please stop resending that big patch again and again, it's not going in,
it's full of problems. You need to provide correct forwards for all
functions instead of stubs, and the functions need to match the Windows
ones, you can't just copy the same spec file 12 times. Also the code was
written by David, you have to use his name in the changelog, and you
shouldn't add your copyright in all the files unless you make
significant changes.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Thu Jan 10 05:09:02 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 10 Jan 2008 12:09:02 +0100
Subject: [advapi32] QueryServiceConfig2 (resend)
In-Reply-To: <200801092021.21683.Stefan.Leichter@camline.com> (Stefan
	Leichter's message of "Wed, 9 Jan 2008 20:21:21 +0100")
References: <200801092021.21683.Stefan.Leichter@camline.com>
Message-ID: <87ir22ndip.fsf@wine.dyndns.org>

Stefan Leichter <Stefan.Leichter at camline.com> writes:

> +#define MAP_STR(str) \
> +    do { \
> +        if (configW->str) \
> +        { \
> +            DWORD sz = WideCharToMultiByte( CP_ACP, 0, configW->str, -1, p, n, NULL, NULL ); \
> +            if (!sz) { \
> +                FIXME("WideCharToMultiByte failed for configW->%s\n", #str ); \
> +                ret = FALSE; \
> +                goto cleanup; \
> +            } \
> +            configA->str = p; \
> +            p += sz; \
> +            n -= sz; \
> +        } \
> +        else configA->str = NULL; \
> +    } while (0)
> +
> +    switch(dwLevel) {
> +        case SERVICE_CONFIG_DESCRIPTION:
> +            {   LPSERVICE_DESCRIPTIONA configA = (LPSERVICE_DESCRIPTIONA) buffer;
> +                LPSERVICE_DESCRIPTIONW configW = (LPSERVICE_DESCRIPTIONW) bufferW;
> +                p = (LPSTR)(configA + 1);
> +                n = size - sizeof(SERVICE_DESCRIPTIONA);
> +                MAP_STR(lpDescription);
> +            }

That's ugly, please get rid of that macro.

-- 
Alexandre Julliard
julliard at winehq.org


From winehacker at gmail.com  Thu Jan 10 05:15:48 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Thu, 10 Jan 2008 06:15:48 -0500
Subject: major regression in current git
Message-ID: <19e31a080801100315g78a111a1m3faf660c9b24a072@mail.gmail.com>

Hi,

Sorry I've not filed a bug report for this or dug in to it more, I am
a little short on time. I've got a clean tree and am trying to install
Office 97 and it seems to have totally regressed. A clean build from a
few days ago installed flawlessly. I've made clean and reconfigured
twice now and still see this behavior. System is ubuntu 7.10

wine: Unhandled page fault on read access to 0x00000000 at address
0xf7d4183c (thread 0016), starting debugger...
Unhandled exception: page fault on read access to 0x00000000 in 32-bit
code (0xf7d4183c).
Register dump:
 CS:0023 SS:002b DS:002b ES:002b FS:0063 GS:006b
 EIP:f7d4183c ESP:0033e464 EBP:0033e490 EFLAGS:00010216(   - 00      -RIAP1)
 EAX:fffffff7 EBX:7d4d2a2c ECX:3ffffff3 EDX:0000000c
 ESI:00000000 EDI:7c05a7f8
Stack dump:
0x0033e464:  7d4ce808 7c05a7f8 00000000 ffffffcc
0x0033e474:  7e59b560 7e5a232c 0013fde8 00000001
0x0033e484:  7e59b560 7e5a232c 0013fde8 0033e6a0
0x0033e494:  7e5853f2 7c05a0d0 04400082 0033e55c
0x0033e4a4:  0033e550 00000001 00000000 ffffffcc
0x0033e4b4:  00000000 00000000 00000000 00000000
Backtrace:
=>1 0xf7d4183c memcpy+0x1c() in libc.so.6 (0x0033e490)
  2 0x7e5853f2 UploadGlyph+0x722(physDev=<register EDI not in topmost
frame>, glyph=0x24, format=0x1)
[/home/sedwards/source/wine-git/dlls/winex11.drv/xrender.c:803] in
winex11 (0x0033e6a0)
  3 0x7e5872cf X11DRV_XRender_ExtTextOut+0x64f(physDev=0x13fde8,
x=0x16, y=0xd, flags=<is not available>, lprect=0x33ecc0,
wstr=0x157448, count=0x8, lpDx=0x0)
[/home/sedwards/source/wine-git/dlls/winex11.drv/xrender.c:1259] in
winex11 (0x0033ea10)
  4 0x7e56b75a X11DRV_ExtTextOut+0x5a(physDev=<register EDI not in
topmost frame>, x=0x16, y=0xd, flags=0x1010, lprect=0x33ecc0,
wstr=0x157448, count=0x8, lpDx=0x0)
[/home/sedwards/source/wine-git/dlls/winex11.drv/text.c:55] in winex11
(0x0033eac0)
  5 0x7eadcdb7 ExtTextOutW+0xd87(hdc=0x314, x=0x16, y=0xd,
flags=0x1010, lprect=0x33f6cc, str=0x33ee04, count=0x8, lpDx=0x0)
[/home/sedwards/source/wine-git/dlls/gdi32/font.c:2225] in gdi32
(0x0033ed00)
  6 0x7ebe18f5 DrawTextExW+0xf45(hdc=0x314, str=0x157840, i_count=<is
not available>, rect=0x33f6cc, flags=0x125, dtp=0x33f698)
[/home/sedwards/source/wine-git/dlls/user32/text.c:957] in user32
(0x0033f660)
  7 0x7ebe237f DrawTextW+0x6f(hdc=0x314, str=0x157840,
count=0xffffffff, rect=0x33f6cc, flags=0x125)
[/home/sedwards/source/wine-git/dlls/user32/text.c:1090] in user32
(0x0033f6b0)
  8 0x7eb69244 BUTTON_DrawTextCallback+0x54(hdc=0x314, lp=0x157840,
wp=0x125, cx=0x21, cy=0xfffffff6)
[/home/sedwards/source/wine-git/dlls/user32/button.c:727] in user32
(0x0033f6e0)
  9 0x7ebe30fb UITOOLS_DrawStateJam+0x1cb(hdc=0x314, opcode=<is not
available>, func=0x7eb691f0, lp=0x157840, wp=0x125, rc=0x33f7ac,
dtflags=0x100, unicode=0x1)
[/home/sedwards/source/wine-git/dlls/user32/uitools.c:1562] in user32
(0x0033f730)
  10 0x7ebe357a UITOOLS_DrawState+0x17a(hdc=0x314, hbr=0x0,
func=0x7eb691f0, lp=0x157840, wp=0x125, x=0x16, y=0xe, cx=0x21,
cy=0xfffffff6, flags=0x0, unicode=0x1)
[/home/sedwards/source/wine-git/dlls/user32/uitools.c:1738] in user32
(0x0033f7d0)
  11 0x7ebe3b6c DrawStateW+0x4c(hdc=0x314, hbr=0x0, func=0x7eb691f0,
ldata=0x157840, wdata=0x125, x=0x16, y=0xe, cx=0x21, cy=0xfffffff6,
flags=0x0) [/home/sedwards/source/wine-git/dlls/user32/uitools.c:1758]
in user32 (0x0033f800)
  12 0x7eb69a2b BUTTON_DrawLabel+0x16b(hwnd=0x10032, hdc=0x314,
dtFlags=0x125, rc=0x33f8a4)
[/home/sedwards/source/wine-git/dlls/user32/button.c:781] in user32
(0x0033f860)
  13 0x7eb69e9f PB_Paint+0x20f(hwnd=0x10032, hDC=<register EDI not in
topmost frame>, action=0x1)
[/home/sedwards/source/wine-git/dlls/user32/button.c:858] in user32
(0x0033f8e0)
  14 0x7eb6b165 ButtonWndProc_common+0xd85(hWnd=0x10032, uMsg=<is not
available>, wParam=0x0, lParam=0x0, unicode=0x1)
[/home/sedwards/source/wine-git/dlls/user32/button.c:302] in user32
(0x0033f9d0)
  15 0x7eb6bb26 ButtonWndProcW+0x46(hWnd=<register ESI not in topmost
frame>, uMsg=0xf, wParam=0x0, lParam=0x0)
[/home/sedwards/source/wine-git/dlls/user32/button.c:554] in user32
(0x0033f9f0)
  16 0x7ebf23ea WINPROC_wrapper+0x1a() in user32 (0x0033fa20)
  17 0x7ebf2ace call_window_proc+0x6e(hwnd=<register EDI not in
topmost frame>, msg=0xf, wp=0x0, lp=0x0, result=0x33fad0,
arg=0x7eb6bae0)
[/home/sedwards/source/wine-git/dlls/user32/winproc.c:457] in user32
(0x0033fa60)
  18 0x7ebf8e51 WINPROC_call_window+0xd1(hwnd=<register ESI not in
topmost frame>, msg=0xf, wParam=0x0, lParam=0x0, result=0x33fad0,
unicode=0x1, mapping=0x4)
[/home/sedwards/source/wine-git/dlls/user32/winproc.c:2207] in user32
(0x0033faa0)
  19 0x7ebbf096 DispatchMessageW+0x96(msg=<register EDI not in topmost
frame>) [/home/sedwards/source/wine-git/dlls/user32/message.c:3108] in
user32 (0x0033fae0)
  20 0x7eb8b86f IsDialogMessageW+0x10f(hwndDlg=<register ESI not in
topmost frame>, msg=0x33fc3c)
[/home/sedwards/source/wine-git/dlls/user32/dialog.c:1221] in user32
(0x0033fc20)
  21 0x7ebbee38 IsDialogMessageA+0x68(hwndDlg=0x2002c, pmsg=0x33fc9c)
[/home/sedwards/source/wine-git/dlls/user32/message.c:2976] in user32
(0x0033fc60)
  22 0x1001b31c in mssetup (+0x1b31c) (0x00000000)
0xf7d4183c memcpy+0x1c in libc.so.6: repe movsl (%esi),%es:(%edi)
Modules:
Module  Address                 Debug info      Name (85 modules)
PE        400000-  45c000       Deferred        acmsetup
PE      10000000-10048000       Export          mssetup
ELF     7bf00000-7bf03000       Deferred        <wine-loader>
ELF     7cec2000-7ced7000       Deferred        midimap<elf>
  \-PE  7ced0000-7ced7000       \               midimap
ELF     7ced7000-7cf28000       Deferred        libgcrypt.so.11
ELF     7cf28000-7cf38000       Deferred        libtasn1.so.3
ELF     7cf38000-7cf40000       Deferred        libkrb5support.so.0
ELF     7cf40000-7cf6e000       Deferred        libcrypt.so.1
ELF     7cf6e000-7cfde000       Deferred        libgnutls.so.13
ELF     7cfde000-7d003000       Deferred        libk5crypto.so.3
ELF     7d003000-7d08b000       Deferred        libkrb5.so.3
ELF     7d08b000-7d0b4000       Deferred        libgssapi_krb5.so.2
ELF     7d0b4000-7d0e9000       Deferred        libcups.so.2
ELF     7d0f3000-7d11a000       Deferred        msacm32<elf>
  \-PE  7d100000-7d11a000       \               msacm32
ELF     7d11a000-7d132000       Deferred        msacm32<elf>
  \-PE  7d120000-7d132000       \               msacm32
ELF     7d132000-7d1c0000       Deferred        winmm<elf>
  \-PE  7d140000-7d1c0000       \               winmm
ELF     7d430000-7d434000       Deferred        libgpg-error.so.0
ELF     7d43d000-7d43f000       Deferred        libkeyutils.so.1
ELF     7d43f000-7d442000       Deferred        libcom_err.so.2
ELF     7d462000-7d494000       Deferred        uxtheme<elf>
  \-PE  7d470000-7d494000       \               uxtheme
ELF     7d496000-7d49f000       Deferred        libxcursor.so.1
ELF     7d49f000-7d4bd000       Deferred        imm32<elf>
  \-PE  7d4b0000-7d4bd000       \               imm32
ELF     7d4bd000-7d4c2000       Deferred        libxfixes.so.3
ELF     7d4c2000-7d4c5000       Deferred        libxcomposite.so.1
ELF     7d4c5000-7d4cb000       Deferred        libxrandr.so.2
ELF     7d4cb000-7d4d3000       Deferred        libxrender.so.1
ELF     7d4d3000-7d4d6000       Deferred        libxinerama.so.1
ELF     7daf7000-7daf9000       Deferred        libnvidia-tls.so.1
ELF     7daf9000-7e37f000       Deferred        libglcore.so.1
ELF     7e37f000-7e40b000       Deferred        libgl.so.1
ELF     7e40b000-7e410000       Deferred        libxdmcp.so.6
ELF     7e410000-7e413000       Deferred        libxau.so.6
ELF     7e413000-7e504000       Deferred        libx11.so.6
ELF     7e504000-7e512000       Deferred        libxext.so.6
ELF     7e512000-7e5a3000       Dwarf           winex11<elf>
  \-PE  7e520000-7e5a3000       \               winex11
ELF     7e623000-7e643000       Deferred        libexpat.so.1
ELF     7e643000-7e66e000       Deferred        libfontconfig.so.1
ELF     7e66e000-7e683000       Deferred        libz.so.1
ELF     7e683000-7e6f3000       Deferred        libfreetype.so.6
ELF     7e6f3000-7e7b1000       Deferred        comctl32<elf>
  \-PE  7e700000-7e7b1000       \               comctl32
ELF     7e7b1000-7e80a000       Deferred        shlwapi<elf>
  \-PE  7e7c0000-7e80a000       \               shlwapi
ELF     7e80a000-7e911000       Deferred        shell32<elf>
  \-PE  7e820000-7e911000       \               shell32
ELF     7e911000-7e925000       Deferred        lz32<elf>
  \-PE  7e920000-7e925000       \               lz32
ELF     7e925000-7e93f000       Deferred        version<elf>
  \-PE  7e930000-7e93f000       \               version
ELF     7e93f000-7e960000       Deferred        mpr<elf>
  \-PE  7e950000-7e960000       \               mpr
ELF     7e960000-7e973000       Deferred        libresolv.so.2
ELF     7e973000-7e991000       Deferred        iphlpapi<elf>
  \-PE  7e980000-7e991000       \               iphlpapi
ELF     7e991000-7e9f1000       Deferred        rpcrt4<elf>
  \-PE  7e9a0000-7e9f1000       \               rpcrt4
ELF     7e9f1000-7ea94000       Deferred        ole32<elf>
  \-PE  7ea00000-7ea94000       \               ole32
ELF     7ea94000-7eb2d000       Dwarf           gdi32<elf>
  \-PE  7eab0000-7eb2d000       \               gdi32
ELF     7eb2d000-7ec6b000       Dwarf           user32<elf>
  \-PE  7eb50000-7ec6b000       \               user32
ELF     7ec6b000-7ecb7000       Deferred        advapi32<elf>
  \-PE  7ec80000-7ecb7000       \               advapi32
ELF     7ecb7000-7ecc2000       Deferred        libnss_files.so.2
ELF     7ecc2000-7eccc000       Deferred        libnss_nis.so.2
ELF     7eccc000-7ece4000       Deferred        libnsl.so.1
ELF     7ece4000-7eced000       Deferred        libnss_compat.so.2
ELF     7ee0c000-7ef38000       Deferred        kernel32<elf>
  \-PE  7ee30000-7ef38000       \               kernel32
ELF     7ef38000-7ef5d000       Deferred        libm.so.6
ELF     7ef5d000-7f000000       Deferred        ntdll<elf>
  \-PE  7ef70000-7f000000       \               ntdll
ELF     f7ccb000-f7ccf000       Deferred        libdl.so.2
ELF     f7ccf000-f7e19000       Export          libc.so.6
ELF     f7e19000-f7e31000       Deferred        libpthread.so.0
ELF     f7e32000-f7f46000       Deferred        libwine.so.1
ELF     f7f48000-f7f66000       Deferred        ld-linux.so.2
Threads:
process  tid      prio (all id:s are in hex)
00000015 (D) C:\~MSSETUP.T\~msstfof.t\acmsetup.exe
        00000016    0 <==
00000013
        00000014    0
0000000f
        00000012    0
        00000011    0
        00000010    0
0000000c
        0000000e    0
        0000000d    0
0000000a
        0000000b    0
Backtrace:
=>1 0xf7d4183c memcpy+0x1c() in libc.so.6 (0x0033e490)
  2 0x7e5853f2 UploadGlyph+0x722(physDev=<register EDI not in topmost
frame>, glyph=0x24, format=0x1)
[/home/sedwards/source/wine-git/dlls/winex11.drv/xrender.c:803] in
winex11 (0x0033e6a0)
  3 0x7e5872cf X11DRV_XRender_ExtTextOut+0x64f(physDev=0x13fde8,
x=0x16, y=0xd, flags=<is not available>, lprect=0x33ecc0,
wstr=0x157448, count=0x8, lpDx=0x0)
[/home/sedwards/source/wine-git/dlls/winex11.drv/xrender.c:1259] in
winex11 (0x0033ea10)
  4 0x7e56b75a X11DRV_ExtTextOut+0x5a(physDev=<register EDI not in
topmost frame>, x=0x16, y=0xd, flags=0x1010, lprect=0x33ecc0,
wstr=0x157448, count=0x8, lpDx=0x0)
[/home/sedwards/source/wine-git/dlls/winex11.drv/text.c:55] in winex11
(0x0033eac0)
  5 0x7eadcdb7 ExtTextOutW+0xd87(hdc=0x314, x=0x16, y=0xd,
flags=0x1010, lprect=0x33f6cc, str=0x33ee04, count=0x8, lpDx=0x0)
[/home/sedwards/source/wine-git/dlls/gdi32/font.c:2225] in gdi32
(0x0033ed00)
  6 0x7ebe18f5 DrawTextExW+0xf45(hdc=0x314, str=0x157840, i_count=<is
not available>, rect=0x33f6cc, flags=0x125, dtp=0x33f698)
[/home/sedwards/source/wine-git/dlls/user32/text.c:957] in user32
(0x0033f660)
  7 0x7ebe237f DrawTextW+0x6f(hdc=0x314, str=0x157840,
count=0xffffffff, rect=0x33f6cc, flags=0x125)
[/home/sedwards/source/wine-git/dlls/user32/text.c:1090] in user32
(0x0033f6b0)
  8 0x7eb69244 BUTTON_DrawTextCallback+0x54(hdc=0x314, lp=0x157840,
wp=0x125, cx=0x21, cy=0xfffffff6)
[/home/sedwards/source/wine-git/dlls/user32/button.c:727] in user32
(0x0033f6e0)
  9 0x7ebe30fb UITOOLS_DrawStateJam+0x1cb(hdc=0x314, opcode=<is not
available>, func=0x7eb691f0, lp=0x157840, wp=0x125, rc=0x33f7ac,
dtflags=0x100, unicode=0x1)
[/home/sedwards/source/wine-git/dlls/user32/uitools.c:1562] in user32
(0x0033f730)
  10 0x7ebe357a UITOOLS_DrawState+0x17a(hdc=0x314, hbr=0x0,
func=0x7eb691f0, lp=0x157840, wp=0x125, x=0x16, y=0xe, cx=0x21,
cy=0xfffffff6, flags=0x0, unicode=0x1)
[/home/sedwards/source/wine-git/dlls/user32/uitools.c:1738] in user32
(0x0033f7d0)
  11 0x7ebe3b6c DrawStateW+0x4c(hdc=0x314, hbr=0x0, func=0x7eb691f0,
ldata=0x157840, wdata=0x125, x=0x16, y=0xe, cx=0x21, cy=0xfffffff6,
flags=0x0) [/home/sedwards/source/wine-git/dlls/user32/uitools.c:1758]
in user32 (0x0033f800)
  12 0x7eb69a2b BUTTON_DrawLabel+0x16b(hwnd=0x10032, hdc=0x314,
dtFlags=0x125, rc=0x33f8a4)
[/home/sedwards/source/wine-git/dlls/user32/button.c:781] in user32
(0x0033f860)
  13 0x7eb69e9f PB_Paint+0x20f(hwnd=0x10032, hDC=<register EDI not in
topmost frame>, action=0x1)
[/home/sedwards/source/wine-git/dlls/user32/button.c:858] in user32
(0x0033f8e0)
  14 0x7eb6b165 ButtonWndProc_common+0xd85(hWnd=0x10032, uMsg=<is not
available>, wParam=0x0, lParam=0x0, unicode=0x1)
[/home/sedwards/source/wine-git/dlls/user32/button.c:302] in user32
(0x0033f9d0)
  15 0x7eb6bb26 ButtonWndProcW+0x46(hWnd=<register ESI not in topmost
frame>, uMsg=0xf, wParam=0x0, lParam=0x0)
[/home/sedwards/source/wine-git/dlls/user32/button.c:554] in user32
(0x0033f9f0)
  16 0x7ebf23ea WINPROC_wrapper+0x1a() in user32 (0x0033fa20)
  17 0x7ebf2ace call_window_proc+0x6e(hwnd=<register EDI not in
topmost frame>, msg=0xf, wp=0x0, lp=0x0, result=0x33fad0,
arg=0x7eb6bae0)
[/home/sedwards/source/wine-git/dlls/user32/winproc.c:457] in user32
(0x0033fa60)
  18 0x7ebf8e51 WINPROC_call_window+0xd1(hwnd=<register ESI not in
topmost frame>, msg=0xf, wParam=0x0, lParam=0x0, result=0x33fad0,
unicode=0x1, mapping=0x4)
[/home/sedwards/source/wine-git/dlls/user32/winproc.c:2207] in user32
(0x0033faa0)
  19 0x7ebbf096 DispatchMessageW+0x96(msg=<register EDI not in topmost
frame>) [/home/sedwards/source/wine-git/dlls/user32/message.c:3108] in
user32 (0x0033fae0)
  20 0x7eb8b86f IsDialogMessageW+0x10f(hwndDlg=<register ESI not in
topmost frame>, msg=0x33fc3c)
[/home/sedwards/source/wine-git/dlls/user32/dialog.c:1221] in user32
(0x0033fc20)
  21 0x7ebbee38 IsDialogMessageA+0x68(hwndDlg=0x2002c, pmsg=0x33fc9c)
[/home/sedwards/source/wine-git/dlls/user32/message.c:2976] in user32
(0x0033fc60)
  22 0x1001b31c in mssetup (+0x1b31c) (0x00000000)



-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From julliard at winehq.org  Thu Jan 10 05:19:32 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 10 Jan 2008 12:19:32 +0100
Subject: [resend] wineboot: fix installation of SFP protected files
In-Reply-To: <4784E569.7040109@gmail.com> (Andrey Turkin's message of "Wed, 09
	Jan 2008 18:16:57 +0300")
References: <4784E569.7040109@gmail.com>
Message-ID: <87ejcqnd17.fsf@wine.dyndns.org>

Andrey Turkin <andrey.turkin at gmail.com> writes:

> @@ -494,7 +494,11 @@ static int ProcessWindowsFileProtection(void)
>          strcatW( dllcache, dllcacheW );
>      }
>  
> -    find_handle = FindFirstFileW(dllcache,&finddata);
> +    dllcache_wildcard = HeapAlloc(GetProcessHeap(), 0, strlenW( dllcache )*sizeof(WCHAR) + sizeof(wildcardW));
> +    strcpyW(dllcache_wildcard,dllcache);
> +    strcatW(dllcache_wildcard,wildcardW);
> +
> +    find_handle = FindFirstFileW( dllcache_wildcard, &finddata );

You could simply remove the wildcard from the end of string after
FindFirstFile, no need to copy the whole string.

-- 
Alexandre Julliard
julliard at winehq.org


From leslie_alistair at hotmail.com  Thu Jan 10 05:25:43 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Thu, 10 Jan 2008 22:25:43 +1100
Subject: major regression in current git
References: <19e31a080801100315g78a111a1m3faf660c9b24a072@mail.gmail.com>
Message-ID: <fm4vbo$9a8$1@ger.gmane.org>


"Steven Edwards" <winehacker at gmail.com> wrote in message 
news:19e31a080801100315g78a111a1m3faf660c9b24a072 at mail.gmail.com...
> Hi,
>
> Sorry I've not filed a bug report for this or dug in to it more, I am
> a little short on time. I've got a clean tree and am trying to install
> Office 97 and it seems to have totally regressed. A clean build from a
> few days ago installed flawlessly. I've made clean and reconfigured
> twice now and still see this behavior. System is ubuntu 7.10
>
> wine: Unhandled page fault on read access to 0x00000000 at address
> 0xf7d4183c (thread 0016), starting debugger...
> Unhandled exception: page fault on read access to 0x00000000 in 32-bit
> code (0xf7d4183c).
> Register dump:

As Lei pointed out in a email.

<Quote>
There's already a bug [1] filed for it and Dmitry is in the process of
fixing it. You should give his latest patch [2] a try.

- Lei

[1] http://bugs.winehq.org/show_bug.cgi?id=11085
[2] http://marc.info/?l=wine-patches&m=119988710018653&q=raw
<Quote> 




From dmitry at codeweavers.com  Thu Jan 10 05:26:35 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Thu, 10 Jan 2008 19:26:35 +0800
Subject: major regression in current git
References: <19e31a080801100315g78a111a1m3faf660c9b24a072@mail.gmail.com>
Message-ID: <007e01c8537b$aa070a10$a600fea9@DMITRY>

"Steven Edwards" <winehacker at gmail.com> wrote:

> Sorry I've not filed a bug report for this or dug in to it more, I am
> a little short on time. I've got a clean tree and am trying to install
> Office 97 and it seems to have totally regressed. A clean build from a
> few days ago installed flawlessly. I've made clean and reconfigured
> twice now and still see this behavior. System is ubuntu 7.10

It's the bug 11085.

-- 
Dmitry.


From winehacker at gmail.com  Thu Jan 10 08:07:30 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Thu, 10 Jan 2008 09:07:30 -0500
Subject: major regression in current git
In-Reply-To: <fm4vbo$9a8$1@ger.gmane.org>
References: <19e31a080801100315g78a111a1m3faf660c9b24a072@mail.gmail.com>
	<fm4vbo$9a8$1@ger.gmane.org>
Message-ID: <19e31a080801100607td68d451q22690dca9c1a5417@mail.gmail.com>

On Jan 10, 2008 6:25 AM, Alistair Leslie-Hughes
<leslie_alistair at hotmail.com> wrote:
> As Lei pointed out in a email.
>
> <Quote>
> There's already a bug [1] filed for it and Dmitry is in the process of
> fixing it. You should give his latest patch [2] a try.
>
> - Lei
>
> [1] http://bugs.winehq.org/show_bug.cgi?id=11085
> [2] http://marc.info/?l=wine-patches&m=119988710018653&q=raw
> <Quote>

Thanks. Sorry about the spam

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From divan.burger at gmail.com  Thu Jan 10 08:23:15 2008
From: divan.burger at gmail.com (Divan Burger)
Date: Thu, 10 Jan 2008 16:23:15 +0200
Subject: Indentation
Message-ID: <6514eb960801100623u670003ccj7182907f99ff65aa@mail.gmail.com>

Hi,

What is the preferred number of spaces of indentation? In
comdlg32/colordlg.c it is either one or three spaces and there are a
few places where there is no indentation and where things are randomly
indented or switches between amounts of indentation.

What is the policy on when to change indentation and other things like
turning something like this:

    if (condition)
    {
        ...some code...
        return 0;
    }
    return 1;

into

    if (condition)
        return 1;

    ...some code...
    return 0;

The page on style
(http://www.winehq.org/site/docs/winedev-guide/style-notes) only
contains very little on coding style.

Another question, would it be OK to use smooth gradients in the colour
dialog? It could be slow on older computer accessing each pixel
individually although the code is only run on startup.

Divan


From maarten at codeweavers.com  Thu Jan 10 08:32:29 2008
From: maarten at codeweavers.com (Maarten Lankhorst)
Date: Thu, 10 Jan 2008 15:32:29 +0100
Subject: Indentation
In-Reply-To: <6514eb960801100623u670003ccj7182907f99ff65aa@mail.gmail.com>
References: <6514eb960801100623u670003ccj7182907f99ff65aa@mail.gmail.com>
Message-ID: <47862C7D.5080405@codeweavers.com>

Divan Burger schreef:
> Hi,
>
> What is the preferred number of spaces of indentation? In
> comdlg32/colordlg.c it is either one or three spaces and there are a
> few places where there is no indentation and where things are randomly
> indented or switches between amounts of indentation.
>   
Some of wine's code is a mess with indentation, but alexandre won't
commit indentation patches.
This basically means that if there are multiple styles of indentations
in the same file, you have to pick the one that is around the place
where you put your function, although secretly when Alexandre isn't
looking I sometimes pick the preferred '4 spaces' one.
> What is the policy on when to change indentation and other things like
> turning something like this:
>
>     if (condition)
>     {
>         ...some code...
>         return 0;
>     }
>     return 1;
>
> into
>
>     if (condition)
>         return 1;
>
>     ...some code...
>     return 0;
>
> The page on style
> (http://www.winehq.org/site/docs/winedev-guide/style-notes) only
> contains very little on coding style.
>
> Another question, would it be OK to use smooth gradients in the colour
> dialog? It could be slow on older computer accessing each pixel
> individually although the code is only run on startup.
>   
Explicit patches that only do that are not accepted as far as I know,
because it introduces bugs as you just skillfully demonstrated. ;-)

However if you are rewriting the function you might end up doing that
simplication in the process.

Cheers,
Maarten


From divan.burger at gmail.com  Thu Jan 10 08:50:09 2008
From: divan.burger at gmail.com (Divan Burger)
Date: Thu, 10 Jan 2008 16:50:09 +0200
Subject: Indentation
In-Reply-To: <47862C7D.5080405@codeweavers.com>
References: <6514eb960801100623u670003ccj7182907f99ff65aa@mail.gmail.com>
	<47862C7D.5080405@codeweavers.com>
Message-ID: <6514eb960801100650w67f34447oc96557ef3cb5ae7b@mail.gmail.com>

On 10/01/2008, Maarten Lankhorst <maarten at codeweavers.com> wrote:
> Divan Burger schreef:
> > Hi,
> >
> > What is the preferred number of spaces of indentation? In
> > comdlg32/colordlg.c it is either one or three spaces and there are a
> > few places where there is no indentation and where things are randomly
> > indented or switches between amounts of indentation.
> >
> Some of wine's code is a mess with indentation, but alexandre won't
> commit indentation patches.
> This basically means that if there are multiple styles of indentations
> in the same file, you have to pick the one that is around the place
> where you put your function, although secretly when Alexandre isn't
> looking I sometimes pick the preferred '4 spaces' one.
> > What is the policy on when to change indentation and other things like
> > turning something like this:
> >
> >     if (condition)
> >     {
> >         ...some code...
> >         return 0;
> >     }
> >     return 1;
> >
> > into
> >
> >     if (condition)
> >         return 1;
> >
> >     ...some code...
> >     return 0;
> >
> > The page on style
> > (http://www.winehq.org/site/docs/winedev-guide/style-notes) only
> > contains very little on coding style.
> >
> > Another question, would it be OK to use smooth gradients in the colour
> > dialog? It could be slow on older computer accessing each pixel
> > individually although the code is only run on startup.
> >
> Explicit patches that only do that are not accepted as far as I know,
> because it introduces bugs as you just skillfully demonstrated. ;-)
>
> However if you are rewriting the function you might end up doing that
> simplication in the process.
>
> Cheers,
> Maarten
>

Oops, I was thinking about inversing the condition while I was writing it :)
- if (condition)
+ if (!condition)

What about if I change one line or add a line in a small function
(approximately 15 lines). Will I be allowed to change the indentation
or do that simplification above? The one line indentation makes it
difficult to see the code structure sometimes and I also prefer the 4
spaces one.


From tony.wasserka at freenet.de  Thu Jan 10 09:35:52 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Thu, 10 Jan 2008 16:35:52 +0100
Subject: [1/2] d3dx9: Implement the different dlls [try 2]
Message-ID: <E1JCzRg-0004Sf-72@www16.emo.freenet-rz.de>

> Please stop resending that big patch again and again, it's not going in,
> it's full of problems. You need to provide correct forwards for all
> functions instead of stubs, and the functions need to match the Windows
> ones, you can't just copy the same spec file 12 times. Also the code was
> written by David, you have to use his name in the changelog, and you
> shouldn't add your copyright in all the files unless you make
> significant changes.

Okay, I now have spent some time on analysing the differences of the dlls
(at least regarding to what functions they provide). So just a few questions
from my side to make sure the next version of the patch will be what you expect:
1. Really just to ensure that one: You DO want me to forward even the stubbed
functions to the "d3dx9_36 stubs", don't you? If there's more to the forwards,
then tell me please.
2. Regarding the copyright thing, I'm really sorry for ignoring David's copyright, I'll
change that back. However, you didn't mean the git changelog with
"use his name in the changelog", did you?
Well, if you did, It'd be possible to mention both, as I'll have rewritten all
the specfiles. (It's not that I wouldn't respect David for his work, but the
time I spent on this shouldn't be left out either)
3. When it's ready, should I post my patch to a pastebin and ask at #winehackers
first if it's ok like that?
4. Is there anything other that I should correct?











From julliard at winehq.org  Thu Jan 10 09:56:54 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 10 Jan 2008 16:56:54 +0100
Subject: [1/2] d3dx9: Implement the different dlls [try 2]
In-Reply-To: <E1JCzRg-0004Sf-72@www16.emo.freenet-rz.de> (tony wasserka's
	message of "Thu, 10 Jan 2008 16:35:52 +0100")
References: <E1JCzRg-0004Sf-72@www16.emo.freenet-rz.de>
Message-ID: <87ve61ad2x.fsf@wine.dyndns.org>

tony.wasserka at freenet.de writes:

> Okay, I now have spent some time on analysing the differences of the dlls
> (at least regarding to what functions they provide). So just a few questions
> from my side to make sure the next version of the patch will be what you expect:
> 1. Really just to ensure that one: You DO want me to forward even the stubbed
> functions to the "d3dx9_36 stubs", don't you? If there's more to the forwards,
> then tell me please.

All functions that can be forwarded must be forwarded, you don't want to
have to go back and fix 12 spec files every time one is implemented. If
some functions are not compatible then of course they shouldn't be
forwarded. You need to verify this for each function.

> 2. Regarding the copyright thing, I'm really sorry for ignoring David's copyright, I'll
> change that back. However, you didn't mean the git changelog with
> "use his name in the changelog", did you?
> Well, if you did, It'd be possible to mention both, as I'll have rewritten all
> the specfiles. (It's not that I wouldn't respect David for his work, but the
> time I spent on this shouldn't be left out either)

If you have really rewritten them, then of course they are copyright by
you. If all you did is s/d3dx8/d3dx9_36/ (as seems likely since you have
the exact same bugs) then David should be credited for them.

> 3. When it's ready, should I post my patch to a pastebin and ask at #winehackers
> first if it's ok like that?

Yes, and then you should submit first a standalone d3dx9_36, and once
this is applied, a single other dll like d3dx9_24, and not worry about
the other ones until you can get that one in.

-- 
Alexandre Julliard
julliard at winehq.org


From jonathan at ernstfamily.ch  Thu Jan 10 11:20:16 2008
From: jonathan at ernstfamily.ch (Jonathan Ernst)
Date: Thu, 10 Jan 2008 18:20:16 +0100
Subject: WineD3D: Spelling fixes.
In-Reply-To: <b6bb06270801100853q3e707d93w465168acbc426877@mail.gmail.com>
References: <b6bb06270801100853q3e707d93w465168acbc426877@mail.gmail.com>
Message-ID: <1199985616.6594.29.camel@jernst-desktop>


On jeu, 2008-01-10 at 10:53 -0600, Austin English wrote:
> -     * which is essentially an input, is the destiantion register
> because it is the first
> -     * param. According to the msdn, this must be register r5, but
> let's keep it more flexible
> +     * which is essentially an input, is the destination register
> because it is the first
> +     * paramater. According to the msdn, this must be register r5,
> but let's keep it more flexible

paramEter ?



From austinenglish at gmail.com  Thu Jan 10 11:25:04 2008
From: austinenglish at gmail.com (Austin English)
Date: Thu, 10 Jan 2008 11:25:04 -0600
Subject: WineD3D: Spelling fixes.
In-Reply-To: <1199985616.6594.29.camel@jernst-desktop>
References: <b6bb06270801100853q3e707d93w465168acbc426877@mail.gmail.com>
	<1199985616.6594.29.camel@jernst-desktop>
Message-ID: <b6bb06270801100925gd7f6ec9l1f9296e1115ae337@mail.gmail.com>

Now how did that one slip in. Reading the diff before sending is a bit
hard, since there are so many typos, they get hard to track. I'll
resend in a couple minutes. Thanks for catching it.

-Austin

On Jan 10, 2008 11:20 AM, Jonathan Ernst <jonathan at ernstfamily.ch> wrote:
>
> On jeu, 2008-01-10 at 10:53 -0600, Austin English wrote:
> > -     * which is essentially an input, is the destiantion register
> > because it is the first
> > -     * param. According to the msdn, this must be register r5, but
> > let's keep it more flexible
> > +     * which is essentially an input, is the destination register
> > because it is the first
> > +     * paramater. According to the msdn, this must be register r5,
> > but let's keep it more flexible
>
> paramEter ?
>
>


From jacek at codeweavers.com  Thu Jan 10 11:42:23 2008
From: jacek at codeweavers.com (Jacek Caban)
Date: Thu, 10 Jan 2008 18:42:23 +0100
Subject: shdocvw: change return value for PersistMemory_Load
In-Reply-To: <206450.62857.qm@web23204.mail.ird.yahoo.com>
References: <206450.62857.qm@web23204.mail.ird.yahoo.com>
Message-ID: <478658FF.3010507@codeweavers.com>

Louis. Lenders wrote:
> Hi, i send this to wine-patches for review (by Jacek i guess). A user
> submitted garbage test results for Segamic:
> http://prdownloads.sourceforge.net/semagic/Semagic1709for2k.exe?download
>
> It's the second time i see an app failing on PersistMemory_Load
> returning E_NOTIMPL.
> Attached patch makes the app start fine. I know faking success return
> value can have  unwanted side effects, but for this one it seems to be
> quite harmless. Also helps a bit for
> http://bugs.winehq.org/show_bug.cgi?id=10588
>
> Jacek, if you think it could cause trouble could you give a response?

I think this patch is fine and it may go to Git.

Thanks,
    Jacek


From dank at kegel.com  Thu Jan 10 12:13:47 2008
From: dank at kegel.com (Dan Kegel)
Date: Thu, 10 Jan 2008 10:13:47 -0800
Subject: Another serial port trouble report
Message-ID: <a71bd89a0801101013s6c1eb9c9ndfcdc0d4f36ec015@mail.gmail.com>

http://www.chiefdelphi.com/forums/showthread.php?t=61219
complains that IFI_Loader doesn't work at all in Wine.
I haven't tried doing serial I/O with it, but it installs
and starts fine.  If somebody who's into serial I/O could
give it a spin, it might turn up some problems.
(Or maybe they were just using an old version of wine, who knows.)

-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From stefan at codeweavers.com  Thu Jan 10 14:24:11 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Thu, 10 Jan 2008 21:24:11 +0100
Subject: question about fixing D3DRENDERSTATE_TEXTUREMAPBLEND
In-Reply-To: <478499D4.7020804@inbox.lv>
References: <4781CCCC.8030307@inbox.lv>
	<200801080321.10500.stefan@codeweavers.com>
	<478499D4.7020804@inbox.lv>
Message-ID: <200801102124.11411.stefan@codeweavers.com>

Am Mittwoch, 9. Januar 2008 10:54:28 schrieb Alexander Dorofeyev:
> I ran a little test, it didn't show any differences in Wine or XP in such
> case (D3DTA_TEXTURE alpha selected and no alpha in texture pixelformat).
> This seems to give alpha=1.0. I found nothing on this at msdn, but it more
> or less makes sense (no alpha = opaque image). Do you think there would be
> any use in adding such test to ddraw/tests/visual.c?
Tests are always welcome!



From jlk332006 at gmail.com  Thu Jan 10 14:43:43 2008
From: jlk332006 at gmail.com (Jeff Kirk)
Date: Thu, 10 Jan 2008 13:43:43 -0700
Subject: winelib app thread debug
Message-ID: <c83057e0801101243r555536b5ued4610bfc22ea4c1@mail.gmail.com>

Does anyone use gdb attach to debug pthread winelib applications? I've had a
lot of problems with winedbg and winedbg --gdb, but have gdb attach working
well except I can't debug threads.  Breakpoints in threads crash the app and
I have no thread info.

gdb attach works fine with non-winelib pthread test cases.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080110/183ad1f8/attachment.htm 

From lats at yless4u.com.au  Fri Jan 11 03:43:21 2008
From: lats at yless4u.com.au (Jeff Latimer)
Date: Fri, 11 Jan 2008 20:43:21 +1100
Subject: Dereference of null ptrs after an ERR has been executed
Message-ID: <47873A39.2050806@yless4u.com.au>

What is the policy for handling the dereferencing of pointers that have 
previously been determined to be NULL and an ERR message has been 
issued.  It seems that there are many cases where Coverity has found 
that the test is made but the code falls through to the dereference.  In 
a number of cases to a TRACE.  Are we trying to throw an exception in 
these cases but assuming that the problem is unlikely and not worth 
further handling.  Essentially, it seems that if this is the policy then 
we can mark the Coverity entries as ignore.  In some cases it seems that 
the only problem may be the TRACE and there is no other reference which 
implies that an else may solve the problem ie.

if (!ptr) ERR "msg"
else TRACE

The other solution is to get the Coverity people to recognise the 
circumstance and not report it.

Jeff


From lats at yless4u.com.au  Fri Jan 11 03:48:26 2008
From: lats at yless4u.com.au (Jeff Latimer)
Date: Fri, 11 Jan 2008 20:48:26 +1100
Subject: Indentation
In-Reply-To: <47862C7D.5080405@codeweavers.com>
References: <6514eb960801100623u670003ccj7182907f99ff65aa@mail.gmail.com>
	<47862C7D.5080405@codeweavers.com>
Message-ID: <47873B6A.9070001@yless4u.com.au>

Maarten Lankhorst wrote:
> Some of wine's code is a mess with indentation, but alexandre won't
> commit indentation patches.
>   
This explains some frustrations with patches.  Do we have the policy on 
the web?
> Cheers,
> Maarten
>   
Jeff



From julliard at winehq.org  Fri Jan 11 05:07:47 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 11 Jan 2008 12:07:47 +0100
Subject: [PATCH] dbghelp: Implement ImageDirectoryEntryToDataEx
In-Reply-To: <47860F47.2010207@gmail.com> (Andrey Turkin's message of "Thu, 10
	Jan 2008 15:27:51 +0300")
References: <47860F47.2010207@gmail.com>
Message-ID: <87k5mgaad8.fsf@wine.dyndns.org>

Andrey Turkin <andrey.turkin at gmail.com> writes:

> +    if (image || addr < nt->OptionalHeader.SizeOfHeaders)
> +    {
> +        if (section)
> +        {
> +            PIMAGE_SECTION_HEADER sec = IMAGE_FIRST_SECTION(nt);
> +            WORD i;
> +            for(i = 0; i < nt->FileHeader.NumberOfSections; i++, sec++)
> +            {
> +                if (addr >= sec->PointerToRawData && (addr - sec->PointerToRawData) < sec->SizeOfRawData)
> +                {

It doesn't make sense to check an RVA against PointerToRawData.

-- 
Alexandre Julliard
julliard at winehq.org


From andrey.turkin at gmail.com  Fri Jan 11 06:36:50 2008
From: andrey.turkin at gmail.com (Andrey Turkin)
Date: Fri, 11 Jan 2008 15:36:50 +0300
Subject: [PATCH] dbghelp: Implement ImageDirectoryEntryToDataEx
In-Reply-To: <87k5mgaad8.fsf@wine.dyndns.org>
References: <47860F47.2010207@gmail.com> <87k5mgaad8.fsf@wine.dyndns.org>
Message-ID: <478762E2.1090704@gmail.com>

Alexandre Julliard wrote:
> Andrey Turkin <andrey.turkin at gmail.com> writes:
>
>   
>> +    if (image || addr < nt->OptionalHeader.SizeOfHeaders)
>> +    {
>> +        if (section)
>> +        {
>> +            PIMAGE_SECTION_HEADER sec = IMAGE_FIRST_SECTION(nt);
>> +            WORD i;
>> +            for(i = 0; i < nt->FileHeader.NumberOfSections; i++, sec++)
>> +            {
>> +                if (addr >= sec->PointerToRawData && (addr - sec->PointerToRawData) < sec->SizeOfRawData)
>> +                {
>>     
>
> It doesn't make sense to check an RVA against PointerToRawData.
>
>   

Oh, yes. I need more coffee :) And I should have been test native -
native doesn't even bother to search section unless it is file mapping
(MSDN is at least not complete, as usual). I'll send new version shortly.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080111/06d7c414/attachment.htm 

From fgouget at free.fr  Fri Jan 11 07:06:46 2008
From: fgouget at free.fr (Francois Gouget)
Date: Fri, 11 Jan 2008 14:06:46 +0100 (CET)
Subject: Dereference of null ptrs after an ERR has been executed
In-Reply-To: <47873A39.2050806@yless4u.com.au>
References: <47873A39.2050806@yless4u.com.au>
Message-ID: <alpine.DEB.0.999999.0801111405450.23069@amboise.dolphin>

On Fri, 11 Jan 2008, Jeff Latimer wrote:
[...]
> In some cases it seems that the only problem may be the TRACE and 
> there is no other reference which implies that an else may solve the 
> problem ie.
> 
> if (!ptr) ERR "msg"
> else TRACE

That or we could modify the TRACE to use wine_dbgstr_[aw](ptr).


-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
                     Linux: the choice of a GNU generation


From julliard at winehq.org  Fri Jan 11 07:14:08 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 11 Jan 2008 14:14:08 +0100
Subject: Dereference of null ptrs after an ERR has been executed
In-Reply-To: <47873A39.2050806@yless4u.com.au> (Jeff Latimer's message of
	"Fri, 11 Jan 2008 20:43:21 +1100")
References: <47873A39.2050806@yless4u.com.au>
Message-ID: <87fxx4a4in.fsf@wine.dyndns.org>

Jeff Latimer <lats at yless4u.com.au> writes:

> What is the policy for handling the dereferencing of pointers that have 
> previously been determined to be NULL and an ERR message has been 
> issued.  It seems that there are many cases where Coverity has found 
> that the test is made but the code falls through to the dereference.  In 
> a number of cases to a TRACE.  Are we trying to throw an exception in 
> these cases but assuming that the problem is unlikely and not worth 
> further handling.  Essentially, it seems that if this is the policy then 
> we can mark the Coverity entries as ignore.  In some cases it seems that 
> the only problem may be the TRACE and there is no other reference which 
> implies that an else may solve the problem ie.
>
> if (!ptr) ERR "msg"
> else TRACE

That sort of code doesn't make much sense. Either a null pointer is
valid input and it should be handled properly, or it isn't and there's
no point in having an ERR, we might as well crash and get a full
backtrace.

-- 
Alexandre Julliard
julliard at winehq.org


From meissner at suse.de  Fri Jan 11 10:48:06 2008
From: meissner at suse.de (Marcus Meissner)
Date: Fri, 11 Jan 2008 17:48:06 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <20080111163604.EFD881E7146@wine.dyndns.org>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
Message-ID: <20080111164805.GA32539@suse.de>

On Fri, Jan 11, 2008 at 05:36:04PM +0100, Alexandre Julliard wrote:
> This is release 0.9.53 of Wine, a free implementation of Windows on Unix.
> 
> What's new in this release:
>   - RunOnce and Run entries now executed on startup.

This will probably give some fallout ;)

I wanted to write earlier, but did forget about it over the last
days.

For my grown Wine installation this now starts:

- 2 instances of a Windows Worm
- Google Talk (not working)
- Skype (crashing)
- pccam.exe from some digital camera disk
- the annoying Steam.exe auto-update and ask-for-subscription dialog
- perhaps more

and this even on "make check" :(

We probably need some tool to edit Run and RunOnce entries now.

Ciao, Marcus


From stefan at codeweavers.com  Fri Jan 11 11:06:07 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Fri, 11 Jan 2008 18:06:07 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <20080111164805.GA32539@suse.de>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
Message-ID: <200801111806.07354.stefan@codeweavers.com>

Am Freitag, 11. Januar 2008 17:48:06 schrieb Marcus Meissner:
> On Fri, Jan 11, 2008 at 05:36:04PM +0100, Alexandre Julliard wrote:
> > This is release 0.9.53 of Wine, a free implementation of Windows on Unix.
> >
> > What's new in this release:
> >   - RunOnce and Run entries now executed on startup.
>
> This will probably give some fallout ;)
>
> I wanted to write earlier, but did forget about it over the last
> days.
>
> For my grown Wine installation this now starts:
>
> - 2 instances of a Windows Worm
> - Google Talk (not working)
> - Skype (crashing)
> - pccam.exe from some digital camera disk
> - the annoying Steam.exe auto-update and ask-for-subscription dialog
> - perhaps more
Works as it is supposed to then :-)

I agree it is a pain with "make test" though, and some way to easilly edit 
these keys would be helpful



From winehacker at gmail.com  Fri Jan 11 11:11:36 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Fri, 11 Jan 2008 12:11:36 -0500
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <200801111806.07354.stefan@codeweavers.com>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
	<200801111806.07354.stefan@codeweavers.com>
Message-ID: <19e31a080801110911y7b1b1554w7457ddfc81941ad4@mail.gmail.com>

On Jan 11, 2008 12:06 PM, Stefan D?singer <stefan at codeweavers.com> wrote:
> I agree it is a pain with "make test" though, and some way to easilly edit
> these keys would be helpful

maybe we need a tool like msconfig for managing services or a page on winecfg.


-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From xixsimplicityxix at gmail.com  Fri Jan 11 11:34:46 2008
From: xixsimplicityxix at gmail.com (John Klehm)
Date: Fri, 11 Jan 2008 11:34:46 -0600
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <20080111164805.GA32539@suse.de>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
Message-ID: <78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>

On Jan 11, 2008 10:48 AM, Marcus Meissner <meissner at suse.de> wrote:
>
> We probably need some tool to edit Run and RunOnce entries now.
>

>maybe we need a tool like msconfig for managing services or a page on winecfg.

Id say so, a one stop place for anything that has a chance to get
executed on startup:

* HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run
* HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run
* HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunOnce
* HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\RunOnce
* HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\ RunServices
* HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\ RunServicesOnce
* HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\ RunOnce\Setup
above are listed from http://support.microsoft.com/kb/137367
* HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnceEx
* HKEY_USERS\.DEFAULT\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
* HKEY_USERS\.DEFAULT\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce
* HKEY_LOCAL_MACHINE\Software\Microsoft\Windows
NT\CurrentVersion\Winlogon\Userinit
* HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\Windows
* autoexec.bat
* config.sys
* startup folder
* system.ini


Any other areas that windows uses to launch programs when starting up?

Regards,
John Klehm


From maarten at codeweavers.com  Fri Jan 11 11:35:33 2008
From: maarten at codeweavers.com (Maarten Lankhorst)
Date: Fri, 11 Jan 2008 18:35:33 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <20080111164805.GA32539@suse.de>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
Message-ID: <4787A8E5.30109@codeweavers.com>

Marcus Meissner schreef:
> On Fri, Jan 11, 2008 at 05:36:04PM +0100, Alexandre Julliard wrote:
>   
>> This is release 0.9.53 of Wine, a free implementation of Windows on Unix.
>>
>> What's new in this release:
>>   - RunOnce and Run entries now executed on startup.
>>     
>
> This will probably give some fallout ;)
>
> I wanted to write earlier, but did forget about it over the last
> days.
>
> For my grown Wine installation this now starts:
>
> - 2 instances of a Windows Worm
> - Google Talk (not working)
> - Skype (crashing)
> - pccam.exe from some digital camera disk
> - the annoying Steam.exe auto-update and ask-for-subscription dialog
> - perhaps more
>
> and this even on "make check" :(
>
> We probably need some tool to edit Run and RunOnce entries now.
>   
Agreed, and be able to disable them entirely, I have a program that
crashes during autorun, so my virtual wine desktop wouldn't close even
with nothing visible.

-Maarten


From christian.gmeiner at gmail.com  Fri Jan 11 11:10:38 2008
From: christian.gmeiner at gmail.com (Christian Gmeiner)
Date: Fri, 11 Jan 2008 18:10:38 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <20080111164805.GA32539@suse.de>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
Message-ID: <3192d3cd0801110910od09c535w959e5b4ae8f311f1@mail.gmail.com>

2008/1/11, Marcus Meissner <meissner at suse.de>:
>
> On Fri, Jan 11, 2008 at 05:36:04PM +0100, Alexandre Julliard wrote:
> > This is release 0.9.53 of Wine, a free implementation of Windows on
> Unix.
> >
> > What's new in this release:
> >   - RunOnce and Run entries now executed on startup.
>
> This will probably give some fallout ;)
>
> I wanted to write earlier, but did forget about it over the last
> days.
>
> For my grown Wine installation this now starts:
>
> - 2 instances of a Windows Worm
> - Google Talk (not working)
> - Skype (crashing)
> - pccam.exe from some digital camera disk
> - the annoying Steam.exe auto-update and ask-for-subscription dialog
> - perhaps more
>
> and this even on "make check" :(
>
> We probably need some tool to edit Run and RunOnce entries now.


wine regedit

Maybe it would be a good idea to have an option to make us of this new
feature...

greets,
Christian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080111/d0cf551b/attachment-0001.htm 

From nrsc16850 at blueyonder.co.uk  Fri Jan 11 14:51:29 2008
From: nrsc16850 at blueyonder.co.uk (Andrew Neil Ramage)
Date: Fri, 11 Jan 2008 20:51:29 +0000
Subject: Sibelius Scorch Setup Problem.
Message-ID: <4787D6D1.8040408@blueyonder.co.uk>

Trying to install this software 
(http://www.musicnotes.com/download/SetupScorchNS.exe) to display music 
scores I get the following problem.  After the initial dialog, another 
dialog is displayed for a fraction of a second then the installer 
crashes with the output below.  Is this a wine problem ?  Ijust 
downloaded and installed the latest (0.9.53) version.

andrew at zeus:~/Download/Software/Windows$ wine SetupScorchNS.exe
fixme:shell:DllCanUnloadNow stub
fixme:shell:DllCanUnloadNow stub
fixme:shell:DllCanUnloadNow stub
fixme:shell:DllCanUnloadNow stub
fixme:actctx:parse_depend_manifests Could not find dependent assembly 
L"Microsoft.Windows.Common-Controls"
fixme:actctx:parse_depend_manifests Could not find dependent assembly 
L"Microsoft.Windows.Common-Controls"
fixme:richedit:RichEditWndProc_common EM_SETTARGETDEVICE: stub
fixme:ole:CoInitializeSecurity ((nil),-1,(nil),(nil),0,3,(nil),0,(nil)) 
- stub!
fixme:win:AnimateWindow partial stub
fixme:win:AnimateWindow partial stub
fixme:win:AnimateWindow partial stub
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:win:AnimateWindow partial stub
fixme:keyboard:RegisterHotKey (0x10042,0,0x00000008,27): stub
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:win:AnimateWindow partial stub
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxGetNaturalSize 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSendMessage 0x15f908: STUB
fixme:richedit:fnTextSrv_TxSetText 0x15f908: STUB
fixme:richedit:fnTextSrv_TxDraw 0x15f908: STUB
wine: Unhandled page fault on write access to 0x00000000 at address 
0x402915 (thread 0009), starting debugger...
Unhandled exception: page fault on write access to 0x00000000 in 32-bit 
code (0x00402915).
Register dump:
  CS:0023 SS:002b DS:002b ES:002b FS:0063 GS:006b
  EIP:00402915 ESP:0034e8e4 EBP:0034ea0c EFLAGS:00210246(   - 00 
-RIZP1)
  EAX:00000000 EBX:7ee2aa80 ECX:00000000 EDX:00411788
  ESI:0041177c EDI:7ee27dd0
Stack dump:
0x0034e8e4:  0041177c 00000020 7b8899b0 0040c2f4
0x0034e8f4:  00000000 656e6977 776f7262 00726573
0x0034e904:  6f5c6c6c 5c6e6570 6d6d6f63 00646e61
0x0034e914:  7b8899b0 0034e934 f7c8762d 00000000
0x0034e924:  00000000 0034e978 7b8b2ff4 0040c2f4
0x0034e934:  7b8899b0 7b889a2e 00411668 0034ec74
Backtrace:
=>1 0x00402915 in setupscorchns (+0x2915) (0x0034ea0c)
   2 0x004036ed in setupscorchns (+0x36ed) (0x0034eb28)
   3 0x00404a3a in setupscorchns (+0x4a3a) (0x0034ed94)
   4 0x00402111 in setupscorchns (+0x2111) (0x0034f2e0)
   5 0x7ecc336a WINPROC_wrapper+0x1a() in user32 (0x0034f310)
   6 0x7ecc51a8 in user32 (+0xa51a8) (0x0034f350)
   7 0x7ecc82e5 in user32 (+0xa82e5) (0x0034f820)
   8 0x7ecc8c10 in user32 (+0xa8c10) (0x0034f860)
   9 0x7ec57587 DefDlgProcW+0x87() in user32 (0x0034f890)
   10 0x7ecc336a WINPROC_wrapper+0x1a() in user32 (0x0034f8c0)
   11 0x7ecc3a4e WINPROC_wrapper+0x6fe() in user32 (0x0034f900)
   12 0x7ecc8e21 in user32 (+0xa8e21) (0x0034f940)
   13 0x7ec8fbaa in user32 (+0x6fbaa) (0x0034f9b0)
   14 0x7ec9392d in user32 (+0x7392d) (0x0034fa10)
   15 0x7ec93d9a SendMessageW+0x4a() in user32 (0x0034fa50)
   16 0x7ec3dbb8 in user32 (+0x1dbb8) (0x0034fb40)
   17 0x7ec3eab6 in user32 (+0x1eab6) (0x0034fb60)
   18 0x7ecc336a WINPROC_wrapper+0x1a() in user32 (0x0034fb90)
   19 0x7ecc3a4e WINPROC_wrapper+0x6fe() in user32 (0x0034fbd0)
   20 0x7ecc8e21 in user32 (+0xa8e21) (0x0034fc10)
   21 0x7ec90526 DispatchMessageW+0x96() in user32 (0x0034fc50)
   22 0x7ec5bf8f IsDialogMessageW+0x10f() in user32 (0x0034fd90)
   23 0x7ec902c8 IsDialogMessageA+0x68() in user32 (0x0034fdd0)
   24 0x00404d74 in setupscorchns (+0x4d74) (0x0034fe7c)
   25 0x00406cb8 in setupscorchns (+0x6cb8) (0x0034ff08)
   26 0x7b874d3e in kernel32 (+0x54d3e) (0x0034ffe8)
   27 0xf7dd9a77 wine_switch_to_stack+0x17() in libwine.so.1 (0x00000000)
0x00402915: andb        $0x0,0x0(%eax)
Modules:
Module  Address                 Debug info      Name (79 modules)
PE        400000-  bdb000       Export          setupscorchns
ELF     7b800000-7b92c000       Export          kernel32<elf>
   \-PE  7b820000-7b92c000       \               kernel32
ELF     7bc00000-7bca4000       Deferred        ntdll<elf>
   \-PE  7bc10000-7bca4000       \               ntdll
ELF     7bf00000-7bf04000       Deferred        <wine-loader>
ELF     7dfa5000-7dfee000       Deferred        riched20<elf>
   \-PE  7dfb0000-7dfee000       \               riched20
ELF     7dfee000-7dff8000       Deferred        libnss_files.so.2
ELF     7dff8000-7e002000       Deferred        libnss_nis.so.2
ELF     7e002000-7e019000       Deferred        libnsl.so.1
ELF     7e019000-7e021000       Deferred        libnss_compat.so.2
ELF     7e056000-7e088000       Deferred        libcrypt.so.1
ELF     7e088000-7e1ce000       Deferred        libcrypto.so.0.9.8
ELF     7e1ce000-7e211000       Deferred        libssl.so.0.9.8
ELF     7e211000-7e243000       Deferred        libcups.so.2
ELF     7e258000-7e26d000       Deferred        riched32<elf>
   \-PE  7e260000-7e26d000       \               riched32
ELF     7e2c1000-7e2f4000       Deferred        uxtheme<elf>
   \-PE  7e2d0000-7e2f4000       \               uxtheme
ELF     7e2f4000-7e2fb000       Deferred        libxrandr.so.2
ELF     7e2fb000-7e304000       Deferred        libxrender.so.1
ELF     7e304000-7e308000       Deferred        libxinerama.so.1
ELF     7e308000-7e313000       Deferred        libdrm.so.2
ELF     7e313000-7e375000       Deferred        libgl.so.1
ELF     7e375000-7e38e000       Deferred        libxcb.so.1
ELF     7e38e000-7e4a9000       Deferred        libx11.so.6
ELF     7e4a9000-7e4b8000       Deferred        libxext.so.6
ELF     7e4b8000-7e4d1000       Deferred        libice.so.6
ELF     7e4d2000-7e4dc000       Deferred        libxcursor.so.1
ELF     7e4dc000-7e4fb000       Deferred        imm32<elf>
   \-PE  7e4e0000-7e4fb000       \               imm32
ELF     7e4fb000-7e590000       Deferred        winex11<elf>
   \-PE  7e510000-7e590000       \               winex11
ELF     7e639000-7e65a000       Deferred        libexpat.so.1
ELF     7e65a000-7e686000       Deferred        libfontconfig.so.1
ELF     7e686000-7e699000       Deferred        libz.so.1
ELF     7e699000-7e708000       Deferred        libfreetype.so.6
ELF     7e709000-7e70f000       Deferred        libxfixes.so.3
ELF     7e732000-7e747000       Deferred        lz32<elf>
   \-PE  7e740000-7e747000       \               lz32
ELF     7e747000-7e7eb000       Deferred        oleaut32<elf>
   \-PE  7e760000-7e7eb000       \               oleaut32
ELF     7e7eb000-7e7fe000       Deferred        libresolv.so.2
ELF     7e7ff000-7e803000       Deferred        libxdamage.so.1
ELF     7e803000-7e807000       Deferred        libxau.so.6
ELF     7e807000-7e80d000       Deferred        libxxf86vm.so.1
ELF     7e80d000-7e828000       Deferred        version<elf>
   \-PE  7e810000-7e828000       \               version
ELF     7e828000-7e888000       Deferred        rpcrt4<elf>
   \-PE  7e840000-7e888000       \               rpcrt4
ELF     7e888000-7e92c000       Deferred        ole32<elf>
   \-PE  7e8a0000-7e92c000       \               ole32
ELF     7e92c000-7e962000       Deferred        winspool<elf>
   \-PE  7e930000-7e962000       \               winspool
ELF     7e962000-7e9bc000       Deferred        shlwapi<elf>
   \-PE  7e970000-7e9bc000       \               shlwapi
ELF     7e9bc000-7eac3000       Deferred        shell32<elf>
   \-PE  7e9d0000-7eac3000       \               shell32
ELF     7eac3000-7eb66000       Deferred        comdlg32<elf>
   \-PE  7ead0000-7eb66000       \               comdlg32
ELF     7eb66000-7ec00000       Deferred        gdi32<elf>
   \-PE  7eb80000-7ec00000       \               gdi32
ELF     7ec00000-7ed3e000       Export          user32<elf>
   \-PE  7ec20000-7ed3e000       \               user32
ELF     7ed3e000-7edfe000       Deferred        comctl32<elf>
   \-PE  7ed50000-7edfe000       \               comctl32
ELF     7edfe000-7ee4b000       Deferred        advapi32<elf>
   \-PE  7ee10000-7ee4b000       \               advapi32
ELF     7efb1000-7efd6000       Deferred        libm.so.6
ELF     7efd8000-7efe1000       Deferred        libsm.so.6
ELF     7efe1000-7f000000       Deferred        iphlpapi<elf>
   \-PE  7eff0000-7f000000       \               iphlpapi
ELF     f7c5a000-f7c5e000       Deferred        libdl.so.2
ELF     f7c5e000-f7d91000       Deferred        libc.so.6
ELF     f7d91000-f7da8000       Deferred        libpthread.so.0
ELF     f7da8000-f7dab000       Deferred        libxcb-xlib.so.0
ELF     f7dd2000-f7ee6000       Export          libwine.so.1
ELF     f7ee7000-f7f03000       Deferred        ld-linux.so.2
Threads:
process  tid      prio (all id:s are in hex)
00000017
         0000001e    0
         0000001d    0
         0000001b    0
         0000001a    0
         00000019    0
         00000018    0
0000000e
         00000010    0
         0000000f    0
0000000a
         0000000b    0
00000008 (D) Z:\home\andrew\Download\Software\Windows\SetupScorchNS.exe
         00000009    0 <==
Backtrace:
=>1 0x00402915 in setupscorchns (+0x2915) (0x0034ea0c)
   2 0x004036ed in setupscorchns (+0x36ed) (0x0034eb28)
   3 0x00404a3a in setupscorchns (+0x4a3a) (0x0034ed94)
   4 0x00402111 in setupscorchns (+0x2111) (0x0034f2e0)
   5 0x7ecc336a WINPROC_wrapper+0x1a() in user32 (0x0034f310)
   6 0x7ecc51a8 in user32 (+0xa51a8) (0x0034f350)
   7 0x7ecc82e5 in user32 (+0xa82e5) (0x0034f820)
   8 0x7ecc8c10 in user32 (+0xa8c10) (0x0034f860)
   9 0x7ec57587 DefDlgProcW+0x87() in user32 (0x0034f890)
   10 0x7ecc336a WINPROC_wrapper+0x1a() in user32 (0x0034f8c0)
   11 0x7ecc3a4e WINPROC_wrapper+0x6fe() in user32 (0x0034f900)
   12 0x7ecc8e21 in user32 (+0xa8e21) (0x0034f940)
   13 0x7ec8fbaa in user32 (+0x6fbaa) (0x0034f9b0)
   14 0x7ec9392d in user32 (+0x7392d) (0x0034fa10)
   15 0x7ec93d9a SendMessageW+0x4a() in user32 (0x0034fa50)
   16 0x7ec3dbb8 in user32 (+0x1dbb8) (0x0034fb40)
   17 0x7ec3eab6 in user32 (+0x1eab6) (0x0034fb60)
   18 0x7ecc336a WINPROC_wrapper+0x1a() in user32 (0x0034fb90)
   19 0x7ecc3a4e WINPROC_wrapper+0x6fe() in user32 (0x0034fbd0)
   20 0x7ecc8e21 in user32 (+0xa8e21) (0x0034fc10)
   21 0x7ec90526 DispatchMessageW+0x96() in user32 (0x0034fc50)
   22 0x7ec5bf8f IsDialogMessageW+0x10f() in user32 (0x0034fd90)
   23 0x7ec902c8 IsDialogMessageA+0x68() in user32 (0x0034fdd0)
   24 0x00404d74 in setupscorchns (+0x4d74) (0x0034fe7c)
   25 0x00406cb8 in setupscorchns (+0x6cb8) (0x0034ff08)
   26 0x7b874d3e in kernel32 (+0x54d3e) (0x0034ffe8)
   27 0xf7dd9a77 wine_switch_to_stack+0x17() in libwine.so.1 (0x00000000)
andrew at zeus:~/Download/Software/Windows$
-- 

Andrew

~~~~~~~~~

 From an old movie of years ago,
 From an old movie of Marilyn Monroe.

Blood Brothers (Musical) Soundtrack



From madewokherd+d41d at gmail.com  Fri Jan 11 19:27:05 2008
From: madewokherd+d41d at gmail.com (Vincent Povirk)
Date: Fri, 11 Jan 2008 20:27:05 -0500
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <20080111164805.GA32539@suse.de>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
Message-ID: <ced95fe0801111727x11b90e2dk71cc980faa524aa6@mail.gmail.com>

I've found Mike Lin's Startup Control Panel
(http://mlin.net/StartupCPL.shtml) very useful for this on windows. It
appears to work on Wine, though I don't seem to have any Run or
RunOnce entries so can't be sure.

On Jan 11, 2008 11:48 AM, Marcus Meissner <meissner at suse.de> wrote:
> On Fri, Jan 11, 2008 at 05:36:04PM +0100, Alexandre Julliard wrote:
> > This is release 0.9.53 of Wine, a free implementation of Windows on Unix.
> >
> > What's new in this release:
> >   - RunOnce and Run entries now executed on startup.
>
> This will probably give some fallout ;)
>
> I wanted to write earlier, but did forget about it over the last
> days.
>
> For my grown Wine installation this now starts:
>
> - 2 instances of a Windows Worm
> - Google Talk (not working)
> - Skype (crashing)
> - pccam.exe from some digital camera disk
> - the annoying Steam.exe auto-update and ask-for-subscription dialog
> - perhaps more
>
> and this even on "make check" :(
>
> We probably need some tool to edit Run and RunOnce entries now.
>
> Ciao, Marcus
>
>
>



-- 
Vincent Povirk


From dank at kegel.com  Fri Jan 11 20:20:46 2008
From: dank at kegel.com (Dan Kegel)
Date: Fri, 11 Jan 2008 18:20:46 -0800
Subject: urlmon tests now require gecko?
Message-ID: <a71bd89a0801111820k648bc65al1fefb3eaf26d3dea@mail.gmail.com>

Running the tests now hangs for me waiting
for me to click "OK" to the gecko download dialog.

Is that something we want to fix, or should
I just do 'winetricks gecko' before starting the tests?


From wine-devel at kievinfo.com  Fri Jan 11 22:09:01 2008
From: wine-devel at kievinfo.com (Vitaliy Margolen)
Date: Fri, 11 Jan 2008 21:09:01 -0700
Subject: Bugzilla admin: please remove bug/illegal attachment from the bug 5928
Message-ID: <47883D5D.8020906@kievinfo.com>

Also please remove poster from the users list of the bugzilla. Posting 
illegal content is against usage policies.

Thanks.

Vitaliy.


From dank at kegel.com  Sat Jan 12 02:18:31 2008
From: dank at kegel.com (Dan Kegel)
Date: Sat, 12 Jan 2008 00:18:31 -0800
Subject: New winetricks: added riched20
Message-ID: <a71bd89a0801120018w111f4714j33d14917efd639e6@mail.gmail.com>

Seeing as we have about 45 open riched20 bugs,
and some recent regressions, I figured it'd be
useful to add riched20 to winetricks.

Incidentally, since I lost the workstation that had
the old rcs repository it was in, I gave in to modern
times and put it in a new repository at
  http://code.google.com/p/winezeug/
- Dan

p.s. I have a backlog of two or three big updates,
one from Lei for codecs, and another from
Andrea Bocci for all sorts of things.
I'd merge them now but I have to go read another
Discworld book... they're like crack...


From dank at kegel.com  Sat Jan 12 02:39:39 2008
From: dank at kegel.com (Dan Kegel)
Date: Sat, 12 Jan 2008 00:39:39 -0800
Subject: Bug audit status
Message-ID: <a71bd89a0801120039o3d6a1802n5b05ce498f3e43b2@mail.gmail.com>

Since Vijay suggested doing a bug audit two weeks ago,
the number of open bugs has dropped by about 300, or 10%:
http://bugs.winehq.org/reports.cgi?product=-All-&datasets=NEW%3A&datasets=UNCONFIRMED%3A
That was quite a burst of activity!

There are still 1800 bugs that haven't been touched in
over 90 days (137 of them reported by me, alas),
so we have a lot of auditing and retesting left to do.

BTW, James Hawkins suggests that we consider bugs abandoned
if the reporter doesn't respond within 90 days
(we had, I think, been letting them sit longer),
which seems reasonable to me.


From scott at open-vote.org  Sat Jan 12 04:52:01 2008
From: scott at open-vote.org (Scott Ritchie)
Date: Sat, 12 Jan 2008 02:52:01 -0800
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <20080111164805.GA32539@suse.de>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
Message-ID: <47889BD1.3050200@open-vote.org>

Marcus Meissner wrote:
> On Fri, Jan 11, 2008 at 05:36:04PM +0100, Alexandre Julliard wrote:
>> This is release 0.9.53 of Wine, a free implementation of Windows on Unix.
>>
>> What's new in this release:
>>   - RunOnce and Run entries now executed on startup.
> 
> This will probably give some fallout ;)
> 
> I wanted to write earlier, but did forget about it over the last
> days.
> 
> For my grown Wine installation this now starts:
> 
> - 2 instances of a Windows Worm
> - Google Talk (not working)
> - Skype (crashing)
> - pccam.exe from some digital camera disk
> - the annoying Steam.exe auto-update and ask-for-subscription dialog
> - perhaps more
> 
> and this even on "make check" :(
> 
> We probably need some tool to edit Run and RunOnce entries now.
> 
> Ciao, Marcus

We might want to add an option for only executing these on wineboot.
Hell, we might want to make this the default unless the user has a new
Wine installation made with wineprefixcreate.

As it is, this change might break things.

Thanks,
Scott Ritchie


From jan.wine at zerebecki.de  Sat Jan 12 05:07:45 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sat, 12 Jan 2008 12:07:45 +0100
Subject: Please change Bugzilla email settings for wine-bugs
In-Reply-To: <12339.30792.qm@web26011.mail.ukl.yahoo.com>
References: <12339.30792.qm@web26011.mail.ukl.yahoo.com>
Message-ID: <20080112110745.GL3426@crissy.swd.zerebecki.de>

On Thu, Jan 10, 2008 at 10:53:39AM +0000, Luke Bratch wrote:
> Whilst on the subject of Bugzilla email settings, is
> it possible to add a message to Bugzilla emails asking
> users not to reply, but to post in Bugzilla?

Yes, the templates for the emails are in git with the rest of
bugzilla. We just need to be carefull to not throw off anything
that parses these mails. Patches welcome.

> There's now often up to 5 replies a day sent directly
> to wine-bugs at winehq.org, instead of being posted in
> Bugzilla.

We could change that mailinglist to not accept mail from anything
else than bugzilla.


Jan



From jan.wine at zerebecki.de  Sat Jan 12 05:32:24 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sat, 12 Jan 2008 12:32:24 +0100
Subject: Please change Bugzilla email settings for wine-bugs
In-Reply-To: <a71bd89a0801091433j69f4b732wf6c5093bdc485fac@mail.gmail.com>
References: <a71bd89a0801091356w1fa1c48elce2c4c9fc397cd30@mail.gmail.com>
	<47854822.8080207@codeweavers.com>
	<47854A8A.9050708@codeweavers.com>
	<a71bd89a0801091433j69f4b732wf6c5093bdc485fac@mail.gmail.com>
Message-ID: <20080112113224.GM3426@crissy.swd.zerebecki.de>

On Wed, Jan 09, 2008 at 02:33:48PM -0800, Dan Kegel wrote:
> On Jan 9, 2008 2:28 PM, Maarten Lankhorst <maarten at codeweavers.com> wrote:
> > If I recall correctly, it was changed to globalwatcher because wine-bugs
> > wouldn't receive a copy of bug changes any more if the bug wasn't
> > assigned to him and you didn't explictly add him to cc.
> 
> Ah.  OK, can we put in some ad hoc filtering there to
> remove just a few noisy sources of emails?

Please don't filter the mail sent to wine-bugs (it also serves as
a complete backup and change tracker of the bugzilla). However it
should be easy to filter the mail you receive: There is a
X-Bugzilla-Changed-Fields header in mails from bugzilla which
contains only "CC" if that was the only field changed. The
problem is that there is no header for an added comment so you
would not want to throw away messages that contain "--- Comment"
at the beginning of a line in the body.


Jan



From jan.wine at zerebecki.de  Sat Jan 12 05:41:51 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sat, 12 Jan 2008 12:41:51 +0100
Subject: bugs audit volunteers require
In-Reply-To: <47816504.9050804@sprintpcs.com>
References: <a71bd89a0801020119s45124968teb9fa036363d2b43@mail.gmail.com>
	<20080106020223.GH3426@crissy.swd.zerebecki.de>
	<22821af30801052059l5a086efdi89bf4c73f49e4c26@mail.gmail.com>
	<20080106130637.GJ3426@crissy.swd.zerebecki.de>
	<47816504.9050804@sprintpcs.com>
Message-ID: <20080112114151.GN3426@crissy.swd.zerebecki.de>

On Sun, Jan 06, 2008 at 04:32:20PM -0700, James McKenzie wrote:
> Jan Zerebecki wrote:
> > It might make sense to rename "Abandoned?" to needmoreinfo, so
> > that one can key a bug as needmoreinfo and after x month with
> > that keyword and no response resolve it abandoned.
> >
> > Though we probably don't want to use needmoreinfo on bugs where
> > it's possible for someone to retest if the bug is still there
> > (e.g. where there is a download for the application and the bug
> > is described sufficiently to check for it oneself).
> 1.  I would give the original reporter less than six months to respond.  
> I would wait no more than a month for a response before closing as 
> abandoned.

I know it can easily take a month for me to reply to a bug,
especially when it requires testing to determine the content of
my reply. Bug reports that are waiting for a reply can be flagged
as such and thus can be filtered and thus they shouldn't bother
anyone.

> 2.  The purpose of needsmoreinfo is that the original reporter did not 
> supply sufficient information to reproduce the reported problem.  If a 
> reported problem can be tested, and the problem determined, then the bug 
> should not be placed in a needsmoreinfo status.  Another status would 
> apply, like NEW or CONFIRMED, at this point.

I agree. Neither should such a bug be flagged "Abandoned?" or
resolved abandoned.


Jan



From mpartap at gmx.net  Sat Jan 12 06:09:42 2008
From: mpartap at gmx.net (Marcel Partap)
Date: Sat, 12 Jan 2008 13:09:42 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>
References: <20080111163604.EFD881E7146@wine.dyndns.org>	<20080111164805.GA32539@suse.de>
	<78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>
Message-ID: <4788AE06.5050005@gmx.net>

..also, a very good utility to handle the autorun stuff is autoruns.exe from the Sysinternals Suite.
Actually, the whole suite is a very good testbed for wine as it contains low level monitoring tools
like Diskmon.exe, Filemon.exe, Tcpview.exe, procexp.exe, portmon.exe, Winobj.exe.. many of those
fail on module:NtLoadDriver stub but some like process explorer or the autoruns tool work almost
perfectly fine. Running the splendid bluescreen screensaver would be totally awesome too, but that
needs native ntoskrnl.exe to fetch the bootlogo..
by the way yes, sysinternals has been bought by M$ mid 2006, and of course the first thing they did
is introduce a nasty legal pop-up to all of the utils, but having a short look at it we should be
fine using it to debug WiNE ;)
regards


From research at science.su  Sat Jan 12 07:58:10 2008
From: research at science.su (L. Rahyen)
Date: Sat, 12 Jan 2008 13:58:10 +0000
Subject: Implement IStream interface for msxml3 domdoc
In-Reply-To: <4788A51A.1010005@seznam.cz>
References: <4788A51A.1010005@seznam.cz>
Message-ID: <200801121358.10714.research@science.su>

On Saturday January 12 2008 11:31:38 Josef Reidinger wrote:
> This patch fix bug #4811. It implements IStream interface for dom
> document in msxml. Really implemented is needed part of write function,
> other function is not implemented. Part is also not implemented by
> windows (readed only at msdn, not tested), part is not implemented
> because I don't know how this work on windows and I cannot test it. This
> is my first wine patch so feel free give me any hint about my code.
> It is four patches because I do it more days.

	Only one patch per one e-mail is allowed.

> It must be implemented 
> all, because some not work (I forget for example initialize vtbl for
> IStream) but all is compilable. last patch fix my bad whitespaces
> (trailing spaces and tabs instead of spaces).

	Patches with whitespace changes only are unlikely to be accepted and patches 
with tabs probably will not be accepted too. Therefore I suggest to fix 
formatting in your main patches themselves instead of fixing this with 
additional patch.


From l_bratch at yahoo.co.uk  Sat Jan 12 08:50:27 2008
From: l_bratch at yahoo.co.uk (Luke Bratch)
Date: Sat, 12 Jan 2008 14:50:27 +0000 (GMT)
Subject: Please change Bugzilla email settings for wine-bugs
Message-ID: <665429.68215.qm@web26014.mail.ukl.yahoo.com>

> Yes, the templates for the emails are in git with
the
> rest of bugzilla. We just need to be carefull to not
> throw off anything that parses these mails. Patches
> welcome.

I'll have a look and submit a patch.

> We could change that mailinglist to not accept mail
> from anything else than bugzilla.

It is configured to do just that; so the emails just
end up in the list moderation queue, which
(presumably?) is only seen by me.  I've been posting
people's replies in Bugzilla myself, so they don't get
lost forever.


      __________________________________________________________
Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com



From dmitry at codeweavers.com  Sat Jan 12 09:25:39 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sat, 12 Jan 2008 23:25:39 +0800
Subject: Implement IStream interface for msxml3 domdoc
References: <4788A51A.1010005@seznam.cz>
Message-ID: <003901c8552f$655a26d0$a600fea9@DMITRY>

"Josef Reidinger" <josef.reidinger at seznam.cz> wrote:

> changelog:
> * implement IStream write for msxml domdoc

What are the tab settings in your editor? All white space in your
patches looks completely broken. Set tab size to 8 spaces, and try
to avoid tabs at all.

> +  if (!This->Stream){
> +   
> +  }

Why is the code above is needed?

> +static const IStreamVtbl xmldoc_IStream_VTable =
> +{
> +  xmldoc_IStream_QueryInterface,
> +  xmldoc_IStream_AddRef,
> +  xmldoc_IStream_Release,
> +    xmldoc_IStream_Read,
> +    xmldoc_IStream_Write,
> +    xmldoc_IStream_Seek,
> +    xmldoc_IStream_SetSize
> +/*    xmldoc_IStream_CopyTo,
> +    xmldoc_IStream_Commit,
> +    xmldoc_IStream_Revert,
> +    xmldoc_IStream_LockRegion,
> +    xmldoc_IStream_UnlockRegion,
> +    xmldoc_IStream_Stat,
> +    xmldoc_IStream_Clone*/
> +};

You can't provide a partial vtable.

> +  TRACE("1");

Remove all debugging craft before submitting the patch.

-- 
Dmitry.


From brian.vincent at gmail.com  Sat Jan 12 13:15:58 2008
From: brian.vincent at gmail.com (Brian Vincent)
Date: Sat, 12 Jan 2008 12:15:58 -0700
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <4788AE06.5050005@gmx.net>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
	<78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>
	<4788AE06.5050005@gmx.net>
Message-ID: <3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com>

Until someone comes up with the addition to winecfg to edit the Run and
RunOnce keys (and it really seems like that is what we need), we should
probably detect if those keys have changed and pop up a dialog on the next
wineboot that says: "The Run or RunOnce registry keys have changed, probably
because you installed a new application.  We're now going to execute them,
but be prepared for something to explode and steal your lunch money.  You
can repair anything broken by running "wine regedit" and editing
HKLM\Software\Microsoft\Windows\CurrentVersion\Run"

-Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080112/0bff7bfe/attachment.htm 

From leslie_alistair at hotmail.com  Sat Jan 12 16:15:18 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Sun, 13 Jan 2008 09:15:18 +1100
Subject: Implement IStream interface for msxml3 domdoc
References: <4788A51A.1010005@seznam.cz>
	<200801121358.10714.research@science.su>
Message-ID: <fmbe63$r40$1@ger.gmane.org>

     IStream *iface, void const *pv, ULONG cb, ULONG *pcbRead)
 {
+  TRACE("\n");
   domdoc *This = impl_from_IStream(iface);
-  return IStream_Write(This->stream,pv,cb,pcbRead);
+    if (!This->chunkParser){
+  TRACE("1");

Remove unneeded TRACE statements.

Best Regards
 Alistair Leslie-Hughes



From winehacker at gmail.com  Sat Jan 12 19:53:25 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sat, 12 Jan 2008 20:53:25 -0500
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
	<78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>
	<4788AE06.5050005@gmx.net>
	<3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com>
Message-ID: <19e31a080801121753u49ae1955o315a7910fc074a2c@mail.gmail.com>

On Jan 12, 2008 2:15 PM, Brian Vincent <brian.vincent at gmail.com> wrote:
> Until someone comes up with the addition to winecfg to edit the Run and
> RunOnce keys (and it really seems like that is what we need), we should
> probably detect if those keys have changed and pop up a dialog on the next
> wineboot that says: "The Run or RunOnce registry keys have changed, probably
> because you installed a new application.  We're now going to execute them,
> but be prepared for something to explode and steal your lunch money.  You
> can repair anything broken by running "wine regedit" and editing
> HKLM\Software\Microsoft\Windows\CurrentVersion\Run"

Winecfg is not really the place for it. Windows power users expect to
have msconfig....its a shame we can't lift the one from ReactOS
because they have a working LGPL replacement.

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From dank at kegel.com  Sat Jan 12 19:55:30 2008
From: dank at kegel.com (Dan Kegel)
Date: Sat, 12 Jan 2008 17:55:30 -0800
Subject: New winetricks: added vcrun2008, xvid, ffdshow, allfonts, allvcodecs;
	updated mono12
Message-ID: <a71bd89a0801121755j1a6896b6te5c771345c82ef07@mail.gmail.com>

On Jan 12, 2008 12:18 AM, Dan Kegel <dank at kegel.com> wrote:
> p.s. I have a backlog of two or three big updates,
> one from Lei for codecs, and another from
> Andrea Bocci for all sorts of things.

OK, new winetricks up, with new packages
  vcrun2005sp1
  vcrun2008
  xvid
  ffdshow
and new pseudopackages
  allfonts
  allvcodecs
It no longer picks a particular sourceforge mirror, which
should help folks who don't live near Los Angeles.
And mono12 is updated to mono-1.2.6.

As always, the new winetricks is online at
  http://kegel.com/wine/winetricks
and is now in svn at
  http://code.google.com/p/winezeug/
- Dan


From leslie_alistair at hotmail.com  Sat Jan 12 20:51:13 2008
From: leslie_alistair at hotmail.com (Alistair Leslie-Hughes)
Date: Sun, 13 Jan 2008 13:51:13 +1100
Subject: cleaned version of Implement IStream interface for msxml3 domdoc
References: <4789306F.6030107@gmail.com>
Message-ID: <fmbubd$2ek$1@ger.gmane.org>


"Josef Reidinger" <josef.reidinger at gmail.com> wrote in message 
news:4789306F.6030107 at gmail.com...
>I cleaned previous version and add it to one patch which have no tabs
> and indent is same as code around. Also change my mail, old have some
> problems with sending mail to this list.
>
> copy from previous

Since the follwoning functions are not  implemented in the MS 
implementation.
SetSize, CopyTo, Commit, Revert, LockRegion, UnlockRegion, and Clone

They should be TRACE and not ERR.

Best Regards
Alistair Leslie-Hughes 




From lich at math.spbu.ru  Sat Jan 12 21:13:09 2008
From: lich at math.spbu.ru (Kirill K. Smirnov)
Date: Sun, 13 Jan 2008 06:13:09 +0300
Subject: Full russian translation of wineboot.
Message-ID: <200801130613.09661.lich@math.spbu.ru>


> #include "wineboot_Ko.rc"
> #include "wineboot_No.rc"
> #include "wineboot_Sv.rc"
>+#include "wineboot_Ru.rc"
>\ ? ????? ????? ??? ????? ??????
Malformed patch. Please, rediff.

--
Kirill

From forrest at alumni.ncsu.edu  Sat Jan 12 23:19:06 2008
From: forrest at alumni.ncsu.edu (Forrest Samuels)
Date: Sun, 13 Jan 2008 00:19:06 -0500
Subject: Improving Default Serial Port Configuration
Message-ID: <781397410801122119s5f5d3e48h7e2d0890242f16be@mail.gmail.com>

I am looking to fix a bug causing serial ports to not show up in some
applications. The problem is due to missing registry entries for the
serial ports. I know what entries need to be created but I don't think
they should go in wine.inf. They should get created dynamically,
preferably on each run, based on what currently exists in
.wine/dosdevices/

The bug I am working on is 9902 (http://bugs.winehq.org/show_bug.cgi?id=9902).

Does anyone have any insight on where I should start looking to
implement this? Implementation suggestions? In the bug, Juan Lang made
the suggestion that "Explorer's hal.c should be extended to create new
devices for all the ports it finds, using SetupDiCreateDeviceInfo
followed by SetupDiRegisterDeviceInfo. For some devices it should also
call SetupDiCreateDeviceInterface to register a particular interface."
I've looked in programs/explorer/hal.c and I am not sure where to
begin hooking something like that in.

It was also suggested in #winehackers that this could go in the same
place that other hardware like disk drives are detected and
configured. I am not sure where that would be either or if that is the
same as hal.c.

I am new to wine development to please feel free to over explain.

Thanks,
-- 
Forrest Samuels (forrest at alumni.ncsu.edu)


From austinenglish at gmail.com  Sat Jan 12 23:54:28 2008
From: austinenglish at gmail.com (Austin English)
Date: Sat, 12 Jan 2008 23:54:28 -0600
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <19e31a080801121753u49ae1955o315a7910fc074a2c@mail.gmail.com>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
	<78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>
	<4788AE06.5050005@gmx.net>
	<3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com>
	<19e31a080801121753u49ae1955o315a7910fc074a2c@mail.gmail.com>
Message-ID: <b6bb06270801122154qdc7b5d5t17fbee69bc74756e@mail.gmail.com>

Why not? Was it reverse engineered? Or is there some other reason
preventing its integration?

- Austin

On 1/12/08, Steven Edwards <winehacker at gmail.com> wrote:
> On Jan 12, 2008 2:15 PM, Brian Vincent <brian.vincent at gmail.com> wrote:
> > Until someone comes up with the addition to winecfg to edit the Run and
> > RunOnce keys (and it really seems like that is what we need), we should
> > probably detect if those keys have changed and pop up a dialog on the next
> > wineboot that says: "The Run or RunOnce registry keys have changed, probably
> > because you installed a new application.  We're now going to execute them,
> > but be prepared for something to explode and steal your lunch money.  You
> > can repair anything broken by running "wine regedit" and editing
> > HKLM\Software\Microsoft\Windows\CurrentVersion\Run"
>
> Winecfg is not really the place for it. Windows power users expect to
> have msconfig....its a shame we can't lift the one from ReactOS
> because they have a working LGPL replacement.
>
> --
> Steven Edwards
>
> "There is one thing stronger than all the armies in the world, and
> that is an idea whose time has come." - Victor Hugo
>
>
>


From winehacker at gmail.com  Sun Jan 13 01:02:29 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 13 Jan 2008 02:02:29 -0500
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <b6bb06270801122154qdc7b5d5t17fbee69bc74756e@mail.gmail.com>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
	<78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>
	<4788AE06.5050005@gmx.net>
	<3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com>
	<19e31a080801121753u49ae1955o315a7910fc074a2c@mail.gmail.com>
	<b6bb06270801122154qdc7b5d5t17fbee69bc74756e@mail.gmail.com>
Message-ID: <19e31a080801122302u52d51353w1b2875f5c30582ff@mail.gmail.com>

On Jan 13, 2008 12:54 AM, Austin English <austinenglish at gmail.com> wrote:
> Why not? Was it reverse engineered? Or is there some other reason
> preventing its integration?

The general policy is to no longer accept code from ReactOS though the
Wine taskmgr and registry editor were developed by ReactOS developers.
It should be obvious that its cleanly implemented so I don't know if
there is any way Alexandre would make an exception to import it. There
is really nothing to be reversed from this tool and Colin's version is
under the correct license so I don't see any reason why it should be
rejected. Its not like its some low level library without
documentation or anything. If we can't merge it due to policy then I
think taskmgr and regedit should be remove from Winehq git.

http://svn.reactos.org/svn/reactos/trunk/reactos/base/applications/msconfig/

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From dmitry at codeweavers.com  Sun Jan 13 03:18:24 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sun, 13 Jan 2008 17:18:24 +0800
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
References: <20080111163604.EFD881E7146@wine.dyndns.org><20080111164805.GA32539@suse.de><78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com><4788AE06.5050005@gmx.net><3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com>
	<19e31a080801121753u49ae1955o315a7910fc074a2c@mail.gmail.com>
Message-ID: <006e01c855c5$43197800$a600fea9@DMITRY>

"Steven Edwards" <winehacker at gmail.com> wrote:

> Winecfg is not really the place for it. Windows power users expect to
> have msconfig....its a shame we can't lift the one from ReactOS
> because they have a working LGPL replacement.

I don't see why winecfg can't have a page similar to what msconfig has.
It not hard to add it to winecfg, there is nothing magic in the reactos
version.

-- 
Dmitry.


From winehacker at gmail.com  Sun Jan 13 03:46:18 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 13 Jan 2008 04:46:18 -0500
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <006e01c855c5$43197800$a600fea9@DMITRY>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
	<78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>
	<4788AE06.5050005@gmx.net>
	<3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com>
	<19e31a080801121753u49ae1955o315a7910fc074a2c@mail.gmail.com>
	<006e01c855c5$43197800$a600fea9@DMITRY>
Message-ID: <19e31a080801130146h7a48c509tdf2091f1f626edd9@mail.gmail.com>

On Jan 13, 2008 4:18 AM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> I don't see why winecfg can't have a page similar to what msconfig has.
> It not hard to add it to winecfg, there is nothing magic in the reactos
> version.

This is true. I am just saying most windows power uses expect msconfig
to be there these days. We could have a dummy msconfig thats just a
wrapper and invokes winecfg on the correct page. Being as we don't
follow the design windows power users expect by having CPL applets and
the like, it would make sense to stick it in winecfg with everything
else I guess...

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From bortas at gmail.com  Sun Jan 13 05:22:55 2008
From: bortas at gmail.com (Peter Bortas)
Date: Sun, 13 Jan 2008 12:22:55 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <20080111164805.GA32539@suse.de>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
Message-ID: <7e5f60720801130322n55b88ff2o4d116aa562df3abc@mail.gmail.com>

On 1/11/08, Marcus Meissner <meissner at suse.de> wrote:
> On Fri, Jan 11, 2008 at 05:36:04PM +0100, Alexandre Julliard wrote:
> > This is release 0.9.53 of Wine, a free implementation of Windows on Unix.
> >
> > What's new in this release:
> >   - RunOnce and Run entries now executed on startup.
>
> This will probably give some fallout ;)
>
> I wanted to write earlier, but did forget about it over the last
> days.
>
> For my grown Wine installation this now starts:
>
> - 2 instances of a Windows Worm
> - Google Talk (not working)
> - Skype (crashing)
> - pccam.exe from some digital camera disk
> - the annoying Steam.exe auto-update and ask-for-subscription dialog
> - perhaps more
>
> and this even on "make check" :(
>
> We probably need some tool to edit Run and RunOnce entries now.

And a flag to turn off this behaviour. So far I've never had a setup
where I'd want the Run/RunOnce entries to execute.

--
Peter Bortas


From dmitry at codeweavers.com  Sun Jan 13 05:24:32 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sun, 13 Jan 2008 19:24:32 +0800
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
References: <20080111163604.EFD881E7146@wine.dyndns.org><20080111164805.GA32539@suse.de><78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com><4788AE06.5050005@gmx.net><3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com><19e31a080801121753u49ae1955o315a7910fc074a2c@mail.gmail.com><006e01c855c5$43197800$a600fea9@DMITRY>
	<19e31a080801130146h7a48c509tdf2091f1f626edd9@mail.gmail.com>
Message-ID: <000a01c855d6$e011e2d0$a600fea9@DMITRY>

"Steven Edwards" <winehacker at gmail.com> wrote:

> This is true. I am just saying most windows power uses expect msconfig
> to be there these days. We could have a dummy msconfig thats just a
> wrapper and invokes winecfg on the correct page. Being as we don't
> follow the design windows power users expect by having CPL applets and
> the like, it would make sense to stick it in winecfg with everything
> else I guess...

My impression was that Wine follows the requests and demands of Linux
(and other supported OSes) users, not the Windows' ones regardless of
their powerfulness.

-- 
Dmitry.


From dmitry at codeweavers.com  Sun Jan 13 05:26:45 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sun, 13 Jan 2008 19:26:45 +0800
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
References: <20080111163604.EFD881E7146@wine.dyndns.org><20080111164805.GA32539@suse.de>
	<7e5f60720801130322n55b88ff2o4d116aa562df3abc@mail.gmail.com>
Message-ID: <000f01c855d7$2f62e8c0$a600fea9@DMITRY>

"Peter Bortas" <bortas at gmail.com> wrote:

> And a flag to turn off this behaviour. So far I've never had a setup
> where I'd want the Run/RunOnce entries to execute.

For instance Microsoft Office finishes its setup process when being run
from the RunOnce key after reboot.

-- 
Dmitry.


From hans at it.vu.nl  Sun Jan 13 05:28:05 2008
From: hans at it.vu.nl (Hans Leidekker)
Date: Sun, 13 Jan 2008 12:28:05 +0100
Subject: New winetricks: added vcrun2008, xvid, ffdshow, allfonts,
	allvcodecs; updated mono12
In-Reply-To: <a71bd89a0801121755j1a6896b6te5c771345c82ef07@mail.gmail.com>
References: <a71bd89a0801121755j1a6896b6te5c771345c82ef07@mail.gmail.com>
Message-ID: <200801131228.05819.hans@it.vu.nl>


> OK, new winetricks up, with new packages
>   vcrun2005sp1
>   vcrun2008
>   xvid
>   ffdshow
> and new pseudopackages
>   allfonts
>   allvcodecs
> It no longer picks a particular sourceforge mirror, which
> should help folks who don't live near Los Angeles.
> And mono12 is updated to mono-1.2.6.

Hi Dan, please consider this fix for the mfc40 verb.

 -Hans
-------------- next part --------------
A non-text attachment was scrubbed...
Name: winetricks.diff
Type: text/x-diff
Size: 1060 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080113/6de215f3/attachment.diff 

From jjmckenzie51 at earthlink.net  Sat Jan 12 20:30:18 2008
From: jjmckenzie51 at earthlink.net (James McKenzie)
Date: Sat, 12 Jan 2008 19:30:18 -0700
Subject: SVN usage for Wine
Message-ID: <478977BA.6070302@earthlink.net>

Because git is unstable on the Mac platform, I've been utilizing a 
little time investigating the use of either SVN or CVS to download .git 
updates.  This appears to not be working per the Wiki pages for SVN. 

Is CVS or SVN still being supported for Wine or is git the only 
supported download (I don't expect to do any patching for now) method 
for .git updates?

Thank you.

James McKenzie



From dmitry at codeweavers.com  Sun Jan 13 06:03:02 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sun, 13 Jan 2008 20:03:02 +0800
Subject: SVN usage for Wine
References: <478977BA.6070302@earthlink.net>
Message-ID: <009901c855dc$4148df40$a600fea9@DMITRY>

"James McKenzie" <jjmckenzie51 at earthlink.net> wrote:

> Is CVS or SVN still being supported for Wine or is git the only 
> supported download (I don't expect to do any patching for now) method 
> for .git updates?

http://www.winehq.org/site/cvs

-- 
Dmitry.


From winehacker at gmail.com  Sun Jan 13 06:52:22 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 13 Jan 2008 07:52:22 -0500
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <000a01c855d6$e011e2d0$a600fea9@DMITRY>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
	<78a7dad00801110934n6eb600cemdcfcae60665534e1@mail.gmail.com>
	<4788AE06.5050005@gmx.net>
	<3010968c0801121115qb5e7d15l5b1bee0b80ab4330@mail.gmail.com>
	<19e31a080801121753u49ae1955o315a7910fc074a2c@mail.gmail.com>
	<006e01c855c5$43197800$a600fea9@DMITRY>
	<19e31a080801130146h7a48c509tdf2091f1f626edd9@mail.gmail.com>
	<000a01c855d6$e011e2d0$a600fea9@DMITRY>
Message-ID: <19e31a080801130452i4fb9a91bxc7fd236adb7d7916@mail.gmail.com>

On Jan 13, 2008 6:24 AM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> My impression was that Wine follows the requests and demands of Linux
> (and other supported OSes) users, not the Windows' ones regardless of
> their powerfulness.

Well most Windows power users are used to a graphical registry editor
where Wine supports a text registry and we all know how much Linux
users love flat text file manipulation. Perhaps we should revert the
graphical registry editor for this and reasons I mentioned in the
prior email....

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From bortas at gmail.com  Sun Jan 13 07:27:33 2008
From: bortas at gmail.com (Peter Bortas)
Date: Sun, 13 Jan 2008 14:27:33 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <000f01c855d7$2f62e8c0$a600fea9@DMITRY>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de>
	<7e5f60720801130322n55b88ff2o4d116aa562df3abc@mail.gmail.com>
	<000f01c855d7$2f62e8c0$a600fea9@DMITRY>
Message-ID: <7e5f60720801130527n1f62b304k5f1f27216a9ce792@mail.gmail.com>

On 1/13/08, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> "Peter Bortas" <bortas at gmail.com> wrote:
>
> > And a flag to turn off this behaviour. So far I've never had a setup
> > where I'd want the Run/RunOnce entries to execute.
>
> For instance Microsoft Office finishes its setup process when being run
> from the RunOnce key after reboot.

There are quite a few installers that use RunOnce to get around file
locking, but I still haven't had to use one fortunately. As I said, as
long as I can disable it. RunOnce wouldn't even have to be disabled,
I'd be happy with a "RunOnce wants to execute 'foo.exe blipp blopp',
'No, and clear it from registry', 'Sure' ".

-- 
Peter Bortas


From hans at it.vu.nl  Sun Jan 13 07:39:49 2008
From: hans at it.vu.nl (Hans Leidekker)
Date: Sun, 13 Jan 2008 14:39:49 +0100
Subject: Improving Default Serial Port Configuration
In-Reply-To: <781397410801122119s5f5d3e48h7e2d0890242f16be@mail.gmail.com>
References: <781397410801122119s5f5d3e48h7e2d0890242f16be@mail.gmail.com>
Message-ID: <200801131439.49335.hans@it.vu.nl>

On Sunday 13 January 2008 06:19:06 Forrest Samuels wrote:

> Does anyone have any insight on where I should start looking to
> implement this? Implementation suggestions? In the bug, Juan Lang made
> the suggestion that "Explorer's hal.c should be extended to create new
> devices for all the ports it finds, using SetupDiCreateDeviceInfo
> followed by SetupDiRegisterDeviceInfo. For some devices it should also
> call SetupDiCreateDeviceInterface to register a particular interface."
> I've looked in programs/explorer/hal.c and I am not sure where to
> begin hooking something like that in.

I'd like to know where and when SetupDiRegisterDeviceInfo gets called on
Windows. I know that Alexandre is planning to move drive detection from
explorer to mountmgr.sys, serial devices will probably end up in serial.sys
or something like that. Perhaps this could work by making the driver itself
do device registration.

 -Hans


From research at science.su  Sun Jan 13 07:39:19 2008
From: research at science.su (L. Rahyen)
Date: Sun, 13 Jan 2008 13:39:19 +0000
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <19e31a080801130452i4fb9a91bxc7fd236adb7d7916@mail.gmail.com>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<000a01c855d6$e011e2d0$a600fea9@DMITRY>
	<19e31a080801130452i4fb9a91bxc7fd236adb7d7916@mail.gmail.com>
Message-ID: <200801131339.20275.research@science.su>

On Sunday January 13 2008 12:52:22 Steven Edwards wrote:
> On Jan 13, 2008 6:24 AM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> > My impression was that Wine follows the requests and demands of Linux
> > (and other supported OSes) users, not the Windows' ones regardless of
> > their powerfulness.
>
> Well most Windows power users are used to a graphical registry editor
> where Wine supports a text registry and we all know how much Linux
> users love flat text file manipulation. Perhaps we should revert the
> graphical registry editor for this and reasons I mentioned in the
> prior email....

	I see no reason to revert currently abailable tools without *really good* 
technical or legal reason. Sorry but this would be simply... not smart, 
really.
	I like the ability to edit registry directly with text editor but this 
doesn't mean that I don't need GUI tool for that. Reasons are simple: with 
GUI I have tree with registry keys and with plain text I have sequence of 
registry keys. I think it is obvious why one would prefer tree instead of 
sequence in some cases and sequence instead of tree in other cases.
	BTW, msconfig isn't very popular tool. Just compare how many Windows users 
have used regedit and how many have used msconfig (and how freqently it is 
used in comparison with regedit). And of course many Linux users simply don't 
know about it. This means that even if we include msconfig its use will not 
be as intuitive as winecfg use for purpose of editing startup keys. Therefore 
winecfg is better for that purpose. In fact, use of winecfg will be obvious 
for all WINE users - including Windows power users.
	If we can include msconfig - good, but in my opinion its inclusion doesn't 
mean that winecfg shouldn't support editing of startup keys. Therefore, its 
inclusion or rejection isn't important to WINE Project (in other words, this 
is minor issue). As I said, winecfg is more convenient and intuitive for that 
purpose.

	If you disagree with WINE policy related to ReactOS you need to talk to AJ 
directly (for example, on IRC channel).  Multiple requests to exclude existing 
tools on wine-devel without good reasons will not help to make WINE or its 
current policy better, really.


From jan.wine at zerebecki.de  Sun Jan 13 08:49:41 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sun, 13 Jan 2008 15:49:41 +0100
Subject: bugzilla: obsolete components
Message-ID: <20080113144941.GO3426@crissy.swd.zerebecki.de>

Because it was asked:

We have to move all (including closed) bugs from a component into
others to remove that component. If an component is not empty
when it's removed all it's bugs also get removed.

But there is also the possibility to just leave obsolete
components around forever.


Jan



From jan.wine at zerebecki.de  Sun Jan 13 09:41:40 2008
From: jan.wine at zerebecki.de (Jan Zerebecki)
Date: Sun, 13 Jan 2008 16:41:40 +0100
Subject: bugzilla component and keyword cleanup
In-Reply-To: <22821af30801061042v4bb59au5a3f9284a22f928e@mail.gmail.com>
References: <20080106165555.GA4687@crissy.swd.zerebecki.de>
	<22821af30801061042v4bb59au5a3f9284a22f928e@mail.gmail.com>
Message-ID: <20080113154140.GP3426@crissy.swd.zerebecki.de>

On Sun, Jan 06, 2008 at 11:42:19AM -0700, James Hawkins wrote:
> On Jan 6, 2008 9:55 AM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> > Changes which IMHO should not be done:
> > wine-help -> hhctrl - Help viewer implementation
> >     help is currently not for the various help APIs but for user
> >     that want help. We should obsolete this component. We can
> >     create a new component for the help APIs if there is demand.
> >
> 
> There is demand.  Using the now _obsolete_help keyword, there are 7
> bugs relating to the help APIs.

_obsoletet_help is a component. Should we perhaps add a keyword
"helpapis"?


Jan



From truiken at gmail.com  Sun Jan 13 10:13:55 2008
From: truiken at gmail.com (James Hawkins)
Date: Sun, 13 Jan 2008 09:13:55 -0700
Subject: bugzilla component and keyword cleanup
In-Reply-To: <20080113154140.GP3426@crissy.swd.zerebecki.de>
References: <20080106165555.GA4687@crissy.swd.zerebecki.de>
	<22821af30801061042v4bb59au5a3f9284a22f928e@mail.gmail.com>
	<20080113154140.GP3426@crissy.swd.zerebecki.de>
Message-ID: <22821af30801130813j4da010ffwb5385a4089d99160@mail.gmail.com>

On Jan 13, 2008 8:41 AM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> On Sun, Jan 06, 2008 at 11:42:19AM -0700, James Hawkins wrote:
> > On Jan 6, 2008 9:55 AM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> > > Changes which IMHO should not be done:
> > > wine-help -> hhctrl - Help viewer implementation
> > >     help is currently not for the various help APIs but for user
> > >     that want help. We should obsolete this component. We can
> > >     create a new component for the help APIs if there is demand.
> > >
> >
> > There is demand.  Using the now _obsolete_help keyword, there are 7
> > bugs relating to the help APIs.
>
> _obsoletet_help is a component. Should we perhaps add a keyword
> "helpapis"?
>

No, the winhelp API is in user32 and winhelp.exe is under programs.
We do need an hhctrl.ocx component though.

-- 
James Hawkins


From dank at kegel.com  Sun Jan 13 10:22:55 2008
From: dank at kegel.com (Dan Kegel)
Date: Sun, 13 Jan 2008 08:22:55 -0800
Subject: New winetricks: mfc40 working again
Message-ID: <a71bd89a0801130822j50358bcfs9fd5df63bba48f2b@mail.gmail.com>

Microsoft pulled the download I'd been using for mfc40
some time ago, but Hans Leidekker found a replacement.
Thanks, Hans!
New winetricks at the usual place,
  http://kegel.com/wine/winetricks


From lich at math.spbu.ru  Sun Jan 13 10:25:06 2008
From: lich at math.spbu.ru (Kirill K. Smirnov)
Date: Sun, 13 Jan 2008 19:25:06 +0300
Subject: Full russian translation of wineboot (rediffed)
Message-ID: <200801131925.06869.lich@math.spbu.ru>

Still fails:

patching file programs/wineboot/wineboot.rc
patching file programs/wineboot/wineboot_Ru.rc
patch unexpectedly ends in middle of line
patch: **** malformed patch at line 46:  

patch version is 2.5.4

Do you succeed applying this patch on your system?

I noticed that there is no 'newline char' at the end of the patch, when I 
added '\n', patching succeeded. MTA/MUA issue?

--
Kirill


From truiken at gmail.com  Sun Jan 13 11:07:23 2008
From: truiken at gmail.com (James Hawkins)
Date: Sun, 13 Jan 2008 10:07:23 -0700
Subject: bugzilla: obsolete components
In-Reply-To: <20080113144941.GO3426@crissy.swd.zerebecki.de>
References: <20080113144941.GO3426@crissy.swd.zerebecki.de>
Message-ID: <22821af30801130907u33c38d1ag1d19dfdd184e1727@mail.gmail.com>

On Jan 13, 2008 7:49 AM, Jan Zerebecki <jan.wine at zerebecki.de> wrote:
> Because it was asked:
>
> We have to move all (including closed) bugs from a component into
> others to remove that component. If an component is not empty
> when it's removed all it's bugs also get removed.
>
> But there is also the possibility to just leave obsolete
> components around forever.
>

I've switched the components to unknown on the following components,
so they can be removed:

console
directx-dshow
help
ipc
ports
resources

These are the counts of the remaining obsolete components:

binary - 1193
directx - 375
files - 137
gui - 358
multimedia - 139
winelib - 143

I'll correct these components at a rate of about 100 a day so as not
to spam the list too much.

-- 
James Hawkins


From tony.wasserka at freenet.de  Sun Jan 13 10:33:24 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Sun, 13 Jan 2008 17:33:24 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
Message-ID: <E1JE5m0-0003YO-Mo@www15.emo.freenet-rz.de>

> There are quite a few installers that use RunOnce to get around file
> locking, but I still haven't had to use one fortunately. As I said, as
> long as I can disable it. RunOnce wouldn't even have to be disabled,
> I'd be happy with a "RunOnce wants to execute 'foo.exe blipp blopp',
> 'No, and clear it from registry', 'Sure' ".

I'd agree to that, but we could also do it at installer runtime, i.e. we check
in the Windows SetRegistryKey function(don't know the real name) if the key is
autostart related, interupt the installer program and ask the user if he
wants to allow that. The method of asking the user at RunOnce has IMO
the disadvantage that the user may not know what installer added
the RunOnce entry anymore (because it's a couple of days ago that the
last Wine instance was running or so).





Unbegrenzter Speicher, Top-Spamschutz, 120 SMS und eigene E-MailDomain inkl.
http://office.freenet.de/dienste/emailoffice/produktuebersicht/power/mail/index.html



From rob at codeweavers.com  Sun Jan 13 12:09:37 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Sun, 13 Jan 2008 18:09:37 +0000
Subject: SVN usage for Wine
In-Reply-To: <478977BA.6070302@earthlink.net>
References: <478977BA.6070302@earthlink.net>
Message-ID: <478A53E1.8050002@codeweavers.com>

James McKenzie wrote:
> Because git is unstable on the Mac platform, I've been utilizing a 
> little time investigating the use of either SVN or CVS to download .git 
> updates.  This appears to not be working per the Wiki pages for SVN.
>   

I've been using git releases on my Mac for the last year or so (and I'm 
currently using 1.5.3.8) and I haven't noticed any instability.

-- 
Rob Shearman



From winehacker at gmail.com  Sun Jan 13 14:45:49 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 13 Jan 2008 15:45:49 -0500
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <200801131339.20275.research@science.su>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<000a01c855d6$e011e2d0$a600fea9@DMITRY>
	<19e31a080801130452i4fb9a91bxc7fd236adb7d7916@mail.gmail.com>
	<200801131339.20275.research@science.su>
Message-ID: <19e31a080801131245i8fdb08fwe790731bac8a7350@mail.gmail.com>

On Jan 13, 2008 8:39 AM, L. Rahyen <research at science.su> wrote:
>         If you disagree with WINE policy related to ReactOS you need to talk to AJ
> directly (for example, on IRC channel).  Multiple requests to exclude existing
> tools on wine-devel without good reasons will not help to make WINE or its
> current policy better, really.

The policy regarding ReactOS is not going to change and I really don't
care at this point. My point in reply to Dmitry's comment was while I
agree using winecfg for msconfig functionality is fine I was just
using a reductio ad-absurdum to point out that if we are not going to
make a wrapper program for msconfig for power windows users that are
used to certain windows functionality because we don't care about them
and the windows way of doing things, then why should we care about
windows power users ablity to graphically edit the registry? In
regedits case there would be two fold argument for removing it, 1.
Because it was contributed by ReactOS developers and 2. Because we
obviously don't care about whats convenient to people coming from a
windows background using that logic.


-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From research at science.su  Sun Jan 13 17:05:04 2008
From: research at science.su (L. Rahyen)
Date: Sun, 13 Jan 2008 23:05:04 +0000
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <19e31a080801131245i8fdb08fwe790731bac8a7350@mail.gmail.com>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<200801131339.20275.research@science.su>
	<19e31a080801131245i8fdb08fwe790731bac8a7350@mail.gmail.com>
Message-ID: <200801132305.05115.research@science.su>

On Sunday January 13 2008 20:45:49 Steven Edwards wrote:
> My point in reply to Dmitry's comment was while I
> agree using winecfg for msconfig functionality is fine I was just
> using a reductio ad-absurdum to point out that if we are not going to
> make a wrapper program for msconfig for power windows users that are
> used to certain windows functionality because we don't care about them
> and the windows way of doing things, then why should we care about
> windows power users ablity to graphically edit the registry?

	Because it is important for MOST Linux users who use WINE. Of course some 
users use regedit rarely, some frequently - but fact is that they are using 
it. For example, I use it but I know very little about Windows.
	Most users will expect ability to edit startup keys in winecfg. And rest of 
users who didn't expect it to be there will learn about it very quickly - as 
soon as they run winecfg at least once.
	As I have already said, use of winecfg will be intuitive for both Linux and 
Windows power users. I simply see no problem here.
	I'm sure that there will be very little number of users who would use 
something else instead of winecfg when winecfg will have a tab for 
configurion startup keys.

> Because we
> obviously don't care about whats convenient to people coming from a
> windows background using that logic.

	"We shouldn't care about Windows power users" != "we shouldn't care 
about Linux users". Please note that I say nothing here about should we care 
about Windows (power) users or not. I'm just pointing that your logic isn't 
correct.
	I try to explain why. First of all, msconfig and regedit cannot be compared 
like two utilities of same importance or like two programs intended for same 
audience.
	regedit is extremely popular, its use is intuitive for most Linux users, and 
it cannot be replaced with a tab in winecfg. It even cannot be replaced with 
external Linux tools like text editor because wineserver will overwrite any 
changes that was made by an external program (this is true of course only if 
wineserver was running; you need to shutdown it before using external program 
for registry editing).
	msconfig is mostly intended for Window power users, its use isn't intuitive 
for most Linux users (in fact, it even isn't intuitive for most Windows users 
too), and it can be replaced with a tab in winecfg (at least, its most 
important functionality).
	As you can see, there is a big difference. It is incorrect to ignore 
importance of regedit for Linux users. Why? Because if msconfig was very 
important then it (or at least its simplified replacement) can be even 
written from scratch. This is true for regedit but isn't true for msconfig.  
In other words, it is unlikely that someone will write it from scratch in 
near future because of very low demand; but if WINE will lack regedit utility 
it is very likely that someone will write it from scratch if necessary.
	That just means regedit is important not only for Windows power users but for 
most of WINE users (including simple Linux users who are using WINE).


From dank at kegel.com  Sun Jan 13 17:53:49 2008
From: dank at kegel.com (Dan Kegel)
Date: Sun, 13 Jan 2008 15:53:49 -0800
Subject: Towards Zero Test Suite Failures
Message-ID: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>

On my machine, we've been hovering between
five and ten test suite failures for some time
(see http://bugs.winehq.org/show_bug.cgi?id=9916 )

IMHO one of the hallmarks of 1.0 should be reliably
getting zero test suite failures.
That would make regressions stand out like sore thumbs
instead of requiring developers to diff results
before and after their changes, and might
result in fewer regressions getting committed.

How 'bout folks spend some time tracking
the current six odd failures down and cleaning them up?
- Dan

-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From jjmckenzie51 at sprintpcs.com  Sun Jan 13 18:17:53 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Sun, 13 Jan 2008 17:17:53 -0700
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <200801132305.05115.research@science.su>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<200801131339.20275.research@science.su>
	<19e31a080801131245i8fdb08fwe790731bac8a7350@mail.gmail.com>
	<200801132305.05115.research@science.su>
Message-ID: <478AAA31.3090400@sprintpcs.com>

L. Rahyen wrote:
> On Sunday January 13 2008 20:45:49 Steven Edwards wrote:
>   
>> Because we
>> obviously don't care about whats convenient to people coming from a
>> windows background using that logic.
>>     
>
> 	"We shouldn't care about Windows power users" != "we shouldn't care 
> about Linux users". Please note that I say nothing here about should we care 
> about Windows (power) users or not. I'm just pointing that your logic isn't 
> correct.
> 	I try to explain why. First of all, msconfig and regedit cannot be compared 
> like two utilities of same importance or like two programs intended for same 
> audience.
> 	regedit is extremely popular, its use is intuitive for most Linux users, and 
> it cannot be replaced with a tab in winecfg. It even cannot be replaced with 
> external Linux tools like text editor because wineserver will overwrite any 
> changes that was made by an external program (this is true of course only if 
> wineserver was running; you need to shutdown it before using external program 
> for registry editing).
> 	msconfig is mostly intended for Window power users, its use isn't intuitive 
> for most Linux users (in fact, it even isn't intuitive for most Windows users 
> too), and it can be replaced with a tab in winecfg (at least, its most 
> important functionality).
>   
L. Rahyen:

I have found that I CANNOT contribute code to this project.  However, 
this does not stop me from contributing my USD .02. 

Regedit serves a single purpose, editing the registry.  msconfig serves 
the purpose of editing the configuration of Windows and as a Windows 
'hacker' I live on this program.  Of course, for simplicity's sake this 
can be a tab in winecfg, but for a Windows user/hacker moving to 
Linux/Wine adding a symlink to winecfg and the appropriate tab would be 
acceptable, but overlooking this requirement is not 'a good thing'.  And 
adding the suprise of running Run Aways and Run Once is not nice.  A 
warning in the announcement would be nice and almost necessary for those 
folks running a combination Windows/Linux box, like I used to.  This was 
to overcome the massive number of Windows 'friends' like Storm.  So, I 
would implore the investigation of adding the necessary parts of 
msconfig to winecfg and before the actual release of Wine 1.0.

BTW, regedit is an absolute necessity to the Wine project, but it is 
also a very dangerous tool in the wrong hands.

Thank you.

James McKenzie



From jjmckenzie51 at sprintpcs.com  Sun Jan 13 18:19:18 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Sun, 13 Jan 2008 17:19:18 -0700
Subject: SVN usage for Wine
In-Reply-To: <478A53E1.8050002@codeweavers.com>
References: <478977BA.6070302@earthlink.net> <478A53E1.8050002@codeweavers.com>
Message-ID: <478AAA86.9000902@sprintpcs.com>

Robert Shearman wrote:
> James McKenzie wrote:
>   
>> Because git is unstable on the Mac platform, I've been utilizing a 
>> little time investigating the use of either SVN or CVS to download .git 
>> updates.  This appears to not be working per the Wiki pages for SVN.
>>   
>>     
>
> I've been using git releases on my Mac for the last year or so (and I'm 
> currently using 1.5.3.8) and I haven't noticed any instability.
>
>   
Ron:

Where are you getting your git code from and does it require any patches 
to make it compile and run on MacOSX 10.4?

Reply off list if you feel that this is necessary.

James



From dmitry at codeweavers.com  Sun Jan 13 21:19:35 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Mon, 14 Jan 2008 11:19:35 +0800
Subject: bugzilla: obsolete components
References: <20080113144941.GO3426@crissy.swd.zerebecki.de>
	<22821af30801130907u33c38d1ag1d19dfdd184e1727@mail.gmail.com>
Message-ID: <002a01c8565c$4b7e0870$a600fea9@DMITRY>

"James Hawkins" <truiken at gmail.com> wrote:

> These are the counts of the remaining obsolete components:
> 
> binary - 1193
> directx - 375
> files - 137
> gui - 358
> multimedia - 139
> winelib - 143
> 
> I'll correct these components at a rate of about 100 a day so as not
> to spam the list too much.

Perhaps 'binary' could be automatically renamed to 'unknown' to avoid
too much of manual work? Others can be checked/renamed manually.

-- 
Dmitry.


From truiken at gmail.com  Sun Jan 13 21:46:24 2008
From: truiken at gmail.com (James Hawkins)
Date: Sun, 13 Jan 2008 21:46:24 -0600
Subject: bugzilla: obsolete components
In-Reply-To: <002a01c8565c$4b7e0870$a600fea9@DMITRY>
References: <20080113144941.GO3426@crissy.swd.zerebecki.de>
	<22821af30801130907u33c38d1ag1d19dfdd184e1727@mail.gmail.com>
	<002a01c8565c$4b7e0870$a600fea9@DMITRY>
Message-ID: <22821af30801131946m78e7b2e2x84de0b233b3eb927@mail.gmail.com>

On Jan 13, 2008 9:19 PM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> "James Hawkins" <truiken at gmail.com> wrote:
>
> > These are the counts of the remaining obsolete components:
> >
> > binary - 1193
> > directx - 375
> > files - 137
> > gui - 358
> > multimedia - 139
> > winelib - 143
> >
> > I'll correct these components at a rate of about 100 a day so as not
> > to spam the list too much.
>
> Perhaps 'binary' could be automatically renamed to 'unknown' to avoid
> too much of manual work? Others can be checked/renamed manually.
>

I was wondering the same thing.  The other components were short so I
went ahead and changed those, but it would be great if we could
"rename" the remaining components to unknown.

-- 
James Hawkins


From zgold550 at gmail.com  Sun Jan 13 22:30:25 2008
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Sun, 13 Jan 2008 23:30:25 -0500
Subject: Towards Zero Test Suite Failures
In-Reply-To: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
Message-ID: <b050a5e70801132030u25c2c7c4uaa7aa6dcdd0baba8@mail.gmail.com>

On Jan 13, 2008 6:53 PM, Dan Kegel <dank at kegel.com> wrote:
> On my machine, we've been hovering between
> five and ten test suite failures for some time
> (see http://bugs.winehq.org/show_bug.cgi?id=9916 )
>
> IMHO one of the hallmarks of 1.0 should be reliably
> getting zero test suite failures.
> That would make regressions stand out like sore thumbs
> instead of requiring developers to diff results
> before and after their changes, and might
> result in fewer regressions getting committed.
>
> How 'bout folks spend some time tracking
> the current six odd failures down and cleaning them up?
> - Dan
>
> --
> Wine for Windows ISVs: http://kegel.com/wine/isv
>
>
>

Sounds like a worthy goal IMO.  It seems theres much more than 5 or 6
things which need work though:
http://test.winehq.org/data/200801121000/   Perhaps we should try and
have the nightly suite also pass all tests -- or is this too much of a
frivolous goal?

-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From wine-devel at kievinfo.com  Sun Jan 13 23:33:33 2008
From: wine-devel at kievinfo.com (Vitaliy Margolen)
Date: Sun, 13 Jan 2008 22:33:33 -0700
Subject: New bugzilla component
Message-ID: <478AF42D.5010100@kievinfo.com>

Please add this component to bugzilla:
winmm - windows multimedia (old sound, midi)


Don't think there are any need to split Wine sound drivers into their 
separate components... yet.

Vitaliy.


From wine-devel at kievinfo.com  Sun Jan 13 23:38:40 2008
From: wine-devel at kievinfo.com (Vitaliy Margolen)
Date: Sun, 13 Jan 2008 22:38:40 -0700
Subject: New bugzilla component
In-Reply-To: <478AF42D.5010100@kievinfo.com>
References: <478AF42D.5010100@kievinfo.com>
Message-ID: <478AF560.2030803@kievinfo.com>

Vitaliy Margolen wrote:
> Please add this component to bugzilla:
> winmm - windows multimedia (old sound, midi)
> 
> 
> Don't think there are any need to split Wine sound drivers into their 
> separate components... yet.
> 
> Vitaliy.
> 
> 
One more to the list:

ntoskrnl - WinNT kernel emulation layer


From dank at kegel.com  Sun Jan 13 23:50:10 2008
From: dank at kegel.com (Dan Kegel)
Date: Sun, 13 Jan 2008 21:50:10 -0800
Subject: Towards Zero Test Suite Failures
In-Reply-To: <b050a5e70801132030u25c2c7c4uaa7aa6dcdd0baba8@mail.gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
	<b050a5e70801132030u25c2c7c4uaa7aa6dcdd0baba8@mail.gmail.com>
Message-ID: <a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>

On Jan 13, 2008 8:30 PM, Zachary Goldberg <zgold550 at gmail.com> wrote:
> > On my machine, we've been hovering between
> > five and ten test suite failures for some time
> > (see http://bugs.winehq.org/show_bug.cgi?id=9916 )
> > ...
> > How 'bout folks spend some time tracking
> > the current six odd failures down and cleaning them up?
>
> Sounds like a worthy goal IMO.  It seems theres much more than 5 or 6
> things which need work though:
> http://test.winehq.org/data/200801121000/

Not a pretty picture, is it?
But I was only referring to the tests that fail on Wine; there,
we have control over both the test and the code, so if
we can't get those tests passing, we're pretty weak :-)

> Perhaps we should try and
> have the nightly suite also pass all tests -- or is this too much of a
> frivolous goal?

Getting all tests passing on Windows XP would be great,
but it's a lot of work.   It'd be less work if we focused on just the tests
that are failing on *all* Win XP systems, but that's still
at least 180 ok's that aren't ok.  Let's at least fix the 5 or 10 that are
failing on Wine, and try to keep them fixed.
- Dan


From paul.vriens.wine at gmail.com  Mon Jan 14 01:18:29 2008
From: paul.vriens.wine at gmail.com (Paul Vriens)
Date: Mon, 14 Jan 2008 08:18:29 +0100
Subject: Towards Zero Test Suite Failures
In-Reply-To: <a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>	<b050a5e70801132030u25c2c7c4uaa7aa6dcdd0baba8@mail.gmail.com>
	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
Message-ID: <478B0CC5.8030201@gmail.com>

Dan Kegel wrote:
> On Jan 13, 2008 8:30 PM, Zachary Goldberg <zgold550 at gmail.com> wrote:
>>> On my machine, we've been hovering between
>>> five and ten test suite failures for some time
>>> (see http://bugs.winehq.org/show_bug.cgi?id=9916 )
>>> ...
>>> How 'bout folks spend some time tracking
>>> the current six odd failures down and cleaning them up?
>> Sounds like a worthy goal IMO.  It seems theres much more than 5 or 6
>> things which need work though:
>> http://test.winehq.org/data/200801121000/
> 
> Not a pretty picture, is it?
> But I was only referring to the tests that fail on Wine; there,
> we have control over both the test and the code, so if
> we can't get those tests passing, we're pretty weak :-)

Are these tests passing (now) on Alexandre's machine? I thought he didn't apply 
patches that break the wine tests? (at least on his box).

> 
>> Perhaps we should try and
>> have the nightly suite also pass all tests -- or is this too much of a
>> frivolous goal?
> 
> Getting all tests passing on Windows XP would be great,
> but it's a lot of work.   It'd be less work if we focused on just the tests
> that are failing on *all* Win XP systems, but that's still

Why XP? Doesn't that mean our default should be XP as well?

> at least 180 ok's that aren't ok.  Let's at least fix the 5 or 10 that are
> failing on Wine, and try to keep them fixed.
> - Dan
> 
> 
> 

-- 
Cheers,

Paul.


From research at science.su  Mon Jan 14 02:10:13 2008
From: research at science.su (L. Rahyen)
Date: Mon, 14 Jan 2008 08:10:13 +0000
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <478AAA31.3090400@sprintpcs.com>
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<200801132305.05115.research@science.su>
	<478AAA31.3090400@sprintpcs.com>
Message-ID: <200801140810.13930.research@science.su>

On Monday January 14 2008 00:17:53 James McKenzie wrote:
> I have found that I CANNOT contribute code to this project.  However,
> this does not stop me from contributing my USD .02.
>
> Regedit serves a single purpose, editing the registry.  msconfig serves
> the purpose of editing the configuration of Windows and as a Windows
> 'hacker' I live on this program.  Of course, for simplicity's sake this
> can be a tab in winecfg, but for a Windows user/hacker moving to
> Linux/Wine adding a symlink to winecfg and the appropriate tab would be
> acceptable, but overlooking this requirement is not 'a good thing'.

	I agree that it would be great to add additional tools such as msconfig. If 
it would be added we can make a tab in winecfg (or button in intuitive place 
of winecfg) for just running it. This would be intuitive for all users.
	However as I said if we cannot include it there are "more or less" acceptable 
alternative way to solve the problem.
	Personally I prefer inclusion of msconfig and possibility to run it from 
winecfg (along with ability to run it directly as msconfig).

> And adding the suprise of running Run Aways and Run Once is not nice.

	Yeah, I remember how a lot of (mostly non-functional or partially functional) 
programs started automatically not only for me but also for my users (because 
of my multiuser setup).
	By itself this is useful feature. But lack of proper configuration tool in 
clean WINE is the real problem currently...

> BTW, regedit is an absolute necessity to the Wine project, but it is
> also a very dangerous tool in the wrong hands.

	This is certainly true.


From vostok at etersoft.ru  Mon Jan 14 02:39:42 2008
From: vostok at etersoft.ru (Anatoly Lyutin)
Date: Mon, 14 Jan 2008 11:39:42 +0300
Subject: Translation of shell32_Ru.rc (Sorry, last message may be without
	attach)
In-Reply-To: <47893A98.1030901@esin.name>
References: <47893A98.1030901@esin.name>
Message-ID: <478B1FCE.1080605@etersoft.ru>

Andrey Esin wrote:
> Russian translation of untranslated strings:
> FCIDM_SHVIEW_OPEN
> IDS_OVERWRITEFILE_TEXT
> IDS_OVERWRITEFOLDER_TEXT
>
> Correcting translation of IDS_DELETEMULTIPLE_TEXT  (Need need a 
> closing bracket)
>
>
> Author: Andrey Esin <andrey at esin.name>
>
> ------------------------------------------------------------------------
>
> -    IDS_OVERWRITEFOLDER_TEXT "This folder already contains a folder named '%1'.\n\n"\
> -	    "If the files in the destination folder have the same names as files in the\n"\
> -	    "selected folder they will be replaced. Do you still want to move or copy\n"\
> -	    "the folder?"
> +    IDS_OVERWRITEFOLDER_TEXT "??? ????? ??? ???????? ????? '%1'.\n\n"\
> +	    "???? ????? ? ???????? ????? ????? ?? ?? ?????, ??? ? ????? ? ?????????\n"\
> +	    "?????, ??? ????? ????????. ?? ??? ??? ?????? ??????????? ??? ???????????\n"\
> +	    "??????"
Please, do not forget the 'yo' letter.


-- 
Best regards
	Anatoly Lyutin.



From stefan at codeweavers.com  Mon Jan 14 04:10:12 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Mon, 14 Jan 2008 11:10:12 +0100
Subject: entry to add in wine registry
In-Reply-To: <200801140029.39384.jacques.noe@laposte.net>
References: <200801140029.39384.jacques.noe@laposte.net>
Message-ID: <200801141110.12645.stefan@codeweavers.com>

Am Montag, 14. Januar 2008 00:29:39 schrieb Jacques No?:
> Hello,
>
> this is not a patch, but a new entry to add to
> http://wiki.winehq.org/UsefulRegistryKeys I have seen that the page is
> maintained by
> RoderickColenBrander, but I do not know
> how to contact him.
This is a wiki, you can just edit it yourself


From julliard at winehq.org  Mon Jan 14 08:24:09 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 14 Jan 2008 15:24:09 +0100
Subject: dlls/d3d9/tests/visual.c -- address five compiler warnings
	(RESEND)
In-Reply-To: <Pine.LNX.4.64.0801121848470.4453@acrux.dbai.tuwien.ac.at>
	(Gerald Pfeifer's message of "Sat, 12 Jan 2008 18:49:05 +0100 (CET)")
References: <Pine.LNX.4.64.0801121848470.4453@acrux.dbai.tuwien.ac.at>
Message-ID: <87bq7oiiye.fsf@wine.dyndns.org>

Gerald Pfeifer <gerald at pfeifer.com> writes:

> @@ -4348,12 +4349,12 @@ static void vshader_version_varying_test
>         "vs_3_0 returned color 0x%08x, expected 0x00203366\n", color);
>      color = getPixelColor(device, 160, 360);
>      ok((color & 0x00ff0000) >= 0x003c0000 && (color & 0x00ff0000) <= 0x004e0000 &&
> -       (color & 0x0000ff00) >= 0x00000000 && (color & 0x0000ff00) <= 0x00000000 &&
> +                                             (color & 0x0000ff00) <= 0x00000000 &&
>         (color & 0x000000ff) >= 0x00000066 && (color & 0x000000ff) <= 0x00210068,
>         "vs_1_1 returned color 0x%08x, expected 0x00808080\n", color);
>      color = getPixelColor(device, 480, 360);
>      ok((color & 0x00ff0000) >= 0x003c0000 && (color & 0x00ff0000) <= 0x004e0000 &&
> -       (color & 0x0000ff00) >= 0x00000000 && (color & 0x0000ff00) <= 0x00000000 &&
> +                                             (color & 0x0000ff00) <= 0x00000000 &&
>         (color & 0x000000ff) >= 0x00000066 && (color & 0x000000ff) <= 0x00210068,
>         "vs_2_0 returned color 0x%08x, expected 0x00000000\n", color);

These tests don't make much sense, with or without your fix, plus the
error messages don't match the tests. This needs more work.

-- 
Alexandre Julliard
julliard at winehq.org


From kde at graph-ix.net  Mon Jan 14 08:26:20 2008
From: kde at graph-ix.net (Markus)
Date: Mon, 14 Jan 2008 15:26:20 +0100
Subject: How to fix bug #11114?
Message-ID: <200801141526.20405.kde@graph-ix.net>

Hi,

regarding bug #11114, can anyone knowledgable in the area tell me how 
difficult it would be to resolve the issue?
As far as I can see, the game World in Conflict is using dxdiag.dll to 
determine whether a system is capable of running the game. Is there an 
implementation for this dll at all in Wine? The native library appears to not 
fool the game sufficiently enough to start without an error. Using plain Wine 
(no native dxdiag dll) leads to the error in line 44725 of the logfile in the 
report.

Thanks.
-- 
Markus


From kuba at mareimbrium.org  Mon Jan 14 09:11:03 2008
From: kuba at mareimbrium.org (Kuba Ober)
Date: Mon, 14 Jan 2008 10:11:03 -0500
Subject: Towards Zero Test Suite Failures
In-Reply-To: <478B0CC5.8030201@gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
	<478B0CC5.8030201@gmail.com>
Message-ID: <200801141011.03349.kuba@mareimbrium.org>

[snipsnipsnip]
> >>> On my machine, we've been hovering between
> >>> five and ten test suite failures for some time
> >>> (see http://bugs.winehq.org/show_bug.cgi?id=9916 )
> >>> ...
> >>> How 'bout folks spend some time tracking
> >>> the current six odd failures down and cleaning them up?
> >>
> >> Sounds like a worthy goal IMO.  It seems theres much more than 5 or 6
> >> things which need work though
> >
> > Not a pretty picture, is it?
> > But I was only referring to the tests that fail on Wine; there,
> > we have control over both the test and the code, so if
> > we can't get those tests passing, we're pretty weak :-)
>
> Are these tests passing (now) on Alexandre's machine? I thought he didn't
> apply patches that break the wine tests? (at least on his box).

A funny observation perhaps, but I doubt that Microsoft has actually employed 
such a stringent QA process when they developed the code whose bugs Wine now 
works around :)

Cheers, Kuba


From forrest at alumni.ncsu.edu  Mon Jan 14 09:17:27 2008
From: forrest at alumni.ncsu.edu (Forrest Samuels)
Date: Mon, 14 Jan 2008 10:17:27 -0500
Subject: Improving Default Serial Port Configuration
In-Reply-To: <200801131439.49335.hans@it.vu.nl>
References: <781397410801122119s5f5d3e48h7e2d0890242f16be@mail.gmail.com>
	<200801131439.49335.hans@it.vu.nl>
Message-ID: <781397410801140717j78704799x4d994cba3fe79c1c@mail.gmail.com>

On Jan 13, 2008 8:39 AM, Hans Leidekker <hans at it.vu.nl> wrote:
> On Sunday 13 January 2008 06:19:06 Forrest Samuels wrote:
>
> > Does anyone have any insight on where I should start looking to
> > implement this? Implementation suggestions? In the bug, Juan Lang made
> > the suggestion that "Explorer's hal.c should be extended to create new
> > devices for all the ports it finds, using SetupDiCreateDeviceInfo
> > followed by SetupDiRegisterDeviceInfo. For some devices it should also
> > call SetupDiCreateDeviceInterface to register a particular interface."
> > I've looked in programs/explorer/hal.c and I am not sure where to
> > begin hooking something like that in.
>
> I'd like to know where and when SetupDiRegisterDeviceInfo gets called on
> Windows. I know that Alexandre is planning to move drive detection from
> explorer to mountmgr.sys, serial devices will probably end up in serial.sys
> or something like that. Perhaps this could work by making the driver itself
> do device registration.
>
>  -Hans
>

Is there a time frame for the mountmgr.sys changes? Do I need to wait
until Alexandre makes those changes or could I start working on this
fix elsewhere and just move it later. I'm not really sure where to
start and would love a little direction to get started. I don't think
this is taking on too much for my first work on wine but I may be
wrong on that too. Thanks for the help.

-- 
Forrest Samuels (forrest at alumni.ncsu.edu)


From julliard at winehq.org  Mon Jan 14 09:19:20 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 14 Jan 2008 16:19:20 +0100
Subject: [PATCH] [DbgHelp]: A couple of enhancements for writing minidumps
In-Reply-To: <20080113160216.20959.46624.stgit@localhost> (Eric Pouech's
	message of "Sun, 13 Jan 2008 17:02:16 +0100")
References: <20080113160216.20959.46624.stgit@localhost>
Message-ID: <877iicigef.fsf@wine.dyndns.org>

Eric Pouech <eric.pouech at orange.fr> writes:

> - returning (instead of passing a pointer to) the size of the blocks pointed by the directories
> - now storing the PE version information in module blocks
> - fixed an un-initialized field in minidump header
> - fixed the suspend count value in thread block

Please send separate fixes as separate patches.

-- 
Alexandre Julliard
julliard at winehq.org


From dank at kegel.com  Mon Jan 14 10:13:43 2008
From: dank at kegel.com (Dan Kegel)
Date: Mon, 14 Jan 2008 08:13:43 -0800
Subject: Towards Zero Test Suite Failures
In-Reply-To: <3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
	<b050a5e70801132030u25c2c7c4uaa7aa6dcdd0baba8@mail.gmail.com>
	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
	<3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>
Message-ID: <a71bd89a0801140813v677cd2a5i5a046fcdc881be7d@mail.gmail.com>

On Jan 14, 2008 5:41 AM, Reece Dunn <msclrhd at googlemail.com> wrote:
> > But I was only referring to the tests that fail on Wine; there,
> > we have control over both the test and the code, so if
> > we can't get those tests passing, we're pretty weak :-)
>
> But if you fix a test failure in Wine that is failing on Windows, then
> you are introducing a bug in Wine.

When fixing those 5 - 10 tests on Wine, one should also
make sure they work on Windows.

> I like the idea of getting the tests passing on Windows XP (SP2?) -
> that will then be the baseline for Wine. This should not cause
> regressions on other versions of Windows.

Yep.  And at some point we should indeed make Windows XP
the default personality in Wine.  Seems like a 1.0 kind of thing.
- Dan


From dank at kegel.com  Mon Jan 14 10:22:39 2008
From: dank at kegel.com (Dan Kegel)
Date: Mon, 14 Jan 2008 08:22:39 -0800
Subject: Good source for msvcr71?
Message-ID: <a71bd89a0801140822s75db446did3f9c8a1fa4e3ccf@mail.gmail.com>

I finally ran into an app that wanted msvcr71
but didn't bundle it (supercopyright).
After a few minutes of looking, I couldn't find it
anywhere on microsoft.com.  The best source
I could find was the installer for spambayes 1.1,
but that's inconvenient.  Anyone know a better source,
preferably at microsoft.com?
I'd like to add it to winetricks.

Thanks,
Dan


From dank at kegel.com  Mon Jan 14 10:25:18 2008
From: dank at kegel.com (Dan Kegel)
Date: Mon, 14 Jan 2008 08:25:18 -0800
Subject: Overriding comctl32
Message-ID: <a71bd89a0801140825w656c5715w8d1c25a96ded1c55@mail.gmail.com>

For future reference:
It turns out that installing a native comctl32
and setting overrides for comctl32, as
  sh winetricks cc580
does, is no longer enough to override comctl32.
You also have to remove Wine's sxs manifest
for comctl32, too, e.g.
  rm -rf
~/.wine/drive_c/windows/winsxs/manifests/x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.2600.2982_none_deadbeef.manifest
else wine continues loading the builtin one.
- Dan


From zgold550 at gmail.com  Mon Jan 14 11:06:38 2008
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Mon, 14 Jan 2008 12:06:38 -0500
Subject: Towards Zero Test Suite Failures
In-Reply-To: <a71bd89a0801140813v677cd2a5i5a046fcdc881be7d@mail.gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
	<b050a5e70801132030u25c2c7c4uaa7aa6dcdd0baba8@mail.gmail.com>
	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
	<3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>
	<a71bd89a0801140813v677cd2a5i5a046fcdc881be7d@mail.gmail.com>
Message-ID: <b050a5e70801140906r47f87abo6c0ce09f0ec51e7@mail.gmail.com>

On Jan 14, 2008 11:13 AM, Dan Kegel <dank at kegel.com> wrote:
> On Jan 14, 2008 5:41 AM, Reece Dunn <msclrhd at googlemail.com> wrote:
> > > But I was only referring to the tests that fail on Wine; there,
> > > we have control over both the test and the code, so if
> > > we can't get those tests passing, we're pretty weak :-)
> >
> > But if you fix a test failure in Wine that is failing on Windows, then
> > you are introducing a bug in Wine.
>
> When fixing those 5 - 10 tests on Wine, one should also
> make sure they work on Windows.
>
> > I like the idea of getting the tests passing on Windows XP (SP2?) -
> > that will then be the baseline for Wine. This should not cause
> > regressions on other versions of Windows.
>
> Yep.  And at some point we should indeed make Windows XP
> the default personality in Wine.  Seems like a 1.0 kind of thing.
> - Dan
>


Is there a reason there isn't a Linux column on that giant test.wine list?


-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From thunderbird2k at gmx.net  Mon Jan 14 11:23:27 2008
From: thunderbird2k at gmx.net (Roderick Colenbrander)
Date: Mon, 14 Jan 2008 18:23:27 +0100
Subject: Fix texture coordinate calculation in surface_blt_to_drawable
In-Reply-To: <98f9d06a0801120957j79836a26u5a4bdb25c7f7d7d@mail.gmail.com>
References: <98f9d06a0801120957j79836a26u5a4bdb25c7f7d7d@mail.gmail.com>
Message-ID: <20080114172327.95260@gmx.net>

I just wanted to confirm that this patch is correct. Stefan and I talked about it and it should be right. Before the surface rewrite there were two codepaths like this and one of them used integers and the other texture one used floats. During the rewrite they were merged and the combined one used integers. That's what caused the regression. The use of floats makes much more sense.

Roderick


> This fixes a bug with the use of opengl to render direct draw in older
> graphic cards.
> 
> The problem is in dlls/wined3d/surface.c in surface_blt_to_drawable.
> 
> 3547          coords[0].x = rect.left   / This->pow2Width;
> 
> 3550          coords[1].x = rect.left   / This->pow2Width;
> 
> 3553          coords[2].x = rect.right  / This->pow2Width;
> 
> 3556          coords[3].x = rect.right  / This->pow2Width;
> 
> 3559          coords[0].y = rect.top    / This->pow2Height;
> 3560          coords[1].y = rect.bottom / This->pow2Height;
> 3561          coords[2].y = rect.bottom / This->pow2Height;
> 3562          coords[3].y = rect.top    / This->pow2Height;
> 
> 
> All calculation are done with integers so when rect.right < pow2Wdith and
> rect.bottom < pow2Height
> all texture coordinates are set to 0 thus only the upper left pixel of the
> image is displayed
> scaled up to cover the entire window.

-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail


From msclrhd at googlemail.com  Mon Jan 14 07:41:35 2008
From: msclrhd at googlemail.com (Reece Dunn)
Date: Mon, 14 Jan 2008 13:41:35 +0000
Subject: Towards Zero Test Suite Failures
In-Reply-To: <a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
	<b050a5e70801132030u25c2c7c4uaa7aa6dcdd0baba8@mail.gmail.com>
	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
Message-ID: <3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>

On 14/01/2008, Dan Kegel <dank at kegel.com> wrote:
> On Jan 13, 2008 8:30 PM, Zachary Goldberg <zgold550 at gmail.com> wrote:
> > > On my machine, we've been hovering between
> > > five and ten test suite failures for some time
> > > (see http://bugs.winehq.org/show_bug.cgi?id=9916 )
> > > ...
> > > How 'bout folks spend some time tracking
> > > the current six odd failures down and cleaning them up?
> >
> > Sounds like a worthy goal IMO.  It seems theres much more than 5 or 6
> > things which need work though:
> > http://test.winehq.org/data/200801121000/
>
> Not a pretty picture, is it?
> But I was only referring to the tests that fail on Wine; there,
> we have control over both the test and the code, so if
> we can't get those tests passing, we're pretty weak :-)

But if you fix a test failure in Wine that is failing on Windows, then
you are introducing a bug in Wine.

> > Perhaps we should try and
> > have the nightly suite also pass all tests -- or is this too much of a
> > frivolous goal?
>
> Getting all tests passing on Windows XP would be great,
> but it's a lot of work.   It'd be less work if we focused on just the tests
> that are failing on *all* Win XP systems, but that's still
> at least 180 ok's that aren't ok.  Let's at least fix the 5 or 10 that are
> failing on Wine, and try to keep them fixed.

Ideally, all tests should pass on all platforms. However, there are
issues with different service packs/hot fixes on each version of
Windows, different user configuration (themes, UAC on/off, locale,
etc.), different hardware and even different behaviour between
different versions of Windows.

I like the idea of getting the tests passing on Windows XP (SP2?) -
that will then be the baseline for Wine. This should not cause
regressions on other versions of Windows.

Getting the tests passing on older verisons of Windows will be
important for backward compatibility (e.g. if you have a program that
only runs on Windows 3.1 or Windows 95), and will ensure that Wine
does not break in those cases.

- Reece


From truiken at gmail.com  Mon Jan 14 11:46:36 2008
From: truiken at gmail.com (James Hawkins)
Date: Mon, 14 Jan 2008 11:46:36 -0600
Subject: Improving Default Serial Port Configuration
In-Reply-To: <781397410801140717j78704799x4d994cba3fe79c1c@mail.gmail.com>
References: <781397410801122119s5f5d3e48h7e2d0890242f16be@mail.gmail.com>
	<200801131439.49335.hans@it.vu.nl>
	<781397410801140717j78704799x4d994cba3fe79c1c@mail.gmail.com>
Message-ID: <22821af30801140946w1bc3e15au671fc9da8fb0a858@mail.gmail.com>

On Jan 14, 2008 9:17 AM, Forrest Samuels <forrest at alumni.ncsu.edu> wrote:
>
> On Jan 13, 2008 8:39 AM, Hans Leidekker <hans at it.vu.nl> wrote:
> > On Sunday 13 January 2008 06:19:06 Forrest Samuels wrote:
> >
> > > Does anyone have any insight on where I should start looking to
> > > implement this? Implementation suggestions? In the bug, Juan Lang made
> > > the suggestion that "Explorer's hal.c should be extended to create new
> > > devices for all the ports it finds, using SetupDiCreateDeviceInfo
> > > followed by SetupDiRegisterDeviceInfo. For some devices it should also
> > > call SetupDiCreateDeviceInterface to register a particular interface."
> > > I've looked in programs/explorer/hal.c and I am not sure where to
> > > begin hooking something like that in.
> >
> > I'd like to know where and when SetupDiRegisterDeviceInfo gets called on
> > Windows. I know that Alexandre is planning to move drive detection from
> > explorer to mountmgr.sys, serial devices will probably end up in serial.sys
> > or something like that. Perhaps this could work by making the driver itself
> > do device registration.
> >
> >  -Hans
> >
>
> Is there a time frame for the mountmgr.sys changes? Do I need to wait
> until Alexandre makes those changes or could I start working on this
> fix elsewhere and just move it later. I'm not really sure where to
> start and would love a little direction to get started. I don't think
> this is taking on too much for my first work on wine but I may be
> wrong on that too. Thanks for the help.
>

To be honest, you're greatly underestimating the difficulty of the
task.  The fact that you have to ask such questions should alert you
to this.

-- 
James Hawkins


From austinenglish at gmail.com  Mon Jan 14 12:00:54 2008
From: austinenglish at gmail.com (Austin English)
Date: Mon, 14 Jan 2008 12:00:54 -0600
Subject: WineD3D Spelling Fixes
Message-ID: <b6bb06270801141000y17f602e1j64634941f26ea45b@mail.gmail.com>

Any reason this patch wasn't applied? I didn't see any feedback on wine-patches.

http://www.winehq.org/pipermail/wine-patches/2008-January/048933.html

-Austin


From stefan at codeweavers.com  Mon Jan 14 12:14:10 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Mon, 14 Jan 2008 19:14:10 +0100
Subject: Towards Zero Test Suite Failures
In-Reply-To: <3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
	<3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>
Message-ID: <200801141914.10423.stefan@codeweavers.com>

Am Montag, 14. Januar 2008 14:41:35 schrieb Reece Dunn:
> But if you fix a test failure in Wine that is failing on Windows, then
> you are introducing a bug in Wine.
Not necessarily. Some tests are too strict in what they expect, and sometimes 
the Windows behavior is "wrong", in the way that some application expects 
something different and wouldn't run on this Windows installation either.

An example for a too strict test is a test that hardcodes paths that are 
specific to english locales(These cases should be fixed by now). Examples 
of "broken" Windows installations are VMware installations with Direct3D 
support enabled. VMWare has a D3D driver that works similarly to Wine, but 
has a few bugs that our tests stumble uppon.


From hans at it.vu.nl  Mon Jan 14 12:47:07 2008
From: hans at it.vu.nl (Hans Leidekker)
Date: Mon, 14 Jan 2008 19:47:07 +0100
Subject: Improving Default Serial Port Configuration
In-Reply-To: <22821af30801140946w1bc3e15au671fc9da8fb0a858@mail.gmail.com>
References: <781397410801122119s5f5d3e48h7e2d0890242f16be@mail.gmail.com>
	<781397410801140717j78704799x4d994cba3fe79c1c@mail.gmail.com>
	<22821af30801140946w1bc3e15au671fc9da8fb0a858@mail.gmail.com>
Message-ID: <200801141947.08432.hans@it.vu.nl>

On Monday 14 January 2008 18:46:36 James Hawkins wrote:

> > Is there a time frame for the mountmgr.sys changes? Do I need to wait
> > until Alexandre makes those changes or could I start working on this
> > fix elsewhere and just move it later. I'm not really sure where to
> > start and would love a little direction to get started. I don't think
> > this is taking on too much for my first work on wine but I may be
> > wrong on that too. Thanks for the help.
> >
> 
> To be honest, you're greatly underestimating the difficulty of the
> task.  The fact that you have to ask such questions should alert you
> to this.

Yeah, the infrastructural problems are way beyond beginner level, but you
could simply ignore those and write some code that registers a serial device
i.e. writes registry keys below HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum

MSDN tells me there is something called the plug and play manager which is
responsible for registering devices. We have no equivalent in Wine but we may
get away with fake data for serial devices or find some other way to retrieve
it.

 -Hans


From jacek at codeweavers.com  Mon Jan 14 15:43:58 2008
From: jacek at codeweavers.com (Jacek Caban)
Date: Mon, 14 Jan 2008 22:43:58 +0100
Subject: [PATCH] check for This->frame
Message-ID: <478BD79E.9020206@codeweavers.com>

Hi Marcus,

Marcus Meissner wrote:
> Hi,
>
> Coverity 645 spotted missing This->frame
> checks.
>
> Ciao, Marcus
> ---
>  dlls/mshtml/olecmd.c |    5 +++--
>  1 files changed, 3 insertions(+), 2 deletions(-)
>
> diff --git a/dlls/mshtml/olecmd.c b/dlls/mshtml/olecmd.c
> index 326b0b0..02b5e83 100644
> --- a/dlls/mshtml/olecmd.c
> +++ b/dlls/mshtml/olecmd.c
> @@ -621,7 +621,7 @@ static HRESULT exec_editmode(HTMLDocument *This, DWORD cmdexecopt, VARIANT *in,
>          if(This->hostui)
>              IDocHostUIHandler_HideUI(This->hostui);
>  
> -        if(This->hostui)
> +        if(This->hostui && This->frame)
>              IDocHostUIHandler_ShowUI(This->hostui, DOCHOSTUITYPE_AUTHOR, ACTOBJ(This), CMDTARGET(This),
>                  This->frame, This->ip_window);
>   

There is no reason to test This->frame here (unless you have tested that 
native MSHTML doesn't call ShowUI with NULL frame). Coverity spotted an 
other bug, which you've fixed in other part of the patch.

Thanks,
    Jacek


From luis.busquets at ilidium.com  Mon Jan 14 15:45:02 2008
From: luis.busquets at ilidium.com (=?ISO-8859-1?Q?=22Luis_C=2E_Busquets_P=E9rez=22?=)
Date: Mon, 14 Jan 2008 22:45:02 +0100
Subject: GDI32.dll.NamedEscape
Message-ID: <478BD7DE.4000507@ilidium.com>

I am having problems with a bunch of three games that came together in 
the same pack. They all abort qhen asking for installation with the 
following line

wine: Call from 0x73ba1895 to unimplemented function 
GDI32.dll.NamedEscape, aborting

Does anybody know what GDI32.dll.NamedEscape does?

Does anybody intend to implement it in the near future?


From rob at codeweavers.com  Mon Jan 14 15:48:44 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Mon, 14 Jan 2008 21:48:44 +0000
Subject: GDI32.dll.NamedEscape
In-Reply-To: <478BD7DE.4000507@ilidium.com>
References: <478BD7DE.4000507@ilidium.com>
Message-ID: <478BD8BC.1020305@codeweavers.com>

Luis C. Busquets P?rez wrote:
> I am having problems with a bunch of three games that came together in 
> the same pack. They all abort qhen asking for installation with the 
> following line
>
> wine: Call from 0x73ba1895 to unimplemented function 
> GDI32.dll.NamedEscape, aborting
>
> Does anybody know what GDI32.dll.NamedEscape does?
>   

It appears to be undocumented. Are you using some native DLLs by any chance?

-- 
Rob Shearman



From juan.lang at gmail.com  Mon Jan 14 15:53:22 2008
From: juan.lang at gmail.com (Juan Lang)
Date: Mon, 14 Jan 2008 13:53:22 -0800
Subject: GDI32.dll.NamedEscape
In-Reply-To: <478BD8BC.1020305@codeweavers.com>
References: <478BD7DE.4000507@ilidium.com> <478BD8BC.1020305@codeweavers.com>
Message-ID: <3a768c550801141353y350556baifee7eee742f443f8@mail.gmail.com>

> It appears to be undocumented. Are you using some native DLLs by any chance?

I've noticed it's called by some Adobe DLLs, e.g. atmlib.dll, so the
same crash can be triggered by installing an app with no native
overrides.
--Juan


From dank at kegel.com  Mon Jan 14 15:58:48 2008
From: dank at kegel.com (Dan Kegel)
Date: Mon, 14 Jan 2008 13:58:48 -0800
Subject: [hlink] Skip tests if hlink couldn't be created
In-Reply-To: <478BD92C.4040308@codeweavers.com>
References: <a71bd89a0801131840y654e4121m482a132768344638@mail.gmail.com>
	<478BD92C.4040308@codeweavers.com>
Message-ID: <a71bd89a0801141358p3815e53cx2239c46698fa75ec@mail.gmail.com>

On Jan 14, 2008 1:50 PM, Robert Shearman <rob at codeweavers.com> wrote:
> Dan Kegel wrote:
> > This makes the test slightly more robust to operator error.
>
> If we're striving to get zero test failures then converting a crash to
> some failures isn't really much of an improvement.

The crash was in test code, and only happened for
me because I had done something stupid
(probably "wineserver -k" before wineprefixcreate's
server had flushed its registry cache).

Since that's the only situation I can think of this
crash would happen in, it's kind of a silly patch
all around, but it does have the virtue of trying
to give the confused developer a clue
(as in "you did something to screw up wineprefixcreate").
- Dan


From rob at codeweavers.com  Mon Jan 14 15:50:36 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Mon, 14 Jan 2008 21:50:36 +0000
Subject: [hlink] Skip tests if hlink couldn't be created
In-Reply-To: <a71bd89a0801131840y654e4121m482a132768344638@mail.gmail.com>
References: <a71bd89a0801131840y654e4121m482a132768344638@mail.gmail.com>
Message-ID: <478BD92C.4040308@codeweavers.com>

Dan Kegel wrote:
> This makes the test slightly more robust to operator error.
>   

If we're striving to get zero test failures then converting a crash to 
some failures isn't really much of an improvement.

-- 
Rob Shearman



From hverbeet at gmail.com  Mon Jan 14 16:57:39 2008
From: hverbeet at gmail.com (H. Verbeet)
Date: Mon, 14 Jan 2008 23:57:39 +0100
Subject: [PATCH] check for array index overflows
In-Reply-To: <478bdc1e.0254260a.08eb.701cSMTPIN_ADDED@mx.google.com>
References: <478bdc1e.0254260a.08eb.701cSMTPIN_ADDED@mx.google.com>
Message-ID: <d658b69e0801141457r2301243nf1d41390d23a8803@mail.gmail.com>

On 14/01/2008, Marcus Meissner <marcus at jet.franken.de> wrote:
> Hi,
>
> This checks for overflowing the fixed size arrays.
>
> spotted by Coverity.
>
> (Submitted some months ago already, but left in my queue.)
>
> Ciao, Marcus
> ---
IIRC last time we tested this it was allowed on Windows, and simply
causes memory corruption.
If we want to prevent this, we should probably just return WINED3D_OK.


From marcus at jet.franken.de  Tue Jan 15 01:08:36 2008
From: marcus at jet.franken.de (Marcus Meissner)
Date: Tue, 15 Jan 2008 08:08:36 +0100
Subject: [PATCH] check for array index overflows
In-Reply-To: <d658b69e0801141457r2301243nf1d41390d23a8803@mail.gmail.com>
References: <478bdc1e.0254260a.08eb.701cSMTPIN_ADDED@mx.google.com>
	<d658b69e0801141457r2301243nf1d41390d23a8803@mail.gmail.com>
Message-ID: <20080115070836.GB6737@galeere>

On Mon, Jan 14, 2008 at 11:57:39PM +0100, H. Verbeet wrote:
> On 14/01/2008, Marcus Meissner <marcus at jet.franken.de> wrote:
> > Hi,
> >
> > This checks for overflowing the fixed size arrays.
> >
> > spotted by Coverity.
> >
> > (Submitted some months ago already, but left in my queue.)
> >
> > Ciao, Marcus
> > ---
> IIRC last time we tested this it was allowed on Windows, and simply
> causes memory corruption.
> If we want to prevent this, we should probably just return WINED3D_OK.

I don't like memory corruption or buffer overflows. ;)
Just sent another patch, returning WINED3D_OK but printing ERR().

Ciao, Marcus


From dmitry at codeweavers.com  Tue Jan 15 02:22:48 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Tue, 15 Jan 2008 16:22:48 +0800
Subject: user32,
	wined3d: move refresh rate fallback to catch all cases (resend)
References: <20080114220520.P49542@anduin.net>
Message-ID: <007101c8574f$d1ed93a0$a600fea9@DMITRY>

"Erik Inge Bols?" <knan-wine at anduin.net> wrote:

> If requesting a refresh rate that isn't available, but a better one is,
> ChangeDisplaySettings fails and some games fail to launch. This does
> not seem to match WinXP behaviour with the same graphics card + lcd
> monitor combination.

If that's not what Windows does then this patch can't be accepted. In any
case a test case showing Windows behaviour is required.

-- 
Dmitry. 



From dmitry at codeweavers.com  Tue Jan 15 02:39:44 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Tue, 15 Jan 2008 16:39:44 +0800
Subject: Good source for msvcr71?
References: <a71bd89a0801140822s75db446did3f9c8a1fa4e3ccf@mail.gmail.com>
Message-ID: <00bd01c85752$31cf67b0$a600fea9@DMITRY>

"Dan Kegel" <dank at kegel.com> wrote:

> I finally ran into an app that wanted msvcr71
> but didn't bundle it (supercopyright).
> After a few minutes of looking, I couldn't find it
> anywhere on microsoft.com.  The best source
> I could find was the installer for spambayes 1.1,
> but that's inconvenient.  Anyone know a better source,
> preferably at microsoft.com?
> I'd like to add it to winetricks.

http://msdn2.microsoft.com/en-us/library/abx4dbyh(VS.71).aspx

<quote>
What is the difference between msvcrt.dll and msvcr71.dll?

The msvcrt.dll is now a "known DLL," meaning that it is a system component
owned and built by Windows. It is intended for future use only by system-level
components. An application should use and redistribute msvcr71.dll, and
it should avoid placing a copy or using an existing copy of msvcr71.dll
in the system directory. Instead, the application should keep a copy of
msvcr71.dll in its application directory with the program executable.
</quote>

So, it seems like Microsoft suggests to always distribute its own copy of
msvcr71.dll with every application. That means that it's unlikely that
Microsoft will provide an installer for it on microsoft.com.

Just an idea, can we build our mozilla dlls so that the build includes
msvcr71.dll?

-- 
Dmitry.


From knan-wine at anduin.net  Tue Jan 15 03:21:28 2008
From: knan-wine at anduin.net (=?iso-8859-1?Q?Erik_Inge_Bols=F8?=)
Date: Tue, 15 Jan 2008 10:21:28 +0100 (CET)
Subject: user32,wined3d: move refresh rate fallback to catch all cases
	(resend)
In-Reply-To: <007101c8574f$d1ed93a0$a600fea9@DMITRY>
References: <20080114220520.P49542@anduin.net>
	<007101c8574f$d1ed93a0$a600fea9@DMITRY>
Message-ID: <20080115101319.C1800@anduin.net>

On Tue, 15 Jan 2008, Dmitry Timoshkov wrote:
> "Erik Inge Bols?" <knan-wine at anduin.net> wrote:
> > If requesting a refresh rate that isn't available, but a better one is,
> > ChangeDisplaySettings fails and some games fail to launch. This does
> > not seem to match WinXP behaviour with the same graphics card + lcd
> > monitor combination.
> 
> If that's not what Windows does then this patch can't be accepted. In any
> case a test case showing Windows behaviour is required.

This is a change to match windows behaviour, AFAICT.

How would I go about adding a testcase for this? I don't have a windows 
development environment set up, and only indirectly a windows install to 
test on. Can't mess around with it too much, it's not mine.

--
-erik	http://useofwords.blogspot.com/


From dmitry at codeweavers.com  Tue Jan 15 03:32:46 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Tue, 15 Jan 2008 17:32:46 +0800
Subject: user32,
	wined3d: move refresh rate fallback to catch all cases(resend)
References: <20080114220520.P49542@anduin.net><007101c8574f$d1ed93a0$a600fea9@DMITRY>
	<20080115101319.C1800@anduin.net>
Message-ID: <010a01c85759$97b18ac0$a600fea9@DMITRY>

"Erik Inge Bols?" <knan-wine at anduin.net> wrote:

> This is a change to match windows behaviour, AFAICT.

Based on what?

> How would I go about adding a testcase for this? I don't have a windows
> development environment set up, and only indirectly a windows install to
> test on. Can't mess around with it too much, it's not mine.

If you haven't tested this in Windows then I don't see how you could
claim that your patch makes Wine conform to Windows behaviour.

A test I'd think of would scan available video modes, choose one, change
its refresh rate so that the modes of the same resolution have different
values, and see what happens if you pass it to ChangeDisplaySettings.

-- 
Dmitry. 



From knan-wine at anduin.net  Tue Jan 15 04:11:23 2008
From: knan-wine at anduin.net (=?iso-8859-1?Q?Erik_Inge_Bols=F8?=)
Date: Tue, 15 Jan 2008 11:11:23 +0100 (CET)
Subject: user32,wined3d: move refresh rate fallback to catch all
	cases(resend)
In-Reply-To: <010a01c85759$97b18ac0$a600fea9@DMITRY>
References: <20080114220520.P49542@anduin.net><007101c8574f$d1ed93a0$a600fea9@DMITRY>
	<20080115101319.C1800@anduin.net>
	<010a01c85759$97b18ac0$a600fea9@DMITRY>
Message-ID: <20080115110236.T10962@anduin.net>

On Tue, 15 Jan 2008, Dmitry Timoshkov wrote:
> "Erik Inge Bols?" <knan-wine at anduin.net> wrote:
> > This is a change to match windows behaviour, AFAICT.
> 
> Based on what?
> 
> > How would I go about adding a testcase for this? I don't have a windows
> > development environment set up, and only indirectly a windows install to
> > test on. Can't mess around with it too much, it's not mine.
> 
> If you haven't tested this in Windows then I don't see how you could
> claim that your patch makes Wine conform to Windows behaviour.

As I said last time I tried to submit this, the game starts in Windows 
XP on an identical graphics card + lcd monitor combination. (50 Hz is 
not available there either.) It does not start in Wine. This allows it to 
start, but I'm not 100% certain it fixes it in the right place.

--
-erik	http://useofwords.blogspot.com/


From dmitry at codeweavers.com  Tue Jan 15 04:24:41 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Tue, 15 Jan 2008 18:24:41 +0800
Subject: user32,
	wined3d: move refresh rate fallback to catch allcases(resend)
References: <20080114220520.P49542@anduin.net><007101c8574f$d1ed93a0$a600fea9@DMITRY><20080115101319.C1800@anduin.net><010a01c85759$97b18ac0$a600fea9@DMITRY>
	<20080115110236.T10962@anduin.net>
Message-ID: <013101c85760$d8684c50$a600fea9@DMITRY>

"Erik Inge Bols?" <knan-wine at anduin.net> wrote:

> As I said last time I tried to submit this, the game starts in Windows
> XP on an identical graphics card + lcd monitor combination. (50 Hz is
> not available there either.) It does not start in Wine. This allows it to
> start, but I'm not 100% certain it fixes it in the right place.

It should be investigated first where an invalid refresh rate comes from,
i.e. you are fixing the real problem and not a subsequence of a bug somewhere
else.

-- 
Dmitry.



From rob at codeweavers.com  Tue Jan 15 04:33:30 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Tue, 15 Jan 2008 10:33:30 +0000
Subject: gdi32: Do not allow to create too large device dependent bitmaps
	like	Windows does
In-Reply-To: <E1JEive-0004mn-Nk@mail.codeweavers.com>
References: <E1JEive-0004mn-Nk@mail.codeweavers.com>
Message-ID: <478C8BFA.80005@codeweavers.com>

Dmitry Timoshkov wrote:
> +    SetLastError(0xdeadbeef);
> +    hbmp = CreateBitmap(0x7ffffff, 9, 1, 1, NULL);
> +    ok(!hbmp, "CreateBitmap should fail\n");
> +    ok(GetLastError() == ERROR_NOT_ENOUGH_MEMORY,
> +       "expected ERROR_INVALID_PARAMETER, got %u\n", GetLastError());
>   

The string here doesn't match the test.

-- 
Rob Shearman



From julliard at winehq.org  Tue Jan 15 06:08:02 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Tue, 15 Jan 2008 13:08:02 +0100
Subject: [take 2] shell32: Check if token references the current user
In-Reply-To: <200801101958.m0AJwmmx016744@mailhost.geldorp.nl> (ge@gse.nl's
	message of "Thu, 10 Jan 2008 21:01:17 +0100")
References: <200801101958.m0AJwmmx016744@mailhost.geldorp.nl>
Message-ID: <87tzlfgul9.fsf@wine.dyndns.org>

ge at gse.nl writes:

> Incorporates feedback by Juan Lang
>
> Changelog:
>   Ge van Geldorp <ge at thinstall.com>

Please either put your full name in the mail headers, or include the
full git headers in the body of your message, so that my commit script
can grab your name and email automatically.

> @@ -1382,14 +1476,15 @@ static HRESULT _SHGetUserProfilePath(HANDLE hToken, DWORD dwFlags, BYTE folder,
>          return E_INVALIDARG;
>  
>      /* Only the current user and the default user are supported right now
> -     * I'm afraid.
> +     * I'm afraid. We do handle the case where the token references the
> +     * current user.
>       * FIXME: should be able to call GetTokenInformation on the token,
>       * then call ConvertSidToStringSidW on it to get the user prefix.
>       * But Wine's registry doesn't store user info by sid, it stores it
>       * by user name (and I don't know how to convert from a token to a
>       * user name).

This comment is obsolete, we store the registry by sid now, so this is
what you should use to open the user's key.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Tue Jan 15 06:17:11 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Tue, 15 Jan 2008 13:17:11 +0100
Subject: [advapi32] QueryServiceConfig2 (2nd try)
In-Reply-To: <200801102234.56883.Stefan.Leichter@camline.com> (Stefan
	Leichter's message of "Thu, 10 Jan 2008 22:34:56 +0100")
References: <200801102234.56883.Stefan.Leichter@camline.com>
Message-ID: <87myr7gu60.fsf@wine.dyndns.org>

Stefan Leichter <Stefan.Leichter at camline.com> writes:

> + * Note
> + *   observed unter win2k:
> + *   1. when the function is called to get the required buffer size, the value of
> + *   the returned parameter needed is big enough to hold the strings as WCHARs(!)

It's not WCHARs, it's two A chars per W char to leave enough room for
the conversion. I don't see you doing that in the code.

> +        case SERVICE_CONFIG_DESCRIPTION:
> +            {   LPSERVICE_DESCRIPTIONA configA = (LPSERVICE_DESCRIPTIONA) buffer;
> +                LPSERVICE_DESCRIPTIONW configW = (LPSERVICE_DESCRIPTIONW) bufferW;
> +                *needed = sizeof(SERVICE_DESCRIPTIONA);
> +                if (configW->lpDescription) {
> +                    DWORD sz;
> +                    configA->lpDescription = (LPSTR)(configA + 1);
> +                    sz = WideCharToMultiByte( CP_ACP, 0, configW->lpDescription, -1,
> +                             configA->lpDescription, size - sizeof(SERVICE_DESCRIPTIONA), NULL, NULL );
> +                    if (!sz) {
> +                        FIXME("WideCharToMultiByte failed for configW->lpDescription\n");
> +                        ret = FALSE;
> +                        configA->lpDescription = NULL;
> +                        goto cleanup;

You need to update the needed size on buffer overflow.

-- 
Alexandre Julliard
julliard at winehq.org


From dank at kegel.com  Tue Jan 15 08:44:07 2008
From: dank at kegel.com (Dan Kegel)
Date: Tue, 15 Jan 2008 06:44:07 -0800
Subject: Good source for msvcr71?
In-Reply-To: <00bd01c85752$31cf67b0$a600fea9@DMITRY>
References: <a71bd89a0801140822s75db446did3f9c8a1fa4e3ccf@mail.gmail.com>
	<00bd01c85752$31cf67b0$a600fea9@DMITRY>
Message-ID: <a71bd89a0801150644m385d5d8fvf9512fc04bbdfa03@mail.gmail.com>

On Jan 15, 2008 12:39 AM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> > Anyone know a better source [for msvcr71],
> > preferably at microsoft.com?
> > I'd like to add it to winetricks.
>
> ... it seems like Microsoft suggests to always distribute its own copy of
> msvcr71.dll with every application. That means that it's unlikely that
> Microsoft will provide an installer for it on microsoft.com.

Indeed.   But it means it's very likely that *some app* at microsoft.com
is bundled with it.

> Just an idea, can we build our mozilla dlls so that the build includes
> msvcr71.dll?

Sure, if we build gecko with visual studio 2003, it'll have to come with one.
We might also find ourselves needing to bundle a few more windows binaries
with Wine someday, and those might happen to require other redistributables
(e.g. mfc42).
- Dan


From dmitry at codeweavers.com  Tue Jan 15 08:55:23 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Tue, 15 Jan 2008 22:55:23 +0800
Subject: Good source for msvcr71?
References: <a71bd89a0801140822s75db446did3f9c8a1fa4e3ccf@mail.gmail.com><00bd01c85752$31cf67b0$a600fea9@DMITRY>
	<a71bd89a0801150644m385d5d8fvf9512fc04bbdfa03@mail.gmail.com>
Message-ID: <059c01c85786$a98bba40$a600fea9@DMITRY>

"Dan Kegel" <dank at kegel.com> wrote:

>> Just an idea, can we build our mozilla dlls so that the build includes
>> msvcr71.dll?
> 
> Sure, if we build gecko with visual studio 2003, it'll have to come with one.

cl.exe from the Vista PSDK produces .exe files with a MSVCR80.dll dependency,
perhaps a compiler bundled with one of older PSDKs created executables for
msvcr71.dll, or one of free microsoft compilers.

-- 
Dmitry.


From julliard at winehq.org  Tue Jan 15 09:26:55 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Tue, 15 Jan 2008 16:26:55 +0100
Subject: Good source for msvcr71?
In-Reply-To: <00bd01c85752$31cf67b0$a600fea9@DMITRY> (Dmitry Timoshkov's
	message of "Tue, 15 Jan 2008 16:39:44 +0800")
References: <a71bd89a0801140822s75db446did3f9c8a1fa4e3ccf@mail.gmail.com>
	<00bd01c85752$31cf67b0$a600fea9@DMITRY>
Message-ID: <87ir1vglds.fsf@wine.dyndns.org>

"Dmitry Timoshkov" <dmitry at codeweavers.com> writes:

> So, it seems like Microsoft suggests to always distribute its own copy of
> msvcr71.dll with every application. That means that it's unlikely that
> Microsoft will provide an installer for it on microsoft.com.
>
> Just an idea, can we build our mozilla dlls so that the build includes
> msvcr71.dll?

There's no need for that, it should be fairly easy to write a builtin
msvcr71.

-- 
Alexandre Julliard
julliard at winehq.org


From ian at ianmacfarlane.com  Tue Jan 15 08:58:45 2008
From: ian at ianmacfarlane.com (Ian Macfarlane)
Date: Tue, 15 Jan 2008 14:58:45 +0000
Subject: WWN license issue
Message-ID: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>

At the bottom of each WWN issue (for example, the latest
http://www.winehq.org/?issue=339) is the text:

"All Kernel Cousin issues and summaries are copyright their original
authors, and distributed under the terms of the GNU General Public
License, version 2.0. "

However, it links to http://www.gnu.org/licenses/gpl.txt which of
course is now the GPLv3 license text.

Perhaps the text should change to say version 3 (or perhaps version
2+), or to the old archived GPLv2 license (IMO the former two options
are preferable).


From tony.wasserka at freenet.de  Tue Jan 15 09:55:18 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Tue, 15 Jan 2008 16:55:18 +0100
Subject: d3dx9: Start implementation of d3dx9_36
Message-ID: <E1JEo8E-0005Gd-4H@www20.emo.freenet-rz.de>

What's wrong with it this time?
Thought that it was okay this time :D











From saulius2 at ar.fi.lt  Tue Jan 15 10:38:54 2008
From: saulius2 at ar.fi.lt (Saulius Krasuckas)
Date: Tue, 15 Jan 2008 18:38:54 +0200 (EET)
Subject: advpack: Skip some tests if not in interactive mode because they
	pop up dialogs.
In-Reply-To: <Pine.LNX.4.64.0711132049010.3923@amboise.dolphin>
References: <Pine.LNX.4.64.0711132049010.3923@amboise.dolphin>
Message-ID: <Pine.LNX.4.62.0801151836400.26019@tvarka.ar.fi.lt>

* On Tue, 13 Nov 2007, Francois Gouget wrote:
> 
> This was causing the advpack:install test to time out on my Win98, WinXP 
> and Win2003 VMs.

Would it be nice to create some closer-thread for closing poped up dialogs 
in places of code known for that behaviour?  (Probably, for non 
interactive mode only)


From dank at kegel.com  Tue Jan 15 12:32:18 2008
From: dank at kegel.com (Dan Kegel)
Date: Tue, 15 Jan 2008 10:32:18 -0800
Subject: Tools: Spelling fixes
Message-ID: <a71bd89a0801151032t4da1109eo6298aa4256f1585b@mail.gmail.com>

Austin wrote:

>    only used for optimization, so just check for a very small set of
>-   criteria that guarantee the types are equivalent; assume every thing
>+   criteria that guarantees the types are equivalent; assume everything

The original was correct, please don't change that.
Firstly, it's not a spelling problem;
secondly, in England, it's correct to consider a set of something plural.

The rest of the changes in this patch seem ok.
- Dan


From zgold550 at gmail.com  Tue Jan 15 14:20:25 2008
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Tue, 15 Jan 2008 15:20:25 -0500
Subject: WWN license issue
In-Reply-To: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
Message-ID: <b050a5e70801151220s6dcc3efpc379138fa63867ac@mail.gmail.com>

On Jan 15, 2008 9:58 AM, Ian Macfarlane <ian at ianmacfarlane.com> wrote:
> At the bottom of each WWN issue (for example, the latest
> http://www.winehq.org/?issue=339) is the text:
>
> "All Kernel Cousin issues and summaries are copyright their original
> authors, and distributed under the terms of the GNU General Public
> License, version 2.0. "
>
> However, it links to http://www.gnu.org/licenses/gpl.txt which of
> course is now the GPLv3 license text.
>
> Perhaps the text should change to say version 3 (or perhaps version
> 2+), or to the old archived GPLv2 license (IMO the former two options
> are preferable).
>
>
>

for the record: I have no personal preference on the license.
Whatever the WineHQ admins decide on the issue is fine with me.

-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From jnewman at codeweavers.com  Tue Jan 15 14:33:41 2008
From: jnewman at codeweavers.com (Jeremy Newman)
Date: Tue, 15 Jan 2008 14:33:41 -0600
Subject: WWN license issue
In-Reply-To: <b050a5e70801151220s6dcc3efpc379138fa63867ac@mail.gmail.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
	<b050a5e70801151220s6dcc3efpc379138fa63867ac@mail.gmail.com>
Message-ID: <478D18A5.9050006@codeweavers.com>

I'll patch it so it points to the GPL v2 licence, unless someone feels 
there is a reason it needs to be v3.

Zachary Goldberg wrote:
> On Jan 15, 2008 9:58 AM, Ian Macfarlane <ian at ianmacfarlane.com> wrote:
>> At the bottom of each WWN issue (for example, the latest
>> http://www.winehq.org/?issue=339) is the text:
>>
>> "All Kernel Cousin issues and summaries are copyright their original
>> authors, and distributed under the terms of the GNU General Public
>> License, version 2.0. "
>>
>> However, it links to http://www.gnu.org/licenses/gpl.txt which of
>> course is now the GPLv3 license text.
>>
>> Perhaps the text should change to say version 3 (or perhaps version
>> 2+), or to the old archived GPLv2 license (IMO the former two options
>> are preferable).
>>
>>
>>
> 
> for the record: I have no personal preference on the license.
> Whatever the WineHQ admins decide on the issue is fine with me.
> 


From fgouget at free.fr  Tue Jan 15 16:23:08 2008
From: fgouget at free.fr (Francois Gouget)
Date: Tue, 15 Jan 2008 23:23:08 +0100 (CET)
Subject: SVN usage for Wine
In-Reply-To: <478AAA86.9000902@sprintpcs.com>
References: <478977BA.6070302@earthlink.net> <478A53E1.8050002@codeweavers.com>
	<478AAA86.9000902@sprintpcs.com>
Message-ID: <alpine.DEB.0.999999.0801152320040.8935@amboise.dolphin>

On Sun, 13 Jan 2008, James McKenzie wrote:
[...]
> Where are you getting your git code from and does it require any patches 
> to make it compile and run on MacOSX 10.4?

Rob probably installed his Git from Fink.
I've installed mine using MacPorts. Here's the recipe in case you're 
interested:

---
MacPorts needs Xcode because it installs applications from the source. 
So make sure Xcode is installed first. Because it compiles applications 
from source it can take a bit.

Then grab the Mac OS X Package Installer from 
http://www.macports.org/install.php and follow the installation 
instructions on that page.

Once that's done you can install git with the following command:

$ sudo port -v install git-core

Because Git uses Ssh, MacPorts also installed its own Ssh version which 
unfortunately was buggy. If this happens to you, delete (or rename) scp, 
slogin and ssh in /opt/local/bin.
---

The part about ssh may be why you had stability problems with Git. As 
far as I can tell my workaround works just fine.


-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
                           La terre est une b


From fgouget at free.fr  Tue Jan 15 17:03:06 2008
From: fgouget at free.fr (Francois Gouget)
Date: Wed, 16 Jan 2008 00:03:06 +0100 (CET)
Subject: Towards Zero Test Suite Failures
In-Reply-To: <200801141914.10423.stefan@codeweavers.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
	<3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>
	<200801141914.10423.stefan@codeweavers.com>
Message-ID: <alpine.DEB.0.999999.0801152327090.8935@amboise.dolphin>

On Mon, 14 Jan 2008, Stefan D?singer wrote:

> Am Montag, 14. Januar 2008 14:41:35 schrieb Reece Dunn:
> > But if you fix a test failure in Wine that is failing on Windows, then
> > you are introducing a bug in Wine.
> Not necessarily. Some tests are too strict in what they expect, and sometimes 
> the Windows behavior is "wrong", in the way that some application expects 
> something different and wouldn't run on this Windows installation either.

But the only way to know is to check the Windows results. So while 
you're doing that you can as well try to fix the test on Windows.


[...]
> This Examples of "broken" Windows installations are VMware 
> installations with Direct3D support enabled. VMWare has a D3D driver 
> that works similarly to Wine, but has a few bugs that our tests 
> stumble uppon.

<rant>

This gets mentioned *every single time*.

For what it's worth, as far as I know none of the tests I run (the 
'fg-xxx' ones) has that D3D driver you speak of.

They still have failures in the Direct3D tests but if you check the 
Windows XP results, you will see that my logs show only two Direct3D 
tests failing. That's very little compared to the 73 other tests that 
fail... for the Windows XP results alone.

So I'd like people to focus a little bit less on these two Direct3D 
failures and a little bit more on the 73 other failures. That the tests 
are being run in VMware is no excuse for not looking at them. If these 
73 failing tests were fixed that would be a huge step for the 
conformance test suite.

</rant>

-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
                 There are 10 types of people in the world...
               those who understand binary and those who don't.

From fgouget at free.fr  Tue Jan 15 17:10:36 2008
From: fgouget at free.fr (Francois Gouget)
Date: Wed, 16 Jan 2008 00:10:36 +0100 (CET)
Subject: advpack: Skip some tests if not in interactive mode because they
	pop up dialogs.
In-Reply-To: <Pine.LNX.4.62.0801151836400.26019@tvarka.ar.fi.lt>
References: <Pine.LNX.4.64.0711132049010.3923@amboise.dolphin>
	<Pine.LNX.4.62.0801151836400.26019@tvarka.ar.fi.lt>
Message-ID: <alpine.DEB.0.999999.0801160008220.8935@amboise.dolphin>

On Tue, 15 Jan 2008, Saulius Krasuckas wrote:

> * On Tue, 13 Nov 2007, Francois Gouget wrote:
> > 
> > This was causing the advpack:install test to time out on my Win98, WinXP 
> > and Win2003 VMs.
> 
> Would it be nice to create some closer-thread for closing poped up dialogs 
> in places of code known for that behaviour?  (Probably, for non 
> interactive mode only)

I'm not sure. It seems like it would be complex and probably quite 
fragile (e.g. wrt to language issues).

I'd rather have the tests not pop up any windows at all, though that's 
clearly a lost cause.


-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
             Research is the transformation of money to knowledge.
            Innovation is the transformation of knowledge to money.
                              -- Dr. Hans Meixner


From mark.hatsell at btinternet.com  Tue Jan 15 17:29:02 2008
From: mark.hatsell at btinternet.com (Mark Hatsell)
Date: Tue, 15 Jan 2008 23:29:02 -0000
Subject: Status of d3d in a child window?
Message-ID: <fmjfk1$1i4$1@ger.gmane.org>

Hello All

I was just wondering what the status was of D3D in a child window. Looking 
back at the release info it seems that the OpenGL in a child window has been 
sorted and that D3D has been converted to use WGL. Is this not enough to get 
D3D in a child window going?

I have tried the mfctex sample but it draws the D3D child window in slightly 
the wrong place and doesn't render anything at all. I have also tried a 
couple of other apps which also exhibit similar behaviour.

Just wondered what else needed fixing before this would work?

Thanks
Mark





From dank at kegel.com  Tue Jan 15 20:18:14 2008
From: dank at kegel.com (Dan Kegel)
Date: Tue, 15 Jan 2008 18:18:14 -0800
Subject: Valgrinding large win32 app worked!
Message-ID: <a71bd89a0801151818n53c98b2i566afe3b0f94c166@mail.gmail.com>

This script,
http://kegel.com/wine/valgrind/valgrind-330-build.sh
builds a copy of valgrind-3.3.0 with
John Reiser's forward port of the Wine support patch.
With that, I can run Picasa for Windows under Wine under Valgrind.
It takes 40 seconds to start up on my 1.3GHz Athlon 64,
which is right in line with Valgrind's legendary ~10x overhead.

It seemed to find lots of little problems, but since there
were lots of numeric addresses without symbolic info in the
valgrind log, it wasn't directly useful to the Picasa developers.

The next step, I suppose, is to find a way to make the valgrind
log contain symbolic identifiers for the functions in the Windows app.
I looked at that for a few minutes; here are some notes that
might provide a starting point.

http://www.debuginfo.com/articles/gendebuginfo.html is the best
overview I've seen so far on how to tell Visual C++ to generate
debugging info; for most apps, the preferred debug info format will be .pdb.

http://www.debuginfo.com/articles/dbghelptypeinfo.html has an example
win32 app that will dump all public symbols from a win32 app.
It runs fine on Windows XP, and can dump symbols for Picasa
(generating a 9MB text file).  (I happen to have the .pdb file for Picasa
handy since I are an honorary Picasa developer.)
Sadly, that symbol dumper crashes on Wine, see
http://bugs.winehq.org/show_bug.cgi?id=11211

Also,  the unresolved error addresses in the valgrind trace were mostly
in the 0x400000 - 0x420000 range, whereas the symbols dumped
by that dumper app were all in the range 0x1000000 - 0x1080000...
maybe the base load address is different between the two OS's.
I haven't tried valgrinding a toy app yet, but that's probably the easiest
way to figure out how to match the symbols up.
- Dan


From winehacker at gmail.com  Tue Jan 15 23:08:26 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Wed, 16 Jan 2008 00:08:26 -0500
Subject: Towards Zero Test Suite Failures
In-Reply-To: <alpine.DEB.0.999999.0801152327090.8935@amboise.dolphin>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>
	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>
	<3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>
	<200801141914.10423.stefan@codeweavers.com>
	<alpine.DEB.0.999999.0801152327090.8935@amboise.dolphin>
Message-ID: <19e31a080801152108y3122c9e8we6129628f4549b8@mail.gmail.com>

On Jan 15, 2008 6:03 PM, Francois Gouget <fgouget at free.fr> wrote:
> > This Examples of "broken" Windows installations are VMware
> > installations with Direct3D support enabled. VMWare has a D3D driver
> > that works similarly to Wine, but has a few bugs that our tests
> > stumble uppon.
>
> <rant>
>
> This gets mentioned *every single time*.
>
> For what it's worth, as far as I know none of the tests I run (the
> 'fg-xxx' ones) has that D3D driver you speak of.
>
> They still have failures in the Direct3D tests but if you check the
> Windows XP results, you will see that my logs show only two Direct3D
> tests failing. That's very little compared to the 73 other tests that
> fail... for the Windows XP results alone.
>
> So I'd like people to focus a little bit less on these two Direct3D
> failures and a little bit more on the 73 other failures. That the tests
> are being run in VMware is no excuse for not looking at them. If these
> 73 failing tests were fixed that would be a huge step for the
> conformance test suite.
>
> </rant>

+1

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From dank at kegel.com  Tue Jan 15 23:24:22 2008
From: dank at kegel.com (Dan Kegel)
Date: Tue, 15 Jan 2008 21:24:22 -0800
Subject: Time to create a stub wmvcore.dll?
Message-ID: <a71bd89a0801152124y5f923f18r4ec41577aa7ca475@mail.gmail.com>

There seem to be a large number of apps that don't
start unless a wmvcore.dll is present:
 TVersity
 Phatnoise
 Lost Planet
 The Bard's Tale
 WMA Workshop
 MixMeister
 ...
So, how 'bout it?  Should we create a stub for wmvcore.dll and friends?
- Dan


From stefan at codeweavers.com  Wed Jan 16 01:17:57 2008
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Wed, 16 Jan 2008 08:17:57 +0100
Subject: Status of d3d in a child window?
In-Reply-To: <fmjfk1$1i4$1@ger.gmane.org>
References: <fmjfk1$1i4$1@ger.gmane.org>
Message-ID: <200801160817.57209.stefan@codeweavers.com>

Am Mittwoch, 16. Januar 2008 00:29:02 schrieb Mark Hatsell:
> Hello All
>
> I was just wondering what the status was of D3D in a child window. Looking
> back at the release info it seems that the OpenGL in a child window has
> been sorted and that D3D has been converted to use WGL. Is this not enough
> to get D3D in a child window going?
Yes

> I have tried the mfctex sample but it draws the D3D child window in
> slightly the wrong place and doesn't render anything at all. I have also
> tried a couple of other apps which also exhibit similar behaviour.
>
> Just wondered what else needed fixing before this would work?
Which video card and driver do you have? The child window code has quite a few 
requirements, and it uses some AIGLX and Compositing features.


From luis.busquets at ilidium.com  Wed Jan 16 01:18:32 2008
From: luis.busquets at ilidium.com (luis.busquets at ilidium.com)
Date: Wed, 16 Jan 2008 08:18:32 +0100 (CET)
Subject: GDI32.dll.NamedEscape
In-Reply-To: <478BD8BC.1020305@codeweavers.com>
References: <478BD7DE.4000507@ilidium.com> <478BD8BC.1020305@codeweavers.com>
Message-ID: <41011.158.169.9.14.1200467912.squirrel@www.ilidium.com>

No. I am not using any native dll.

The program to install hangs the moment I pres the button "Install" and
aborts saying that:

wine: Call from 0x73ba1895 to unimplemented function
GDI32.dll.NamedEscape, aborting


> Luis C. Busquets P?rez wrote:
>> I am having problems with a bunch of three games that came together in
>> the same pack. They all abort qhen asking for installation with the
>> following line
>>
>> wine: Call from 0x73ba1895 to unimplemented function
>> GDI32.dll.NamedEscape, aborting
>>
>> Does anybody know what GDI32.dll.NamedEscape does?
>>
>
> It appears to be undocumented. Are you using some native DLLs by any
> chance?
>
> --
> Rob Shearman
>
>




From dmitry at codeweavers.com  Wed Jan 16 01:23:45 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Wed, 16 Jan 2008 15:23:45 +0800
Subject: GDI32.dll.NamedEscape
References: <478BD7DE.4000507@ilidium.com> <478BD8BC.1020305@codeweavers.com>
	<41011.158.169.9.14.1200467912.squirrel@www.ilidium.com>
Message-ID: <002b01c85810$bca30360$a600fea9@DMITRY>

<luis.busquets at ilidium.com> wrote:

> No. I am not using any native dll.
> 
> The program to install hangs the moment I pres the button "Install" and
> aborts saying that:
> 
> wine: Call from 0x73ba1895 to unimplemented function
> GDI32.dll.NamedEscape, aborting

I'd suggest to open a bug for this and attach there full output of an attempt
to run the application.

-- 
Dmitry.


From thunderbird2k at gmx.net  Wed Jan 16 04:20:13 2008
From: thunderbird2k at gmx.net (Roderick Colenbrander)
Date: Wed, 16 Jan 2008 11:20:13 +0100
Subject: Status of d3d in a child window?
In-Reply-To: <200801160817.57209.stefan@codeweavers.com>
References: <fmjfk1$1i4$1@ger.gmane.org>
	<200801160817.57209.stefan@codeweavers.com>
Message-ID: <20080116102013.258840@gmx.net>

> Am Mittwoch, 16. Januar 2008 00:29:02 schrieb Mark Hatsell:
> > Hello All
> >
> > I was just wondering what the status was of D3D in a child window.
> Looking
> > back at the release info it seems that the OpenGL in a child window has
> > been sorted and that D3D has been converted to use WGL. Is this not
> enough
> > to get D3D in a child window going?
> Yes
> 
> > I have tried the mfctex sample but it draws the D3D child window in
> > slightly the wrong place and doesn't render anything at all. I have also
> > tried a couple of other apps which also exhibit similar behaviour.
> >
> > Just wondered what else needed fixing before this would work?
> Which video card and driver do you have? The child window code has quite a
> few 
> requirements, and it uses some AIGLX and Compositing features.
> 

Second not all 'child window rendering issues' are over. OpenGL/Direct3D apps that have a file menu and for the rest a 3D view, still don't work. I hope to fix those cases in the near future but the patch will affect ALL graphical programs on Wine, so that's why it requires a lot of testing (the patch is close but not yet done).

Roderick
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail


From julliard at winehq.org  Wed Jan 16 06:24:39 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 16 Jan 2008 13:24:39 +0100
Subject: ntdll: Do not perform base relocation if an image is not a DLL
In-Reply-To: <E1JF0zL-0001qf-PD@mail.codeweavers.com> (Dmitry Timoshkov's
	message of "Wed, 16 Jan 2008 13:39:01 +0800")
References: <E1JF0zL-0001qf-PD@mail.codeweavers.com>
Message-ID: <87d4s23qm0.fsf@wine.dyndns.org>

Dmitry Timoshkov <dmitry at codeweavers.com> writes:

> Hello,
>
> this patch fixes the problem reported in the bug 11170. It appears that
> LoadLibrary in Windows doesn't attempt to relocate .exe files.
>
> Changelog:
>     ntdll: Do not perform base relocation if an image is not a DLL.

This will break the relocation of the main exe.

-- 
Alexandre Julliard
julliard at winehq.org


From kubrick at fgv6.net  Wed Jan 16 07:25:38 2008
From: kubrick at fgv6.net (kubrick at fgv6.net)
Date: Wed, 16 Jan 2008 14:25:38 +0100 (CET)
Subject: Suggestion to the list maintainer
Message-ID: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>

Hello.

I have many subscriptions to different mailing list with my email-address and I'd appreciate a lot to be able to identify a
message from this mailing list quickly by reading it's subject.
Could you please add a subject prefix like [WINE-DEVEL] in the mailman preferences ? It's very easy to do, so maybe there is a
good reason why you haven't done it yet...

Thanks.
Fran?ois.



From jnewman at codeweavers.com  Wed Jan 16 08:06:26 2008
From: jnewman at codeweavers.com (Jeremy Newman)
Date: Wed, 16 Jan 2008 08:06:26 -0600
Subject: Suggestion to the list maintainer
In-Reply-To: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
Message-ID: <478E0F62.8000902@codeweavers.com>

You can always filter the messages into a folder using the List-Id field 
in the message headers. It looks like this for the wine-devel list.

List-Id: Wine Developer's List <wine-devel.winehq.org>

kubrick at fgv6.net wrote:
> I have many subscriptions to different mailing list with my email-address and I'd appreciate a lot to be able to identify a
> message from this mailing list quickly by reading it's subject.
> Could you please add a subject prefix like [WINE-DEVEL] in the mailman preferences ? It's very easy to do, so maybe there is a
> good reason why you haven't done it yet...


From research at science.su  Wed Jan 16 08:12:08 2008
From: research at science.su (L. Rahyen)
Date: Wed, 16 Jan 2008 14:12:08 +0000
Subject: Suggestion to the list maintainer
In-Reply-To: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
Message-ID: <200801161412.08979.research@science.su>

On Wednesday January 16 2008 13:25:38 kubrick at fgv6.net wrote:
> Hello.
>
> I have many subscriptions to different mailing list with my email-address
> and I'd appreciate a lot to be able to identify a message from this mailing
> list quickly by reading it's subject.
> Could you please add a subject prefix like [WINE-DEVEL] in the mailman
> preferences ? It's very easy to do, so maybe there is a good reason why you
> haven't done it yet...

	Personally I detect messages for this list by searching for 
wine-devel at winehq.org in CC, From or To fields. That works perfectly. 
I use this method for all mailing lists and this always works.
	Adding a prefix is very ugly in my opinion and there is no good technical 
reason for that. Just set up your filters properly as I suggested and this 
will work without problems - for any mailing list.


From kubrick at fgv6.net  Wed Jan 16 08:28:07 2008
From: kubrick at fgv6.net (kubrick at fgv6.net)
Date: Wed, 16 Jan 2008 15:28:07 +0100 (CET)
Subject: Suggestion to the list maintainer
In-Reply-To: <200801161412.08979.research@science.su>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
	<200801161412.08979.research@science.su>
Message-ID: <53806.195.6.79.173.1200493687.squirrel@www.fgv6.net>

Thanks for your answers.

I already use such filters in my mail client, which sorts my mails when I launch it at home, a few times a week :) My problem
was that the rest of the time (most of the time in fact) I read my mails for Squirrelmail, which can not do such sorting unless
I have server-side filtering plugins installed.
But looking deeper in the options I've just found that "Messages Highlighting" based on CC/TO is fitting my needs. So let's
close this topic which is off-topic :)
Sorry for the noise.

Bye.
Fran?ois.

PS : I do find Subject prefixes ugly too... Bu I hadn't found a more handy solution.

> On Wednesday January 16 2008 13:25:38 kubrick at fgv6.net wrote:
>> Hello.
>>
>> I have many subscriptions to different mailing list with my email-address
>> and I'd appreciate a lot to be able to identify a message from this mailing
>> list quickly by reading it's subject.
>> Could you please add a subject prefix like [WINE-DEVEL] in the mailman
>> preferences ? It's very easy to do, so maybe there is a good reason why you
>> haven't done it yet...
>
> 	Personally I detect messages for this list by searching for
> wine-devel at winehq.org in CC, From or To fields. That works perfectly.
> I use this method for all mailing lists and this always works.
> 	Adding a prefix is very ugly in my opinion and there is no good technical
> reason for that. Just set up your filters properly as I suggested and this
> will work without problems - for any mailing list.
>




From dmitry at codeweavers.com  Wed Jan 16 08:39:35 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Wed, 16 Jan 2008 22:39:35 +0800
Subject: Request for patch removal
References: <478DAA25.10900@gmx.net>
Message-ID: <004d01c8584d$9f3759b0$a600fea9@DMITRY>

"Federico Vecchiarelli" <fedev at gmx.net> wrote:

> Ok, to the point. The patch mentioned below prohibits wine from running 
> any application which is inside someone else's folder, even if you have 
> access to it. In my case, I wanted to make one unique installation 
> available to several users. Because of this patch, there is no 
> workaround that could be implemented, forcing me to either run a script 
> changing the owner of the folders for every user as they want to use the 
> application or I have to make several copies of the software which will 
> put me in a difficult legal situation.

All the details about this problem you can find here:

http://bugs.winehq.org/show_bug.cgi?id=11112

-- 
Dmitry.


From kde at graph-ix.net  Wed Jan 16 08:43:29 2008
From: kde at graph-ix.net (Markus)
Date: Wed, 16 Jan 2008 15:43:29 +0100
Subject: Shader compiler GL error
Message-ID: <200801161543.29454.kde@graph-ix.net>

Hi,

while trying to fix the bug I posted a few days ago, the game's developer 
pointed out on request that the ingame shader issues are not related to the 
graphics card detection but more likely to a failing shader compilation.

They are using d3d9_33.dll for development and recommended to try with this 
version. I've thus removed all other versions of the library and also deleted 
the game's cached shaders. The game now crashes on startup with the following 
error:
fixme:d3d_surface:flush_to_framebuffer_drawpixels >>>>>>>>>>>>>>>>> 
GL_INVALID_VALUE (0x501) from glDrawPixels @ surface.c / 1061

If I use d3d9_31.dll instead, the shaders are compiled and the game starts but 
the water is again looking like a low-end fallback.

Any ideas on this?

Regards,
-- 
Markus


From paul.vriens.wine at gmail.com  Wed Jan 16 08:46:11 2008
From: paul.vriens.wine at gmail.com (Paul Vriens)
Date: Wed, 16 Jan 2008 15:46:11 +0100
Subject: Towards Zero Test Suite Failures
In-Reply-To: <a71bd89a0801140813v677cd2a5i5a046fcdc881be7d@mail.gmail.com>
References: <a71bd89a0801131553k305c3cf8x655c7f0b1dbb8ff1@mail.gmail.com>	<b050a5e70801132030u25c2c7c4uaa7aa6dcdd0baba8@mail.gmail.com>	<a71bd89a0801132150w71bfa479v27af0f20949d4f71@mail.gmail.com>	<3f4fd2640801140541i3cbb8a0i3f34b0903d7cb360@mail.gmail.com>
	<a71bd89a0801140813v677cd2a5i5a046fcdc881be7d@mail.gmail.com>
Message-ID: <478E18B3.3030804@gmail.com>

Dan Kegel wrote:
> Yep.  And at some point we should indeed make Windows XP
> the default personality in Wine.  Seems like a 1.0 kind of thing.

But that should be done way before 1.0 to overcome any regressions.

-- 
Cheers,

Paul.


From dank at kegel.com  Wed Jan 16 09:58:41 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 16 Jan 2008 07:58:41 -0800
Subject: Request for patch removal
Message-ID: <a71bd89a0801160758v3fb371f3p522dcf90cadb3df5@mail.gmail.com>

"Federico Vecchiarelli" <fedev at gmx.net> wrote:
> ... I wanted to make one unique installation
> available to several users. Because of this patch, there is no
> workaround that could be implemented, forcing me to either run a script
> changing the owner of the folders for every user as they want to use the
> application or I have to make several copies of the software which will
> put me in a difficult legal situation.

Since it seems from your description that
the users don't need to share a copy of the registry,
the solution is probably to do what Picasa for Linux
does, and just put symlinks to the installed files
into each user's .wine directory.  You will need to
write a little script that starts the app after
creating these links.   You can see how to do this
by installing Picasa and looking at /opt/picasa/bin/wrapper,
it does exactly this.
- Dan


From sbrown7 at umbc.edu  Wed Jan 16 10:01:55 2008
From: sbrown7 at umbc.edu (Steve Brown)
Date: Wed, 16 Jan 2008 11:01:55 -0500 (EST)
Subject: Request for patch removal
In-Reply-To: <004d01c8584d$9f3759b0$a600fea9@DMITRY>
References: <478DAA25.10900@gmx.net> <004d01c8584d$9f3759b0$a600fea9@DMITRY>
Message-ID: <Pine.LNX.4.64.0801161045430.22239@linux2.gl.umbc.edu>

On Wed, 16 Jan 2008, Dmitry Timoshkov wrote:

> "Federico Vecchiarelli" <fedev at gmx.net> wrote:
>
>> Ok, to the point. The patch mentioned below prohibits wine from running
>> any application which is inside someone else's folder, even if you have
>> access to it. In my case, I wanted to make one unique installation
>> available to several users. Because of this patch, there is no
>> workaround that could be implemented, forcing me to either run a script
>> changing the owner of the folders for every user as they want to use the
>> application or I have to make several copies of the software which will
>> put me in a difficult legal situation.
>
> All the details about this problem you can find here:
>
> http://bugs.winehq.org/show_bug.cgi?id=11112
>
> -- 
> Dmitry.

Allow me to add my voice on this subject.  I also would like the Wine 
developers to consider how to allow for this use case.  In a centrally 
administered environment, most users do not have write access to much of 
the local disk, and the administrator of the machine (root) sets up the 
environment for them (and normal users should not be allowed to muck with 
it).  I am administrator for a small group of folks here, and would switch 
to Linux only -- but there are still Windows-only programs that are 
critical for my users.  Wine would be a wonderful solution, if only wine 
could be installed in a central location (say, /usr/local) and the wine 
"registry" files could be shared, somehow, by all users on the machine 
(maybe by doing a union of ~/.wine and /usr/local/wine/whatever).

I see in the comments on this bug, that the concern is with multiple 
instances of wineserver running on the machine at one time -- that's not a 
major issue in the use case I envision.  The multiple wineservers would 
not be running at the same time (unless the install is on what Windows 
would call a Terminal Services Server -- a normal multi-user *nix 
machine).  I think that even just allowing for multiple login users on a 
local machine at different times would be sufficient for a lot of us.  If, 
say, ~/.wine was used as a replacement for HKLM\Current User and, say, 
/usr/local/wine/whatever was for the other registry hives and group 
policies, I think wine would be a lot closer to being a solution for those 
of us maintaining multi-user machines.

Steve Brown
Systems Administrator
UMBC Imaging Research Center
sbrown7 at umbc.edu


From thunderbird2k at gmx.net  Wed Jan 16 11:41:46 2008
From: thunderbird2k at gmx.net (Roderick Colenbrander)
Date: Wed, 16 Jan 2008 18:41:46 +0100
Subject: Shader compiler GL error
In-Reply-To: <200801161543.29454.kde@graph-ix.net>
References: <200801161543.29454.kde@graph-ix.net>
Message-ID: <20080116174146.283450@gmx.net>

> the game's cached shaders. The game now crashes on startup with the
> following 
> error:
> fixme:d3d_surface:flush_to_framebuffer_drawpixels >>>>>>>>>>>>>>>>> 
> GL_INVALID_VALUE (0x501) from glDrawPixels @ surface.c / 1061

You should try running the app with '+d3d_surface' on. The fixme you show indicates a GL_INVALID_VALUE, this crash is either from glDrawPixels or a call before it as we don't have glError calls around each function. Likely some parameter to the function is invalid.

Roderick
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail


From mark.hatsell at btinternet.com  Wed Jan 16 12:01:49 2008
From: mark.hatsell at btinternet.com (Mark Hatsell)
Date: Wed, 16 Jan 2008 18:01:49 -0000
Subject: Status of d3d in a child window?
References: <fmjfk1$1i4$1@ger.gmane.org>
	<200801160817.57209.stefan@codeweavers.com>
Message-ID: <fmlgqg$ji7$1@ger.gmane.org>

Thanks Stefan. I thought it should be possible.

I upgraded my NVidia driver and things are a lot better now. Incidentally, 
is there a known minimum graphics hardware and driver level to get this 
child window stuff working?

mfctex.exe now works OK, although the D3D child window still seems to be in 
slightly the wrong place (see http://www.hatsell.com/mfctex_screenshot.png). 
I also tried an MDI app that has a separate MDI child for each D3D window. 
This worked perfectly for the first child window but crashed out when 
opening a second child. Is this expected behavior at the moment?

Thanks
Mark


"Stefan D?singer" <stefan at codeweavers.com> wrote in message 
news:200801160817.57209.stefan at codeweavers.com...
> Am Mittwoch, 16. Januar 2008 00:29:02 schrieb Mark Hatsell:
>> Hello All
>>
>> I was just wondering what the status was of D3D in a child window. 
>> Looking
>> back at the release info it seems that the OpenGL in a child window has
>> been sorted and that D3D has been converted to use WGL. Is this not 
>> enough
>> to get D3D in a child window going?
> Yes
>
>> I have tried the mfctex sample but it draws the D3D child window in
>> slightly the wrong place and doesn't render anything at all. I have also
>> tried a couple of other apps which also exhibit similar behaviour.
>>
>> Just wondered what else needed fixing before this would work?
> Which video card and driver do you have? The child window code has quite a 
> few
> requirements, and it uses some AIGLX and Compositing features.
>
>
> 





From kde at graph-ix.net  Wed Jan 16 12:12:31 2008
From: kde at graph-ix.net (Markus)
Date: Wed, 16 Jan 2008 19:12:31 +0100
Subject: Shader compiler GL error
In-Reply-To: <20080116174146.283450@gmx.net>
References: <200801161543.29454.kde@graph-ix.net>
	<20080116174146.283450@gmx.net>
Message-ID: <200801161912.31518.kde@graph-ix.net>

On Wednesday 16 January 2008 18:41:46 you wrote:
> > the game's cached shaders. The game now crashes on startup with the
> > following
> > error:
> > fixme:d3d_surface:flush_to_framebuffer_drawpixels >>>>>>>>>>>>>>>>>
> > GL_INVALID_VALUE (0x501) from glDrawPixels @ surface.c / 1061
>
> You should try running the app with '+d3d_surface' on.

Here is (hopefully relevant) output with +d3d_surface set:

trace:d3d_surface:IWineD3DSurfaceImpl_LoadLocation Surface 0x4e8fdf0 is an 
onscreen surface
trace:d3d_surface:IWineD3DSurfaceImpl_LoadLocation 
(0x4e8fdf0)->(SFLAG_INDRAWABLE, (nil))
trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetPitch (0x4e8fdf0)
trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetPitch (0x4e8fdf0) Returning 6400
trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetPitch (0x4e8fdf0)
trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetPitch (0x4e8fdf0) Returning 6400
trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetContainer (This 0x4e8fdf0, riid 
{34d01b10-6f30-11d9-c687-00046142c14f}, ppContainer 0x1a9daa8)
trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetContainer Relaying to 
QueryInterface
trace:d3d_surface:surface_get_gl_buffer (0x4e8fdf0) : swapchain 0x4e7cc58
trace:d3d_surface:surface_get_gl_buffer Returning GL_BACK
trace:d3d_surface:flush_to_framebuffer_drawpixels Unlocking 0x405 buffer
trace:d3d_surface:flush_to_framebuffer_drawpixels glDrawBuffer call ok 
surface.c / 1015
fixme:d3d_surface:flush_to_framebuffer_drawpixels >>>>>>>>>>>>>>>>> 
GL_INVALID_VALUE (0x501) from glDrawPixels @ surface.c / 1061
trace:d3d_surface:flush_to_framebuffer_drawpixels glDrawBuffer(GL_BACK) call 
ok surface.c / 1087
trace:d3d_surface:IWineD3DSurfaceImpl_ModifyLocation 
(0x4e8fdf0)->(SFLAG_INDRAWABLE, TRUE)
trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetContainer (This 0x4e8fdf0, riid 
{34d01b10-6f30-11d9-c687-00046142c14f}, ppContainer 0x1a9dbc0)


Let me know if more info is needed.

-- 
Markus


From research at science.su  Wed Jan 16 12:57:52 2008
From: research at science.su (L. Rahyen)
Date: Wed, 16 Jan 2008 18:57:52 +0000
Subject: Request for patch removal
In-Reply-To: <Pine.LNX.4.64.0801161045430.22239@linux2.gl.umbc.edu>
References: <478DAA25.10900@gmx.net> <004d01c8584d$9f3759b0$a600fea9@DMITRY>
	<Pine.LNX.4.64.0801161045430.22239@linux2.gl.umbc.edu>
Message-ID: <200801161857.53546.research@science.su>

On Wednesday January 16 2008 16:01:55 Steve Brown wrote:
> I see in the comments on this bug, that the concern is with multiple
> instances of wineserver running on the machine at one time -- that's not a
> major issue in the use case I envision.  The multiple wineservers would
> not be running at the same time (unless the install is on what Windows
> would call a Terminal Services Server -- a normal multi-user *nix
> machine).

	In practice even if you have multiple wineservers running this isn't too big 
problem (however, it *is* a problem). In fact I have used this for my 
multiuser setup for years and never know about possibility of registry 
curruption. I even thought that there is no problems at all with multiple 
wineservers (in fact *noticeable* registry-related problems are quite rare in 
my case). Now I know that multiple wineservers don't work perfectly together 
and what was the cause of some registry-related problems in my setup. BTW, in 
my setup 3 users share some of WINE prefixes and some Windows programs work 
for all users simultaneously in one WINE prefix.
	Don't think that above means you can forget and ignore that bug! You cannot! 
It needs to be fixed and while it isn't fixed you may (and probably will) face 
with problems like overwriting the registry with older version. For example, 
one user may install program and then correctly shutdown wineserver (for 
example by closing all programs). This will write out registry files to disk. 
Then other user will do that too (without installing anything) and you (or 
user who installed a program) will lose all new registry keys created by the 
installer. Depending on the setup, wineserver can write to the registry and 
possibly overwrite changes made by other users - generally this can happen at 
any time.
	Technically this is very bad, but in practice it is possible to live with it 
if you and your users do not use registry very intensively and do not store 
there very important information. Especially this is true if your users 
rarely run wineservers simultaneously.
	However, if you and your users need 100% reliable setup don't even try! 
There is no locks of any kind so even if you think that your users 
will not run wineservers in WINE prefix at the same time - they still can do 
that, and this can lead to some loses in the registry. Theoretically you can 
create a lock by writing a wrapper script but use of locks is just another 
hack and will not solve the main problem anyway (use of multiple 
wineservers), it needs to be fixed properly.
	You can bypass the check by using symlinks if you *really* 
need this; if you unsure you can just try this and see if it works good enough 
for you and your users (feel free to ask me if you need more instructions or 
help with such setup). And of course don't forget to backup registry before 
trying...
	But remember that this is *strongly discouraged* practice for obvious 
reasons! This is exactly why the patch in question was committed. Therefore 
bypassing the security check is not recommended!
	We really need to fix that bug to allow reliable multiuser setups...


From julliard at winehq.org  Wed Jan 16 13:19:07 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 16 Jan 2008 20:19:07 +0100
Subject: autorun perhaps dangerous (Was: Wine release 0.9.53)
In-Reply-To: <47889BD1.3050200@open-vote.org> (Scott Ritchie's message of
	"Sat, 12 Jan 2008 02:52:01 -0800")
References: <20080111163604.EFD881E7146@wine.dyndns.org>
	<20080111164805.GA32539@suse.de> <47889BD1.3050200@open-vote.org>
Message-ID: <871w8h4lzo.fsf@wine.dyndns.org>

Scott Ritchie <scott at open-vote.org> writes:

> We might want to add an option for only executing these on wineboot.
> Hell, we might want to make this the default unless the user has a new
> Wine installation made with wineprefixcreate.
>
> As it is, this change might break things.

Any change might break things, that has never stopped us before ;-)

I agree we need a way to configure the Run entries to be able to remove
worms and other nuisances, but if running a legitimate app causes
trouble we want to fix it, not just force users to disable it; and the
way to find out about it is by running these entries and seeing what
happens.

Still, we don't need to debug it all at once, so I've disabled the Run
entries for now. This way we can first concentrate on fixing trouble
caused by services and RunOnce entries; but once this is done we
definitely want to enable them again.

-- 
Alexandre Julliard
julliard at winehq.org


From thunderbird2k at gmx.net  Wed Jan 16 13:31:51 2008
From: thunderbird2k at gmx.net (Roderick Colenbrander)
Date: Wed, 16 Jan 2008 20:31:51 +0100
Subject: Shader compiler GL error
In-Reply-To: <200801161912.31518.kde@graph-ix.net>
References: <200801161543.29454.kde@graph-ix.net>
	<20080116174146.283450@gmx.net> <200801161912.31518.kde@graph-ix.net>
Message-ID: <20080116193151.250730@gmx.net>


-------- Original-Nachricht --------
> Datum: Wed, 16 Jan 2008 19:12:31 +0100
> Von: Markus <kde at graph-ix.net>
> An: "Roderick Colenbrander" <thunderbird2k at gmx.net>, wine-devel at winehq.org
> Betreff: Re: Shader compiler GL error

> On Wednesday 16 January 2008 18:41:46 you wrote:
> > > the game's cached shaders. The game now crashes on startup with the
> > > following
> > > error:
> > > fixme:d3d_surface:flush_to_framebuffer_drawpixels >>>>>>>>>>>>>>>>>
> > > GL_INVALID_VALUE (0x501) from glDrawPixels @ surface.c / 1061
> >
> > You should try running the app with '+d3d_surface' on.
> 
> Here is (hopefully relevant) output with +d3d_surface set:
> 
> trace:d3d_surface:IWineD3DSurfaceImpl_LoadLocation Surface 0x4e8fdf0 is an
> onscreen surface
> trace:d3d_surface:IWineD3DSurfaceImpl_LoadLocation 
> (0x4e8fdf0)->(SFLAG_INDRAWABLE, (nil))
> trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetPitch (0x4e8fdf0)
> trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetPitch (0x4e8fdf0) Returning
> 6400
> trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetPitch (0x4e8fdf0)
> trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetPitch (0x4e8fdf0) Returning
> 6400
> trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetContainer (This 0x4e8fdf0,
> riid 
> {34d01b10-6f30-11d9-c687-00046142c14f}, ppContainer 0x1a9daa8)
> trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetContainer Relaying to 
> QueryInterface
> trace:d3d_surface:surface_get_gl_buffer (0x4e8fdf0) : swapchain 0x4e7cc58
> trace:d3d_surface:surface_get_gl_buffer Returning GL_BACK
> trace:d3d_surface:flush_to_framebuffer_drawpixels Unlocking 0x405 buffer
> trace:d3d_surface:flush_to_framebuffer_drawpixels glDrawBuffer call ok 
> surface.c / 1015
> fixme:d3d_surface:flush_to_framebuffer_drawpixels >>>>>>>>>>>>>>>>> 
> GL_INVALID_VALUE (0x501) from glDrawPixels @ surface.c / 1061
> trace:d3d_surface:flush_to_framebuffer_drawpixels glDrawBuffer(GL_BACK)
> call 
> ok surface.c / 1087
> trace:d3d_surface:IWineD3DSurfaceImpl_ModifyLocation 
> (0x4e8fdf0)->(SFLAG_INDRAWABLE, TRUE)
> trace:d3d_surface:IWineD3DBaseSurfaceImpl_GetContainer (This 0x4e8fdf0,
> riid 
> {34d01b10-6f30-11d9-c687-00046142c14f}, ppContainer 0x1a9dbc0)
> 

You should get see what gets passed to glDrawPixels. According to the opengl man pages GL_INVALID_VALUE can occur if e.g. the dimensions are invalid. If these are indeed invalid, you need to figure out why they are wrong (I see that the pitch is 6400, which could mean a width of 1600 assuming bpp=4)

Roderick
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail


From stefandoesinger at gmx.at  Wed Jan 16 13:47:03 2008
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Wed, 16 Jan 2008 20:47:03 +0100
Subject: Request for patch removal
In-Reply-To: <200801161857.53546.research@science.su>
References: <478DAA25.10900@gmx.net>
	<Pine.LNX.4.64.0801161045430.22239@linux2.gl.umbc.edu>
	<200801161857.53546.research@science.su>
Message-ID: <200801162047.03783.stefandoesinger@gmx.at>

Am Mittwoch, 16. Januar 2008 19:57:52 schrieb L. Rahyen:
> 	We really need to fix that bug to allow reliable multiuser setups...
Maybe the proper solution is one wineserver running globally, as a special 
user("wine", "root" or whatever), started at system boot. A global registry 
and dosdevice setup somewhere in /etc/, the fake C drive global, just the 
user.reg in every user's home. The wine instances started by the user connect 
to wineserver then, etc.

However, if we do this, we'll have to care for security. We need 
authentication, secure IPC, secure resource handle access, provide security 
updates, etc. Currently, we do not care much about security, and as a 
consequence, we do not give any code of wine any special privileges, so Wine 
is not a security thread(Other than allowing Viruses to run, but that is 
inherent to its functionality).

But dealing with security requires manpower. We have to implement all this, 
audit the code, etc. Wine is already a huge effort, and we're starving of 
manpower. I think the existing manpower is better spent at improving our 
Windows API implementation instead of diving into security hell. Patches are 
welcome though ;-)

*** snip ***

I once used the following setup:

*) A shared C drive(/opt/windows), owned by a special user wine
*) A shared ~/.wine in /etc/wine, owned by user wine.
*) A private ~/.wine in each user's home
*) dosdevices, system.reg and userdef.reg symlinked from /etc/wine to ~/.wine
*) A private user.reg for each user
*) C:\windows\profiles\($USER) symlinked to a folder in the user's home

The shared files(/opt/windows, /etc/wine) were read-only for everyone except 
wine. This way, each user had his own HKEY_CURRENT_USER, and I shared 
HKEY_LOCAL_MACHINE and the application installation directory among all 
users. HKEY_LOCAL_MACHINE was even write protected for all but by 
administrator wine user. Every user could modify it, but wineserver would 
fail to write the changes to system.reg, so the changes weren't persistent. 
No overwriting of registry files across accounts was possible because the 
shared files were write protected, and user.reg was private for each user.

For well-behaved apps this worked like a charm. Each user could safe his own 
preferences and was protected against accidentally messing up the 
installation. However, I eventually dropped that setup because it was a pain 
with games and many other apps, and I am in fact using my machines alone, so 
a multiuser setup was pointless. The catch compared to real multiuser support 
was that Windows processes belonging to different users could not see each 
other, and no IPC was possible across users. Furthermore the initial setting 
was tricky.


From kde at graph-ix.net  Wed Jan 16 14:20:30 2008
From: kde at graph-ix.net (Markus)
Date: Wed, 16 Jan 2008 21:20:30 +0100
Subject: Shader compiler GL error
In-Reply-To: <20080116193151.250730@gmx.net>
References: <200801161543.29454.kde@graph-ix.net>
	<200801161912.31518.kde@graph-ix.net>
	<20080116193151.250730@gmx.net>
Message-ID: <200801162120.30996.kde@graph-ix.net>

On Wednesday 16 January 2008 20:31:51 you wrote:
> > fixme:d3d_surface:flush_to_framebuffer_drawpixels >>>>>>>>>>>>>>>>>
> > GL_INVALID_VALUE (0x501) from glDrawPixels @ surface.c / 1061
>
> You should get see what gets passed to glDrawPixels. According to the
> opengl man pages GL_INVALID_VALUE can occur if e.g. the dimensions are
> invalid. If these are indeed invalid, you need to figure out why they are
> wrong (I see that the pitch is 6400, which could mean a width of 1600
> assuming bpp=4)

This is a trace of the variables used to create the glDrawPixels call:

trace:d3d_surface:flush_to_framebuffer_drawpixels right 0, left 0, bottom 0, 
top 0, mem 0x5db0040, bpp 4, pitch 6400

I assume GL is complaining because the rectangle passed to it has a size of 
(0,-1).

Adding a simple right>left and bottom>top condition at least resolves this 
error. However, whether that is correctly emulating D3D behavior, I don't 
know.

-- 
Markus


From eric.pouech at orange.fr  Wed Jan 16 14:25:43 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Wed, 16 Jan 2008 21:25:43 +0100
Subject: Valgrinding large win32 app worked!
In-Reply-To: <a71bd89a0801151818n53c98b2i566afe3b0f94c166@mail.gmail.com>
References: <a71bd89a0801151818n53c98b2i566afe3b0f94c166@mail.gmail.com>
Message-ID: <478E6847.7020809@orange.fr>

Dan Kegel a ?crit :
> This script,
> http://kegel.com/wine/valgrind/valgrind-330-build.sh
> builds a copy of valgrind-3.3.0 with
> John Reiser's forward port of the Wine support patch.
> With that, I can run Picasa for Windows under Wine under Valgrind.
> It takes 40 seconds to start up on my 1.3GHz Athlon 64,
> which is right in line with Valgrind's legendary ~10x overhead.
>
> It seemed to find lots of little problems, but since there
> were lots of numeric addresses without symbolic info in the
> valgrind log, it wasn't directly useful to the Picasa developers.
>
> The next step, I suppose, is to find a way to make the valgrind
> log contain symbolic identifiers for the functions in the Windows app.
> I looked at that for a few minutes; here are some notes that
> might provide a starting point.
>
> http://www.debuginfo.com/articles/gendebuginfo.html is the best
> overview I've seen so far on how to tell Visual C++ to generate
> debugging info; for most apps, the preferred debug info format will be .pdb.
>
> http://www.debuginfo.com/articles/dbghelptypeinfo.html has an example
> win32 app that will dump all public symbols from a win32 app.
> It runs fine on Windows XP, and can dump symbols for Picasa
> (generating a 9MB text file).  (I happen to have the .pdb file for Picasa
> handy since I are an honorary Picasa developer.)
> Sadly, that symbol dumper crashes on Wine, see
> http://bugs.winehq.org/show_bug.cgi?id=11211
>
> Also,  the unresolved error addresses in the valgrind trace were mostly
> in the 0x400000 - 0x420000 range, whereas the symbols dumped
> by that dumper app were all in the range 0x1000000 - 0x1080000...
> maybe the base load address is different between the two OS's.
> I haven't tried valgrinding a toy app yet, but that's probably the easiest
> way to figure out how to match the symbols up.
the hard part is not about understanding the .pdb format
our winedump already does it !!
and dbghelp supports coff and .pdb debug information (less tested than 
stabs and dwarf2 of course)

the hard part is to tell valgrind about information about modules it 
doesn't know of:
- it doesn't know about the loading of the module (it's seen by vg as a 
simple mmap)
- it doesn't know about the PE native debug information (whatever it is)

the simplest approach would be to somehow:
- use the --db-attach option in vg to hook to a debugger on every error 
(one hurdle is that valgrind doesn't allow both trace-children and 
db-attach)
- then use winedbg to get a backtrace (or similar info) from the running 
program (winedbg will be able to get to both .pdb and dwarf debug info)

the ultimate goal is rather to ask vg to support new messages about:
- loading / unloading modules
- having external .so files to understand more detailed information, and 
implement in them pdb and coff support

btw: the bug (11211) is rather strange. the crash occurs while loading 
dwarf information, not pdb. Does it occurs in every usage of winedbg ?

A+

-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From research at science.su  Wed Jan 16 14:32:05 2008
From: research at science.su (L. Rahyen)
Date: Wed, 16 Jan 2008 20:32:05 +0000
Subject: Request for patch removal
In-Reply-To: <200801162047.03783.stefandoesinger@gmx.at>
References: <478DAA25.10900@gmx.net> <200801161857.53546.research@science.su>
	<200801162047.03783.stefandoesinger@gmx.at>
Message-ID: <200801162032.06088.research@science.su>

On Wednesday January 16 2008 19:47:03 Stefan D?singer wrote:
> Am Mittwoch, 16. Januar 2008 19:57:52 schrieb L. Rahyen:
> > 	We really need to fix that bug to allow reliable multiuser setups...
>
> Maybe the proper solution is one wineserver running globally, as a special
> user("wine", "root" or whatever), started at system boot. A global registry
> and dosdevice setup somewhere in /etc/, the fake C drive global, just the
> user.reg in every user's home. The wine instances started by the user
> connect to wineserver then, etc.

	This is probably good way to solve the problem. However it seems to me that 
it will require a lot of effort to implement this properly and reliably.

> However, if we do this, we'll have to care for security. We need
> authentication, secure IPC, secure resource handle access, provide security
> updates, etc. Currently, we do not care much about security, and as a
> consequence, we do not give any code of wine any special privileges, so
> Wine is not a security thread(Other than allowing Viruses to run, but that
> is inherent to its functionality).
>
> But dealing with security requires manpower. We have to implement all this,
> audit the code, etc. Wine is already a huge effort, and we're starving of
> manpower. I think the existing manpower is better spent at improving our
> Windows API implementation instead of diving into security hell. Patches
> are welcome though ;-)

	I agree with you here. In fact this isn't too big problem (at least for me). 
But this bug probably should be solved for version 1.1 (for 1.0 we already 
have a lot of other bugs to fix).


From dank at kegel.com  Wed Jan 16 15:53:52 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 16 Jan 2008 13:53:52 -0800
Subject: Valgrinding large win32 app worked!
In-Reply-To: <478E6847.7020809@orange.fr>
References: <a71bd89a0801151818n53c98b2i566afe3b0f94c166@mail.gmail.com>
	<478E6847.7020809@orange.fr>
Message-ID: <a71bd89a0801161353y70dfc4a4h75035ecf5c11f709@mail.gmail.com>

On Jan 16, 2008 12:25 PM, Eric Pouech <eric.pouech at orange.fr> wrote:
> btw: the bug (11211) is rather strange. the crash occurs while loading
> dwarf information, not pdb. Does it occurs in every usage of winedbg ?

I'm not sure.  It happens lots, not just on this app.
I haven't looked into it at all.
- Dan


From dank06 at kegel.com  Wed Jan 16 15:55:11 2008
From: dank06 at kegel.com (Dan Kegel)
Date: Wed, 16 Jan 2008 13:55:11 -0800
Subject: Valgrinding large win32 app worked!
In-Reply-To: <478E6847.7020809@orange.fr>
References: <a71bd89a0801151818n53c98b2i566afe3b0f94c166@mail.gmail.com>
	<478E6847.7020809@orange.fr>
Message-ID: <a71bd89a0801161355j55326df3ub73f707ea9e74b7d@mail.gmail.com>

On Jan 16, 2008 12:25 PM, Eric Pouech <eric.pouech at orange.fr> wrote:
> the hard part is not about understanding the .pdb format
> our winedump already does it !!
> and dbghelp supports coff and .pdb debug information (less tested than
> stabs and dwarf2 of course)

That's good to hear.  I must have blinked :-)

> the hard part is to tell valgrind about information about modules it
> doesn't know of:
> - it doesn't know about the loading of the module (it's seen by vg as a
> simple mmap)
> - it doesn't know about the PE native debug information (whatever it is)
>
> the simplest approach would be to somehow:
> - use the --db-attach option in vg to hook to a debugger on every error
> (one hurdle is that valgrind doesn't allow both trace-children and
> db-attach)
> - then use winedbg to get a backtrace (or similar info) from the running
> program (winedbg will be able to get to both .pdb and dwarf debug info)
>
> the ultimate goal is rather to ask vg to support new messages about:
> - loading / unloading modules
> - having external .so files to understand more detailed information, and
> implement in them pdb and coff support

Thanks for the tips.  I don't suppose you'd have time to look at any
of this?  :-)
- Dan


From kai.blin at gmail.com  Wed Jan 16 16:17:44 2008
From: kai.blin at gmail.com (Kai Blin)
Date: Wed, 16 Jan 2008 23:17:44 +0100
Subject: Request for patch removal
In-Reply-To: <200801162047.03783.stefandoesinger@gmx.at>
References: <478DAA25.10900@gmx.net> <200801161857.53546.research@science.su>
	<200801162047.03783.stefandoesinger@gmx.at>
Message-ID: <200801162317.49790.kai.blin@gmail.com>

On Wednesday 16 January 2008 20:47:03 Stefan D?singer wrote:
> Am Mittwoch, 16. Januar 2008 19:57:52 schrieb L. Rahyen:
> > 	We really need to fix that bug to allow reliable multiuser setups...
>
> Maybe the proper solution is one wineserver running globally, as a special
> user("wine", "root" or whatever), started at system boot.

+1 :)

>
> However, if we do this, we'll have to care for security. We need
> authentication, secure IPC, secure resource handle access, provide security
> updates, etc. Currently, we do not care much about security, and as a
> consequence, we do not give any code of wine any special privileges, so
> Wine is not a security thread(Other than allowing Viruses to run, but that
> is inherent to its functionality).

We can probably do this similar to Windows. IIRC you get a token at log-in 
time to identify yourself with. I think running as a special user is 
sufficient, I doubt running as root is necessary.

I figure once Wine 1.0 is out, we'll have to provide security updates anyway.

> But dealing with security requires manpower. We have to implement all this,
> audit the code, etc. Wine is already a huge effort, and we're starving of
> manpower. I think the existing manpower is better spent at improving our
> Windows API implementation instead of diving into security hell. Patches
> are welcome though ;-)

+100 ;)

Cheers,
Kai

-- 
Kai Blin
WorldForge developer  http://www.worldforge.org/
Wine developer        http://wiki.winehq.org/KaiBlin
Samba team member     http://www.samba.org/samba/team/
--
Will code for cotton.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080116/2110b268/attachment.pgp 

From raccoonone at procyongames.com  Wed Jan 16 16:37:45 2008
From: raccoonone at procyongames.com (Christopher)
Date: Wed, 16 Jan 2008 14:37:45 -0800
Subject: Getting Mozy to work
Message-ID: <478E8739.9090801@procyongames.com>

An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080116/a927d046/attachment.htm 

From stefandoesinger at gmx.at  Wed Jan 16 17:58:17 2008
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Thu, 17 Jan 2008 00:58:17 +0100
Subject: Getting Mozy to work
In-Reply-To: <478E8739.9090801@procyongames.com>
References: <478E8739.9090801@procyongames.com>
Message-ID: <200801170058.18024.stefandoesinger@gmx.at>

Am Mittwoch, 16. Januar 2008 23:37:45 schrieb Christopher:
>  I'd like to get Mozy (online backup software, see mozy.com) working under
> Wine. I'm not sure I have all the skills, but I'm willing to try and write
> the necessary patches. In particular I need to fix bug 10932. This appears
> to be a problem with the fonts and/or the way text is rendered in general.
> Can anyone suggest a starting point for me? My programming experience has
> all been on Windows, so I don't know much about Wine and Linux. I tried
> looking through the output of +relay, but besides some WM_SETFONT messages
> there wasn't anything that looked very useful.
Try to look for things like ExtTextOut. Also, if the text is some custom font, 
the app might try to load it from images, or a custom font in its program 
folder.

One other hint: Please consider writing plain text mails instead of HTML 
messages to this mailing list. I almost trashed the mail without reading it 
because the combination of HTML + a superficial look at the sender address 
triggered my spam trigger...


From richie at entrian.com  Wed Jan 16 07:37:52 2008
From: richie at entrian.com (Richie Hindle)
Date: Wed, 16 Jan 2008 13:37:52 +0000
Subject: Suggestion to the list maintainer
In-Reply-To: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
Message-ID: <bt1so3t42iokdajvpaoan7mo5etahjrrmd@4ax.com>

Hi Fran?ois,

> [...] identify a message from this mailing list quickly by reading it's
> subject.  Could you please add a subject prefix like [WINE-DEVEL] [...]

I solve this by filtering messages To: wine-devel at winehq.org or CC:
wine-devel at winehq.org into a separate folder.  I see you're using
SquirrelMail - does this help:
http://its.uwrf.edu/support/squirrelmail/filter.php ?

-- 
Richie Hindle
richie at entrian.com


From ian at ianmacfarlane.com  Wed Jan 16 08:23:32 2008
From: ian at ianmacfarlane.com (Ian Macfarlane)
Date: Wed, 16 Jan 2008 14:23:32 +0000
Subject: WWN license issue
In-Reply-To: <478D18A5.9050006@codeweavers.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
	<b050a5e70801151220s6dcc3efpc379138fa63867ac@mail.gmail.com>
	<478D18A5.9050006@codeweavers.com>
Message-ID: <aac02a530801160623h2c5c5cbdm4595b7ff7ff4dbd9@mail.gmail.com>

For what it's worth, I would prefer, in general, if it were at least
GPLv2 or later, but considering that this is just a newsletter and not
source code, I don't care that much :)

To be honest, I think this it makes more sense under a Creative
Commons license (probably the simple Creative Commons Attribution
one).

All the old ones at least should be changed to point to the GPLv2
license however, even if it is GPL2+ rather than GPL2-only.

On 1/15/08, Jeremy Newman <jnewman at codeweavers.com> wrote:
> I'll patch it so it points to the GPL v2 licence, unless someone feels
> there is a reason it needs to be v3.
>
> Zachary Goldberg wrote:
> > On Jan 15, 2008 9:58 AM, Ian Macfarlane <ian at ianmacfarlane.com> wrote:
> >> At the bottom of each WWN issue (for example, the latest
> >> http://www.winehq.org/?issue=339) is the text:
> >>
> >> "All Kernel Cousin issues and summaries are copyright their original
> >> authors, and distributed under the terms of the GNU General Public
> >> License, version 2.0. "
> >>
> >> However, it links to http://www.gnu.org/licenses/gpl.txt which of
> >> course is now the GPLv3 license text.
> >>
> >> Perhaps the text should change to say version 3 (or perhaps version
> >> 2+), or to the old archived GPLv2 license (IMO the former two options
> >> are preferable).
> >>
> >>
> >>
> >
> > for the record: I have no personal preference on the license.
> > Whatever the WineHQ admins decide on the issue is fine with me.
> >
>


From radovan at skolnik.info  Wed Jan 16 08:46:31 2008
From: radovan at skolnik.info (Radovan Skolnik)
Date: Wed, 16 Jan 2008 15:46:31 +0100
Subject: Easy usage of native DLLs in Linux programs
Message-ID: <200801161546.31892.radovan@skolnik.info>

Hello!

I have found this old thread dealing exactly with what I need: 
http://www.winehq.org/pipermail/wine-devel/2006-April/046779.html

It basically proposes a work to be done to allow loading native Windows DLLs 
into Linux binaries (for example loading WinAmp plugins into 
xine/mplayer/gst/...).

I am in the need to use a small DLL (no GUI, just few APIs that are all 
already implemented) which I have no source code to.

Has this initiative progressed to something? If not can anybody advise on how 
I shoudl proceed wrapping native DLL into .so? I have looked over the mplayer 
code to load Windows codecs but I couldn't really grasp the idea - the are no 
comments with the code :-(

Thank you and best regards

	Radovan Skolnik


From jreiser at BitWagon.com  Wed Jan 16 16:28:09 2008
From: jreiser at BitWagon.com (John Reiser)
Date: Wed, 16 Jan 2008 14:28:09 -0800
Subject: Valgrinding large win32 app worked!
In-Reply-To: <478E6847.7020809@orange.fr>
References: <a71bd89a0801151818n53c98b2i566afe3b0f94c166@mail.gmail.com>
	<478E6847.7020809@orange.fr>
Message-ID: <478E84F9.30407@BitWagon.com>

Eric Pouech wrote:
> Dan Kegel a ?crit :

>> ... I can run Picasa for Windows under Wine under Valgrind.

>> It seemed to find lots of little problems, but since there
>> were lots of numeric addresses without symbolic info in the
>> valgrind log, it wasn't directly useful to the Picasa developers.

> the ultimate goal is rather to ask vg to support new messages about:
> - loading / unloading modules
> - having external .so files to understand more detailed information, and
> implement in them pdb and coff support

Yes, a new VALGRIND_USER_REQUEST which announces the load/unload,
supported by loadable shared libraries which generate symbols and
addresses to be added/removed from the currently-running valgrind,
is the way to go.

The only snag could be, does PE format allow a separate base address
for each "segment", or are all segments fixed relative to each other,
like the PT_LOAD in ET_DYN?

-- 
John Reiser, jreiser at BitWagon.com


From dank at kegel.com  Wed Jan 16 19:47:11 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 16 Jan 2008 17:47:11 -0800
Subject: valgrind and +heap not getting along?
Message-ID: <a71bd89a0801161747g162d892cmf1702cc9db41c43d@mail.gmail.com>

I'm seeing fun traces like

==17177== Invalid write of size 1
==17177==    at 0x4022D5A: memset (mc_replace_strmem.c:492)
==17177==    by 0x46E914A: mark_block_free (heap.c:148)
==17177==    by 0x46E6950: HEAP_CreateFreeBlock (heap.c:493)
==17177==    by 0x46E6B78: HEAP_ShrinkBlock (heap.c:575)
==17177==    by 0x46E7F47: RtlAllocateHeap (heap.c:1228)
==17177==    by 0x46EC10A: get_builtin_fullname (winnt.h:1989)
==17177==    by 0x46EC2B8: load_builtin_callback (loader.c:1320)
==17177==    by 0x402C3BF: wine_dll_set_callback (loader.c:480)
==17177==    by 0x46EF3A7: __wine_process_init (loader.c:2529)
==17177==    by 0x402C7D5: wine_init (loader.c:645)
==17177==    by 0x7BF01263: main (main.c:111)
==17177==  Address 0x7f000140 is not stack'd, malloc'd or (recently) free'd

when running with +heap under valgrind.  Is something off by one somewhere?
- Dan

-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From dank at kegel.com  Wed Jan 16 20:13:47 2008
From: dank at kegel.com (Dan Kegel)
Date: Wed, 16 Jan 2008 18:13:47 -0800
Subject: Debugger unhappiness blocking valgrind runs
Message-ID: <a71bd89a0801161813t1d9d9a62sf52ec1df8b02227b@mail.gmail.com>

I just tried to do another daily valgrind run, but
it got blocked because it started up an infinite
number of copies of winedbg.  It seems that
a crash in the imagelist test in GetDibBits
triggered winedbg, and winedbg crashed trying
to generate a backtrace, which of course fired
up winedbg, which... was bad.  Some of the logs
are at
http://bugs.winehq.org/show_bug.cgi?id=11211

This seems to be very recent breakage, either today or yesterday.
- Dan

-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From jjmckenzie51 at sprintpcs.com  Wed Jan 16 21:04:58 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Wed, 16 Jan 2008 20:04:58 -0700
Subject: Getting Mozy to work
In-Reply-To: <478E8739.9090801@procyongames.com>
References: <478E8739.9090801@procyongames.com>
Message-ID: <478EC5DA.7080703@sprintpcs.com>

Christopher wrote:
> I'd like to get Mozy (online backup software, see mozy.com) working 
> under Wine. I'm not sure I have all the skills, but I'm willing to try 
> and write the necessary patches. In particular I need to fix bug 10932 
> <http://bugs.winehq.org/show_bug.cgi?id=10932>. This appears to be a 
> problem with the fonts and/or the way text is rendered in general. Can 
> anyone suggest a starting point for me? My programming experience has 
> all been on Windows, so I don't know much about Wine and Linux. I 
> tried looking through the output of +relay, but besides some 
> WM_SETFONT messages there wasn't anything that looked very useful.
>
Christopher:

This may be an extension of the same problem I am having with e-Sword 
and that is you have to use a native copy of riched20.dll.  Might I 
suggest getting a copy of this and placing it in the same directory as 
the Mozy software installs to.  Then use winecfg to create an entry for 
the main executable and then under libraries set riched20.dll to be 
native then builtin.  See if this makes the text visible.

James Mckenzie



From raccoonone at procyongames.com  Thu Jan 17 01:34:18 2008
From: raccoonone at procyongames.com (Christopher)
Date: Wed, 16 Jan 2008 23:34:18 -0800
Subject: Getting Mozy to work
In-Reply-To: <478EC5DA.7080703@sprintpcs.com>
References: <478E8739.9090801@procyongames.com>
	<478EC5DA.7080703@sprintpcs.com>
Message-ID: <478F04FA.5010205@procyongames.com>

James McKenzie wrote:
> Christopher wrote:
>> I'd like to get Mozy (online backup software, see mozy.com) working 
>> under Wine. I'm not sure I have all the skills, but I'm willing to 
>> try and write the necessary patches. In particular I need to fix bug 
>> 10932 <http://bugs.winehq.org/show_bug.cgi?id=10932>. This appears to 
>> be a problem with the fonts and/or the way text is rendered in 
>> general. Can anyone suggest a starting point for me? My programming 
>> experience has all been on Windows, so I don't know much about Wine 
>> and Linux. I tried looking through the output of +relay, but besides 
>> some WM_SETFONT messages there wasn't anything that looked very useful.
>>
> Christopher:
>
> This may be an extension of the same problem I am having with e-Sword 
> and that is you have to use a native copy of riched20.dll.  Might I 
> suggest getting a copy of this and placing it in the same directory as 
> the Mozy software installs to.  Then use winecfg to create an entry 
> for the main executable and then under libraries set riched20.dll to 
> be native then builtin.  See if this makes the text visible.
>
> James Mckenzie
>
>
Thanks for the suggestions everyone. I finally tracked the problem down 
to a flaw in user32.LoadStringW. I have sent in a patch, and will check 
user32.LoadStringA as it probably has the same flaw.


From truiken at gmail.com  Thu Jan 17 01:40:59 2008
From: truiken at gmail.com (James Hawkins)
Date: Thu, 17 Jan 2008 01:40:59 -0600
Subject: Fix for LoadStringW
In-Reply-To: <478F0460.3050709@procyongames.com>
References: <478F0460.3050709@procyongames.com>
Message-ID: <22821af30801162340u7f0324a1k969f1599586bebc3@mail.gmail.com>

On Jan 17, 2008 1:31 AM, Christopher <raccoonone at procyongames.com> wrote:
> This patch fixes LoadStringW when 0 is passed for buflen. LoadStringW
> should now behave as described on MSDN:
> http://msdn2.microsoft.com/en-us/library/ms647486.aspx
>
> This patch also fixes bug #10932
>
> Christopher Berner
>
> From dfe1719df7e8cd12cc5819c647049d9f39978841 Mon Sep 17 00:00:00 2001
> From: Christopher Berner <raccoonone at procyongames.com>
> Date: Wed, 16 Jan 2008 23:21:23 -0800
> Subject: [PATCH] Patch to fix LoadStringW when buflen is 0
>
> ---
>  dlls/user32/resource.c |   11 +++++++++++
>  1 files changed, 11 insertions(+), 0 deletions(-)
>
> diff --git a/dlls/user32/resource.c b/dlls/user32/resource.c
> index b9a51ae..148e9d1 100644
> --- a/dlls/user32/resource.c
> +++ b/dlls/user32/resource.c
> @@ -363,6 +363,7 @@ INT WINAPI LoadStringW( HINSTANCE instance, UINT resource_id,
>      WCHAR *p;
>      int string_num;
>      int i;
> +    int strlen;
>
>      TRACE("instance = %p, id = %04x, buffer = %p, length = %d\n",
>            instance, resource_id, buffer, buflen);
> @@ -379,9 +380,19 @@ INT WINAPI LoadStringW( HINSTANCE instance, UINT resource_id,
>      for (i = 0; i < string_num; i++)
>         p += *p + 1;
>
> +    strlen = (int)*p;
>      TRACE("strlen = %d\n", (int)*p );
>
>      if (buffer == NULL) return *p;
> +
> +    //if buflen == 0, then return a read-only pointer to the resource itself in buffer
> +    //it is assumed that buffer is actually a LPWSTR *
> +    if(buflen == 0)
> +    {
> +        *((LPWSTR *)buffer) = p + 1;
> +        return strlen;
> +    }
> +
>      i = min(buflen - 1, *p);
>      if (i > 0) {
>         memcpy(buffer, p + 1, i * sizeof (WCHAR));

No c++ comments allowed.  Also, you need to add a test case for this change.

-- 
James Hawkins


From raccoonone at procyongames.com  Thu Jan 17 02:10:20 2008
From: raccoonone at procyongames.com (Christopher)
Date: Thu, 17 Jan 2008 00:10:20 -0800
Subject: Fix for LoadStringW
In-Reply-To: <22821af30801162340u7f0324a1k969f1599586bebc3@mail.gmail.com>
References: <478F0460.3050709@procyongames.com>
	<22821af30801162340u7f0324a1k969f1599586bebc3@mail.gmail.com>
Message-ID: <478F0D6C.3060106@procyongames.com>

James Hawkins wrote:
> On Jan 17, 2008 1:31 AM, Christopher <raccoonone at procyongames.com> wrote:
>   
>> This patch fixes LoadStringW when 0 is passed for buflen. LoadStringW
>> should now behave as described on MSDN:
>> http://msdn2.microsoft.com/en-us/library/ms647486.aspx
>>
>> This patch also fixes bug #10932
>>
>> Christopher Berner
>>
>> From dfe1719df7e8cd12cc5819c647049d9f39978841 Mon Sep 17 00:00:00 2001
>> From: Christopher Berner <raccoonone at procyongames.com>
>> Date: Wed, 16 Jan 2008 23:21:23 -0800
>> Subject: [PATCH] Patch to fix LoadStringW when buflen is 0
>>
>> ---
>>  dlls/user32/resource.c |   11 +++++++++++
>>  1 files changed, 11 insertions(+), 0 deletions(-)
>>
>> diff --git a/dlls/user32/resource.c b/dlls/user32/resource.c
>> index b9a51ae..148e9d1 100644
>> --- a/dlls/user32/resource.c
>> +++ b/dlls/user32/resource.c
>> @@ -363,6 +363,7 @@ INT WINAPI LoadStringW( HINSTANCE instance, UINT resource_id,
>>      WCHAR *p;
>>      int string_num;
>>      int i;
>> +    int strlen;
>>
>>      TRACE("instance = %p, id = %04x, buffer = %p, length = %d\n",
>>            instance, resource_id, buffer, buflen);
>> @@ -379,9 +380,19 @@ INT WINAPI LoadStringW( HINSTANCE instance, UINT resource_id,
>>      for (i = 0; i < string_num; i++)
>>         p += *p + 1;
>>
>> +    strlen = (int)*p;
>>      TRACE("strlen = %d\n", (int)*p );
>>
>>      if (buffer == NULL) return *p;
>> +
>> +    //if buflen == 0, then return a read-only pointer to the resource itself in buffer
>> +    //it is assumed that buffer is actually a LPWSTR *
>> +    if(buflen == 0)
>> +    {
>> +        *((LPWSTR *)buffer) = p + 1;
>> +        return strlen;
>> +    }
>> +
>>      i = min(buflen - 1, *p);
>>      if (i > 0) {
>>         memcpy(buffer, p + 1, i * sizeof (WCHAR));
>>     
>
> No c++ comments allowed.  Also, you need to add a test case for this change.
>
>   
Thanks for pointing that out! Am I suppose to attach a test case for all 
my patches to wine-patches? I had submitted a testcase under the bug 
report I filed, so I didn't attach it to the email.

Christopher Berner


From truiken at gmail.com  Thu Jan 17 02:20:02 2008
From: truiken at gmail.com (James Hawkins)
Date: Thu, 17 Jan 2008 02:20:02 -0600
Subject: Fix for LoadStringW
In-Reply-To: <478F0D6C.3060106@procyongames.com>
References: <478F0460.3050709@procyongames.com>
	<22821af30801162340u7f0324a1k969f1599586bebc3@mail.gmail.com>
	<478F0D6C.3060106@procyongames.com>
Message-ID: <22821af30801170020r72740471w5f04b3464f04565a@mail.gmail.com>

On Jan 17, 2008 2:10 AM, Christopher <raccoonone at procyongames.com> wrote:
>
> James Hawkins wrote:
> > On Jan 17, 2008 1:31 AM, Christopher <raccoonone at procyongames.com> wrote:
> >
> >> This patch fixes LoadStringW when 0 is passed for buflen. LoadStringW
> >> should now behave as described on MSDN:
> >> http://msdn2.microsoft.com/en-us/library/ms647486.aspx
> >>
> >> This patch also fixes bug #10932
> >>
> >> Christopher Berner
> >>
> >> From dfe1719df7e8cd12cc5819c647049d9f39978841 Mon Sep 17 00:00:00 2001
> >> From: Christopher Berner <raccoonone at procyongames.com>
> >> Date: Wed, 16 Jan 2008 23:21:23 -0800
> >> Subject: [PATCH] Patch to fix LoadStringW when buflen is 0
> >>
> >> ---
> >>  dlls/user32/resource.c |   11 +++++++++++
> >>  1 files changed, 11 insertions(+), 0 deletions(-)
> >>
> >> diff --git a/dlls/user32/resource.c b/dlls/user32/resource.c
> >> index b9a51ae..148e9d1 100644
> >> --- a/dlls/user32/resource.c
> >> +++ b/dlls/user32/resource.c
> >> @@ -363,6 +363,7 @@ INT WINAPI LoadStringW( HINSTANCE instance, UINT resource_id,
> >>      WCHAR *p;
> >>      int string_num;
> >>      int i;
> >> +    int strlen;
> >>
> >>      TRACE("instance = %p, id = %04x, buffer = %p, length = %d\n",
> >>            instance, resource_id, buffer, buflen);
> >> @@ -379,9 +380,19 @@ INT WINAPI LoadStringW( HINSTANCE instance, UINT resource_id,
> >>      for (i = 0; i < string_num; i++)
> >>         p += *p + 1;
> >>
> >> +    strlen = (int)*p;
> >>      TRACE("strlen = %d\n", (int)*p );
> >>
> >>      if (buffer == NULL) return *p;
> >> +
> >> +    //if buflen == 0, then return a read-only pointer to the resource itself in buffer
> >> +    //it is assumed that buffer is actually a LPWSTR *
> >> +    if(buflen == 0)
> >> +    {
> >> +        *((LPWSTR *)buffer) = p + 1;
> >> +        return strlen;
> >> +    }
> >> +
> >>      i = min(buflen - 1, *p);
> >>      if (i > 0) {
> >>         memcpy(buffer, p + 1, i * sizeof (WCHAR));
> >>
> >
> > No c++ comments allowed.  Also, you need to add a test case for this change.
> >
> >
> Thanks for pointing that out! Am I suppose to attach a test case for all
> my patches to wine-patches? I had submitted a testcase under the bug
> report I filed, so I didn't attach it to the email.
>

Yes, for the fixes that can be tested, which is most of them.  Patches
in bugzilla bit-rot.

-- 
James Hawkins


From dmitry at codeweavers.com  Thu Jan 17 03:16:44 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Thu, 17 Jan 2008 17:16:44 +0800
Subject: Fix for LoadStringW
References: <478F0460.3050709@procyongames.com><22821af30801162340u7f0324a1k969f1599586bebc3@mail.gmail.com>
	<478F0D6C.3060106@procyongames.com>
Message-ID: <008601c858e9$b00a04d0$a600fea9@DMITRY>

"Christopher" <raccoonone at procyongames.com> wrote:

> Thanks for pointing that out! Am I suppose to attach a test case for all 
> my patches to wine-patches? I had submitted a testcase under the bug 
> report I filed, so I didn't attach it to the email.

You have to add the test to the exiting tests in dlls/kernel32/tests
not send an exe file. Also, you need to inspect and fix all places in
Wine which rely on old behaviour.

-- 
Dmitry.


From fedev at gmx.net  Wed Jan 16 22:06:28 2008
From: fedev at gmx.net (Federico Vecchiarelli)
Date: Thu, 17 Jan 2008 12:06:28 +0800
Subject: Request for patch removal
In-Reply-To: <Pine.LNX.4.64.0801161045430.22239@linux2.gl.umbc.edu>
References: <478DAA25.10900@gmx.net> <004d01c8584d$9f3759b0$a600fea9@DMITRY>
	<Pine.LNX.4.64.0801161045430.22239@linux2.gl.umbc.edu>
Message-ID: <478ED444.6040405@gmx.net>


As a workaround, I ended up creating an empty .wine folder on each of 
the users' home directory and then I did a symlink of the contents in my 
/home/wine/ but not of the folder itself.

I'm not deeply involved in wine and I don't know the reasons of this 
patch but it would seem reasonable for this behavior to be changed from 
a configuration file. Allowing the administrator to decide if he wants 
it On or Off. In the configuration file, the implications of that switch 
could be explained.

Maybe is not the best implementation but it might give you some ideas.


Fede


Steve Brown wrote:
> On Wed, 16 Jan 2008, Dmitry Timoshkov wrote:
>
>> "Federico Vecchiarelli" <fedev at gmx.net> wrote:
>>
>>> Ok, to the point. The patch mentioned below prohibits wine from running
>>> any application which is inside someone else's folder, even if you have
>>> access to it. In my case, I wanted to make one unique installation
>>> available to several users. Because of this patch, there is no
>>> workaround that could be implemented, forcing me to either run a script
>>> changing the owner of the folders for every user as they want to use 
>>> the
>>> application or I have to make several copies of the software which will
>>> put me in a difficult legal situation.
>>
>> All the details about this problem you can find here:
>>
>> http://bugs.winehq.org/show_bug.cgi?id=11112
>>
>> -- 
>> Dmitry.
>
> Allow me to add my voice on this subject.  I also would like the Wine 
> developers to consider how to allow for this use case.  In a centrally 
> administered environment, most users do not have write access to much 
> of the local disk, and the administrator of the machine (root) sets up 
> the environment for them (and normal users should not be allowed to 
> muck with it).  I am administrator for a small group of folks here, 
> and would switch to Linux only -- but there are still Windows-only 
> programs that are critical for my users.  Wine would be a wonderful 
> solution, if only wine could be installed in a central location (say, 
> /usr/local) and the wine "registry" files could be shared, somehow, by 
> all users on the machine (maybe by doing a union of ~/.wine and 
> /usr/local/wine/whatever).
>
> I see in the comments on this bug, that the concern is with multiple 
> instances of wineserver running on the machine at one time -- that's 
> not a major issue in the use case I envision.  The multiple 
> wineservers would not be running at the same time (unless the install 
> is on what Windows would call a Terminal Services Server -- a normal 
> multi-user *nix machine).  I think that even just allowing for 
> multiple login users on a local machine at different times would be 
> sufficient for a lot of us.  If, say, ~/.wine was used as a 
> replacement for HKLM\Current User and, say, /usr/local/wine/whatever 
> was for the other registry hives and group policies, I think wine 
> would be a lot closer to being a solution for those of us maintaining 
> multi-user machines.
>
> Steve Brown
> Systems Administrator
> UMBC Imaging Research Center
> sbrown7 at umbc.edu
>



From maarten at codeweavers.com  Thu Jan 17 05:06:31 2008
From: maarten at codeweavers.com (Maarten Lankhorst)
Date: Thu, 17 Jan 2008 12:06:31 +0100
Subject: Easy usage of native DLLs in Linux programs
In-Reply-To: <200801161546.31892.radovan@skolnik.info>
References: <200801161546.31892.radovan@skolnik.info>
Message-ID: <478F36B7.2000601@codeweavers.com>

Radovan Skolnik schreef:
> Hello!
>
> I have found this old thread dealing exactly with what I need: 
> http://www.winehq.org/pipermail/wine-devel/2006-April/046779.html
>
> It basically proposes a work to be done to allow loading native Windows DLLs 
> into Linux binaries (for example loading WinAmp plugins into 
> xine/mplayer/gst/...).
>
> I am in the need to use a small DLL (no GUI, just few APIs that are all 
> already implemented) which I have no source code to.
>   
Unfortunately it isn't easy, wine manages everything itself. As far as I
can tell, the easiest way is to compile your own program as a winelib
binary, then you can link to windows dll's. This is the most performance
effective way to do this.

If you really want to create a .so it wouldn't be impossible but just
harder:
- Create a winelib app that when it is run it calls the functions as
above, and listens on a socket, or has another way (except linking in
any way) to communicate.
- Make a shared library (.so) that will run the above program, then
communicates with it and uses that program for every dll call. The
winelib app will probably need its own WINEPREFIX so it can run
undisturbed by other influences.

While possible this isn't trivial.

Regards,
Maarten


From wferi at niif.hu  Thu Jan 17 05:34:59 2008
From: wferi at niif.hu (Ferenc Wagner)
Date: Thu, 17 Jan 2008 12:34:59 +0100
Subject: Fix for LoadStringW
In-Reply-To: <008601c858e9$b00a04d0$a600fea9@DMITRY> (Dmitry Timoshkov's
	message of "Thu, 17 Jan 2008 17:16:44 +0800")
References: <478F0460.3050709@procyongames.com>
	<22821af30801162340u7f0324a1k969f1599586bebc3@mail.gmail.com>
	<478F0D6C.3060106@procyongames.com>
	<008601c858e9$b00a04d0$a600fea9@DMITRY>
Message-ID: <877ii87kik.fsf@tac.ki.iif.hu>

"Dmitry Timoshkov" <dmitry at codeweavers.com> writes:

> "Christopher" <raccoonone at procyongames.com> wrote:
>
>> Thanks for pointing that out! Am I suppose to attach a test case for all 
>> my patches to wine-patches? I had submitted a testcase under the bug 
>> report I filed, so I didn't attach it to the email.
>
> You have to add the test to the exiting tests in dlls/kernel32/tests

Actually, there are LoadStringA tests in dlls/user32/tests/resource.c,
maybe it's best to team up with those (and possibly extend for the
same set of tests).
-- 
Regards,
Feri.


From julliard at winehq.org  Thu Jan 17 06:58:11 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 17 Jan 2008 13:58:11 +0100
Subject: kernel32: Intialise 16-bit stack to zero.
In-Reply-To: <478F4A20.1090703@codeweavers.com> (Robert Shearman's message of
	"Thu, 17 Jan 2008 12:29:20 +0000")
References: <478F4A20.1090703@codeweavers.com>
Message-ID: <87odbk38yk.fsf@wine.dyndns.org>

Robert Shearman <rob at codeweavers.com> writes:

> ---
>  dlls/kernel32/kernel_main.c |    2 +-
>  1 files changed, 1 insertions(+), 1 deletions(-)
>
> Otherwise dbghelp could sometimes get confused and think it should
> switch to 16-bit mode.
> This results in messages such as the following when warn or tracing
> for the heap channel is turned on:
> fixme:dbghelp:Failed to linearize address ????:55555555 ...

Initializing the first frame should be enough.

-- 
Alexandre Julliard
julliard at winehq.org


From alex at thehandofagony.com  Thu Jan 17 07:51:06 2008
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Thu, 17 Jan 2008 14:51:06 +0100
Subject: Time to create a stub wmvcore.dll?
In-Reply-To: <a71bd89a0801152124y5f923f18r4ec41577aa7ca475@mail.gmail.com>
References: <a71bd89a0801152124y5f923f18r4ec41577aa7ca475@mail.gmail.com>
Message-ID: <200801171451.06490.alex@thehandofagony.com>

On Wednesday 16 January 2008 06:24:22 Dan Kegel wrote:
> There seem to be a large number of apps that don't
> start unless a wmvcore.dll is present:
>  TVersity
>  Phatnoise
>  Lost Planet
>  The Bard's Tale
>  WMA Workshop
>  MixMeister
>  ...
> So, how 'bout it?  Should we create a stub for wmvcore.dll and friends?
> - Dan


Sounds like a great idea.  Also some games require a WMA  codec in order to 
play their music.

Oh, and it would be nice for Wine to have its own version of the Media Player, 
too. :)


Alexander N. S?rnes


From rob at codeweavers.com  Thu Jan 17 11:17:53 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Thu, 17 Jan 2008 17:17:53 +0000
Subject: kernel32: Intialise 16-bit stack to zero.
In-Reply-To: <87odbk38yk.fsf@wine.dyndns.org>
References: <478F4A20.1090703@codeweavers.com> <87odbk38yk.fsf@wine.dyndns.org>
Message-ID: <478F8DC1.2090408@codeweavers.com>

Alexandre Julliard wrote:
> Robert Shearman <rob at codeweavers.com> writes:
>   
>> Otherwise dbghelp could sometimes get confused and think it should
>> switch to 16-bit mode.
>> This results in messages such as the following when warn or tracing
>> for the heap channel is turned on:
>> fixme:dbghelp:Failed to linearize address ????:55555555 ...
>>     
>
> Initializing the first frame should be enough.

I can't work out what the size of the first frame is though. Is it 
sizeof(STACK16FRAME)?

-- 
Rob Shearman



From paulc at voip.null.ro  Thu Jan 17 12:35:51 2008
From: paulc at voip.null.ro (Paul Chitescu)
Date: Thu, 17 Jan 2008 20:35:51 +0200 (EET)
Subject: ntdll: Do not perform base relocation if an image is not a DLL.
	Take 2
In-Reply-To: <E1JFUQo-00069h-98@mail.codeweavers.com>
References: <E1JFUQo-00069h-98@mail.codeweavers.com>
Message-ID: <Pine.LNX.4.64.0801172030200.10308@dragoshel>

Dmitry,

IMHO it doesn't worth to the to relocate EXEs since virtually none are 
providing relocation records. Any operating system that can't allocate 
memory at low virtual addresses won't be able to run any Windows 
application newer than about 13 years (that is, all of interess).

EXEs were relocated only in Win32s where all applications were sharing a 
single address space. Since Visual C 4 the linker default is to not 
generate relocations for EXE files.

Paul Chitescu


On Thu, 17 Jan 2008, Dmitry Timoshkov wrote:
> Hello,
>
> this patch fixes the problem reported in the bug 11170. It appears that
> LoadLibrary in Windows doesn't attempt to relocate .exe files.
>
> Alexandre noticed that previous version of the patch may break relocation of
> the main exe. This version addresses that. However, this appears to be not
> compatible with what Windows (does not) do: in order to force a relocation
> of main under XP I set its base address to match the ntdll.dll (0x7c900000),
> and XP just refused to load the exe with an error message "The system cannot
> execute the specified program." But we may need to relocate main exe due to
> environment limitations (some native .so file may be mapped at that address).
>
> Changelog:
> [...]


From julliard at winehq.org  Thu Jan 17 12:39:56 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 17 Jan 2008 19:39:56 +0100
Subject: kernel32: Intialise 16-bit stack to zero.
In-Reply-To: <478F8DC1.2090408@codeweavers.com> (Robert Shearman's message of
	"Thu, 17 Jan 2008 17:17:53 +0000")
References: <478F4A20.1090703@codeweavers.com>
	<87odbk38yk.fsf@wine.dyndns.org> <478F8DC1.2090408@codeweavers.com>
Message-ID: <87k5m82t4z.fsf@wine.dyndns.org>

Robert Shearman <rob at codeweavers.com> writes:

> Alexandre Julliard wrote:
>> Initializing the first frame should be enough.
>
> I can't work out what the size of the first frame is though. Is it
> sizeof(STACK16FRAME)?

Yes; NtCurrentTeb()->WOW32Reserved is set to point to the initial stack
frame at the top of the stack, that's what you have to initialize.

-- 
Alexandre Julliard
julliard at winehq.org


From wine.dev at web.de  Thu Jan 17 13:56:26 2008
From: wine.dev at web.de (Detlef Riekenberg)
Date: Thu, 17 Jan 2008 20:56:26 +0100
Subject: bugzilla component and keyword cleanup
In-Reply-To: <20080106165555.GA4687@crissy.swd.zerebecki.de>
References: <20080106165555.GA4687@crissy.swd.zerebecki.de>
Message-ID: <1200599786.7055.8.camel@p4>

On So, 2008-01-06 at 17:55 +0100, Jan Zerebecki wrote:
> I'm done with one step of the changes.

> Improvement suggestions are welcome.


Please add "printing" as keyword and "wineps" as component


Thanks


-- 
 
By by ... Detlef




From eric.pouech at orange.fr  Thu Jan 17 14:08:28 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Thu, 17 Jan 2008 21:08:28 +0100
Subject: Debugger unhappiness blocking valgrind runs
In-Reply-To: <a71bd89a0801161813t1d9d9a62sf52ec1df8b02227b@mail.gmail.com>
References: <a71bd89a0801161813t1d9d9a62sf52ec1df8b02227b@mail.gmail.com>
Message-ID: <478FB5BC.9000808@orange.fr>

Dan Kegel a ?crit :
> I just tried to do another daily valgrind run, but
> it got blocked because it started up an infinite
> number of copies of winedbg.  It seems that
> a crash in the imagelist test in GetDibBits
> triggered winedbg, and winedbg crashed trying
> to generate a backtrace, which of course fired
> up winedbg, which... was bad.  Some of the logs
> are at
> http://bugs.winehq.org/show_bug.cgi?id=11211
>
> This seems to be very recent breakage, either today or yesterday.
> - Dan
>
>   
you're likely running out of memory (just to be sure, if the test 
segfaults, but winedbg correctly starts, it's likely the cause)
A+

-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From eric.pouech at orange.fr  Thu Jan 17 14:09:25 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Thu, 17 Jan 2008 21:09:25 +0100
Subject: Valgrinding large win32 app worked!
In-Reply-To: <a71bd89a0801161355j55326df3ub73f707ea9e74b7d@mail.gmail.com>
References: <a71bd89a0801151818n53c98b2i566afe3b0f94c166@mail.gmail.com>	
	<478E6847.7020809@orange.fr>
	<a71bd89a0801161355j55326df3ub73f707ea9e74b7d@mail.gmail.com>
Message-ID: <478FB5F5.2040503@orange.fr>


>> the hard part is to tell valgrind about information about modules it
>> doesn't know of:
>> - it doesn't know about the loading of the module (it's seen by vg as a
>> simple mmap)
>> - it doesn't know about the PE native debug information (whatever it is)
>>
>> the simplest approach would be to somehow:
>> - use the --db-attach option in vg to hook to a debugger on every error
>> (one hurdle is that valgrind doesn't allow both trace-children and
>> db-attach)
>> - then use winedbg to get a backtrace (or similar info) from the running
>> program (winedbg will be able to get to both .pdb and dwarf debug info)
>>
>> the ultimate goal is rather to ask vg to support new messages about:
>> - loading / unloading modules
>> - having external .so files to understand more detailed information, and
>> implement in them pdb and coff support
>>     
>
> Thanks for the tips.  I don't suppose you'd have time to look at any
> of this?  :-)
> - Dan
>   
since you're asking, no ;-)
A+

-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From eric.pouech at orange.fr  Thu Jan 17 14:15:22 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Thu, 17 Jan 2008 21:15:22 +0100
Subject: Valgrinding large win32 app worked!
In-Reply-To: <478E84F9.30407@BitWagon.com>
References: <a71bd89a0801151818n53c98b2i566afe3b0f94c166@mail.gmail.com>
	<478E6847.7020809@orange.fr> <478E84F9.30407@BitWagon.com>
Message-ID: <478FB75A.2030205@orange.fr>


> The only snag could be, does PE format allow a separate base address
> for each "segment", or are all segments fixed relative to each other,
> like the PT_LOAD in ET_DYN?
>   
each segment is described as an offset to the module's base address, but 
the offset are fixed in the PE format (as well as in .pdb)
anyhow, this information is present both in the PE header and the debug info

A+


-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From dave at sr71.net  Thu Jan 17 14:19:02 2008
From: dave at sr71.net (Dave Hansen)
Date: Thu, 17 Jan 2008 12:19:02 -0800
Subject: [PATCH] support for synchronous and non-buffered I/O
In-Reply-To: <1200467437.22674.153.camel@localhost>
References: <1200467437.22674.153.camel@localhost>
Message-ID: <1200601143.5866.71.camel@localhost>

On Tue, 2008-01-15 at 23:10 -0800, Dave Hansen wrote:
> I have a little Eye-Fi card (http://www.eye.fi).  The software to
> control it is a windows application that writes to control files which
> appear in a DOS filesystem on the SD card.  (you can read more
> information here: http://dave-hansen.blogspot.com/)
> 
> However, the application does not quite work under wine.  The
> application writes to the card, but doesn't get the results it expects.
> It loops doing read()s of the files looking for results until it times
> out.

Do me a favor and don't apply this quite yet.  I'll repost when it's
ready.

-- Dave



From frick at sc-networks.de  Thu Jan 17 15:55:09 2008
From: frick at sc-networks.de (Christoph Frick)
Date: Thu, 17 Jan 2008 22:55:09 +0100
Subject: add HKLM/System/MountedDevices to be added by default
Message-ID: <20080117215509.GF11203@byleth.sc-networks.de>

this is suggested on quite some places in appdb to make seucrom based games come a litle further

---
 tools/wine.inf |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/tools/wine.inf b/tools/wine.inf
index c3cb89c..f63fb23 100644
--- a/tools/wine.inf
+++ b/tools/wine.inf
@@ -362,6 +362,8 @@ HKLM,SOFTWARE\Microsoft\Active Setup\Installed Components\{de5aed00-a4bf-11d1-99
 HKLM,SOFTWARE\Microsoft\Active Setup\Installed Components\{de5aed00-a4bf-11d1-9948-00c04f98bbc9},"IsInstalled",2,1
 HKLM,SOFTWARE\Microsoft\Active Setup\Installed Components\{de5aed00-a4bf-11d1-9948-00c04f98bbc9},"Locale",2,"*"
 HKLM,SOFTWARE\Microsoft\Active Setup\Installed Components\{de5aed00-a4bf-11d1-9948-00c04f98bbc9},"Version",2,"4,74,9273,0"
+; SecuROM needs this key
+HKLM,System\MountedDevices,,,""
 
 [Nls]
 HKLM,System\CurrentControlSet\Control\Nls\Codepage,"37",,""
-- 
1.5.3.7

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 163 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080117/809a9b15/attachment.pgp 

From thestig at google.com  Thu Jan 17 16:05:43 2008
From: thestig at google.com (Lei Zhang)
Date: Thu, 17 Jan 2008 14:05:43 -0800
Subject: add HKLM/System/MountedDevices to be added by default
In-Reply-To: <20080117215509.GF11203@byleth.sc-networks.de>
References: <20080117215509.GF11203@byleth.sc-networks.de>
Message-ID: <558b2f5c0801171405l2beb7ee6s6ad577d5fe9b5855@mail.gmail.com>

On Jan 17, 2008 1:55 PM, Christoph Frick <frick at sc-networks.de> wrote:
> this is suggested on quite some places in appdb to make seucrom based games come a litle further
>
> ---
>  tools/wine.inf |    2 ++
>  1 files changed, 2 insertions(+), 0 deletions(-)
>
> diff --git a/tools/wine.inf b/tools/wine.inf
> index c3cb89c..f63fb23 100644
> --- a/tools/wine.inf
> +++ b/tools/wine.inf
> @@ -362,6 +362,8 @@ HKLM,SOFTWARE\Microsoft\Active Setup\Installed Components\{de5aed00-a4bf-11d1-99
>  HKLM,SOFTWARE\Microsoft\Active Setup\Installed Components\{de5aed00-a4bf-11d1-9948-00c04f98bbc9},"IsInstalled",2,1
>  HKLM,SOFTWARE\Microsoft\Active Setup\Installed Components\{de5aed00-a4bf-11d1-9948-00c04f98bbc9},"Locale",2,"*"
>  HKLM,SOFTWARE\Microsoft\Active Setup\Installed Components\{de5aed00-a4bf-11d1-9948-00c04f98bbc9},"Version",2,"4,74,9273,0"
> +; SecuROM needs this key
> +HKLM,System\MountedDevices,,,""
>
>  [Nls]
>  HKLM,System\CurrentControlSet\Control\Nls\Codepage,"37",,""
> --
> 1.5.3.7
>
>
>
>
>

Patches should be sent to wine-patches at winehq.org.


From frick at sc-networks.de  Thu Jan 17 16:47:32 2008
From: frick at sc-networks.de (Christoph Frick)
Date: Thu, 17 Jan 2008 23:47:32 +0100
Subject: add HKLM/System/MountedDevices to be added by default
In-Reply-To: <558b2f5c0801171405l2beb7ee6s6ad577d5fe9b5855@mail.gmail.com>
References: <20080117215509.GF11203@byleth.sc-networks.de>
	<558b2f5c0801171405l2beb7ee6s6ad577d5fe9b5855@mail.gmail.com>
Message-ID: <20080117224732.GG11203@byleth.sc-networks.de>

On Thu, Jan 17, 2008 at 02:05:43PM -0800, Lei Zhang wrote:

> Patches should be sent to wine-patches at winehq.org.

i know - but it was too late once i pressed CTRL-X. so i convinced
myself, that this patch would not go through easy anyway because
somebody else would have done the same a long time ago and so it starts
at least an discussion...

-- 
cu
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 163 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080117/7231949b/attachment.pgp 

From dank at kegel.com  Thu Jan 17 16:59:20 2008
From: dank at kegel.com (Dan Kegel)
Date: Thu, 17 Jan 2008 14:59:20 -0800
Subject: Debugger unhappiness blocking valgrind runs
In-Reply-To: <478FB5BC.9000808@orange.fr>
References: <a71bd89a0801161813t1d9d9a62sf52ec1df8b02227b@mail.gmail.com>
	<478FB5BC.9000808@orange.fr>
Message-ID: <a71bd89a0801171459y5d6aded2rd84cc7634d065ccb@mail.gmail.com>

On Jan 17, 2008 12:08 PM, Eric Pouech <eric.pouech at orange.fr> wrote:
> > http://bugs.winehq.org/show_bug.cgi?id=11211
>
> you're likely running out of memory (just to be sure, if the test
> segfaults, but winedbg correctly starts, it's likely the cause)

It doesn't seem like I'm running out of memory.
winedbg does not correctly start.
free shows lots of free swap space.

Amusingly, this shows up now on one of my machines when I run
Photoshop CS2 tryout.  File / Browse crashes, which
will bring up winedbg, which crashes, which brings up winedbg,
which crashes,... you have to do wineserver -k quick or you'll
have zillions of winedbg's all waiting to be debugged.


From dank at kegel.com  Thu Jan 17 20:20:55 2008
From: dank at kegel.com (Dan Kegel)
Date: Thu, 17 Jan 2008 18:20:55 -0800
Subject: add HKLM/System/MountedDevices to be added by default
Message-ID: <a71bd89a0801171820m19c18a2jc01e0f7d72d26623@mail.gmail.com>

c.f. wrote:
> this is suggested on quite some places in appdb to make seucrom based games come a litle further

Discussed at http://bugs.winehq.org/show_bug.cgi?id=7065#c58
Looks like something of this sort is already in, you must have blinked :-)


From dank at kegel.com  Thu Jan 17 20:57:19 2008
From: dank at kegel.com (Dan Kegel)
Date: Thu, 17 Jan 2008 18:57:19 -0800
Subject: GOM player
Message-ID: <a71bd89a0801171857n6eea25aco5bdd5e926756ccf0@mail.gmail.com>

http://www.guardian.co.uk/technology/2008/jan/17/linux.korea
says everyone in Korea uses the GOM player
instead of Windows Media Player.

It installs ok, but blew up when I tried to load
the Sony music stream from its playlist.

Free download
http://www.gomplayer.com/
supposedly comes with lots of codecs.
- Dan


From infyquest at gmail.com  Thu Jan 17 22:38:34 2008
From: infyquest at gmail.com (Vijay Kiran Kamuju)
Date: Thu, 17 Jan 2008 23:38:34 -0500
Subject: GOM player
In-Reply-To: <a71bd89a0801171857n6eea25aco5bdd5e926756ccf0@mail.gmail.com>
References: <a71bd89a0801171857n6eea25aco5bdd5e926756ccf0@mail.gmail.com>
Message-ID: <36bf289b0801172038w4b5a7879rbfac8b8f4cb4a218@mail.gmail.com>

It blew up in wine or windows.
Is it a problem with wine.
What about other media types.

--
VJ

On 1/17/08, Dan Kegel <dank at kegel.com> wrote:
> http://www.guardian.co.uk/technology/2008/jan/17/linux.korea
> says everyone in Korea uses the GOM player
> instead of Windows Media Player.
>
> It installs ok, but blew up when I tried to load
> the Sony music stream from its playlist.
>
> Free download
> http://www.gomplayer.com/
> supposedly comes with lots of codecs.
> - Dan
>
>
>


From dank at kegel.com  Thu Jan 17 22:49:21 2008
From: dank at kegel.com (Dan Kegel)
Date: Thu, 17 Jan 2008 20:49:21 -0800
Subject: GOM player
In-Reply-To: <36bf289b0801172038w4b5a7879rbfac8b8f4cb4a218@mail.gmail.com>
References: <a71bd89a0801171857n6eea25aco5bdd5e926756ccf0@mail.gmail.com>
	<36bf289b0801172038w4b5a7879rbfac8b8f4cb4a218@mail.gmail.com>
Message-ID: <a71bd89a0801172049x3da45bcck4eda621bb47a380a@mail.gmail.com>

On Jan 17, 2008 8:38 PM, Vijay Kiran Kamuju <infyquest at gmail.com> wrote:
> On 1/17/08, Dan Kegel <dank at kegel.com> wrote:
> > http://www.guardian.co.uk/technology/2008/jan/17/linux.korea
> > says everyone in Korea uses the GOM player...
> > It installs ok, but blew up when I tried to load
> > the Sony music stream from its playlist. ...
> > http://www.gomplayer.com/
> > supposedly comes with lots of codecs.
>
> It blew up in wine or windows.
> Is it a problem with wine.

It blew up in wine, so I imagine it's a wine problem.

> What about other media types.

I didn't do much testing, just that one quick hit.
It deserves some real testing given its popularity in
Korea, I think.
- Dan


From dank at kegel.com  Fri Jan 18 02:08:19 2008
From: dank at kegel.com (Dan Kegel)
Date: Fri, 18 Jan 2008 00:08:19 -0800
Subject: appdb hosed
Message-ID: <a71bd89a0801180008tf0a74e9m54d701e1a2b42931@mail.gmail.com>

The left nav bars are broken, can't approve any new test data.


From alex at thehandofagony.com  Fri Jan 18 02:57:15 2008
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Fri, 18 Jan 2008 09:57:15 +0100
Subject: appdb hosed
In-Reply-To: <a71bd89a0801180008tf0a74e9m54d701e1a2b42931@mail.gmail.com>
References: <a71bd89a0801180008tf0a74e9m54d701e1a2b42931@mail.gmail.com>
Message-ID: <200801180957.15912.alex@thehandofagony.com>

On Friday 18 January 2008 09:08:19 Dan Kegel wrote:
> The left nav bars are broken, can't approve any new test data.


Does it work if you press 'refresh' a couple of times?


Alexander N. S?rnes


From dank at kegel.com  Fri Jan 18 03:04:00 2008
From: dank at kegel.com (Dan Kegel)
Date: Fri, 18 Jan 2008 01:04:00 -0800
Subject: appdb hosed
In-Reply-To: <200801180957.15912.alex@thehandofagony.com>
References: <a71bd89a0801180008tf0a74e9m54d701e1a2b42931@mail.gmail.com>
	<200801180957.15912.alex@thehandofagony.com>
Message-ID: <a71bd89a0801180104i5e2b3e6di6299359318dde7d4@mail.gmail.com>

Alexander Nicolaysen S?rnes <alex at thehandofagony.com> wrote:
> > The left nav bars are broken, can't approve any new test data.
>
> Does it work if you press 'refresh' a couple of times?

Yes, thanks.

Hopefully not everybody has to do that...?


From alex at thehandofagony.com  Fri Jan 18 03:22:10 2008
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Fri, 18 Jan 2008 10:22:10 +0100
Subject: appdb hosed
In-Reply-To: <a71bd89a0801180104i5e2b3e6di6299359318dde7d4@mail.gmail.com>
References: <a71bd89a0801180008tf0a74e9m54d701e1a2b42931@mail.gmail.com>
	<200801180957.15912.alex@thehandofagony.com>
	<a71bd89a0801180104i5e2b3e6di6299359318dde7d4@mail.gmail.com>
Message-ID: <200801181022.10145.alex@thehandofagony.com>

On Friday 18 January 2008 10:04:00 you wrote:
> Alexander Nicolaysen S?rnes <alex at thehandofagony.com> wrote:
> > > The left nav bars are broken, can't approve any new test data.
> >
> > Does it work if you press 'refresh' a couple of times?
>
> Yes, thanks.
>
> Hopefully not everybody has to do that...?


Unfortunately.

We changed the menus so that doing things like Ctrl + click for opening new 
tabs should work properly.



Alexander


From ivan at etersoft.ru  Fri Jan 18 03:21:46 2008
From: ivan at etersoft.ru (Ivan Sinitsin)
Date: Fri, 18 Jan 2008 12:21:46 +0300
Subject: problem with widl.
Message-ID: <200801181221.48708.ivan@etersoft.ru>

I have a question about widl.

tools\widl\header.c    function "write_method_macro"

      fprintf(header, "#define %s_", name);
      write_name(header,def);
      fprintf(header, "(p");
      for (c=0; c<argc; c++)
        fprintf(header, ",%c", c+'a');
      fprintf(header, ") ");

      fprintf(header, "(p)->lpVtbl->");
      write_name(header, def);
      fprintf(header, "(p");
      for (c=0; c<argc; c++)
        fprintf(header, ",%c", c+'a');
      fprintf(header, ")\n");

This code wrong, because if my function have more then 16 parameters I receive 
something like this:

     #define Imyinterface_Open(p,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q     
(p)->lpVtbl->Open(p,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q)

and the compiler gives out a mistake 

     library.h:1296:63: duplicate macro parameter "p"

I think that this code should be like this:
Variant 1.
      int p=0;
      for (c=0; c<argc; c++) {
        if (p==15) p++;
        fprintf(header, ",%c", p+'a');
        p++;
      }
      fprintf(header, ") ");

      fprintf(header, "(p)->lpVtbl->");
      write_name(header, def);
      fprintf(header, "(p");
      p=0;
      for (c=0; c<argc; c++) {
        if (p==15) p++;
        fprintf(header, ",%c", p+'a');
        p++;
      }
      fprintf(header, ")\n");

or
Variant 2. (Without cycles)
     char str[] = 
{'p',',','a',',','b',',','c',',','d',',','e',',','f',',','g',',','h',',','i',',','j',',','k',',','l',',','m',',','o',',','q',',','r',',','s',',','t',',','u',',','v',',','w',',','x',',','y',',','z',',',0};

      str[2*argc+1] = 0;
      fprintf(header, "#define %s_", name);
      write_name(header,def);
      fprintf(header,"(");
      fprintf(header,"%s",str);
      fprintf(header, ") ");

      fprintf(header, "(p)->lpVtbl->");
      write_name(header, def);
      fprintf(header,"(");
      fprintf(header,"%s",str);
      fprintf(header, ")\n");

What do you think about that?

---------------- 
Sinitsin Ivan


From julliard at winehq.org  Fri Jan 18 04:59:52 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 18 Jan 2008 11:59:52 +0100
Subject: qmgr [1/3]: Implement IClassFactory methods.
In-Reply-To: <20080117232624.GC30711@linux.ucla.edu> (Dan Hipschman's message
	of "Thu, 17 Jan 2008 15:26:24 -0800")
References: <20080117232624.GC30711@linux.ucla.edu>
Message-ID: <87ir1rbdqv.fsf@wine.dyndns.org>

Dan Hipschman <dsh at linux.ucla.edu> writes:

> I split the last patch into three.  This is essentially the same as the last
> one Roy sent, but cleaned up a bit.  This adds the IClassFactory methods for
> BITS.

When sending a patch written by someone else, please include a From:
line with the proper attribution in your message.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Fri Jan 18 05:37:13 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 18 Jan 2008 12:37:13 +0100
Subject: [dbghelp 4/10] Rewrite much of the symbol lookup method to work
	with Optimized PDB files as well
In-Reply-To: <df81031c0801171448u1d9c116bo1c3fb4d8efe88330@mail.gmail.com>
	(Jason Green's message of "Thu, 17 Jan 2008 17:48:48 -0500")
References: <df81031c0801171448u1d9c116bo1c3fb4d8efe88330@mail.gmail.com>
Message-ID: <87ejcfbc0m.fsf@wine.dyndns.org>

"Jason Green" <jave27 at gmail.com> writes:

> +
> +#ifdef TRACE_SYMBOL_LIST
> +    TRACE("\n\n***** sorting the table {count = %d}\n\n", module->num_sorttab);
> +#endif
> +
> +    qsort(module->addr_sorttab, module->num_sorttab, sizeof(struct symbol_entry), symt_cmp_addr_and_size);
> +
> +    generateSymbolChains(module);
> +
> +
> +#ifdef TRACE_SYMBOL_LIST
> +    if (0){
> +        ULONG64                 prevAddr = 0;

Please don't add ifdef'ed out code, it should either be compiled always,
or removed completely.

> +          sizeof(SYMBOL_INFO), Symbol->SizeOfStruct,
> +          (intptr_t)&Symbol->SizeOfStruct - (intptr_t)Symbol,
> +          (intptr_t)&Symbol->TypeIndex - (intptr_t)Symbol,
> +          (intptr_t)&Symbol->Reserved[0] - (intptr_t)Symbol,

Don't use stdint.h types, there are Win32 types for that.

-- 
Alexandre Julliard
julliard at winehq.org


From maarten at codeweavers.com  Fri Jan 18 05:51:07 2008
From: maarten at codeweavers.com (Maarten Lankhorst)
Date: Fri, 18 Jan 2008 12:51:07 +0100
Subject: Debugger unhappiness blocking valgrind runs
In-Reply-To: <a71bd89a0801171459y5d6aded2rd84cc7634d065ccb@mail.gmail.com>
References: <a71bd89a0801161813t1d9d9a62sf52ec1df8b02227b@mail.gmail.com>	<478FB5BC.9000808@orange.fr>
	<a71bd89a0801171459y5d6aded2rd84cc7634d065ccb@mail.gmail.com>
Message-ID: <479092AB.2020307@codeweavers.com>

Dan Kegel schreef:
> On Jan 17, 2008 12:08 PM, Eric Pouech <eric.pouech at orange.fr> wrote:
>   
>>> http://bugs.winehq.org/show_bug.cgi?id=11211
>>>       
>> you're likely running out of memory (just to be sure, if the test
>> segfaults, but winedbg correctly starts, it's likely the cause)
>>     
>
> It doesn't seem like I'm running out of memory.
> winedbg does not correctly start.
> free shows lots of free swap space.
>
> Amusingly, this shows up now on one of my machines when I run
> Photoshop CS2 tryout.  File / Browse crashes, which
> will bring up winedbg, which crashes, which brings up winedbg,
> which crashes,... you have to do wineserver -k quick or you'll
> have zillions of winedbg's all waiting to be debugged.
>   
A single application can only use 3 gb of memory, it doesn't have to be
actual memory, it can be 'virtual' as well. This means it's reserved,
but it doesn't necessarily have to be used. You can see this in top
under the virt column.



From julliard at winehq.org  Fri Jan 18 09:17:38 2008
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 18 Jan 2008 16:17:38 +0100
Subject: problem with widl.
In-Reply-To: <200801181221.48708.ivan@etersoft.ru> (Ivan Sinitsin's message of
	"Fri, 18 Jan 2008 12:21:46 +0300")
References: <200801181221.48708.ivan@etersoft.ru>
Message-ID: <87abn3b1t9.fsf@wine.dyndns.org>

Ivan Sinitsin <ivan at etersoft.ru> writes:

> What do you think about that?

I put in a fix to use the real parameter names instead.

-- 
Alexandre Julliard
julliard at winehq.org


From alex at thehandofagony.com  Fri Jan 18 10:26:39 2008
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Fri, 18 Jan 2008 17:26:39 +0100
Subject: WWN license issue
In-Reply-To: <478D18A5.9050006@codeweavers.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
	<b050a5e70801151220s6dcc3efpc379138fa63867ac@mail.gmail.com>
	<478D18A5.9050006@codeweavers.com>
Message-ID: <200801181726.40090.alex@thehandofagony.com>

On Tuesday 15 January 2008 21:33:41 Jeremy Newman wrote:
> I'll patch it so it points to the GPL v2 licence, unless someone feels
> there is a reason it needs to be v3.
>

Now that you mention it, since we are trying to move the AppDB to the Affero 
GPL v3, it would be nice to have the WWN covered by the similar GLP v3 :)


Alexander N. S?rnes

> Zachary Goldberg wrote:
> > On Jan 15, 2008 9:58 AM, Ian Macfarlane <ian at ianmacfarlane.com> wrote:
> >> At the bottom of each WWN issue (for example, the latest
> >> http://www.winehq.org/?issue=339) is the text:
> >>
> >> "All Kernel Cousin issues and summaries are copyright their original
> >> authors, and distributed under the terms of the GNU General Public
> >> License, version 2.0. "
> >>
> >> However, it links to http://www.gnu.org/licenses/gpl.txt which of
> >> course is now the GPLv3 license text.
> >>
> >> Perhaps the text should change to say version 3 (or perhaps version
> >> 2+), or to the old archived GPLv2 license (IMO the former two options
> >> are preferable).
> >
> > for the record: I have no personal preference on the license.
> > Whatever the WineHQ admins decide on the issue is fine with me.




From kuba at mareimbrium.org  Fri Jan 18 11:54:46 2008
From: kuba at mareimbrium.org (Kuba Ober)
Date: Fri, 18 Jan 2008 12:54:46 -0500
Subject: Suggestion to the list maintainer
In-Reply-To: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
Message-ID: <200801181254.47144.kuba@mareimbrium.org>

On Wednesday 16 January 2008, kubrick at fgv6.net wrote:
> Hello.
>
> I have many subscriptions to different mailing list with my email-address
> and I'd appreciate a lot to be able to identify a message from this mailing
> list quickly by reading it's subject.
> Could you please add a subject prefix like [WINE-DEVEL] in the mailman
> preferences ? It's very easy to do, so maybe there is a good reason why you
> haven't done it yet...

>
> Thanks.
> Fran?ois.
>
>
>
>
> !DSPAM:478e0614252561039011321!




From kuba at mareimbrium.org  Fri Jan 18 11:55:02 2008
From: kuba at mareimbrium.org (Kuba Ober)
Date: Fri, 18 Jan 2008 12:55:02 -0500
Subject: Suggestion to the list maintainer
In-Reply-To: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
Message-ID: <200801181255.02957.kuba@mareimbrium.org>

On Wednesday 16 January 2008, kubrick at fgv6.net wrote:
> Hello.
>
> I have many subscriptions to different mailing list with my email-address
> and I'd appreciate a lot to be able to identify a message from this mailing
> list quickly by reading it's subject.
> Could you please add a subject prefix like [WINE-DEVEL] in the mailman
> preferences ? It's very easy to do, so maybe there is a good reason why you
> haven't done it yet...

Just filter on List-Id: Wine Developer's List <wine-devel.winehq.org>

Cheers, Kuba


From kuba at mareimbrium.org  Fri Jan 18 11:56:13 2008
From: kuba at mareimbrium.org (Kuba Ober)
Date: Fri, 18 Jan 2008 12:56:13 -0500
Subject: Suggestion to the list maintainer
In-Reply-To: <53806.195.6.79.173.1200493687.squirrel@www.fgv6.net>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
	<200801161412.08979.research@science.su>
	<53806.195.6.79.173.1200493687.squirrel@www.fgv6.net>
Message-ID: <200801181256.14044.kuba@mareimbrium.org>

> PS : I do find Subject prefixes ugly too... Bu I hadn't found a more handy
> solution.

Don't use squirrelmail, or better yet - fix it. I suggest you replace squirrel 
with Zimbra, it's much better. I'm just a happy user.

Cheers, Kuba


From tokul at users.sourceforge.net  Fri Jan 18 12:06:38 2008
From: tokul at users.sourceforge.net (Tomas Kuliavas)
Date: Fri, 18 Jan 2008 20:06:38 +0200 (EET)
Subject: Suggestion to the list maintainer
In-Reply-To: <200801181256.14044.kuba@mareimbrium.org>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
	<200801161412.08979.research@science.su>
	<53806.195.6.79.173.1200493687.squirrel@www.fgv6.net>
	<200801181256.14044.kuba@mareimbrium.org>
Message-ID: <54607.78.61.224.253.1200679598.nsm@avilys.eik.lt>

>> PS : I do find Subject prefixes ugly too... Bu I hadn't found a more
>> handy solution.
>
> Don't use squirrelmail, or better yet - fix it. I suggest you replace
> squirrel with Zimbra, it's much better. I'm just a happy user.

Zimbra is commercial groupware suite. SquirrelMail is free webmail
application. You are suggesting to replace whole user's email system with
some proprietary locked product.

-- 
Tomas



From timschmidt at gmail.com  Fri Jan 18 13:28:08 2008
From: timschmidt at gmail.com (Tim Schmidt)
Date: Fri, 18 Jan 2008 14:28:08 -0500
Subject: Suggestion to the list maintainer
In-Reply-To: <54607.78.61.224.253.1200679598.nsm@avilys.eik.lt>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
	<200801161412.08979.research@science.su>
	<53806.195.6.79.173.1200493687.squirrel@www.fgv6.net>
	<200801181256.14044.kuba@mareimbrium.org>
	<54607.78.61.224.253.1200679598.nsm@avilys.eik.lt>
Message-ID: <2c97fe9d0801181128n1ab7c4b8y6a62a3b62bb27080@mail.gmail.com>

On Jan 18, 2008 1:06 PM, Tomas Kuliavas <tokul at users.sourceforge.net> wrote:
> Zimbra is commercial groupware suite. SquirrelMail is free webmail
> application. You are suggesting to replace whole user's email system with
> some proprietary locked product.

There's an (at least in name) FOSS version of Zimbra...  but eeew.  I
am tasked with the unfortunate duty of admining a machine running
Zimbra and I can say it's not worth the trouble.  Unless you like Java
processes that gobble 2Gb of ram like cookies, that is.

--tim


From r.kalbermatter at hccnet.nl  Fri Jan 18 13:34:20 2008
From: r.kalbermatter at hccnet.nl (Rolf Kalbermatter)
Date: Fri, 18 Jan 2008 20:34:20 +0100
Subject: GOM player
In-Reply-To: <a71bd89a0801172049x3da45bcck4eda621bb47a380a@mail.gmail.com>
References: <a71bd89a0801171857n6eea25aco5bdd5e926756ccf0@mail.gmail.com><36bf289b0801172038w4b5a7879rbfac8b8f4cb4a218@mail.gmail.com>
	<a71bd89a0801172049x3da45bcck4eda621bb47a380a@mail.gmail.com>
Message-ID: <00c001c85a09$1f568af0$4001a8c0@NATERS>

On 1/17/08, Dan Kegel <dank at kegel.com> wrote:
> http://www.guardian.co.uk/technology/2008/jan/17/linux.korea
> says everyone in Korea uses the GOM player...
> It installs ok, but blew up when I tried to load the Sony music 
> stream from its playlist. ...
> http://www.gomplayer.com/
> supposedly comes with lots of codecs.

I tried it some time ago. On the pro side it supports just about any
media stream out of the box, well ok quite a lot. It's a one time stop
for RM, WMF and QT media.

On the con side I didn't like it's perseverance in trying to install all
kinds of additional "gadgets" that I wouldn't care of or wouldn't fully
trust with.

As nice as it seemed to be able to watch just about every common media
format out there, I deinstalled it after a short trial. Didn't test it
in Wine though as watching media in Linux itself although not as painless
isn't that difficult either.

For my Windows box I use Media Player Classic with QT and RM codec support
now and that works almost flawlessly.

Rolf Kalbermatter



From eric.pouech at orange.fr  Fri Jan 18 14:14:13 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Fri, 18 Jan 2008 21:14:13 +0100
Subject: [dbghelp 4/10] Rewrite much of the symbol lookup method to work
	with	Optimized PDB files as well
In-Reply-To: <df81031c0801171448u1d9c116bo1c3fb4d8efe88330@mail.gmail.com>
References: <df81031c0801171448u1d9c116bo1c3fb4d8efe88330@mail.gmail.com>
Message-ID: <47910895.5070709@orange.fr>

Jason Green a ?crit :
> ------------------------------------------------------------------------
>
> From 14d91ebd5974c8fc02f8b83d53e8eff0df7ad76d Mon Sep 17 00:00:00 2001
> From: Jason Green <jason at jave01.(none)>
> Date: Thu, 17 Jan 2008 16:41:11 -0500
> Subject: [PATCH] Rewrite much of the symbol lookup method to work with Optimized PDB files as well.
> Also, improves a number of TRACEs, and wraps strings in the debugstr() functions.
>   
what's the rationale of optimized pdb ?
the patch is already big enough not to mix code evolution with stuffing 
new trace:s all over the place
A+

-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From eric.pouech at orange.fr  Fri Jan 18 14:20:25 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Fri, 18 Jan 2008 21:20:25 +0100
Subject: [dbghelp 7/10] Fix file searching to search only listed
	directories instead of the whole HD
In-Reply-To: <df81031c0801171450l7c03511dke748ce0d5f7fd5c1@mail.gmail.com>
References: <df81031c0801171450l7c03511dke748ce0d5f7fd5c1@mail.gmail.com>
Message-ID: <47910A09.1090603@orange.fr>

Jason Green a ?crit :
> ------------------------------------------------------------------------
>
> From ad95ee9cad0df8b4e8ca35d2d5a280d755c7bf7f Mon Sep 17 00:00:00 2001
> From: Jason Green <jason at jave01.(none)>
> Date: Thu, 17 Jan 2008 17:21:00 -0500
> Subject: [PATCH] Fix file searching to search only listed directories instead of the whole HD.
> And, wrap some TRACE parameters in debugstr.
> From: Eric van Beurden (ericvb at transgaming.com)
> ---
>  dlls/dbghelp/path.c |   14 +++++++-------
>  1 files changed, 7 insertions(+), 7 deletions(-)
>
> diff --git a/dlls/dbghelp/path.c b/dlls/dbghelp/path.c
> index 2e191af..fac9dc0 100644
> --- a/dlls/dbghelp/path.c
> +++ b/dlls/dbghelp/path.c
> @@ -57,7 +57,7 @@ HANDLE WINAPI FindDebugInfoFile(PCSTR FileName, PCSTR SymbolPath, PSTR DebugFile
>  {
>      HANDLE      h;
>  
> -    h = CreateFileA(DebugFilePath, GENERIC_READ, FILE_SHARE_READ, NULL,
> +    h = CreateFileA(FileName, GENERIC_READ, FILE_SHARE_READ, NULL,
>                      OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
>   
you failed to set DebugFilePath to the desired value
again the rest of the patch has nothing to do with the first part of the 
patch
A+

-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From eric.pouech at orange.fr  Fri Jan 18 14:22:53 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Fri, 18 Jan 2008 21:22:53 +0100
Subject: [dbghelp 10/10] Clamp minidump memory blocks to 928KB
In-Reply-To: <df81031c0801171451t17cdacc1sf05e1e6759d10426@mail.gmail.com>
References: <df81031c0801171451t17cdacc1sf05e1e6759d10426@mail.gmail.com>
Message-ID: <47910A9D.9090708@orange.fr>

Jason Green a ?crit :
> ------------------------------------------------------------------------
>
> From 1127317807ec264541e2e03e6a633cefee8f697b Mon Sep 17 00:00:00 2001
> From: Jason Green <jason at jave01.(none)>
> Date: Thu, 17 Jan 2008 17:43:41 -0500
> Subject: [PATCH] Clamp minidump memory blocks to 928KB and improve TRACEs
> WinDbg can't read minidumps with memory blocks larger than this.
> From: Eric van Beurden (ericvb at transgaming.com)
> ---
>  dlls/dbghelp/minidump.c |   35 +++++++++++++++++++++++++++++++++--
>  1 files changed, 33 insertions(+), 2 deletions(-)
>
> diff --git a/dlls/dbghelp/minidump.c b/dlls/dbghelp/minidump.c
> index 564d824..f113728 100644
> --- a/dlls/dbghelp/minidump.c
> +++ b/dlls/dbghelp/minidump.c
> @@ -32,6 +32,13 @@
>  
>  WINE_DEFAULT_DEBUG_CHANNEL(dbghelp);
>  
> +
> +/* windbg isn't able to open minidump files if they contain a single memory block larger 
> +   than 928KB.  If a larger block is found, it simply reports that all following streams
> +   could not be loaded.  This is as of WinDbg version 6.7.0005.1. */
> +#define MINIDUMP_MEMORY_BLOCK_MAX   (928 * 1024)
> +
> +
>  struct dump_memory
>  {
>      ULONG                               base;
> @@ -640,8 +647,32 @@ static  void    dump_threads(struct dump_context* dc,
>              }
>              if (mdThd.Stack.Memory.DataSize && (flags_out & ThreadWriteStack))
>              {
> -                add_memory_block(dc, mdThd.Stack.StartOfMemoryRange,
> -                                 mdThd.Stack.Memory.DataSize,
> +                ULONG   size;
> +                ULONG64 base;
> +
> +
> +                /* windbg only supports memory blocks up to 928KB in size.  Not sure where that
> +                   specific amount comes from, but in testing it will completely fail to load
> +                   all minidump streams that follow a memory block that is larger than 928KB.
> +                   Because of this, we'll clamp all of the memory blocks that we add to the
> +                   file. */                   
> +                if (mdThd.Stack.Memory.DataSize > MINIDUMP_MEMORY_BLOCK_MAX){
> +                    size = MINIDUMP_MEMORY_BLOCK_MAX;
> +
> +                    /* since this is the thread stack we'll want to save this block top-down
> +                       instead of just clamping the buffer size */
> +                    base = mdThd.Stack.StartOfMemoryRange + (mdThd.Stack.Memory.DataSize - MINIDUMP_MEMORY_BLOCK_MAX);
> +
> +                    TRACE("    clamping the stack block starting at 0x%08llx {oldSize = %u bytes, newSize = %u bytes, newBase = 0x%08llx}\n",
> +                            mdThd.Stack.StartOfMemoryRange, mdThd.Stack.Memory.DataSize, size, base);
> +                }
> +
> +                else{
> +                    size = mdThd.Stack.Memory.DataSize;
> +                    base = mdThd.Stack.StartOfMemoryRange;
> +                }
> +
> +                add_memory_block(dc, base, size,
>                                   rva_base + sizeof(mdThdList.NumberOfThreads) +
>                                       mdThdList.NumberOfThreads * sizeof(mdThd) +
>                                       FIELD_OFFSET(MINIDUMP_THREAD, Stack.Memory.Rva));
>   
> ------------------------------------------------------------------------
>
>
>   
if that's really the case (and I'm even not sure we want to support this 
backward compatibility), a good fix would be to add several streams each 
up to 928k instead of clamping
A+

-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From xerox_xerox2000 at yahoo.co.uk  Fri Jan 18 14:44:55 2008
From: xerox_xerox2000 at yahoo.co.uk (Louis Lenders)
Date: Fri, 18 Jan 2008 20:44:55 +0000 (UTC)
Subject: GOM player
References: <a71bd89a0801171857n6eea25aco5bdd5e926756ccf0@mail.gmail.com><36bf289b0801172038w4b5a7879rbfac8b8f4cb4a218@mail.gmail.com>
	<a71bd89a0801172049x3da45bcck4eda621bb47a380a@mail.gmail.com>
	<00c001c85a09$1f568af0$4001a8c0@NATERS>
Message-ID: <loom.20080118T204103-978@post.gmane.org>



> 
> On 1/17/08, Dan Kegel <dank <at> kegel.com> wrote:
> > http://www.guardian.co.uk/technology/2008/jan/17/linux.korea
> > says everyone in Korea uses the GOM player...
> > It installs ok, but blew up when I tried to load the Sony music 
> > stream from its playlist. ...
> > http://www.gomplayer.com/
> > supposedly comes with lots of codecs.

> 
> 


Rolf Kalbermatter <r.kalbermatter <at> hccnet.nl> writes:

I tested it in wine, doesn't play anything in plain wine. With native quartz
(and installing some codecs with winetricks) it works , but there is still some
issues: window can't be moved, and it displays the movies just too bright.
Unfortunately I haven't seen any work on quartz latest months/years. For now i'd
give it a bronze rating.....



From brian.vincent at gmail.com  Fri Jan 18 20:11:20 2008
From: brian.vincent at gmail.com (Brian Vincent)
Date: Fri, 18 Jan 2008 19:11:20 -0700
Subject: WWN license issue
In-Reply-To: <200801181726.40090.alex@thehandofagony.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
	<b050a5e70801151220s6dcc3efpc379138fa63867ac@mail.gmail.com>
	<478D18A5.9050006@codeweavers.com>
	<200801181726.40090.alex@thehandofagony.com>
Message-ID: <3010968c0801181811x4e398431ie1f3301c43071ccf@mail.gmail.com>

On Jan 18, 2008 9:26 AM, Alexander Nicolaysen S?rnes <
alex at thehandofagony.com> wrote:

> Now that you mention it, since we are trying to move the AppDB to the
Affero
> GPL v3, it would be nice to have the WWN covered by the similar GLP v3 :)

Everything I wrote was GPL v2 and I'm quite happy with that.

-Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080118/72a50d29/attachment.htm 

From brian.vincent at gmail.com  Fri Jan 18 20:30:21 2008
From: brian.vincent at gmail.com (Brian Vincent)
Date: Fri, 18 Jan 2008 19:30:21 -0700
Subject: Wine font license
Message-ID: <3010968c0801181830u50dc9111n2c18573797c23ea5@mail.gmail.com>

Right now on our fonts we say they're LGPL.  (Look for the LangName
attribute in the .sfd file.)

We might want to make a modification to that.  Here's what the FSF has
to say about it:
http://www.fsf.org/licensing/licenses/gpl-faq.html#FontException

Or, to just copy and paste that info:
-----------------------8<-----------------
"How does the GPL apply to fonts?"

Font licensing is a complex issue which needs serious consideration.
The following license exception is experimental but approved for
general use. We welcome suggestions on this subject?please see this
this explanatory essay and write to licensing at gnu.org.

 To use this exception, add this text to the license notice of each
file in the package (to the extent possible), at the end of the text
that says the file is distributed under the GNU GPL:

 As a special exception, if you create a document which uses this
font, and embed this font or unaltered portions of this font into the
document, this font does not by itself cause the resulting document to
be covered by the GNU General Public License. This exception does not
however invalidate any other reasons why the document might be covered
by the GNU General Public License. If you modify this font, you may
extend this exception to your version of the font, but you are not
obligated to do so. If you do not wish to do so, delete this exception
statement from your version.

-Brian


From raccoonone at procyongames.com  Sat Jan 19 00:32:29 2008
From: raccoonone at procyongames.com (Christopher)
Date: Fri, 18 Jan 2008 22:32:29 -0800
Subject: Fix for LoadStringW
In-Reply-To: <877ii87kik.fsf@tac.ki.iif.hu>
References: <478F0460.3050709@procyongames.com>	<22821af30801162340u7f0324a1k969f1599586bebc3@mail.gmail.com>	<478F0D6C.3060106@procyongames.com>	<008601c858e9$b00a04d0$a600fea9@DMITRY>
	<877ii87kik.fsf@tac.ki.iif.hu>
Message-ID: <4791997D.9080002@procyongames.com>

Ferenc Wagner wrote:
> "Dmitry Timoshkov" <dmitry at codeweavers.com> writes:
>
>   
>> "Christopher" <raccoonone at procyongames.com> wrote:
>>
>>     
>>> Thanks for pointing that out! Am I suppose to attach a test case for all 
>>> my patches to wine-patches? I had submitted a testcase under the bug 
>>> report I filed, so I didn't attach it to the email.
>>>       
>> You have to add the test to the exiting tests in dlls/kernel32/tests
>>     
>
> Actually, there are LoadStringA tests in dlls/user32/tests/resource.c,
> maybe it's best to team up with those (and possibly extend for the
> same set of tests).
>   
I read the documentation on writing conformance tests. But is there a 
way for me to compile the tests under Linux to run on Windows? Having 
never written a conformance test before I would like to test it out on 
my own before I submit it. Also, once I write the test do I submit it at 
the same time as my patch, or do I need to submit the test first and 
wait for it to be accepted before sending in my patch?

Christopher


From Stefan.Leichter at camline.com  Sat Jan 19 02:35:16 2008
From: Stefan.Leichter at camline.com (Stefan Leichter)
Date: Sat, 19 Jan 2008 09:35:16 +0100
Subject: Fix for LoadStringW
In-Reply-To: <4791997D.9080002@procyongames.com>
References: <478F0460.3050709@procyongames.com> <877ii87kik.fsf@tac.ki.iif.hu>
	<4791997D.9080002@procyongames.com>
Message-ID: <200801190935.16229.Stefan.Leichter@camline.com>

Am Saturday 19 January 2008 07:32 schrieb Christopher:
> Ferenc Wagner wrote:
> > "Dmitry Timoshkov" <dmitry at codeweavers.com> writes:
> >> "Christopher" <raccoonone at procyongames.com> wrote:
> >>> Thanks for pointing that out! Am I suppose to attach a test case for
> >>> all my patches to wine-patches? I had submitted a testcase under the
> >>> bug report I filed, so I didn't attach it to the email.
> >>
> >> You have to add the test to the exiting tests in dlls/kernel32/tests
> >
> > Actually, there are LoadStringA tests in dlls/user32/tests/resource.c,
> > maybe it's best to team up with those (and possibly extend for the
> > same set of tests).
>
> I read the documentation on writing conformance tests. But is there a
> way for me to compile the tests under Linux to run on Windows? Having
> never written a conformance test before I would like to test it out on
> my own before I submit it. Also, once I write the test do I submit it at
> the same time as my patch, or do I need to submit the test first and
> wait for it to be accepted before sending in my patch?
>
> Christopher
To build your tests you can use mingw as cross compiler. See 
http://www.winehq.org/site/docs/winedev-guide/cross-compiling-tests
http://www.winehq.org/pipermail/wine-devel/2006-December/053069.html

You can send the tests and the fix for wine at the same time.

Bye Stefan


From alex at thehandofagony.com  Sat Jan 19 06:06:13 2008
From: alex at thehandofagony.com (Alexander Nicolaysen =?utf-8?q?S=C3=B8rnes?=)
Date: Sat, 19 Jan 2008 13:06:13 +0100
Subject: WWN license issue
In-Reply-To: <3010968c0801181811x4e398431ie1f3301c43071ccf@mail.gmail.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
	<200801181726.40090.alex@thehandofagony.com>
	<3010968c0801181811x4e398431ie1f3301c43071ccf@mail.gmail.com>
Message-ID: <200801191306.14404.alex@thehandofagony.com>

On Saturday 19 January 2008 03:11:20 Brian Vincent wrote:
> On Jan 18, 2008 9:26 AM, Alexander Nicolaysen S?rnes <
>
> alex at thehandofagony.com> wrote:
> > Now that you mention it, since we are trying to move the AppDB to the
>
> Affero
>
> > GPL v3, it would be nice to have the WWN covered by the similar GLP v3 :)
>
> Everything I wrote was GPL v2 and I'm quite happy with that.
>
> -Brian


Oh.  Which parts ddi you work on?  It might be a good idea to add author 
information to each file to allow for an easier overview of such issues.



Alexander N. S?rnes


From kuba at mareimbrium.org  Sat Jan 19 07:18:52 2008
From: kuba at mareimbrium.org (Kuba Ober)
Date: Sat, 19 Jan 2008 08:18:52 -0500
Subject: Suggestion to the list maintainer
In-Reply-To: <54607.78.61.224.253.1200679598.nsm@avilys.eik.lt>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
	<200801181256.14044.kuba@mareimbrium.org>
	<54607.78.61.224.253.1200679598.nsm@avilys.eik.lt>
Message-ID: <200801190818.52609.kuba@mareimbrium.org>

On Friday 18 January 2008, Tomas Kuliavas wrote:
> >> PS : I do find Subject prefixes ugly too... Bu I hadn't found a more
> >> handy solution.
> >
> > Don't use squirrelmail, or better yet - fix it. I suggest you replace
> > squirrel with Zimbra, it's much better. I'm just a happy user.
>
> Zimbra is commercial groupware suite. SquirrelMail is free webmail
> application. You are suggesting to replace whole user's email system with
> some proprietary locked product.

It works pretty well, is free as in beer, and the only "closed" parts are its 
Java core. A lot of other stuff, such as the JavaScript framework, and reused 
OSS project, are still open-source.

I have been using it for a year and I really beats everything else out the 
hands down. IMHO of course.

Cheers, Kuba


From kuba at mareimbrium.org  Sat Jan 19 07:26:37 2008
From: kuba at mareimbrium.org (Kuba Ober)
Date: Sat, 19 Jan 2008 08:26:37 -0500
Subject: Suggestion to the list maintainer
In-Reply-To: <2c97fe9d0801181128n1ab7c4b8y6a62a3b62bb27080@mail.gmail.com>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
	<54607.78.61.224.253.1200679598.nsm@avilys.eik.lt>
	<2c97fe9d0801181128n1ab7c4b8y6a62a3b62bb27080@mail.gmail.com>
Message-ID: <200801190826.37891.kuba@mareimbrium.org>

On Friday 18 January 2008, Tim Schmidt wrote:
> On Jan 18, 2008 1:06 PM, Tomas Kuliavas <tokul at users.sourceforge.net> wrote:
> > Zimbra is commercial groupware suite. SquirrelMail is free webmail
> > application. You are suggesting to replace whole user's email system with
> > some proprietary locked product.
>
> There's an (at least in name) FOSS version of Zimbra...  but eeew.  I
> am tasked with the unfortunate duty of admining a machine running
> Zimbra and I can say it's not worth the trouble.  Unless you like Java
> processes that gobble 2Gb of ram like cookies, that is.

On my server, the mysqld which runs the backend for Zimbra is taking up 0.4GB 
virtual, while Tomcat takes 1.1GB virtual. So don't bash Java just yet, as 
the "old school" DB server is taking up 1/4th of the system's virtual memory.

I don't really have much (or anything) in the way of problems with Zimbra. It 
uses the same ldap server for authentication as pam (ssh, etc) and samba, 
works pretty well with firefox, IE7 and IE6 with the service pack, and 
generally looks pleasant to the users.

There's no other equally functional solution out there that would be any 
better. I did my searching. Scalix took ages for me just to figure out how to 
set it up (they think that out-of-the-box functionality is an option, and 
that misleading or outright wrong documentation is OK), and besides those two 
there's really nothing else for a mostly OSS shop to deploy.

Having run squirrel for a 5+ years, and some of the most annoying bugs 
remaining unfixed (say support for national characters that actually works in 
real life), I just gave up.

Cheers, Kuba


From adamrimon at gmail.com  Sat Jan 19 07:58:14 2008
From: adamrimon at gmail.com (Adam Rimon)
Date: Sat, 19 Jan 2008 15:58:14 +0200
Subject: gdiplus: DEFINE_GUID
Message-ID: <479201F6.2080002@gmail.com>

Hi there,


I wanted to implement some gdiplus functions, but for this I need the 
GUIDs of some properties.

I took the GUIDs from 
http://www.reactos.org/generated/doxygen/db/de2/gdiplusimaging_8h-source.html,

but when I tried to compile gdiplus with the new gdiplusimaging.h with 
many DEFINE_GUID's,

the compiler kept complaining that "hidden symbol `FrameDimensionPage' 
isn't defined".


What did I do wrong?


-Adam




From tokul at users.sourceforge.net  Sat Jan 19 08:34:05 2008
From: tokul at users.sourceforge.net (Tomas Kuliavas)
Date: Sat, 19 Jan 2008 16:34:05 +0200 (EET)
Subject: Suggestion to the list maintainer
In-Reply-To: <200801190818.52609.kuba@mareimbrium.org>
References: <40546.195.6.79.173.1200489938.squirrel@www.fgv6.net>
	<200801181256.14044.kuba@mareimbrium.org>
	<54607.78.61.224.253.1200679598.nsm@avilys.eik.lt>
	<200801190818.52609.kuba@mareimbrium.org>
Message-ID: <50826.78.61.224.253.1200753245.nsm@avilys.eik.lt>


Sorry to other list readers about offtopic rant, but I can't stand when
people attack software that I like.

>> >> PS : I do find Subject prefixes ugly too... Bu I hadn't found a more
>> >> handy solution.
>> >
>> > Don't use squirrelmail, or better yet - fix it. I suggest you replace
>> > squirrel with Zimbra, it's much better. I'm just a happy user.
>>
>> Zimbra is commercial groupware suite. SquirrelMail is free webmail
>> application. You are suggesting to replace whole user's email system
>> with some proprietary locked product.
>
> It works pretty well, is free as in beer, and the only "closed" parts are
> its
> Java core. A lot of other stuff, such as the JavaScript framework, and
> reused OSS project, are still open-source.

Main Zimbra's product is not Open Source Edition. Zimbra sells its
products on annual/monthly subscription per seat basis.

Outlook, iSync, Blackberry, mobile connectors. Clustering. Backups. These
are not open.

Do Zimbra admins know how their email setup works or just click on
provided buttons? Can they change setup from default values without
breaking it completely? Do admins have option to revert their changes, if
something breaks? What happens if you deviate from standard OpenSource
Edition setup and see cryptic Java errors in your logs or Zimbra web
pages.

> I have been using it for a year and I really beats everything else out the
> hands down. IMHO of course.

I've been using SquirrelMail for more than 6 years.

You are comparing apples to oranges. Zimbra is not email client. It has
email client as part of whole server package. Zimbra's webmail client uses
AJAX, has better integration with email system (it is designed for Zimbra)
and it can't be compared with SquirrelMail. SquirrelMail is email system
agnostic. It works with any email setup that has good IMAP4rev1 service.
SquirrelMail has bundled client side filtering support, but use of server
side filtering with SquirrelMail is recommended. Client side filtering is
slow, because SquirrelMail is webmail client written in PHP without any
direct access to existing email setup.

Zimbra can't replace SquirrelMail, because it also replaces IMAP, SMTP and
POP services and other parts of email setup. Zimbra adds features that are
not needed for standard email client.

Suggestion to tag subject of mailing list emails is a good one. Mailman
can do that. I think some email clients (Outlook Express) can't filter
emails by custom headers.

from other email
> Having run squirrel for a 5+ years, and some of the most annoying bugs
> remaining unfixed (say support for national characters that actually works
> in real life)

Prove your claims. When these issues are related to broken MIME produced
by other software? When they are related to the fact that translations are
locked on charsets specific to selected language/country? When they are
related to big CJK charset tables that are hard to implement in pure PHP?

SquirrelMail does not use utf-8 for historical reasons, but you can always
change it to utf-8 if you want. Charset support was improved since 1.4.4.
It was 3-4 years ago.

I am former SquirrelMail i18n developer and I suspect that you are
spreading FUD about SquirrelMail. SquirrelMail has issues, but you and
others are free to fix them. If Zimbra has issues, you will have to wait
until Yahoo fixes it.

-- 
Tomas



From Andrew.Talbot at talbotville.com  Sat Jan 19 09:41:23 2008
From: Andrew.Talbot at talbotville.com (Andrew Talbot)
Date: Sat, 19 Jan 2008 15:41:23 +0000
Subject: shdocvw: Remove unneeded cast
References: <200801191456.43012.andrew.talbot@talbotville.com>
Message-ID: <fmt5n3$dsi$1@ger.gmane.org>

By coincidence, I've edited the same line as Jacek Caban in his
patch "shdocvw: Store URL in BindStatusCallback" but in a different way. So
if the two clash, please drop my patch: I shall revise it and try again
after you have considered his.

Thanks,

-- 
Andy.




From zgold550 at gmail.com  Sat Jan 19 10:32:58 2008
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Sat, 19 Jan 2008 11:32:58 -0500
Subject: WWN license issue
In-Reply-To: <200801191306.14404.alex@thehandofagony.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
	<200801181726.40090.alex@thehandofagony.com>
	<3010968c0801181811x4e398431ie1f3301c43071ccf@mail.gmail.com>
	<200801191306.14404.alex@thehandofagony.com>
Message-ID: <b050a5e70801190832m5a5683besbbb9e2aba77ce94e@mail.gmail.com>

On Jan 19, 2008 7:06 AM, Alexander Nicolaysen S?rnes
<alex at thehandofagony.com> wrote:
>
> On Saturday 19 January 2008 03:11:20 Brian Vincent wrote:
> > On Jan 18, 2008 9:26 AM, Alexander Nicolaysen S?rnes <
> >
> > alex at thehandofagony.com> wrote:
> > > Now that you mention it, since we are trying to move the AppDB to the
> >
> > Affero
> >
> > > GPL v3, it would be nice to have the WWN covered by the similar GLP v3 :)
> >
> > Everything I wrote was GPL v2 and I'm quite happy with that.
> >
> > -Brian
>
>
> Oh.  Which parts ddi you work on?  It might be a good idea to add author
> information to each file to allow for an easier overview of such issues.
>
>
>
> Alexander N. S?rnes
>

There is an <author> tag at the top of each issue that I've written,
and I know Brian did the same thing.  I've only been writing since
333; Brian wrote for a long time before me.

-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From alex at thehandofagony.com  Sat Jan 19 10:47:28 2008
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Sat, 19 Jan 2008 17:47:28 +0100
Subject: WWN license issue
In-Reply-To: <b050a5e70801190832m5a5683besbbb9e2aba77ce94e@mail.gmail.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>
	<200801191306.14404.alex@thehandofagony.com>
	<b050a5e70801190832m5a5683besbbb9e2aba77ce94e@mail.gmail.com>
Message-ID: <200801191747.28802.alex@thehandofagony.com>

On Saturday 19 January 2008 17:32:58 Zachary Goldberg wrote:
> On Jan 19, 2008 7:06 AM, Alexander Nicolaysen S?rnes
>
> <alex at thehandofagony.com> wrote:
> > On Saturday 19 January 2008 03:11:20 Brian Vincent wrote:
> > > On Jan 18, 2008 9:26 AM, Alexander Nicolaysen S?rnes <
> > >
> > > alex at thehandofagony.com> wrote:
> > > > Now that you mention it, since we are trying to move the AppDB to the
> > >
> > > Affero
> > >
> > > > GPL v3, it would be nice to have the WWN covered by the similar GLP
> > > > v3 :)
> > >
> > > Everything I wrote was GPL v2 and I'm quite happy with that.
> > >
> > > -Brian
> >
> > Oh.  Which parts ddi you work on?  It might be a good idea to add author
> > information to each file to allow for an easier overview of such issues.
> >
> >
> >
> > Alexander N. S?rnes
>
> There is an <author> tag at the top of each issue that I've written,
> and I know Brian did the same thing.  I've only been writing since
> 333; Brian wrote for a long time before me.


Ah, my mistake.  I thought he meant the AppDB.  



Alexander


From eric.pouech at orange.fr  Sat Jan 19 10:50:35 2008
From: eric.pouech at orange.fr (Eric Pouech)
Date: Sat, 19 Jan 2008 17:50:35 +0100
Subject: WWN license issue
In-Reply-To: <3010968c0801181811x4e398431ie1f3301c43071ccf@mail.gmail.com>
References: <aac02a530801150658o2f335dfagcbf16a5dd8f6a43a@mail.gmail.com>	<b050a5e70801151220s6dcc3efpc379138fa63867ac@mail.gmail.com>	<478D18A5.9050006@codeweavers.com>	<200801181726.40090.alex@thehandofagony.com>
	<3010968c0801181811x4e398431ie1f3301c43071ccf@mail.gmail.com>
Message-ID: <47922A5B.6060609@orange.fr>

Brian Vincent a ?crit :
> On Jan 18, 2008 9:26 AM, Alexander Nicolaysen S?rnes 
> <alex at thehandofagony.com <mailto:alex at thehandofagony.com>> wrote:
>
> > Now that you mention it, since we are trying to move the AppDB to 
> the Affero
> > GPL v3, it would be nice to have the WWN covered by the similar GLP 
> v3 :)
>
> Everything I wrote was GPL v2 and I'm quite happy with that.
>
> -Brian
> ------------------------------------------------------------------------
>
>
>   
same for me (regarding WWN)
A+

-- 
Eric Pouech
"The problem with designing something completely foolproof is to underestimate the ingenuity of a complete idiot." (Douglas Adams)




From jeremielapuree at yahoo.fr  Sat Jan 19 11:13:52 2008
From: jeremielapuree at yahoo.fr (paulo lesgaz)
Date: Sat, 19 Jan 2008 18:13:52 +0100 (CET)
Subject: d3dx9_24: first implementation
In-Reply-To: <47922A5B.6060609@orange.fr>
Message-ID: <10142.11843.qm@web26002.mail.ukl.yahoo.com>

Hello Tony

You need to forward all the functions of d3dx9_24 to these ones of d3dx9_36; not only these ones that are already implemented in d3dx9_36.

Moreover, when you create a new dll, you need to change plenty of files:
configure
configure.ac
Makefile.in
in the folder ~/wine-git/

You can take as example your d3dx9_36 implementation at this  following link: http://source.winehq.org/git/wine.git/?a=commitdiff;h=87fefc7ef4eabef2b5869d75c7

David

             
---------------------------------
 Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080119/9c8a5ea1/attachment.htm 

From truiken at gmail.com  Sat Jan 19 12:06:51 2008
From: truiken at gmail.com (James Hawkins)
Date: Sat, 19 Jan 2008 12:06:51 -0600
Subject: gdiplus: DEFINE_GUID
In-Reply-To: <479201F6.2080002@gmail.com>
References: <479201F6.2080002@gmail.com>
Message-ID: <22821af30801191006g79c3e0fep5950f2c01ce8da0c@mail.gmail.com>

On Jan 19, 2008 7:58 AM, Adam Rimon <adamrimon at gmail.com> wrote:
> Hi there,
>
>
> I wanted to implement some gdiplus functions, but for this I need the
> GUIDs of some properties.
>
> I took the GUIDs from
> http://www.reactos.org/generated/doxygen/db/de2/gdiplusimaging_8h-source.html,
>
> but when I tried to compile gdiplus with the new gdiplusimaging.h with
> many DEFINE_GUID's,
>
> the compiler kept complaining that "hidden symbol `FrameDimensionPage'
> isn't defined".
>
>
> What did I do wrong?
>

Don't copy code from ReactOS and submit it to Wine.

-- 
James Hawkins


From truiken at gmail.com  Sat Jan 19 12:14:49 2008
From: truiken at gmail.com (James Hawkins)
Date: Sat, 19 Jan 2008 12:14:49 -0600
Subject: d3dx9_24: first implementation
In-Reply-To: <10142.11843.qm@web26002.mail.ukl.yahoo.com>
References: <47922A5B.6060609@orange.fr>
	<10142.11843.qm@web26002.mail.ukl.yahoo.com>
Message-ID: <22821af30801191014i7ccbdb5fid2e452da2dce4402@mail.gmail.com>

On Jan 19, 2008 11:13 AM, paulo lesgaz <jeremielapuree at yahoo.fr> wrote:
> Hello Tony
>
> You need to forward all the functions of d3dx9_24 to these ones of d3dx9_36;
> not only these ones that are already implemented in d3dx9_36.
>
> Moreover, when you create a new dll, you need to change plenty of files:
> configure
> configure.ac
> Makefile.in
> in the folder ~/wine-git/
>

No, you don't need to include any autogenerated files in the patch.

-- 
James Hawkins


From jjmckenzie51 at sprintpcs.com  Sat Jan 19 12:24:04 2008
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Sat, 19 Jan 2008 11:24:04 -0700
Subject: gdiplus: DEFINE_GUID
In-Reply-To: <22821af30801191006g79c3e0fep5950f2c01ce8da0c@mail.gmail.com>
References: <479201F6.2080002@gmail.com>
	<22821af30801191006g79c3e0fep5950f2c01ce8da0c@mail.gmail.com>
Message-ID: <47924044.40504@sprintpcs.com>

James Hawkins wrote:
> On Jan 19, 2008 7:58 AM, Adam Rimon <adamrimon at gmail.com> wrote:
>   
>> Hi there,
>>
>>
>> I wanted to implement some gdiplus functions, but for this I need the
>> GUIDs of some properties.
>>
>> I took the GUIDs from
>> http://www.reactos.org/generated/doxygen/db/de2/gdiplusimaging_8h-source.html,
>>
>> but when I tried to compile gdiplus with the new gdiplusimaging.h with
>> many DEFINE_GUID's,
>>
>> the compiler kept complaining that "hidden symbol `FrameDimensionPage'
>> isn't defined".
>>
>>
>> What did I do wrong?
>>
>>     
>
> Don't copy code from ReactOS and submit it to Wine.
>
>   
Adam:

It is not permitted (and I don't know or care to know the reason why), 
code from the ReactOS project and attempt to put it in the Wine project.

You will have to make, from the ground up, new code.  However, if you 
attempt to submit it, these changes may be rejected in the future.

James McKenzie
(I am not allowed to submit code because I have an active MSDN 
subscription which gives me access to Windows and Windows project source 
code.)



From tony.wasserka at freenet.de  Sat Jan 19 12:22:06 2008
From: tony.wasserka at freenet.de (tony.wasserka at freenet.de)
Date: Sat, 19 Jan 2008 19:22:06 +0100
Subject: d3dx9_24: first implementation
Message-ID: <E1JGIKU-0008LW-9f@www13.emo.freenet-rz.de>

> You need to forward all the functions of d3dx9_24 to these ones of d3dx9_36;
> not only these ones that are already implemented in d3dx9_36.
> 
> Moreover, when you create a new dll, you need to change plenty of files:
> configure
> configure.ac
> Makefile.in
> in the folder ~/wine-git/
> 
> You can take as example your d3dx9_36 implementation at this  following
> link:
> http://source.winehq.org/git/wine.git/?a=commitdiff;h=87fefc7ef4eabef2b5869d
> 75c7
> 
> David

Hm, seems like I acted a little bit too hectic again...
I will send a fix within the next two days.
However, the configure.ac, Makefile.in etc, are autogenerated files from tools/make_makefiles, aren't they?
That automatically changes these files and so I don't need to patch these manually as far as I understood.
Anyways, thanks for pointing to my mistake.











From dank at kegel.com  Sat Jan 19 12:34:00 2008
From: dank at kegel.com (Dan Kegel)
Date: Sat, 19 Jan 2008 18:34:00 +0000
Subject: Need help getting alt key remapping tips right for Photoshop users
Message-ID: <a71bd89a0801191034t6bc9d39pc6115613c9c0f735@mail.gmail.com>

As of a few days ago, Photoshop CS2 activation works!
IMHO the announcement for wine-0.9.54 should
mention this prominently, and ask Photoshop users
to test it and report bugs.  In preparation for this,
I'm gathering tips for users at http://wiki.winehq.org/AdobePhotoshop
and will copy them into the appdb page for each version
of Photoshop once I've got them together.

The tough part is getting the instructions for alt key
remapping right (so the window manager doesn't
steal the key combinations normally used by photoshop's
clone tool).   I have instructions for a couple distributions
there (ubuntu and suse with KDE).

I'm looking for volunteers to check those instructions
and correct them if they're incorrect or incomplete.
Any takers?

Thanks,
Dan


From rob at codeweavers.com  Sat Jan 19 13:26:45 2008
From: rob at codeweavers.com (Robert Shearman)
Date: Sat, 19 Jan 2008 19:26:45 +0000
Subject: Shared IDL Imports
Message-ID: <47924EF5.7070802@codeweavers.com>

Hi all,

I've got a patch pending in my tree that adds another IDL file in 
include/wine/ but it has a dependency on another new IDL file in the 
same directory. The trouble is that the patch in the import statement 
gets lost in the generated IDL file. The attached diff shows an example 
of this, which gives the following error:

~/Documents/wine/dlls/ole32 rob$ make
../../tools/widl/widl -I. -I. -I../../include -I../../include  
-D__WINESRC__ -D_OLE32_ -DCOM_NO_WINDOWS_H  -h -H irot.h irot.idl
gcc -c -I. -I. -I../../include -I../../include  -D__WINESRC__ -D_OLE32_ 
-DCOM_NO_WINDOWS_H -D_REENTRANT -fPIC -Wall -pipe -fno-strict-aliasing 
-Wdeclaration-after-statement -Wwrite-strings -Wpointer-arith  -g -O2  
-o moniker.o moniker.c
In file included from moniker.c:48:
irot.h:11:18: error: test.h: No such file or directory

I see an number of options for fixing this, but they all have problems:

Solution 1: Fix the generation of include statements in header files 
generated from the IDL to include the path. This has the issue that it 
is not compatible with MIDL, so testing our IDL files with it becomes 
difficult (MIDL appears to only search in the current directory when it 
encounters an import statement with a path).
Solution 2: Include the dependent IDL file instead of importing it. This 
has the issue that the include needs to be guarded so that the 
definitions don't get declared if the dependent IDL file's header is 
imported before or after the first IDL file's header. This also has the 
trouble that it isn't compatible with MIDL as the guards are different 
between MIDL and widl.
Solution 3: Put the IDL files in another directory (e.g. include/idl) 
and add that to the -I statement in CFLAGS and not using a path in the 
import statment in the first IDL file. This has the issue of having to 
change the name of the IDL file in the DLL or program directory to avoid 
an infinite recursion of includes.

Which of these is the best solution or is there another solution?

Thanks,

-- 
Rob Shearman

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: import.diff
Url: http://www.winehq.org/pipermail/wine-devel/attachments/20080119/d9428ad6/attachment.txt 

From adamrimon at gmail.com  Sat Jan 19 15:03:01 2008
From: adamrimon at gmail.com (Adam Rimon)
Date: Sat, 19 Jan 2008 23:03:01 +0200
Subject: gdiplus: DEFINE_GUID
In-Reply-To: <47924044.40504@sprintpcs.com>
References: <479201F6.2080002@gmail.com>
	<22821af30801191006g79c3e0fep5950f2c01ce8da0c@mail.gmail.com>
	<47924044.40504@sprintpcs.com>
Message-ID: <47926585.50500@gmail.com>

On 01/19/2008 08:24 PM, James McKenzie wrote:
> James Hawkins wrote:
>> On Jan 19, 2008 7:58 AM, Adam Rimon <adamrimon at gmail.com> wrote:
>>  
>>> Hi there,
>>>
>>>
>>> I wanted to implement some gdiplus functions, but for this I need the
>>> GUIDs of some properties.
>>>
>>> I took the GUIDs from
>>> http://www.reactos.org/generated/doxygen/db/de2/gdiplusimaging_8h-source.html, 
>>>
>>>
>>> but when I tried to compile gdiplus with the new gdiplusimaging.h with
>>> many DEFINE_GUID's,
>>>
>>> the compiler kept complaining that "hidden symbol `FrameDimensionPage'
>>> isn't defined".
>>>
>>>
>>> What did I do wrong?
>>>
>>>     
>>
>> Don't copy code from ReactOS and submit it to Wine.
>>
>>   
> Adam:
>
> It is not permitted (and I don't know or care to know the reason why), 
> code from the ReactOS project and attempt to put it in the Wine project.
>
> You will have to make, from the ground up, new code.  However, if you 
> attempt to submit it, these changes may be rejected in the future.
>
> James McKenzie
> (I am not allowed to submit code because I have an active MSDN 
> subscription which gives me access to Windows and Windows project 
> source code.)
>
Well, right now I don't send it to Wine. I just want to define a GUID in 
gdiplusimaging.h.
My question is about adding a GUID to a header file and compile it, not 
about the GUIDs themselves.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20080119/13859edb/attachment.htm 

From winehacker at gmail.com  Sat Jan 19 21:57:04 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sat, 19 Jan 2008 22:57:04 -0500
Subject: gdiplus: DEFINE_GUID
In-Reply-To: <47924044.40504@sprintpcs.com>
References: <479201F6.2080002@gmail.com>
	<22821af30801191006g79c3e0fep5950f2c01ce8da0c@mail.gmail.com>
	<47924044.40504@sprintpcs.com>
Message-ID: <19e31a080801191957n5063d0f6r5c5d314ae7ce7f7e@mail.gmail.com>

On Jan 19, 2008 1:24 PM, James McKenzie <jjmckenzie51 at sprintpcs.com> wrote:
> James McKenzie
> (I am not allowed to submit code because I have an active MSDN
> subscription which gives me access to Windows and Windows project source
> code.)

Now the real question I have is, are you not allowed to ever
contribute code to Wine ever again even if you cancel your MSDN
subscription and swear before King and Country that you no longer have
access to Windows code....

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From dmitry at codeweavers.com  Sat Jan 19 22:33:28 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sun, 20 Jan 2008 12:33:28 +0800
Subject: [PATCH] Wine's ChangeDisplaySettingsEx is too strict
References: <200801192327.01753.gyurco@freemail.hu>
Message-ID: <007c01c85b1d$9cd28280$a600fea9@DMITRY>

"Szombathelyi Gy?rgy" <gyurco at freemail.hu> wrote:

> The game changes display resolution with ChangeDisplaySettingsEx, but doesn't
> specify DM_PELSWIDTH and DM_PELSHEIGHT at devmode->dmFields, so it quits
> early with an error message. Of course, it works on windows. So I attached a
> patch which make wine WinXP compatible...Hope you accept it.

Please add a test case for this to dlls/user32/tests/monitor.c.

-- 
Dmitry. 



From dmitry at codeweavers.com  Sat Jan 19 23:43:22 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sun, 20 Jan 2008 13:43:22 +0800
Subject: Fix makedep to work on windows again
References: <19e31a080801192120w637fd9e1rdb299d7ae48ceaf3@mail.gmail.com>
Message-ID: <00ee01c85b27$5fb44140$a600fea9@DMITRY>

"Steven Edwards" <winehacker at gmail.com> wrote:

> Make on mingw does not like mixed line endings. Don't do it, ever.
> diffed from a cvs checkout
> as MSYS git is slower than molasses flowing uphill on a Minnesota winter day.
> 
> Changelog: open makedep in binary mode when writing or appending, move
> the EOF marker

I guess that you just use the sources fetched in Linux? Don't do that,
get the source via cvs under Windows instead, in that case you don't
get mixed line endings. Or alternatively convert LF to CRLF before
building.

-- 
Dmitry.


From lats at yless4u.com.au  Sun Jan 20 03:17:43 2008
From: lats at yless4u.com.au (Jeff Latimer)
Date: Sun, 20 Jan 2008 20:17:43 +1100
Subject: [PATCH] Wine's ChangeDisplaySettingsEx is too strict
In-Reply-To: <200801192327.01753.gyurco@freemail.hu>
References: <200801192327.01753.gyurco@freemail.hu>
Message-ID: <479311B7.8010205@yless4u.com.au>

Szombathelyi Gy?rgy wrote:
>      if ((devmode->dmFields & (DM_PELSWIDTH | DM_PELSHEIGHT)) != (DM_PELSWIDTH | DM_PELSHEIGHT))
>      {
>          WARN("devmode doesn't specify the resolution: %04x\n", devmode->dmFields);
> -        return DISP_CHANGE_BADMODE;
>      } 
Is this warning still valid if this is valid Windows behaviour?

Jeff


From dmitry at codeweavers.com  Sun Jan 20 03:51:14 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Sun, 20 Jan 2008 17:51:14 +0800
Subject: [PATCH] Wine's ChangeDisplaySettingsEx is too strict
References: <200801192327.01753.gyurco@freemail.hu>
	<479311B7.8010205@yless4u.com.au>
Message-ID: <001301c85b4a$00b37e90$a600fea9@DMITRY>

"Jeff Latimer" <lats at yless4u.com.au> wrote:

> >      if ((devmode->dmFields & (DM_PELSWIDTH | DM_PELSHEIGHT)) != (DM_PELSWIDTH | DM_PELSHEIGHT))
> >      {
> >          WARN("devmode doesn't specify the resolution: %04x\n", devmode->dmFields);
> > -        return DISP_CHANGE_BADMODE;
> >      } 
> Is this warning still valid if this is valid Windows behaviour?

Yes it's still valid until there is a test case which shows that Windows
does something different in this case.

-- 
Dmitry.


From r.kalbermatter at hccnet.nl  Sun Jan 20 04:37:13 2008
From: r.kalbermatter at hccnet.nl (Rolf Kalbermatter)
Date: Sun, 20 Jan 2008 11:37:13 +0100
Subject: d3dx9_24: first implementation
In-Reply-To: <10142.11843.qm@web26002.mail.ukl.yahoo.com>
References: <47922A5B.6060609@orange.fr>
	<10142.11843.qm@web26002.mail.ukl.yahoo.com>
Message-ID: <009701c85b50$6b567a80$4001a8c0@NATERS>

paulo lesgaz wrote
	
> Moreover, when you create a new dll, you need to change plenty of files:
>	configure

Why would you want to change this? I thought autoconfigure will write this
automatically based on configure.ac. And I'm sure Alexandre runs
autoconfigure
whenever he changes something at the according files. 

>	configure.ac
>	Makefile.in
>	in the folder ~/wine-git/
	
Rolf Kalbermatter



From r.kalbermatter at hccnet.nl  Sun Jan 20 06:34:18 2008
From: r.kalbermatter at hccnet.nl (Rolf Kalbermatter)
Date: Sun, 20 Jan 2008 13:34:18 +0100
Subject: gdiplus: DEFINE_GUID
In-Reply-To: <47924044.40504@sprintpcs.com>
References: <479201F6.2080002@gmail.com><22821af30801191006g79c3e0fep5950f2c01ce8da0c@mail.gmail.com>
	<47924044.40504@sprintpcs.com>
Message-ID: <009801c85b60$c68bae10$4001a8c0@NATERS>

James McKenzie

> (I am not allowed to submit code because I have an active 
> MSDN subscription which gives me access to Windows and 
> Windows project source code.)

I haven't had an MSDN subscription in a while but I think it would be very
strange that it comes with Windows source code. The most I have seen is the
crt source code from the Visual Studio Development systems (and there would
be the MFC source code too I suppose, but I couldn't care about that less)
although I never really cared to dig into the crt and only ever really got
into it more by accident when deugging my own code and single stepping into
a runtime function, which is mostly more a pain than anything else.

My understanding is that the fact that I had the possibility to look at the
crt code would at most prevent me to submit patches to msvcrt and friends
but
not to Wine as a whole.

Why an MSDN subsciption should prevent someone from submitting any code to
Wine
is beyond me, but maybe they changed the EULA of it?? (Which I would suspect
would not hold in court because of antitrust concerns).

Or did they really start to ship source code with it? I simply can't believe
they would ship ntdll.dll or ntos.exe or other core DLL source code ever.

Rolf Kalbermatter







From gyurco at freemail.hu  Sun Jan 20 10:25:22 2008
From: gyurco at freemail.hu (Szombathelyi =?iso-8859-1?q?Gy=F6rgy?=)
Date: Sun, 20 Jan 2008 17:25:22 +0100
Subject: [PATCH] Wine's ChangeDisplaySettingsEx is too strict
In-Reply-To: <007c01c85b1d$9cd28280$a600fea9@DMITRY>
References: <200801192327.01753.gyurco@freemail.hu>
	<007c01c85b1d$9cd28280$a600fea9@DMITRY>
Message-ID: <200801201725.23168.gyurco@freemail.hu>

Ezzel a d?tummal: Sunday 20 January 2008 05.33.28 Dmitry Timoshkov ezt ?rta:
> "Szombathelyi Gy?rgy" <gyurco at freemail.hu> wrote:
> > The game changes display resolution with ChangeDisplaySettingsEx, but
> > doesn't specify DM_PELSWIDTH and DM_PELSHEIGHT at devmode->dmFields, so
> > it quits early with an error message. Of course, it works on windows. So
> > I attached a patch which make wine WinXP compatible...Hope you accept it.
>
> Please add a test case for this to dlls/user32/tests/monitor.c.


Here's the test (the game above uses similar parameters, only 
DM_DISPLAYFREQUENCY in dmFields, but all other dmxxx members are filled in). 
But now test 9 and 10 fails with my patch (the return code from 
ChangeDisplaySettingsEx now 0=OK). Are they really fails on Windows? The last 
test failed already in wine, without my patch.

Regards,
Gy?rgy
-------------- next part --------------
A non-text attachment was scrubbed...
Name: monitor_test.diff
Type: text/x-diff
Size: 690 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20080120/8bb68e1c/attachment.diff 

From winehacker at gmail.com  Sun Jan 20 12:15:47 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 20 Jan 2008 13:15:47 -0500
Subject: Fix makedep to work on windows again
In-Reply-To: <00ee01c85b27$5fb44140$a600fea9@DMITRY>
References: <19e31a080801192120w637fd9e1rdb299d7ae48ceaf3@mail.gmail.com>
	<00ee01c85b27$5fb44140$a600fea9@DMITRY>
Message-ID: <19e31a080801201015u698bb022tc923a8ca2bb8697a@mail.gmail.com>

On Jan 20, 2008 12:43 AM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> I guess that you just use the sources fetched in Linux? Don't do that,
> get the source via cvs under Windows instead, in that case you don't
> get mixed line endings. Or alternatively convert LF to CRLF before
> building.

MSYS cvs does not set Windows style line endings.

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From winehacker at gmail.com  Sun Jan 20 14:26:50 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 20 Jan 2008 15:26:50 -0500
Subject: gdiplus: DEFINE_GUID
In-Reply-To: <009801c85b60$c68bae10$4001a8c0@NATERS>
References: <479201F6.2080002@gmail.com>
	<22821af30801191006g79c3e0fep5950f2c01ce8da0c@mail.gmail.com>
	<47924044.40504@sprintpcs.com> <009801c85b60$c68bae10$4001a8c0@NATERS>
Message-ID: <19e31a080801201226s64d00c4frb50e2534a4e9d486@mail.gmail.com>

On Jan 20, 2008 7:34 AM, Rolf Kalbermatter <r.kalbermatter at hccnet.nl> wrote:

> Why an MSDN subsciption should prevent someone from submitting any code to
> Wine
> is beyond me, but maybe they changed the EULA of it?? (Which I would suspect
> would not hold in court because of antitrust concerns).
>
> Or did they really start to ship source code with it? I simply can't believe
> they would ship ntdll.dll or ntos.exe or other core DLL source code ever.

MSDNAA Subscriber downloads like for university students contain the
source for ntos. Microsoft hired Dave Probert to put together the
Windows Academic Program and University Source Licenses where they
give away like 90% of the core system to push universities to use it
to teach operating system design. As I don't have a MSDNAA account I
don't know how much of the system is really there but the source
license terms are very liberal. i.e. You can learn from it but not
copy any code from it, any ideas you take with you are not
restricted,etc. I have a friend in the program so I will ask him if it
includes any of the Win32 api, but I doubt it.

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From dmitry at codeweavers.com  Sun Jan 20 20:45:46 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Mon, 21 Jan 2008 10:45:46 +0800
Subject: Fix makedep to work on windows again
References: <19e31a080801192120w637fd9e1rdb299d7ae48ceaf3@mail.gmail.com><00ee01c85b27$5fb44140$a600fea9@DMITRY>
	<19e31a080801201015u698bb022tc923a8ca2bb8697a@mail.gmail.com>
Message-ID: <004401c85bd7$d54711c0$a600fea9@DMITRY>

"Steven Edwards" <winehacker at gmail.com> wrote:

> MSYS cvs does not set Windows style line endings.

Then this is a bug in MSYS CVS. My cvs.exe in Windows
produces correct Wine sources, with cr/lf EOLs.

-- 
Dmitry.


From winehacker at gmail.com  Sun Jan 20 21:12:15 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 20 Jan 2008 22:12:15 -0500
Subject: Fix makedep to work on windows again
In-Reply-To: <004401c85bd7$d54711c0$a600fea9@DMITRY>
References: <19e31a080801192120w637fd9e1rdb299d7ae48ceaf3@mail.gmail.com>
	<00ee01c85b27$5fb44140$a600fea9@DMITRY>
	<19e31a080801201015u698bb022tc923a8ca2bb8697a@mail.gmail.com>
	<004401c85bd7$d54711c0$a600fea9@DMITRY>
Message-ID: <19e31a080801201912t5b2ed74dn7bb3a20e2e88cf02@mail.gmail.com>

On Jan 20, 2008 9:45 PM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> Then this is a bug in MSYS CVS. My cvs.exe in Windows
> produces correct Wine sources, with cr/lf EOLs.

It also happens with MSYS git and git is the preferred method of
getting Winehq sources and there is no other GIT for windows so I say
it should still be applied...unless you think I should perster the
MSYS people to change the default line ending behavior for all
applications in their runtime...

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From dmitry at codeweavers.com  Sun Jan 20 21:24:09 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Mon, 21 Jan 2008 11:24:09 +0800
Subject: Fix makedep to work on windows again
References: <19e31a080801192120w637fd9e1rdb299d7ae48ceaf3@mail.gmail.com><00ee01c85b27$5fb44140$a600fea9@DMITRY><19e31a080801201015u698bb022tc923a8ca2bb8697a@mail.gmail.com><004401c85bd7$d54711c0$a600fea9@DMITRY>
	<19e31a080801201912t5b2ed74dn7bb3a20e2e88cf02@mail.gmail.com>
Message-ID: <00e701c85bdd$17695c20$a600fea9@DMITRY>

"Steven Edwards" <winehacker at gmail.com> wrote:

> On Jan 20, 2008 9:45 PM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
>> Then this is a bug in MSYS CVS. My cvs.exe in Windows
>> produces correct Wine sources, with cr/lf EOLs.
> 
> It also happens with MSYS git and git is the preferred method of
> getting Winehq sources and there is no other GIT for windows so I say
> it should still be applied...unless you think I should perster the
> MSYS people to change the default line ending behavior for all
> applications in their runtime...

Fixing the bugs in MSYS would be preferrable IMO.

-- 
Dmitry.


From winehacker at gmail.com  Sun Jan 20 21:33:52 2008
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 20 Jan 2008 22:33:52 -0500
Subject: Fix makedep to work on windows again
In-Reply-To: <00e701c85bdd$17695c20$a600fea9@DMITRY>
References: <19e31a080801192120w637fd9e1rdb299d7ae48ceaf3@mail.gmail.com>
	<00ee01c85b27$5fb44140$a600fea9@DMITRY>
	<19e31a080801201015u698bb022tc923a8ca2bb8697a@mail.gmail.com>
	<004401c85bd7$d54711c0$a600fea9@DMITRY>
	<19e31a080801201912t5b2ed74dn7bb3a20e2e88cf02@mail.gmail.com>
	<00e701c85bdd$17695c20$a600fea9@DMITRY>
Message-ID: <19e31a080801201933x6791cb65l3816e86eb75e9168@mail.gmail.com>

On Jan 20, 2008 10:24 PM, Dmitry Timoshkov <dmitry at codeweavers.com> wrote:
> Fixing the bugs in MSYS would be preferrable IMO.

I forgot that Cygwin setup has the ability at the end of the install
to set the default line endings, I assume msys being a derivative
might have this capability but not enabled or its something that would
be easy to rip from their sources. Maybe its an environmental variable
or something. If Julliard rejects the patch then I'll look in to it.

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From dmitry at codeweavers.com  Mon Jan 21 02:29:07 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Mon, 21 Jan 2008 16:29:07 +0800
Subject: LoadStringW [1/2]
References: <4794545B.4000909@procyongames.com>
Message-ID: <005101c85c07$b280a180$a600fea9@DMITRY>

"Christopher" <raccoonone at procyongames.com> wrote:

> +static void test_LoadStringW(void)
> +{
> +    HINSTANCE hInst = GetModuleHandle(NULL);
> +    WCHAR copiedstring[128], returnedstring[128], *resourcepointer = NULL;
> +    int strlen, strlen2;
> +
> +    /* Check that the string which is returned by LoadStringW matches 
> +       the string at the pointer returned by Load StringW when called with buflen = 0 */
> +    strlen = LoadStringW(hInst, 2, (WCHAR *) &resourcepointer, 0); /* get pointer to resource. */
> +    ok(strlen > 0, "LoadStringW failed to get pointer to resource 2, ret %d, err %d \n", strlen, GetLastError());
> +    
> +    strlen2 = LoadStringW(hInst, 2, returnedstring, sizeof(returnedstring) /sizeof(WCHAR));
> +    ok(strlen == strlen2, "LoadStringW returned different values dependent on buflen. ret1 %d, ret2 %d \n", 
> +        strlen, strlen2);
> +    ok(strlen2 > 0, "LoadStringW failed to load resource 2, ret %d, err %d \n", strlen2, GetLastError());
> +    
> +    if(resourcepointer != NULL)
> +    {
> +        memcpy(copiedstring, resourcepointer, strlen * sizeof(WCHAR));
> +        copiedstring[strlen] = '\0';
> +    }
> +    /* check that strings match */
> +    ok(!memcmp(copiedstring, returnedstring, (strlen + 1)*sizeof(WCHAR)),
> +        "LoadStringW returned a string that does not match the string pointed to by the pointer it returned. \
> +         returnedstring = %ls, copiedstring = %ls", returnedstring, copiedstring);
> +}

It's not clear what this test is supposed to show. If the 1st call
to LoadStringW is supposed to set resourcepointer to not NULL, why
don't you test it? Then 'if(resourcepointer != NULL)' check and copying
to copiedstring are not needed.

Also, if the test depends on a later patch to not fail, the test should be
included in the patch.

-- 
Dmitry.


From dmitry at codeweavers.com  Mon Jan 21 02:38:00 2008
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Mon, 21 Jan 2008 16:38:00 +0800
Subject: LoadStringW [1/2]
References: <4794545B.4000909@procyongames.com>
	<005101c85c07$b280a180$a600fea9@DMITRY>
Message-ID: <000601c85c08$f006a440$a600fea9@DMITRY>

"Dmitry Timoshkov" <dmitry at codeweavers.com> wrote:

> It's not clear what this test is supposed to show. If the 1st call
> to LoadStringW is supposed to set resourcepointer to not NULL, why
> don't you test it? Then 'if(resourcepointer != NULL)' check and copying
> to copiedstring are not needed.
> 
> Also, if the test depends on a later patch to not fail, the test should be
> included in the patch.

Also, you need to test LoadStringA, to see if it behaves similarly. It would be
also interesting to test LoadStringA/W with both buffer and buffer length set
to 0.

In addition, as I already pointed out you need to inspect Wine source and fix
the places which will be broken by your fix.

-- 
Dmitry.


