From dank at kegel.com  Sat Dec  1 00:06:09 2007
From: dank at kegel.com (Dan Kegel)
Date: Fri, 30 Nov 2007 22:06:09 -0800
Subject: ntdll: unload modules based on inter-module dependencies
Message-ID: <a71bd89a0711302206k3d44a9cey5d54a5a4f25457b5@mail.gmail.com>

This patch seems to break wineprefixcreate.


From zac at zacbrown.org  Sat Dec  1 08:41:39 2007
From: zac at zacbrown.org (Zac Brown)
Date: Sat, 01 Dec 2007 09:41:39 -0500
Subject: wininet: Add test for FtpGetCurrentDirectoryA
In-Reply-To: <22821af30711301353s33fd207bm1675aa635e7d2bcb@mail.gmail.com>
References: <475084D4.3090607@zacbrown.org>
	<22821af30711301353s33fd207bm1675aa635e7d2bcb@mail.gmail.com>
Message-ID: <475172A3.5080404@zacbrown.org>

James Hawkins wrote:
> On Nov 30, 2007 3:47 PM, Zac Brown <zac at zacbrown.org> wrote:
>> Hi,
>>
>> Changelog:
>> * Add a test in dlls/wininet/tests/ftp.c for FtpGetCurrentDirectoryA
>>
>> Notes:
>> * This test passes fully without error on Windows XP, with the test compiled by Visual Studio Express C++ 2008.
>> * The functions this test call are currently broken in wine and I am in the process of fixing them myself.
>>
>> Patch is pasted below:
>>
>>
>> ---
>>  dlls/wininet/tests/ftp.c |   84 +++++++++++++++++++++++++++++++++++++++++++++-
>>  1 files changed, 83 insertions(+), 1 deletions(-)
>>
>> diff --git a/dlls/wininet/tests/ftp.c b/dlls/wininet/tests/ftp.c
>> index 6d03fb8..f6517b0 100644
>> --- a/dlls/wininet/tests/ftp.c
>> +++ b/dlls/wininet/tests/ftp.c
>> @@ -691,6 +691,85 @@ static void test_command(HINTERNET hFtp, HINTERNET hConnect)
>>      }
>>  }
>>
>> +static void test_get_current_dir(HINTERNET hFtp, HINTERNET hConnect)
>> +{
>> +    BOOL    bRet;
>> +    DWORD   dwCurrentDirectory = MAX_PATH;
>> +    CHAR    lpszCurrentDirectory[MAX_PATH];
>> +
>> +    /* change directories to get a more interesting pwd */
>> +    bRet = FtpCommandA(hFtp, FALSE, FTP_TRANSFER_TYPE_ASCII, "CWD pub/", 0, NULL);
>> +    if(bRet == FALSE)
>> +    {
>> +        trace("Failed to change directories in test_get_current_dir(HINTERNET hFtp).\n");
>> +        return;
>> +    }
>> +
>> +    /* test with all NULL arguments */
>> +    SetLastError(0xdeadbeef);
>> +    bRet = FtpGetCurrentDirectoryA( NULL, NULL, 0 );
>> +    ok ( bRet == FALSE, "Expected FtpGetCurrentDirectoryA to fail\n" );
>> +    ok ( GetLastError() == ERROR_INVALID_HANDLE, "Expected ERROR_INVALID_HANDLE, got: %d\n", GetLastError());
>> +
>> +    /* test with NULL parameters instead of expected LPSTR/LPDWORD */
>> +    SetLastError(0xdeadbeef);
>> +    bRet = FtpGetCurrentDirectoryA( hFtp, NULL, 0 );
>> +    ok ( bRet == FALSE, "Expected FtpGetCurrentDirectoryA to fail\n" );
>> +    ok ( GetLastError() == ERROR_INVALID_PARAMETER, "Expected ERROR_INVALID_PARAMETER, got: %d\n", GetLastError());
>> +
>> +    /* test with no valid handle and valid parameters */
>> +    SetLastError(0xdeadbeef);
>> +    bRet = FtpGetCurrentDirectoryA( NULL, lpszCurrentDirectory, &dwCurrentDirectory );
>> +    ok ( bRet == FALSE, "Expected FtpGetCurrentDirectoryA to fail\n" );
>> +    ok ( GetLastError() == ERROR_INVALID_HANDLE, "Expected ERROR_INVALID_HANDLE, got: %d\n", GetLastError());
>> +
>> +    /* test with invalid dwCurrentDirectory and all other parameters correct */
>> +    SetLastError(0xdeadbeef);
>> +    bRet = FtpGetCurrentDirectoryA( hFtp, lpszCurrentDirectory, 0 );
>> +    ok ( bRet == FALSE, "Expected FtpGetCurrentDirectoryA to fail\n" );
>> +    ok ( GetLastError() == ERROR_INVALID_PARAMETER, "Expected ERROR_INVALID_PARAMETER, got: %d\n", GetLastError());
>> +
>> +    /* test with invalid lpszCurrentDirectory and all other parameters correct */
>> +    SetLastError(0xdeadbeef);
>> +    bRet = FtpGetCurrentDirectoryA( hFtp, NULL, &dwCurrentDirectory );
>> +    ok ( bRet == FALSE, "Expected FtpGetCurrentDirectoryA to fail\n" );
>> +    ok ( GetLastError() == ERROR_INSUFFICIENT_BUFFER, "Expected ERROR_INSUFFICIENT_BUFFER, got: %d\n", GetLastError());
>> +
>> +    /* test to show it checks the handle type */
>> +    SetLastError(0xdeadbeef);
>> +    bRet = FtpGetCurrentDirectoryA( hConnect, lpszCurrentDirectory, &dwCurrentDirectory );
>> +    ok ( bRet == FALSE, "Expected FtpGetCurrentDirectoryA to fail\n" );
>> +    ok ( GetLastError() == ERROR_INTERNET_INCORRECT_HANDLE_TYPE,
>> +    "Expected ERROR_INTERNET_INCORRECT_HANDLE_TYPE, got: %d\n", GetLastError());
>> +
>> +    /* test for the current directory with legitimate values */
>> +    SetLastError(0xdeadbeef);
>> +    bRet = FtpGetCurrentDirectoryA( hFtp, lpszCurrentDirectory, &dwCurrentDirectory );
>> +    ok ( bRet == TRUE, "Expected FtpGetCurrentDirectoryA to pass\n" );
>> +    ok ( lstrcmp(lpszCurrentDirectory, "/pub") == 0, "Expected returned value \"%s\" to match \"%s\" \n", (char*)lpszCurrentDirectory, "/pub");
>> +    ok ( GetLastError() == ERROR_SUCCESS, "Expected ERROR_SUCCESS, got: %d\n", GetLastError());
>> +
>> +
>> +    /* test for the current directory with a size only large enough to
>> +     * fit the string and not the null terminating character */
>> +    SetLastError(0xdeadbeef);
>> +    dwCurrentDirectory = 4;
>> +    lpszCurrentDirectory[4] = 'a'; /* set position 4 of the array to something else to make sure a leftover \0 isn't fooling the test */
>> +    bRet = FtpGetCurrentDirectoryA( hFtp, lpszCurrentDirectory, &dwCurrentDirectory );
>> +    ok ( bRet == FALSE, "Expected FtpGetCurrentDirectoryA to fail\n");
>> +    ok ( lstrcmp(lpszCurrentDirectory, "/pub") != 0, "Expected returned value \"%s\" to not match \"%s\" \n", (char*)lpszCurrentDirectory, "/pub");
>> +    ok ( GetLastError() == ERROR_INSUFFICIENT_BUFFER, "Expected ERROR_INSUFFICIENT_BUFFER, got: %d\n", GetLastError());
>> +
>> +    /* test for the current directory with a size large enough to store
>> +     * the expected string as well as the null terminating character */
>> +    SetLastError(0xdeadbeef);
>> +    dwCurrentDirectory = 5;
>> +    bRet = FtpGetCurrentDirectoryA( hFtp, lpszCurrentDirectory, &dwCurrentDirectory );
>> +    ok ( bRet == TRUE, "Expected FtpGetCurrentDirectoryA to pass\n");
>> +    ok ( lstrcmp(lpszCurrentDirectory, "/pub") == 0, "Expected returned value \"%s\" to match \"%s\" \n", (char*)lpszCurrentDirectory, "/pub");
>> +    ok ( GetLastError() == ERROR_SUCCESS, "Expected ERROR_SUCCESS, got: %d\n", GetLastError());
>> +}
>> +
>>  START_TEST(ftp)
>>  {
>>      HANDLE hInternet, hFtp, hHttp;
>> @@ -733,7 +812,10 @@ START_TEST(ftp)
>>      test_removedir(hFtp, hHttp);
>>      test_renamefile(hFtp, hHttp);
>>      test_command(hFtp, hHttp);
>> -
>> +todo_wine
>> +{
>> +    test_get_current_dir(hFtp, hHttp);
>> +}
>>      InternetCloseHandle(hHttp);
>>      InternetCloseHandle(hFtp);
>>      InternetCloseHandle(hInternet);
>>
> 
> You put the todo_wine around each block of ok's that fail, not around
> the whole test function.
> 

Ah ok, I'll fix that and resend.

-Zac


From felix at compsoc.nuigalway.ie  Sat Dec  1 10:26:38 2007
From: felix at compsoc.nuigalway.ie (Darragh Bailey)
Date: Sat, 1 Dec 2007 16:26:38 +0000
Subject: No subject
Message-ID: <20071201162638.GA9935@compsoc.nuigalway.ie>

Cc: 
Bcc: 
Subject: Re: xlviewer install cmdline passed from CreateProcessA to msiexec looks wrong
Reply-To: 
In-Reply-To: <20071124025012.GA27234 at compsoc.nuigalway.ie>

After doing further debugging I've come to the conclusion that the
behaviour found when I was looking at bug 9628 is indeed a bug and have
logged a new one accordingly with as much detail as I thought was
necessary.
http://bugs.winehq.org/show_bug.cgi?id=10618

Basically it turns out that if a program is called via CreateProcessW,
the command line used may not result in the same argv being passed to
the target program as it was called directly.

In this case there was a difference in the argv seen by msiexec
depending on whether it was run directly or called by the setup exe.


Traced the bug to a corner case in the function build_argv in
dlls/kernel32/process.c.

Basically it does not detect the end of the argument correctly when
dealing with the following text.

SETUPEXEPATH=\"C:\\windows\\temp\\IXP030.TMP\\\"

Because of the escaped '\', which should be valid since it is part of a 
directory path, at the end followed by the escaped '"', the function 
thinks that it has just encountered an escaped '"' instead of the end of
the argument.

I'm not 100% sure how to solve this, so I will probably have to run some
tests on windows using the CreateProcessW call and study the argv
received by the target.

I have a feeling that the rule is probably something like:

If in quotes && text before slashes != whitespace && text after quote ==
whitespace:
	then found matching quote


Hopefully I should be able to come up with test cases that will show the
truth of this, and then be able to confirm what the function build_argv
should be testing to catch cases like this.


-- 
Darragh

"Nothing is foolproof to a sufficiently talented fool."


From infyquest at gmail.com  Sat Dec  1 10:54:14 2007
From: infyquest at gmail.com (Vijay Kiran Kamuju)
Date: Sat, 1 Dec 2007 22:24:14 +0530
Subject: Error while compiling the wine-0.9.49 in RedHat Linux
In-Reply-To: <306339.20948.qm@web94403.mail.in2.yahoo.com>
References: <306339.20948.qm@web94403.mail.in2.yahoo.com>
Message-ID: <36bf289b0712010854p5ce0f30cq9d1981660799e34a@mail.gmail.com>

If you could raise a bug in bugzilla, we could discuss it there.
And please attach the config.log to the bugzilla entry.

--
VJ

On Dec 1, 2007 10:38 AM, manish jaiswal <manish.iitm at yahoo.co.in> wrote:
>
> While compiling the wine-0.9.49 I am getting these error.
> Please help me to resolve these error's.
>
> winegcc: gcc failed
> make[2]: *** [winex11.drv.so] Error 2
> make[2]: Leaving directory
> `/home/manish/Desktop/Download/wine-0.9.49/dlls/winex11.drv'
> make[1]: *** [winex11.drv] Error 2
> make[1]: Leaving directory `/home/manish/Desktop/Download/wine-0.9.49/dlls'
> make: *** [dlls] Error 2
>
> Thanking in anticipation.
>
>  with regards:
> Manish
>  ________________________________
>  Get the freedom to save as many mails as you wish. Click here to know how.
>
>
>


From thestig at google.com  Sat Dec  1 12:55:22 2007
From: thestig at google.com (Lei Zhang)
Date: Sat, 1 Dec 2007 10:55:22 -0800
Subject: ntdll: unload modules based on inter-module dependencies
In-Reply-To: <a71bd89a0711302206k3d44a9cey5d54a5a4f25457b5@mail.gmail.com>
References: <a71bd89a0711302206k3d44a9cey5d54a5a4f25457b5@mail.gmail.com>
Message-ID: <558b2f5c0712011055t57d7513an9e05294a265fba76@mail.gmail.com>

On Nov 30, 2007 10:06 PM, Dan Kegel <dank at kegel.com> wrote:
> This patch seems to break wineprefixcreate.
>
>
>

I sent an updated version of the patch that fixes the crash with
wineprefixcreate. Now process_detach() would only follow the
dependencies when it is called from LdrShutdownProcess().


From jjmckenzie51 at sprintpcs.com  Sat Dec  1 13:52:38 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Sat, 01 Dec 2007 12:52:38 -0700
Subject: Error while compiling the wine-0.9.49 in RedHat Linux
In-Reply-To: <306339.20948.qm@web94403.mail.in2.yahoo.com>
References: <306339.20948.qm@web94403.mail.in2.yahoo.com>
Message-ID: <4751BB86.3040505@sprintpcs.com>

manish jaiswal wrote:
> While compiling the wine-0.9.49 I am getting these error.
> Please help me to resolve these error's.
>
> winegcc: gcc failed
> make[2]: *** [winex11.drv.so] Error 2
> make[2]: Leaving directory
> `/home/manish/Desktop/Download/wine-0.9.49/dlls/winex11.drv'
> make[1]: *** [winex11.drv] Error 2
> make[1]: Leaving directory
> `/home/manish/Desktop/Download/wine-0.9.49/dlls'
> make: *** [dlls] Error 2
>
> Thanking in anticipation.
>
>
Please raise this as a bug in the Wine Bugzilla.  Please advise as the
version of gcc, your operating system and as much detail including any
log files you can provide.

Please also be aware that Wine will NOT build properly with any version
of gcc 4.0

James McKenzie




From winehacker at gmail.com  Sat Dec  1 15:05:08 2007
From: winehacker at gmail.com (Steven Edwards)
Date: Sat, 1 Dec 2007 16:05:08 -0500
Subject: xdg_user_dirs patches
In-Reply-To: <47507783.3090301@gmail.com>
References: <36bf289b0711261649j4cc9747bl7b70e42eb8fd4756@mail.gmail.com>
	<558b2f5c0711281149y77878d39p2124f192aa232eae@mail.gmail.com>
	<87wss2j92v.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711301231410.30562@amboise.dolphin>
	<3a768c550711300727q6ff8ea86i9eaafb118f716caf@mail.gmail.com>
	<Pine.LNX.4.64.0711301844180.15903@amboise.dolphin>
	<1196445012.3036.48.camel@dimi.lattica.com>
	<47507783.3090301@gmail.com>
Message-ID: <19e31a080712011305g57beb6abo5d92e48d726ba0ca@mail.gmail.com>

On Nov 30, 2007 3:50 PM, Frank Richter <frank.richter at gmail.com> wrote:
> On 30.11.2007 18:50, Dimi Paun wrote:
> > I guess the preferred solution would be to teach GNOME & KDE
> > about .lnk files.
>
> Or write .desktop files to the Desktop dir.

I agree with Juan having multiple "Desktop" directories does not work
and it will confuse users. Wine already has enough places were we do
that and we should not add even more.

I think teaching them about .lnk files is a better solution. It should not be
to hard to have a mime type of *.lnk that invokes Wine and passes the
shortcut to the link processor. Really all GNOME & KDE need to do
with *.lnk files is have the ability to follow a small part of them to the
binary in question and load the Icon data from the resource section.
The rest can be off loaded to Wine when a user actually clicks one.

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From Roy.Decoutere at pandora.be  Sat Dec  1 15:29:20 2007
From: Roy.Decoutere at pandora.be (Roy Decoutere)
Date: Sat, 01 Dec 2007 22:29:20 +0100
Subject: 'Make test' fails for cabinet.dll
Message-ID: <4751D230.7090901@pandora.be>

Hello,

I'm relatively new to Wine and would like to start contributing. So
running 'make test' on my systems seemed like a good beginning. I have a
desktop and a laptop, both running Gentoo with X/fluxbox and a very
similar setup.
On the laptop the tests for cabinet.dll succeed, but on the desktop they
fail with the output below.

make[2]: Entering directory `/usr/src/wine/dlls/cabinet/tests'
../../../tools/runtest -q -P wine -M cabinet.dll -T ../../.. -p
cabinet_test.exe.so extract.c && touch extract.ok
extract.c:623: Test failed: Expected dest\a.txt to not exist
extract.c:665: Test failed: Expected dest\testdir\c.txt to not exist
make[2]: *** [extract.ok] Error 2
make[2]: Leaving directory `/usr/src/wine/dlls/cabinet/tests'


I've checked test.winehq.org and I haven't seen reports of cabinet.dll
failing.
I've also reran the tests on the desktop with a new and clean .wine
folder, but this still has the same result.
It at least happens with 0.9.49 and 0.9.50.

Could somebody give me a hint on how to proceed in figuring this out?

Thanks in advance,
Roy


From thunderbird2k at gmx.net  Sat Dec  1 15:30:56 2007
From: thunderbird2k at gmx.net (Roderick Colenbrander)
Date: Sat, 01 Dec 2007 22:30:56 +0100
Subject: WineD3D: Implement detection of ATI cards with Mesa DRI drivers
	[try	4] (resend)
In-Reply-To: <4751B7DA.2010009@rm.pp.ru>
References: <4744C540.70101@rm.pp.ru> <20071122084248.6860@gmx.net>
	<4751B7DA.2010009@rm.pp.ru>
Message-ID: <20071201213056.196740@gmx.net>

> Hello.
> 
> Some time ago I have sent this patch, but it didn't get accepted. I wonder
> what is the final word on it.
> Was it simply lost, or is not yet satisfactory for inclusion in some way.
> 
> 
> Thanks.
> 

I think I gave a reply on it. I can't easily search it back now but it should be on the wine-devel archives. In short my answer was to use D3DX_CAPABLE first and later on the string checks. The reason is that the GL capabilities can change depending on lets say remote GLX. The renderer string can still be the same.

Roderick
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail


From crwulff at rochester.rr.com  Sat Dec  1 16:27:14 2007
From: crwulff at rochester.rr.com (Chris Wulff)
Date: Sat, 01 Dec 2007 17:27:14 -0500
Subject: user32: Add a FIXME for animated cursors. [try 2]
In-Reply-To: <689de9370712011334m47d64c3fk680a92b3d79d7f43@mail.gmail.com>
References: <689de9370712011334m47d64c3fk680a92b3d79d7f43@mail.gmail.com>
Message-ID: <1196548034.17458.4.camel@cybertron>

There was a patch not all that long ago that actually implemented
animated cursors that I have been using. Does anybody know why it wasn't
accepted? It seems to work pretty well anyway. (I attached it for
reference, but it was submitted on 9/4/2007 by Trent Waddington.) 

On Sat, 2007-12-01 at 13:34 -0800, Andrew Riedi wrote:
> changelog: user32: Add a FIXME for animated cursors.
> 
> Sorry for sending twice.
> 
> There is no need to set hIcon, as it was already set to zero.  Here is
> the correct version.
> 
> -- 
> Andrew Riedi 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: animated_cursors_20070904.patch
Type: text/x-patch
Size: 14187 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071201/c86f6fa8/attachment.bin 

From fgouget at free.fr  Sat Dec  1 19:08:45 2007
From: fgouget at free.fr (Francois Gouget)
Date: Sun, 2 Dec 2007 02:08:45 +0100 (CET)
Subject: xdg_user_dirs patches
In-Reply-To: <19e31a080712011305g57beb6abo5d92e48d726ba0ca@mail.gmail.com>
References: <36bf289b0711261649j4cc9747bl7b70e42eb8fd4756@mail.gmail.com>
	<558b2f5c0711281149y77878d39p2124f192aa232eae@mail.gmail.com>
	<87wss2j92v.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711301231410.30562@amboise.dolphin>
	<3a768c550711300727q6ff8ea86i9eaafb118f716caf@mail.gmail.com>
	<Pine.LNX.4.64.0711301844180.15903@amboise.dolphin>
	<1196445012.3036.48.camel@dimi.lattica.com>
	<47507783.3090301@gmail.com>
	<19e31a080712011305g57beb6abo5d92e48d726ba0ca@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0712020204060.25012@amboise.dolphin>

On Sat, 1 Dec 2007, Steven Edwards wrote:
[...]
> I think teaching them about .lnk files is a better solution. It should not be
> to hard to have a mime type of *.lnk that invokes Wine and passes the
> shortcut to the link processor. Really all GNOME & KDE need to do
> with *.lnk files is have the ability to follow a small part of them to the
> binary in question and load the Icon data from the resource section.

Great. Now KDE and Gnome will have a PE loader and windows resource 
parser. Plus when the .lnk points to a document they may have to load 
the Windows registry to see what icon Windows associated with that 
document, especially if that document type is not present in the 
Gnome/KDE MIME database.

Plus, how do you know where 'c:\Program Files\Foo\Bar.exe' is?


[...]
> I agree with Juan having multiple "Desktop" directories does not work
> and it will confuse users. Wine already has enough places were we do
> that and we should not add even more.

What Wine could do is try to sync the Unix and Windows desktops with FAM 
magic, all while not replicating the .lnk files to the Unix desktop.

-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
    Indifference will certainly be the downfall of mankind, but who cares?


From winehacker at gmail.com  Sat Dec  1 21:26:13 2007
From: winehacker at gmail.com (Steven Edwards)
Date: Sat, 1 Dec 2007 22:26:13 -0500
Subject: xdg_user_dirs patches
In-Reply-To: <Pine.LNX.4.64.0712020204060.25012@amboise.dolphin>
References: <36bf289b0711261649j4cc9747bl7b70e42eb8fd4756@mail.gmail.com>
	<558b2f5c0711281149y77878d39p2124f192aa232eae@mail.gmail.com>
	<87wss2j92v.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711301231410.30562@amboise.dolphin>
	<3a768c550711300727q6ff8ea86i9eaafb118f716caf@mail.gmail.com>
	<Pine.LNX.4.64.0711301844180.15903@amboise.dolphin>
	<1196445012.3036.48.camel@dimi.lattica.com>
	<47507783.3090301@gmail.com>
	<19e31a080712011305g57beb6abo5d92e48d726ba0ca@mail.gmail.com>
	<Pine.LNX.4.64.0712020204060.25012@amboise.dolphin>
Message-ID: <19e31a080712011926n6a808332n20f78fc25a86c986@mail.gmail.com>

On Dec 1, 2007 8:08 PM, Francois Gouget <fgouget at free.fr> wrote:
> Great. Now KDE and Gnome will have a PE loader and windows resource
> parser. Plus when the .lnk points to a document they may have to load
> the Windows registry to see what icon Windows associated with that
> document, especially if that document type is not present in the
> Gnome/KDE MIME database.

As apple has show recently, having a minimal PE loader and resource
parser does not take a lot of code but we really don't even need
that...

See if my logic makes sense for how this would work. I don't
understand why the document type would not be registered in the MIME
database. I assume that the Windows association information would be
synced everytime the user installs an application and winemenubuilder
is called. Say you have sol.lnk on the desktop
GNOME and KDE should be smart enough to parse sol.lnk and actually
display Solitaire or Solitaire (Windows) or something. This "fake"
shortcut would actually just be resident in memory of the WM process.

> Plus, how do you know where 'c:\Program Files\Foo\Bar.exe' is?

What this means is that on logon or logoff the WM would call our
function and generate these fake Shortcuts for the *.lnk files by
running a copy of winepath after calling the Wine shelllink processor.
The results of winepath would translate 'c:\Program Files\Foo\Bar.exe'
in to '~/.wine/dosdevices/c:/Program Files/Foo/Bar.exe
and pass that to the array in memory containing the "fake" shortcuts.

> What Wine could do is try to sync the Unix and Windows desktops with FAM
> magic, all while not replicating the .lnk files to the Unix desktop.

Yes I am talking about using something like FAM but having it look for
*.lnk changes on the users Linux desktop. Evertime a FAM event occors
such as an install
of a Windows application with a desktop shelllink, the array
containing the "fake" shortcuts in the WM is updated. When the user
logs off, this data is lost. The WM gets to keep the Windows and Linux
Desktop's in sync without having to actually mess with generating new
shortcuts and or confusing the user by having multiple directories.

Thanks
Steven


-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From gav at transgaming.com  Sun Dec  2 00:56:29 2007
From: gav at transgaming.com (Gavriel State)
Date: Sun, 02 Dec 2007 01:56:29 -0500
Subject: TransGaming's dpnet (DirectPlay 8)
In-Reply-To: <200711300851.39309.kai.blin@gmail.com>
References: <4743B72A.5010408@transgaming.com>
	<200711271118.59174.kai.blin@gmail.com>
	<474CA3A6.4090209@transgaming.com>
	<200711300851.39309.kai.blin@gmail.com>
Message-ID: <4752571D.4040605@transgaming.com>

An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20071202/827e9db0/attachment.htm 

From tom at dbservice.com  Sun Dec  2 05:38:00 2007
From: tom at dbservice.com (Tomas Carnecky)
Date: Sun, 02 Dec 2007 12:38:00 +0100
Subject: Error while compiling the wine-0.9.49 in RedHat Linux
In-Reply-To: <4751BB86.3040505@sprintpcs.com>
References: <306339.20948.qm@web94403.mail.in2.yahoo.com>
	<4751BB86.3040505@sprintpcs.com>
Message-ID: <47529918.6000103@dbservice.com>

James McKenzie wrote:
> Please also be aware that Wine will NOT build properly with any version
> of gcc 4.0
> 

Can you elaborate? I have been building wine with gcc-4.* since forever
and never had any problems with that. Currently I'm using gcc 4.2.2
(Gentoo 4.2.2 p1.0).

tom


From patrol at sinus.cz  Sun Dec  2 06:01:04 2007
From: patrol at sinus.cz (Pavel Troller)
Date: Sun, 2 Dec 2007 13:01:04 +0100
Subject: Error while compiling the wine-0.9.49 in RedHat Linux
In-Reply-To: <47529918.6000103@dbservice.com>
References: <306339.20948.qm@web94403.mail.in2.yahoo.com>
	<4751BB86.3040505@sprintpcs.com> <47529918.6000103@dbservice.com>
Message-ID: <20071202120104.GA27875@tangens.sinus.cz>

> James McKenzie wrote:
> > Please also be aware that Wine will NOT build properly with any version
> > of gcc 4.0
> > 
> 
> Can you elaborate? I have been building wine with gcc-4.* since forever
> and never had any problems with that. Currently I'm using gcc 4.2.2
> (Gentoo 4.2.2 p1.0).
> 
> tom
> 
Hi!
  Me too. Maybe James references just 4.0.x, not 4.1/4.2...
     With regards, Pavel Troller


From marcus at jet.franken.de  Sun Dec  2 06:15:40 2007
From: marcus at jet.franken.de (Marcus Meissner)
Date: Sun, 2 Dec 2007 13:15:40 +0100
Subject: Error while compiling the wine-0.9.49 in RedHat Linux
In-Reply-To: <20071202120104.GA27875@tangens.sinus.cz>
References: <306339.20948.qm@web94403.mail.in2.yahoo.com>
	<4751BB86.3040505@sprintpcs.com> <47529918.6000103@dbservice.com>
	<20071202120104.GA27875@tangens.sinus.cz>
Message-ID: <20071202121540.GA29302@galeere>

On Sun, Dec 02, 2007 at 01:01:04PM +0100, Pavel Troller wrote:
> > James McKenzie wrote:
> > > Please also be aware that Wine will NOT build properly with any version
> > > of gcc 4.0
> > > 
> > 
> > Can you elaborate? I have been building wine with gcc-4.* since forever
> > and never had any problems with that. Currently I'm using gcc 4.2.2
> > (Gentoo 4.2.2 p1.0).
> > 
> > tom
> > 
> Hi!
>   Me too. Maybe James references just 4.0.x, not 4.1/4.2...
>      With regards, Pavel Troller

The gcc 4.0 thing is a _fully_working_ compilation which however SafeDisc
does not like.

We need more context before the gcc error.

Ciao, Marcus


From gerald at pfeifer.com  Sat Dec  1 20:28:10 2007
From: gerald at pfeifer.com (Gerald Pfeifer)
Date: Sun, 2 Dec 2007 03:28:10 +0100 (CET)
Subject: PATCH: fix out of range array access in dlls/kernel32/relay16.c
	(fwd)
In-Reply-To: <87d4ttjeti.fsf@wine.dyndns.org>
References: <Pine.LNX.4.64.0711282347160.19271@acrux.dbai.tuwien.ac.at>
	<87d4ttjeti.fsf@wine.dyndns.org>
Message-ID: <Pine.LNX.4.64.0712020305480.29138@acrux.dbai.tuwien.ac.at>

On Thu, 29 Nov 2007, Alexandre Julliard wrote:
>> I checked again and if we don't address this we'll get two new warnings
>> issues in a default build with GCC 4.3.  How does the patch below
>> look?
> Not good, it adds noise to the code for no good reason. Why would gcc
> complain about that one?

GCC 4.3 (today's snapshot) complains as follows when building Wine with
default options:

  relay16.c: In function 'relay_call_from_16':
  relay16.c:323: warning: array subscript is above array bounds
  relay16.c:427: warning: array subscript is above array bounds

Looking at the code GCC is right:

    for (j = 0; j < sizeof(call->ret)/sizeof(call->ret[0]); j++)
        if (call->ret[j] == 0xca66 || call->ret[j] == 0xcb66) break;

    if (call->ret[j] == 0xcb66)  /* cdecl */

Unless we break out of the loop, after the loop j will be the number of 
elements in the array, and thus call->rej[j] will be the first element 
_after_ the array, running into the next field of the structure.

The straightforward fix to avoid this out-of-array access was my first
patch at

  http://www.winehq.org/pipermail/wine-patches/2007-September/044612.html

which you didn't like too much ;-), so I cooked up the second one

  http://www.winehq.org/pipermail/wine-patches/2007-November/047288.html

Do you (or does anyone else) have a better idea how to address this?

Gerald


From fgouget at free.fr  Sun Dec  2 08:16:10 2007
From: fgouget at free.fr (Francois Gouget)
Date: Sun, 2 Dec 2007 15:16:10 +0100 (CET)
Subject: xdg_user_dirs patches
In-Reply-To: <19e31a080712011926n6a808332n20f78fc25a86c986@mail.gmail.com>
References: <36bf289b0711261649j4cc9747bl7b70e42eb8fd4756@mail.gmail.com> 
	<558b2f5c0711281149y77878d39p2124f192aa232eae@mail.gmail.com> 
	<87wss2j92v.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711301231410.30562@amboise.dolphin>
	<3a768c550711300727q6ff8ea86i9eaafb118f716caf@mail.gmail.com> 
	<Pine.LNX.4.64.0711301844180.15903@amboise.dolphin> 
	<1196445012.3036.48.camel@dimi.lattica.com>
	<47507783.3090301@gmail.com> 
	<19e31a080712011305g57beb6abo5d92e48d726ba0ca@mail.gmail.com> 
	<Pine.LNX.4.64.0712020204060.25012@amboise.dolphin>
	<19e31a080712011926n6a808332n20f78fc25a86c986@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0712021510160.30113@amboise.dolphin>

On Sat, 1 Dec 2007, Steven Edwards wrote:
[...]
> What this means is that on logon or logoff the WM would call our
> function and generate these fake Shortcuts for the *.lnk files by
> running a copy of winepath after calling the Wine shelllink processor.
> The results of winepath would translate 'c:\Program Files\Foo\Bar.exe'
> in to '~/.wine/dosdevices/c:/Program Files/Foo/Bar.exe
> and pass that to the array in memory containing the "fake" shortcuts.

How does Gnome/KDE know which WINEPREFIX to use for foo.lnk? Why should 
it be '~/.wine' rather than '~/.wine-steam', '~/.wine-office' or 
something else?


> > What Wine could do is try to sync the Unix and Windows desktops with FAM
> > magic, all while not replicating the .lnk files to the Unix desktop.
> 
> Yes I am talking about using something like FAM but having it look for 
> *.lnk changes on the users Linux desktop. Evertime a FAM event occors 
> such as an install of a Windows application with a desktop shelllink, 
> the array containing the "fake" shortcuts in the WM is updated. When 
> the user logs off, this data is lost. The WM gets to keep the Windows 
> and Linux Desktop's in sync without having to actually mess with 
> generating new shortcuts and or confusing the user by having multiple 
> directories.

Well, that sounds like just having Gnome/KDE (!=WM) know how to 
interpret .lnk files. No specific FAM here beyond what they already do.


-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
        It really galls me that most of the computer power in the world
                          is wasted on screen savers.
                     Chris Caldwell from the GIMPS project
                       http://www.mersenne.org/prime.htm


From winehacker at gmail.com  Sun Dec  2 10:22:43 2007
From: winehacker at gmail.com (Steven Edwards)
Date: Sun, 2 Dec 2007 11:22:43 -0500
Subject: xdg_user_dirs patches
In-Reply-To: <Pine.LNX.4.64.0712021510160.30113@amboise.dolphin>
References: <36bf289b0711261649j4cc9747bl7b70e42eb8fd4756@mail.gmail.com>
	<Pine.LNX.4.64.0711301231410.30562@amboise.dolphin>
	<3a768c550711300727q6ff8ea86i9eaafb118f716caf@mail.gmail.com>
	<Pine.LNX.4.64.0711301844180.15903@amboise.dolphin>
	<1196445012.3036.48.camel@dimi.lattica.com>
	<47507783.3090301@gmail.com>
	<19e31a080712011305g57beb6abo5d92e48d726ba0ca@mail.gmail.com>
	<Pine.LNX.4.64.0712020204060.25012@amboise.dolphin>
	<19e31a080712011926n6a808332n20f78fc25a86c986@mail.gmail.com>
	<Pine.LNX.4.64.0712021510160.30113@amboise.dolphin>
Message-ID: <19e31a080712020822k78f48d65m58eaae7380710839@mail.gmail.com>

On Dec 2, 2007 9:16 AM, Francois Gouget <fgouget at free.fr> wrote:
> How does Gnome/KDE know which WINEPREFIX to use for foo.lnk? Why should
> it be '~/.wine' rather than '~/.wine-steam', '~/.wine-office' or
> something else?

Maybe rather than storying the information in memory and creating it
at DE startup and destroying it at DE exit like I proposed, we should
store it all in gconf or something and export functionality from Wine
so that GNOME or KDE can know which WINEPREFIX made what changes. Let
me extend my plan a bit and see what you think...

A user installs Wine which registers the MIME type of *.lnk with the
Desktop Environment. A user starts Wine and installs an application
that writes a *.lnk to the Desktop. Our DE Service or exported API
then stores the following information from Winemenubuilder in gconf
for the target *.lnk

Shortcut Name:

Say you have sol.lnk on the desktop GNOME and KDE should be smart
enough to parse sol.lnk and actually display Solitaire or Solitaire
(Windows) or something. This "fake" shortcut would not be the filename
of course, just the name that it pulls from gconf for that shortcut. I
think the *.lnk files contain a longer name describing what they are
actually pointing too right?

Shortcut Target Support:

The results of winepath would translate 'c:\Program Files\Foo\Bar.exe'
in to '~/.wine/dosdevices/c:/Program Files/Foo/Bar.exe
and pass that to the array in memory containing the "fake" shortcuts.

WINEPREFIX:
Lets say a user is running the steam installer from a
WINEPREFIX=~/.wine-steam and it writes *.lnk files to the desktop.
winemenubuilder stores a reference to this in gconf which overrides
the MIME type handler by setting this varible before starting Wine and
processing the *.lnk file. Maybe explorer or winemenubuilder export
this information using dbus? I don't know all the low level details.

Associations: Again I assume this would be winemenubuilders job to
keep in sync everytime it is called by an installer.

I think we can extend such a framework to cover every corner case if
we can make use of gconf, dbus, the mime handler. I don't know what we
would use in the KDE case instead of gconf so I will leave that up to
someone else to make a suggestion. I do think this is an important
issue as multiple Desktop folders confuse me! I can imagine how some
who has never used Wine has felt. Also a final thought....we could
always make another code path so the current support for private Wine
Desktop directories still exist but the framework I've described is
opted IN via a registry key that could be set via winecfg.

Thanks
-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From gabriel.sailer at gmx.net  Sun Dec  2 14:23:02 2007
From: gabriel.sailer at gmx.net (Gabriel Sailer)
Date: Sun, 2 Dec 2007 12:23:02 -0800 (PST)
Subject: Why must the user be the owner of the WINEPREFIX dir?
Message-ID: <14119607.post@talk.nabble.com>


Hello,
after an update of wine on my Debian etch i got the error:

libwine: Refuse to use a WINEPREFIX dir owned by a different user.

I found that there is a patch in Wine release 0.9.49 but i did not found
why this patch is needed. Are the linux access rights not secure enough?
I have the full access of the directory and all subdirectories and files.

I used the same WinXX Application with wine for a few people (not
parallel but serialized) in the same group and gave the WINEPREFIX dir
(and all subdirectories and files) to this group.

Is it really nesseccary to use this protection? Did i get a security hole
without the check?

Many thanks for your help

Gabriel Sailer


-- 
View this message in context: http://www.nabble.com/Why-must-the-user-be-the-owner-of-the-WINEPREFIX-dir--tf4933079.html#a14119607
Sent from the Wine - Devel mailing list archive at Nabble.com.



From gerald at pfeifer.com  Sun Dec  2 15:28:30 2007
From: gerald at pfeifer.com (Gerald Pfeifer)
Date: Sun, 2 Dec 2007 22:28:30 +0100 (CET)
Subject: Remove four useless checks in dlls/gdi32/enhmetafile.c (RESEND)
In-Reply-To: <8763zys4s5.fsf@wine.dyndns.org>
References: <Pine.LNX.4.64.0711170100300.8530@acrux.dbai.tuwien.ac.at>
	<87abpasayf.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711191503020.19271@acrux.dbai.tuwien.ac.at>
	<8763zys4s5.fsf@wine.dyndns.org>
Message-ID: <Pine.LNX.4.64.0711290018420.19271@acrux.dbai.tuwien.ac.at>

On Mon, 19 Nov 2007, Alexandre Julliard wrote:
>> I had expected this comment for a different patch of mine.  In 
>> dlls/gdi32/enhmetafile.c we are just reading existing records,
>> so I'm not sure what you have in mind here?
> The records usually come from an external file, so they have to be
> validated (not that this is done correctly everywhere, but we should
> move towards more validation, not less).

I've been looking into this, and I'm afraid I'll need some help to 
proceed.  If you look at the code and my original patch below, you
will see that I removed four conditions which were noops, that is,
the compiler should (and could) simply remove them.

This is what my patch did at the source level.

If we want to add some input checking, I assume you would like to 
check that these values are not too large?  (They cannot be negative,
so the only range checking we can do is on the upper end.)  How should
this look like?  Any specific upper bounds you have in mind?

Or did I simply fail to explain my original patch, that is, convey the
point that this actually will not change program behavior?

Gerald

Index: dlls/gdi32/enhmetafile.c
===================================================================
RCS file: /home/wine/wine/dlls/gdi32/enhmetafile.c,v
retrieving revision 1.6
diff -u -3 -p -r1.6 enhmetafile.c
--- dlls/gdi32/enhmetafile.c	3 Aug 2007 13:06:43 -0000	1.6
+++ dlls/gdi32/enhmetafile.c	28 Nov 2007 23:18:34 -0000
@@ -1670,9 +1670,7 @@ BOOL WINAPI PlayEnhMetaFileRecord(
         LPVOID lpPackedStruct;
 
         /* check that offsets and data are contained within the record */
-        if ( !( (lpCreate->cbBmi>=0) && (lpCreate->cbBits>=0) &&
-                (lpCreate->offBmi>=0) && (lpCreate->offBits>=0) &&
-                ((lpCreate->offBmi +lpCreate->cbBmi ) <= mr->nSize) &&
+        if ( !( ((lpCreate->offBmi +lpCreate->cbBmi ) <= mr->nSize) &&
                 ((lpCreate->offBits+lpCreate->cbBits) <= mr->nSize) ) )
         {
             ERR("Invalid EMR_CREATEDIBPATTERNBRUSHPT record\n");


From julliard at winehq.org  Sun Dec  2 16:22:51 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Sun, 02 Dec 2007 23:22:51 +0100
Subject: Remove four useless checks in dlls/gdi32/enhmetafile.c (RESEND)
In-Reply-To: <Pine.LNX.4.64.0711290018420.19271@acrux.dbai.tuwien.ac.at>
	(Gerald Pfeifer's message of "Sun, 2 Dec 2007 22:28:30 +0100 (CET)")
References: <Pine.LNX.4.64.0711170100300.8530@acrux.dbai.tuwien.ac.at>
	<87abpasayf.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711191503020.19271@acrux.dbai.tuwien.ac.at>
	<8763zys4s5.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711290018420.19271@acrux.dbai.tuwien.ac.at>
Message-ID: <87ir3g68jo.fsf@wine.dyndns.org>

Gerald Pfeifer <gerald at pfeifer.com> writes:

> If we want to add some input checking, I assume you would like to 
> check that these values are not too large?  (They cannot be negative,
> so the only range checking we can do is on the upper end.)  How should
> this look like?  Any specific upper bounds you have in mind?
>
> Or did I simply fail to explain my original patch, that is, convey the
> point that this actually will not change program behavior?

I'm aware of that, but the purpose of having these warnings is to spot
bugs, and when you find a bug you have to fix it. Yes, the checks
currently don't work, so they should be made to work, not removed. As
the comment says, you have to check that offsets and sizes are contained
within the record.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Sun Dec  2 16:26:53 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Sun, 02 Dec 2007 23:26:53 +0100
Subject: Why must the user be the owner of the WINEPREFIX dir?
In-Reply-To: <14119607.post@talk.nabble.com> (Gabriel Sailer's message of
	"Sun, 2 Dec 2007 12:23:02 -0800 (PST)")
References: <14119607.post@talk.nabble.com>
Message-ID: <87eje468cy.fsf@wine.dyndns.org>

Gabriel Sailer <gabriel.sailer at gmx.net> writes:

> I used the same WinXX Application with wine for a few people (not
> parallel but serialized) in the same group and gave the WINEPREFIX dir
> (and all subdirectories and files) to this group.
>
> Is it really nesseccary to use this protection? Did i get a security hole
> without the check?

It's because when you have several users sharing a prefix directory
you'll most likely run into trouble. In particular it catches people
running as root inside a user's dir, which breaks things. If you are
sure that you have taken care of all the potential trouble, you can work
around the check by creating a prefix dir for each user and symlinking
things inside it to a central place.

-- 
Alexandre Julliard
julliard at winehq.org


From dank at kegel.com  Sun Dec  2 17:22:04 2007
From: dank at kegel.com (Dan Kegel)
Date: Sun, 2 Dec 2007 15:22:04 -0800
Subject: kernel32:add ReadFileScatter
Message-ID: <a71bd89a0712021522ic8f8defr26333d013d2084b9@mail.gmail.com>

Hey Louis,
Focht is using a pseudonym, and I believe it's Wine policy to
not accept patches without real names.
His patches should be used as guides only,
and should not be reposted to wine-patches,
until such time as he decloaks.  If he doesn't
want to decloak, I think we can't use his patches.

I rather wish he would avoid attach patches to
bugs, as it tempts people into submitting them
as you have done, which is a waste of effort given
Wine's policy.  But I greatly value his ability to
describe where and how Wine is wrong.
- Dan


From truiken at gmail.com  Sun Dec  2 17:32:34 2007
From: truiken at gmail.com (James Hawkins)
Date: Sun, 2 Dec 2007 17:32:34 -0600
Subject: kernel32:add ReadFileScatter
In-Reply-To: <a71bd89a0712021522ic8f8defr26333d013d2084b9@mail.gmail.com>
References: <a71bd89a0712021522ic8f8defr26333d013d2084b9@mail.gmail.com>
Message-ID: <22821af30712021532j265c7b44lac28e8cf9d4fa06@mail.gmail.com>

On Dec 2, 2007 5:22 PM, Dan Kegel <dank at kegel.com> wrote:
> Hey Louis,
> Focht is using a pseudonym, and I believe it's Wine policy to
> not accept patches without real names.
> His patches should be used as guides only,
> and should not be reposted to wine-patches,
> until such time as he decloaks.  If he doesn't
> want to decloak, I think we can't use his patches.
>
> I rather wish he would avoid attach patches to
> bugs, as it tempts people into submitting them
> as you have done, which is a waste of effort given
> Wine's policy.  But I greatly value his ability to
> describe where and how Wine is wrong.
> - Dan
>

There's also the issue that Focht disassembles native Windows
binaries, and as such, no patches from him will be accepted.  I agree,
he needs to stop posting patches to wine-bugs, as those patches are
tainted and can be used against us in a legal situation.

-- 
James Hawkins


From gerald at pfeifer.com  Sun Dec  2 17:37:55 2007
From: gerald at pfeifer.com (Gerald Pfeifer)
Date: Mon, 3 Dec 2007 00:37:55 +0100 (CET)
Subject: Remove four useless checks in dlls/gdi32/enhmetafile.c (RESEND)
In-Reply-To: <87ir3g68jo.fsf@wine.dyndns.org>
References: <Pine.LNX.4.64.0711170100300.8530@acrux.dbai.tuwien.ac.at>
	<87abpasayf.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711191503020.19271@acrux.dbai.tuwien.ac.at>
	<8763zys4s5.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711290018420.19271@acrux.dbai.tuwien.ac.at>
	<87ir3g68jo.fsf@wine.dyndns.org>
Message-ID: <Pine.LNX.4.64.0712030008450.29138@acrux.dbai.tuwien.ac.at>

On Sun, 2 Dec 2007, Alexandre Julliard wrote:
> I'm aware of that, but the purpose of having these warnings is to spot
> bugs, and when you find a bug you have to fix it. Yes, the checks
> currently don't work, so they should be made to work, not removed. As
> the comment says, you have to check that offsets and sizes are contained
> within the record.

Doesn't the following part of the checks work and ensure that already?

        if ( !( ((lpCreate->offBmi +lpCreate->cbBmi ) <= mr->nSize) &&
                ((lpCreate->offBits+lpCreate->cbBits) <= mr->nSize) ) )

My patch only removes the half of the original check which is a noop 
(since the current code  misses the fact that these variables always
will be >= 0 by virtue of their type).

Ahhh!  A lightbulb goes on.  Since this is input from the outside, and
thus completely out of our control, you are worried about overflows, that
is, the sum of the two values (offset and size) being within range, but
not the individual parts.  

Is this what you've been after? :-)

Updated patch below.  (Now I only wonder whether the <= in the original
code shouldn't have been <, and thus the > in my code shouldn't be >=,
but that's a separate issue.)

Gerald

Index: dlls/gdi32/enhmetafile.c
===================================================================
RCS file: /home/wine/wine/dlls/gdi32/enhmetafile.c,v
retrieving revision 1.6
diff -u -3 -p -r1.6 enhmetafile.c
--- dlls/gdi32/enhmetafile.c	3 Aug 2007 13:06:43 -0000	1.6
+++ dlls/gdi32/enhmetafile.c	2 Dec 2007 23:32:50 -0000
@@ -1669,11 +1669,15 @@ BOOL WINAPI PlayEnhMetaFileRecord(
         const EMRCREATEDIBPATTERNBRUSHPT *lpCreate = (const EMRCREATEDIBPATTERNBRUSHPT *)mr;
         LPVOID lpPackedStruct;
 
-        /* check that offsets and data are contained within the record */
-        if ( !( (lpCreate->cbBmi>=0) && (lpCreate->cbBits>=0) &&
-                (lpCreate->offBmi>=0) && (lpCreate->offBits>=0) &&
-                ((lpCreate->offBmi +lpCreate->cbBmi ) <= mr->nSize) &&
-                ((lpCreate->offBits+lpCreate->cbBits) <= mr->nSize) ) )
+        /* Check that offsets and data are contained within the record.
+         * The first four checks are not redundant -- think overflow!
+         */
+        if ( lpCreate->offBmi     > mr->nSize 
+             || lpCreate->cbBmi   > mr->nSize
+             || lpCreate->offBits > mr->nSize
+             || lpCreate->cbBits  > mr->nSize
+             || lpCreate->offBmi +lpCreate->cbBmi  > mr->nSize
+             || lpCreate->offBits+lpCreate->cbBits > mr->nSize )
         {
             ERR("Invalid EMR_CREATEDIBPATTERNBRUSHPT record\n");
             break;


From truiken at gmail.com  Sun Dec  2 21:16:41 2007
From: truiken at gmail.com (James Hawkins)
Date: Sun, 2 Dec 2007 21:16:41 -0600
Subject: uninstaller: iterate keys in HKEY_CURRENT_USER also as some
	programs install their uninstall information there
In-Reply-To: <475372F3.405@codeweavers.com>
References: <475372F3.405@codeweavers.com>
Message-ID: <22821af30712021916s7b52bc0eif7df4b470c4b7898@mail.gmail.com>

On Dec 2, 2007 9:07 PM, Aric Stewart <aric at codeweavers.com> wrote:
> ---
>   programs/uninstaller/main.c |   34 +++++++++++++++++++++++-----------
>   1 files changed, 23 insertions(+), 11 deletions(-)
>

I'm not saying that this patch shouldn't be accepted, but I want to
remark that at some point, all this registry code should be replaced
by MsiEnumProducts, MsiGetProductInfo.

-- 
James Hawkins


From infyquest at gmail.com  Sun Dec  2 21:31:29 2007
From: infyquest at gmail.com (Vijay Kiran Kamuju)
Date: Mon, 3 Dec 2007 09:01:29 +0530
Subject: kernel32:add ReadFileScatter
In-Reply-To: <22821af30712021532j265c7b44lac28e8cf9d4fa06@mail.gmail.com>
References: <a71bd89a0712021522ic8f8defr26333d013d2084b9@mail.gmail.com>
	<22821af30712021532j265c7b44lac28e8cf9d4fa06@mail.gmail.com>
Message-ID: <36bf289b0712021931r76ae434cx740d297ca02e01f4@mail.gmail.com>

On Dec 3, 2007 5:02 AM, James Hawkins <truiken at gmail.com> wrote:
>
> On Dec 2, 2007 5:22 PM, Dan Kegel <dank at kegel.com> wrote:
> > Hey Louis,
> > Focht is using a pseudonym, and I believe it's Wine policy to
> > not accept patches without real names.
> > His patches should be used as guides only,
> > and should not be reposted to wine-patches,
> > until such time as he decloaks.  If he doesn't
> > want to decloak, I think we can't use his patches.
> >
> > I rather wish he would avoid attach patches to
> > bugs, as it tempts people into submitting them
> > as you have done, which is a waste of effort given
> > Wine's policy.  But I greatly value his ability to
> > describe where and how Wine is wrong.
> > - Dan
> >
>
> There's also the issue that Focht disassembles native Windows
> binaries, and as such, no patches from him will be accepted.  I agree,
> he needs to stop posting patches to wine-bugs, as those patches are
> tainted and can be used against us in a legal situation.
I dont think thats a good idea, asking someone not to post
fixes/patches to wine-bugs.
Its upon the users to test his ideas, we may not incorporate his
patches into the main tree.
But his patches help us understand where the problem lies and how to
overcome it.
Its better that He/We post a disclaimer that the patch is for
informative and testing purposes.
And that they may not be included in main tree, but can be used upon
users discretion.
so that wine itself may not be held responsible, in case of any legal threat.

--
VJ
>
> --
> James Hawkins
>
>
>


From truiken at gmail.com  Sun Dec  2 21:41:14 2007
From: truiken at gmail.com (James Hawkins)
Date: Sun, 2 Dec 2007 21:41:14 -0600
Subject: kernel32:add ReadFileScatter
In-Reply-To: <36bf289b0712021931r76ae434cx740d297ca02e01f4@mail.gmail.com>
References: <a71bd89a0712021522ic8f8defr26333d013d2084b9@mail.gmail.com>
	<22821af30712021532j265c7b44lac28e8cf9d4fa06@mail.gmail.com>
	<36bf289b0712021931r76ae434cx740d297ca02e01f4@mail.gmail.com>
Message-ID: <22821af30712021941pbb0064ckde5d60a7d75b36fe@mail.gmail.com>

On Dec 2, 2007 9:31 PM, Vijay Kiran Kamuju <infyquest at gmail.com> wrote:
>
> On Dec 3, 2007 5:02 AM, James Hawkins <truiken at gmail.com> wrote:
> >
> > On Dec 2, 2007 5:22 PM, Dan Kegel <dank at kegel.com> wrote:
> > > Hey Louis,
> > > Focht is using a pseudonym, and I believe it's Wine policy to
> > > not accept patches without real names.
> > > His patches should be used as guides only,
> > > and should not be reposted to wine-patches,
> > > until such time as he decloaks.  If he doesn't
> > > want to decloak, I think we can't use his patches.
> > >
> > > I rather wish he would avoid attach patches to
> > > bugs, as it tempts people into submitting them
> > > as you have done, which is a waste of effort given
> > > Wine's policy.  But I greatly value his ability to
> > > describe where and how Wine is wrong.
> > > - Dan
> > >
> >
> > There's also the issue that Focht disassembles native Windows
> > binaries, and as such, no patches from him will be accepted.  I agree,
> > he needs to stop posting patches to wine-bugs, as those patches are
> > tainted and can be used against us in a legal situation.
> I dont think thats a good idea, asking someone not to post
> fixes/patches to wine-bugs.
> Its upon the users to test his ideas, we may not incorporate his
> patches into the main tree.
> But his patches help us understand where the problem lies and how to
> overcome it.
> Its better that He/We post a disclaimer that the patch is for
> informative and testing purposes.
> And that they may not be included in main tree, but can be used upon
> users discretion.
> so that wine itself may not be held responsible, in case of any legal threat.
>

No that's not how the law works in the US (I can't vouch for other
countries).  Clean room reverse engineering means that one person can
disassemble a certain binary and post notes and/or pseudocode, and
another person can implement the API from those notes, but you can't
look at code written from the first person and write "new" code from
it.  His patches help us understand where the problem lies?  Notes
and/or pseudocode work just fine.  If you want to legally contribute
to the project, you shouldn't be looking at the patches at all.

-- 
James Hawkins


From frank.richter at gmail.com  Sun Dec  2 22:04:15 2007
From: frank.richter at gmail.com (Frank Richter)
Date: Mon, 03 Dec 2007 05:04:15 +0100
Subject: programs/explorer/desktop.c: Add error checking
In-Reply-To: <200712011820.48900.lav@etersoft.ru>
References: <200712011820.48900.lav@etersoft.ru>
Message-ID: <4753803F.9050305@gmail.com>

On 01.12.2007 16:20, Vitaly Lipatov wrote:
> UuidToStringW from legacy (DCOM95) rpcrt4.dll returns RPC_S_CANNOT_SUPPORT, 
> works only ANSI version.
> 
> Changelog:
> Add return codes checking for UuidCreate and UuidToStringW

Do users still commonly install that legacy DCOM? If so, it may be
better to replace UuidToStringW with UuidToStringA so the
initialize_display_settings() function continues working (it looks
somewhat important, but not sure if it really is).

-f.r.


From frank.richter at gmail.com  Mon Dec  3 02:25:07 2007
From: frank.richter at gmail.com (Frank Richter)
Date: Mon, 03 Dec 2007 09:25:07 +0100
Subject: xdg_user_dirs patches
In-Reply-To: <19e31a080712011305g57beb6abo5d92e48d726ba0ca@mail.gmail.com>
References: <36bf289b0711261649j4cc9747bl7b70e42eb8fd4756@mail.gmail.com>	<558b2f5c0711281149y77878d39p2124f192aa232eae@mail.gmail.com>	<87wss2j92v.fsf@wine.dyndns.org>	<Pine.LNX.4.64.0711301231410.30562@amboise.dolphin>	<3a768c550711300727q6ff8ea86i9eaafb118f716caf@mail.gmail.com>	<Pine.LNX.4.64.0711301844180.15903@amboise.dolphin>	<1196445012.3036.48.camel@dimi.lattica.com>	<47507783.3090301@gmail.com>
	<19e31a080712011305g57beb6abo5d92e48d726ba0ca@mail.gmail.com>
Message-ID: <4753BD63.9070406@gmail.com>

On 01.12.2007 22:05, Steven Edwards wrote:
> I think teaching them about .lnk files is a better solution. It should not be
> to hard to have a mime type of *.lnk that invokes Wine and passes the
> shortcut to the link processor. Really all GNOME & KDE need to do
> with *.lnk files is have the ability to follow a small part of them to the
> binary in question and load the Icon data from the resource section.
> The rest can be off loaded to Wine when a user actually clicks one.

One idea I had earlier is to actually store .desktop file data in files
ending in .lnk. At least gnome didn't care about the extension (didn't
try with KDE due not having it installed). So the "shell links" would
show up as proper icons on the desktop. Also, applications would see
files with a suffix of '.lnk' so e.g. uninstallers would work correctly
when directly deleting link files.

Of course it's a bit of a hack. A technical issue is that the "original"
.lnk would have to be preserved somewhere to make sure all attributes
can be restored without loss. When the shell is used to access the
links, this hiding is not a problem. However, when an application would
access the .lnk directly, it'd see a .desktop file. (Don't know how
common that is.) Also, since applications could copy/delete a link file
directly, some process would have to monitor the Desktop dir and ensure
that .lnks are turned to .desktops and that any possibly necessary
cleanup of the shadowed original data is done when the .lnk is removed.

-f.r.


From luis.busquets at ilidium.com  Mon Dec  3 02:33:39 2007
From: luis.busquets at ilidium.com (luis.busquets at ilidium.com)
Date: Mon, 3 Dec 2007 09:33:39 +0100 (CET)
Subject: kernel32:add ReadFileScatter
Message-ID: <57795.158.169.9.14.1196670819.squirrel@www.ilidium.com>

Just to add more clarity to the IPR of computer programs and if it is
legal to decompile and implement a program again.
In Europe, software is protected by Council Directive 91/250/EEC of 14 May
1991 on the legal protection of computer programs
(http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:31991L0250:EN:HTML).
There are a number of things that a software vendor cannot forbid. In
particular article 6 speaks about decompilation. It can be done only if
the information necessary to achieve interoperability has not previously
been readily available (a.1.b) to achieve programs interoperable with the
first one  (a.1) but not to be used for the development, production or
marketing of a computer program substantially similar in its expression
(a. 6.2.c).
It could be argued that wine is not replicating Windows as it is just the
top API. Nevertherless, to avoid any legal problems, it is better to
refrain from adding any patches obtained by decompilation.





From julliard at winehq.org  Mon Dec  3 05:04:49 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 03 Dec 2007 12:04:49 +0100
Subject: Remove four useless checks in dlls/gdi32/enhmetafile.c (RESEND)
In-Reply-To: <Pine.LNX.4.64.0712030008450.29138@acrux.dbai.tuwien.ac.at>
	(Gerald Pfeifer's message of "Mon, 3 Dec 2007 00:37:55 +0100 (CET)")
References: <Pine.LNX.4.64.0711170100300.8530@acrux.dbai.tuwien.ac.at>
	<87abpasayf.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711191503020.19271@acrux.dbai.tuwien.ac.at>
	<8763zys4s5.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0711290018420.19271@acrux.dbai.tuwien.ac.at>
	<87ir3g68jo.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0712030008450.29138@acrux.dbai.tuwien.ac.at>
Message-ID: <87abos599q.fsf@wine.dyndns.org>

Gerald Pfeifer <gerald at pfeifer.com> writes:

> Ahhh!  A lightbulb goes on.  Since this is input from the outside, and
> thus completely out of our control, you are worried about overflows, that
> is, the sum of the two values (offset and size) being within range, but
> not the individual parts.  
>
> Is this what you've been after? :-)

It's closer, but overflow should be treated as an error even if the
result is within range.

> Updated patch below.  (Now I only wonder whether the <= in the original
> code shouldn't have been <, and thus the > in my code shouldn't be >=,
> but that's a separate issue.)

It depends if you are testing a position or a size. Please spend some
more time thinking about it, and send a patch with the correct checks.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Mon Dec  3 05:07:27 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 03 Dec 2007 12:07:27 +0100
Subject: ntdll: detach modules based on inter-module dependencies (try 2)
In-Reply-To: <558b2f5c0712011050r10e3b505y300a30f4beaf9381@mail.gmail.com>
	(Lei Zhang's message of "Sat, 1 Dec 2007 10:50:25 -0800")
References: <558b2f5c0712011050r10e3b505y300a30f4beaf9381@mail.gmail.com>
Message-ID: <8763zg595c.fsf@wine.dyndns.org>

"Lei Zhang" <thestig at google.com> writes:

> This patch changes how process_detach() works when called with
> bForceDetach set to TRUE. A module would get detached when that module
> has no dependencies. After a module gets detached, process_detach()
> scans through all the modules and update their dependencies. I'm
> assuming there's no circular dependencies between modules.

You can't assume that, some modules do have circular dependencies. My
suspicion is that this bug should be fixed in winmm, but either way
you'll need to show some test cases.

-- 
Alexandre Julliard
julliard at winehq.org


From polleke at gmail.com  Mon Dec  3 04:50:25 2007
From: polleke at gmail.com (Paul van Schayck)
Date: Mon, 3 Dec 2007 11:50:25 +0100
Subject: [AppDB] Change licence to AGPL
In-Reply-To: <200711240434.58105.alex@thehandofagony.com>
References: <200711240336.45949.alex@thehandofagony.com>
	<3d57814d0711231901u21fcbef4h16aba8001bdae77@mail.gmail.com>
	<200711240434.58105.alex@thehandofagony.com>
Message-ID: <13151a510712030250w54b9f75bwbcd2010c4195baa7@mail.gmail.com>

Hey,

On Nov 24, 2007 4:34 AM, Alexander Nicolaysen S?rnes
<alex at thehandofagony.com> wrote:
> On Saturday 24 November 2007 04:01:24 Trent Waddington wrote:
> > interesting.  Do you have a list of contributors and their signoff on
> > this license change?
> >
> > Or is it just you two?
> >
>
> Well I didn't think that was necessary; but after some thought I realize that
> the AppDB only seemed to include a LICENSE file containing the GPL v2, while
> a GPL/AGPL v3 change would require previous code to be licenced under 'GPL v2
> or later'.
>
> So I'm including the other authors in this mail to see if they agree, or have
> already licenced their code under GPL v2 or later

Yup, I'm ok with that change.

The image.php class was written by me for another project. And just
reused for the appdb. I've later included it all kind of different
projects (open and closed). And never really gave it a second thought.
Does this cause trouble?

Paul


From nessi at nessi-online.de  Mon Dec  3 06:55:59 2007
From: nessi at nessi-online.de (nessi at nessi-online.de)
Date: Mon, 3 Dec 2007 13:55:59 +0100 (MET)
Subject: handle unimplemented function stubs
Message-ID: <200712031255.lB3CtxPk000552@post.webmailer.de>

Hello all,

I'm a Windows software developer and I'm trying to execute an application under the wine environment.
Now I have a problem introduced with wine 0.9.49.

I use the function RegOverridePredefKey from the advapi32.dll.
To be compatible with older windows versions, I use the following code:

  LONG WINAPI (*RegOverridePredefKey)(HKEY hKey, HKEY hNewHKey);
  HMODULE hMod=GetModuleHandle("Advapi32");
  if (hMod)
    (FARPROC)RegOverridePredefKey=GetProcAddress(hMod,"RegOverridePredefKey");
  if (RegOverridePredefKey)
    RegOverridePredefKey(HKEY_CLASSES_ROOT, hKey);

In wine 0.9.49 a stub entry for this function was created, but the implementation is missing.
The result is, that the GetProcAddress function is successful, but the RegOverridePredefKey call fails.
I can catch the EXCEPTION_WINE_STUB exception (see code below), but the application will nevertheless closed.

  if (RegOverridePredefKey)
    {
    long err  = ERROR_CALL_NOT_IMPLEMENTED;
    try
      {         // test for C-based structured exceptions
      err=RegOverridePredefKey(HKEY_CLASSES_ROOT, hKey);
      }

    #define EXCEPTION_WINE_STUB       0x80000100
    __except(GetExceptionCode()==EXCEPTION_WINE_STUB  ? EXCEPTION_EXECUTE_HANDLER : EXCEPTION_CONTINUE_SEARCH)
      {
      RegOverridePredefKey=NULL;
      }
    }

What can I do ?
I know, that I can find a workaround for this case, but this in not my problem. How can I handle, in principle, such exceptions?
What is the reason for creating a function stub without an implementation ???

Thanks 
Nessi



From julliard at winehq.org  Mon Dec  3 07:02:18 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Mon, 03 Dec 2007 14:02:18 +0100
Subject: rpcrt4: Handle all non-continuable exceptions in
	CStdStubBuffer_Invoke.
In-Reply-To: <475051BD.2070303@codeweavers.com> (Robert Shearman's message of
	"Fri, 30 Nov 2007 18:09:01 +0000")
References: <475051BD.2070303@codeweavers.com>
Message-ID: <871wa453tx.fsf@wine.dyndns.org>

Robert Shearman <rob at codeweavers.com> writes:

> ---
>  dlls/rpcrt4/cstub.c |    2 +-
>  1 files changed, 1 insertions(+), 1 deletions(-)
>
> I have a test for this in my tree, which passes on Windows, but
> doesn't pass in Wine yet until we have some more proxy/stub code that
> I can use to call an object's methods (ideally IClassFactory).

This doesn't work:

../../../tools/runtest -q -P wine -M rpcrt4.dll -T ../../.. -p rpcrt4_test.exe.so cstub.c && touch cstub.ok
cstub.c:874: Test failed: ret c0000005
make[2]: *** [cstub.ok] Error 1

-- 
Alexandre Julliard
julliard at winehq.org


From stefan at codeweavers.com  Mon Dec  3 07:53:16 2007
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Mon, 3 Dec 2007 14:53:16 +0100
Subject: handle unimplemented function stubs
In-Reply-To: <200712031255.lB3CtxPk000552@post.webmailer.de>
References: <200712031255.lB3CtxPk000552@post.webmailer.de>
Message-ID: <200712031453.18660.stefan@codeweavers.com>

Am Montag, 3. Dezember 2007 13:55:59 schrieb nessi at nessi-online.de:
> I know, that I can find a workaround for this case, but this in not my
> problem. How can I handle, in principle, such exceptions? What is the
> reason for creating a function stub without an implementation ???
The reason is often that there is an application that tries to load the 
function, but never calls it. It refuses to start without getting a pointer 
to this unused function. Or an application that refuses to run if it doesn't 
like the exports from a DLL. For example, copy protection systems might check 
the exports, and refuse if your DLL has different exports than Windows.

The @stub stubs are pretty rare nowadays, for exactly the reason you give. 
Usual stubs have a real implementation function which just returns an error 
or OK and writes a note to the FIXME channel.

The stub in question was added by patch 
27e8b829a4cc56969836c0dbbb4db4b775d52a9f, which was intended to fix bug 
#9116.

To answer your question what to do, the usual way to fix this is to implement 
the function in Wine. I understand that this is most likely not a suitable 
solution for you, after all you're working on your application, not Wine. I 
do not know advapi32, so I cannot implement this function myself, but if no 
one steps up in the next days I can send a small patch that just adds a nicer 
stub that doesn't crash.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071203/ee9cd798/attachment.pgp 

From xerox_xerox2000 at yahoo.co.uk  Mon Dec  3 10:28:33 2007
From: xerox_xerox2000 at yahoo.co.uk (Louis Lenders)
Date: Mon, 3 Dec 2007 16:28:33 +0000 (UTC)
Subject: kernel32:add ReadFileScatter
References: <a71bd89a0712021522ic8f8defr26333d013d2084b9@mail.gmail.com>
Message-ID: <loom.20071203T161601-8@post.gmane.org>

Dan Kegel <dank <at> kegel.com> writes:

> 
> Hey Louis,
> Focht is using a pseudonym, and I believe it's Wine policy to
> not accept patches without real names.
> His patches should be used as guides only,
> and should not be reposted to wine-patches,
> until such time as he decloaks.  

Well , sorry, i thought it was OK to send the patch to wine-patches, as he's not 
going to send them himself, and also from bugreport he stated clearly (quote):

"you might try attached patch which implements kernel32.ReadFileScatter based
off what I found in MSDN documentation." 

So looks like a perfectly "clean" patch to me, and i have no reason to not
believe him

>If he doesn't
> want to decloak, I think we can't use his patches.
> 
> I rather wish he would avoid attach patches to
> bugs, as it tempts people into submitting them
> as you have done, which is a waste of effort given
> Wine's policy. 

>But I greatly value his ability to describe where and how Wine is wrong.
Me too! So somehow i hope there's a way he keeps being involved in wine.

> - Dan
> 
> 






From marius.slyzius at scimore.com  Mon Dec  3 11:27:45 2007
From: marius.slyzius at scimore.com (Marius Slyzius)
Date: Mon, 3 Dec 2007 18:27:45 +0100
Subject: wine 0.9.5 IO completion port questions
Message-ID: <08b801c835d1$d106f430$7314dc90$@slyzius@scimore.com>

Hello all. 

 

I am trying to run ScimoreDB database which uses fibers, non-blocked IO for
sockets and files,  and completion port. It did started ok under 0.9.5 and
seems it is working!!!:), so I would like to verify few things about async
IO with completion ports before recompiling it with winelib. 

 

1) will write/read file/socket with completion port is true asynchronous
operation. I am asking because every time write/read operation returns true,
and never IO pending error.

 

2) possible bug: the server sends 1500 bytes with WsaSend ( with 2 WSABUFFER
) and the client receive only 1452 bytes and calls WsaRecv again. Also on
the server, the completion port receive event that transferred 1452 bytes.
However, the last 8 bytes are never sends nor completion port event arrives.
Is it perhaps something to do with the VMWare tool where I run Ubuntu 7.10?

Please, send me an info also to my mail: marius at scimore.com , because I
might miss the answer here.

 

Thank you!

Marius Slyzius

Scimore UAB

(+45) 40862122

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20071203/96224ffa/attachment.htm 

From andrey.turkin at gmail.com  Mon Dec  3 16:05:30 2007
From: andrey.turkin at gmail.com (Andrey Turkin)
Date: Tue, 04 Dec 2007 01:05:30 +0300
Subject: wine 0.9.5 IO completion port questions
In-Reply-To: <08b801c835d1$d106f430$7314dc90$@slyzius@scimore.com>
References: <08b801c835d1$d106f430$7314dc90$@slyzius@scimore.com>
Message-ID: <47547DAA.2070206@gmail.com>

Marius Slyzius wrote:
>
> Hello all.
>
>  
>
> I am trying to run ScimoreDB database which uses fibers, non-blocked
> IO for sockets and files,  and completion port. It did started ok
> under 0.9.5 and seems it is working!!!:), so I would like to verify
> few things about async IO with completion ports before recompiling it
> with winelib.
>
You mean 0.9.50, right?
>
>  
>
> 1) will write/read file/socket with completion port is true
> asynchronous operation. I am asking because every time write/read
> operation returns true, and never IO pending error.
>
Not sure it is asynchronous for files, should be asynchronous for sockets.
>
>  
>
> 2) possible bug: the server sends 1500 bytes with WsaSend ( with 2
> WSABUFFER ) and the client receive only 1452 bytes and calls WsaRecv
> again. Also on the server, the completion port receive event that
> transferred 1452 bytes. However, the last 8 bytes are never sends nor
> completion port event arrives. Is it perhaps something to do with the
> VMWare tool where I run Ubuntu 7.10?
>
WsaSend can send partial data when operating on non-blocking socket;
from your description it looks like this is the case. Is this error
reproducible with the same numbers every run?
Your both questions are actually not about IOCP but about asynchronous
I/O support.
>
> Please, send me an info also to my mail: marius at scimore.com , because
> I might miss the answer here.
>
>  
>
> Thank you!
>
> Marius Slyzius
>
> Scimore UAB
>
> (+45) 40862122
>
>  
>
> ------------------------------------------------------------------------
>
>
>   



From scott at open-vote.org  Mon Dec  3 16:14:04 2007
From: scott at open-vote.org (Scott Ritchie)
Date: Mon, 03 Dec 2007 14:14:04 -0800
Subject: [AppDB] Change licence to AGPL
In-Reply-To: <13151a510712030250w54b9f75bwbcd2010c4195baa7@mail.gmail.com>
References: <200711240336.45949.alex@thehandofagony.com>	<3d57814d0711231901u21fcbef4h16aba8001bdae77@mail.gmail.com>	<200711240434.58105.alex@thehandofagony.com>
	<13151a510712030250w54b9f75bwbcd2010c4195baa7@mail.gmail.com>
Message-ID: <47547FAC.50600@open-vote.org>

Paul van Schayck wrote:
> Hey,
> 
> On Nov 24, 2007 4:34 AM, Alexander Nicolaysen S?rnes
> <alex at thehandofagony.com> wrote:
>> On Saturday 24 November 2007 04:01:24 Trent Waddington wrote:
>>> interesting.  Do you have a list of contributors and their signoff on
>>> this license change?
>>>
>>> Or is it just you two?
>>>
>> Well I didn't think that was necessary; but after some thought I realize that
>> the AppDB only seemed to include a LICENSE file containing the GPL v2, while
>> a GPL/AGPL v3 change would require previous code to be licenced under 'GPL v2
>> or later'.
>>
>> So I'm including the other authors in this mail to see if they agree, or have
>> already licenced their code under GPL v2 or later
> 
> Yup, I'm ok with that change.
> 
> The image.php class was written by me for another project. And just
> reused for the appdb. I've later included it all kind of different
> projects (open and closed). And never really gave it a second thought.
> Does this cause trouble?
> 
> Paul
> 
> 

No, your own code can be licensed however you want in as many different
ways as you want.

Thanks,
Scott Ritchie


From skrzynka365 at konto.pl  Mon Dec  3 17:33:43 2007
From: skrzynka365 at konto.pl (Piotr Maceluch)
Date: Tue, 04 Dec 2007 00:33:43 +0100
Subject: dib engine
Message-ID: <47549257.1060508@konto.pl>

Hi,
what's the status of DIB engine (or where can one read about it)? Are 
the up-to-date sources still available? What kind of help would be needed?
Thanks
  Peter Maceluch


--
-----------=== F O R P S I ===-----------
  Profesjonalne uslugi, rewelacyjne ceny 
        Sprawdz nas - nowa oferta !!
     Twoja strona w sieci - od 2 zl
          http://www.forpsi.pl
-----------------------------------------


From aric at codeweavers.com  Mon Dec  3 22:33:23 2007
From: aric at codeweavers.com (Aric Stewart)
Date: Tue, 04 Dec 2007 13:33:23 +0900
Subject: shdocvw #3: Set default home and search page.
In-Reply-To: <473F3AF8.1050201@codeweavers.com>
References: <473F3AF8.1050201@codeweavers.com>
Message-ID: <4754D893.4010406@codeweavers.com>

I see that the native shdocvw sets neither the Start page nor the Search 
page when registered. This patch forces the users home page to initially 
be www.winehq.com which can be confusing to IE users who are expecting 
the normal default of msn.com

While amusing I do not think this is correct.
-aric

Jacek Caban wrote:
> ---
>  dlls/hlink/tests/hlink.c |    4 ----
>  dlls/shdocvw/shdocvw.inf |   12 +++++++++---
>  2 files changed, 9 insertions(+), 7 deletions(-)
> 
> 
> ------------------------------------------------------------------------
> 
> 



From thestig at google.com  Tue Dec  4 00:06:23 2007
From: thestig at google.com (Lei Zhang)
Date: Mon, 3 Dec 2007 22:06:23 -0800
Subject: ntdll: detach modules based on inter-module dependencies (try 2)
In-Reply-To: <8763zg595c.fsf@wine.dyndns.org>
References: <558b2f5c0712011050r10e3b505y300a30f4beaf9381@mail.gmail.com>
	<8763zg595c.fsf@wine.dyndns.org>
Message-ID: <558b2f5c0712032206p36036493rccedac2adbcbdb80@mail.gmail.com>

On Dec 3, 2007 3:07 AM, Alexandre Julliard <julliard at winehq.org> wrote:
> "Lei Zhang" <thestig at google.com> writes:
>
> > This patch changes how process_detach() works when called with
> > bForceDetach set to TRUE. A module would get detached when that module
> > has no dependencies. After a module gets detached, process_detach()
> > scans through all the modules and update their dependencies. I'm
> > assuming there's no circular dependencies between modules.
>
> You can't assume that, some modules do have circular dependencies. My
> suspicion is that this bug should be fixed in winmm, but either way
> you'll need to show some test cases.
>
> --
> Alexandre Julliard
> julliard at winehq.org
>

Ok, if winmm's DllMain gets called with fdwReason ==
DLL_PROCESS_DETACH with fImpLoad being non-NULL, then that means we're
in the middle of ExitProcess(). In that case, we can simply not call
DRIVER_UnloadAll() since the process is about to go away.


From winehacker at gmail.com  Tue Dec  4 04:52:50 2007
From: winehacker at gmail.com (Steven Edwards)
Date: Tue, 4 Dec 2007 05:52:50 -0500
Subject: shdocvw #3: Set default home and search page.
In-Reply-To: <4754D893.4010406@codeweavers.com>
References: <473F3AF8.1050201@codeweavers.com>
	<4754D893.4010406@codeweavers.com>
Message-ID: <19e31a080712040252w4b9d63f3w1d0efd66e41cb25b@mail.gmail.com>

On Dec 3, 2007 11:33 PM, Aric Stewart <aric at codeweavers.com> wrote:
> While amusing I do not think this is correct.

Plenty of OEM's change the default IE home page, and we should make it
easy to do so in Wine. I think a edit box in winecfg is the best route
to go with the default option being about:blank or www.winehq.org

Thanks
-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From aric at codeweavers.com  Tue Dec  4 04:56:24 2007
From: aric at codeweavers.com (Aric Stewart)
Date: Tue, 04 Dec 2007 19:56:24 +0900
Subject: shdocvw #3: Set default home and search page.
In-Reply-To: <19e31a080712040252w4b9d63f3w1d0efd66e41cb25b@mail.gmail.com>
References: <473F3AF8.1050201@codeweavers.com>	
	<4754D893.4010406@codeweavers.com>
	<19e31a080712040252w4b9d63f3w1d0efd66e41cb25b@mail.gmail.com>
Message-ID: <47553258.8060401@codeweavers.com>

Do we consider wine to be an OEM or a reimplementation of the base 
windows? Setting the homepage is easy enough it is just a registry key. 
However it is not something set when registering shdocvw.dll so i dont 
think we should set it there.  As a config option in winecfg sure.

-aric

Steven Edwards wrote:
> On Dec 3, 2007 11:33 PM, Aric Stewart <aric at codeweavers.com> wrote:
>> While amusing I do not think this is correct.
> 
> Plenty of OEM's change the default IE home page, and we should make it
> easy to do so in Wine. I think a edit box in winecfg is the best route
> to go with the default option being about:blank or www.winehq.org
> 
> Thanks



From winehacker at gmail.com  Tue Dec  4 05:01:30 2007
From: winehacker at gmail.com (Steven Edwards)
Date: Tue, 4 Dec 2007 06:01:30 -0500
Subject: shdocvw #3: Set default home and search page.
In-Reply-To: <47553258.8060401@codeweavers.com>
References: <473F3AF8.1050201@codeweavers.com>
	<4754D893.4010406@codeweavers.com>
	<19e31a080712040252w4b9d63f3w1d0efd66e41cb25b@mail.gmail.com>
	<47553258.8060401@codeweavers.com>
Message-ID: <19e31a080712040301o30446a33u7635a2c594e72674@mail.gmail.com>

On Dec 4, 2007 5:56 AM, Aric Stewart <aric at codeweavers.com> wrote:
> Do we consider wine to be an OEM or a reimplementation of the base
> windows? Setting the homepage is easy enough it is just a registry key.
> However it is not something set when registering shdocvw.dll so i dont
> think we should set it there.  As a config option in winecfg sure.

Distributors of Wine can be OEM's so they need the ability to change
it. OEM's of course can tweak the registry before packaging. IE
provides the ablity to change this setting of course for the user  but
the built in iexplore does not so until its further developed, I think
we need the option for users to change it in winecfg. I'll try to
write a patch in the next day or so that adds this functionality to
winecfg.

-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From aric at codeweavers.com  Tue Dec  4 05:06:19 2007
From: aric at codeweavers.com (Aric Stewart)
Date: Tue, 04 Dec 2007 20:06:19 +0900
Subject: shdocvw #3: Set default home and search page.
In-Reply-To: <19e31a080712040301o30446a33u7635a2c594e72674@mail.gmail.com>
References: <473F3AF8.1050201@codeweavers.com>	
	<4754D893.4010406@codeweavers.com>	
	<19e31a080712040252w4b9d63f3w1d0efd66e41cb25b@mail.gmail.com>	
	<47553258.8060401@codeweavers.com>
	<19e31a080712040301o30446a33u7635a2c594e72674@mail.gmail.com>
Message-ID: <475534AB.4050807@codeweavers.com>

True, making it something for wine.inf or for winecfg, but not 
shdocvw.dll in my opinion.

-aric

Steven Edwards wrote:
> On Dec 4, 2007 5:56 AM, Aric Stewart <aric at codeweavers.com> wrote:
>> Do we consider wine to be an OEM or a reimplementation of the base
>> windows? Setting the homepage is easy enough it is just a registry key.
>> However it is not something set when registering shdocvw.dll so i dont
>> think we should set it there.  As a config option in winecfg sure.
> 
> Distributors of Wine can be OEM's so they need the ability to change
> it. OEM's of course can tweak the registry before packaging. IE
> provides the ablity to change this setting of course for the user  but
> the built in iexplore does not so until its further developed, I think
> we need the option for users to change it in winecfg. I'll try to
> write a patch in the next day or so that adds this functionality to
> winecfg.
> 



From jacek at codeweavers.com  Tue Dec  4 05:26:28 2007
From: jacek at codeweavers.com (Jacek Caban)
Date: Tue, 04 Dec 2007 12:26:28 +0100
Subject: shdocvw #3: Set default home and search page.
In-Reply-To: <475534AB.4050807@codeweavers.com>
References: <473F3AF8.1050201@codeweavers.com>		<4754D893.4010406@codeweavers.com>		<19e31a080712040252w4b9d63f3w1d0efd66e41cb25b@mail.gmail.com>		<47553258.8060401@codeweavers.com>	<19e31a080712040301o30446a33u7635a2c594e72674@mail.gmail.com>
	<475534AB.4050807@codeweavers.com>
Message-ID: <47553964.4010505@codeweavers.com>

Aric Stewart wrote:
> True, making it something for wine.inf or for winecfg, but not 
> shdocvw.dll in my opinion.
>   

Native shdocvw.dll doesn't support self registration at all and its
registration is done by IE installer IMO. If we want to be compatible
with native, we'd have to move everything from shdocvw.inf to wine.inf
(and that's not the way to go IMO). I've added these registries because
an app I've been working on expected default search page to be present.
Also we should use it in our InternetExplorer and WebBrowser
implementation. We may consider to handle these keys like we do with IE
version key. That is, they may be added on iexplore.exe registration. If
one wants to install native IE, he has to unregister iexplore.exe first,
removing the homepage. Then IE installer will probably set its default
homepage.

Jacek


From aric at codeweavers.com  Tue Dec  4 05:30:25 2007
From: aric at codeweavers.com (Aric Stewart)
Date: Tue, 04 Dec 2007 20:30:25 +0900
Subject: shdocvw #3: Set default home and search page.
In-Reply-To: <47553964.4010505@codeweavers.com>
References: <473F3AF8.1050201@codeweavers.com>		<4754D893.4010406@codeweavers.com>		<19e31a080712040252w4b9d63f3w1d0efd66e41cb25b@mail.gmail.com>		<47553258.8060401@codeweavers.com>	<19e31a080712040301o30446a33u7635a2c594e72674@mail.gmail.com>
	<475534AB.4050807@codeweavers.com>
	<47553964.4010505@codeweavers.com>
Message-ID: <47553A51.6090300@codeweavers.com>

Humm, maybe i am confused but (at least the win98 version of ) 
shdocvw.dll implements DllRegisterServer which seems to do a lot of 
stuff.  But Setting the Start Page is not one of them.  In my experience 
installing IE does not actually set a Start Page by default, but instead 
the browser seem to handle not having a Start Page by pulling up a 
default one.

-aric

Jacek Caban wrote:
> Aric Stewart wrote:
>> True, making it something for wine.inf or for winecfg, but not 
>> shdocvw.dll in my opinion.
>>   
> 
> Native shdocvw.dll doesn't support self registration at all and its
> registration is done by IE installer IMO. If we want to be compatible
> with native, we'd have to move everything from shdocvw.inf to wine.inf
> (and that's not the way to go IMO). I've added these registries because
> an app I've been working on expected default search page to be present.
> Also we should use it in our InternetExplorer and WebBrowser
> implementation. We may consider to handle these keys like we do with IE
> version key. That is, they may be added on iexplore.exe registration. If
> one wants to install native IE, he has to unregister iexplore.exe first,
> removing the homepage. Then IE installer will probably set its default
> homepage.
> 
> Jacek
> 



From stefan at codeweavers.com  Tue Dec  4 05:35:16 2007
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Tue, 4 Dec 2007 12:35:16 +0100
Subject: dlls/wined3d/state.c -- fix error handling
In-Reply-To: <Pine.LNX.4.64.0712032258010.29138@acrux.dbai.tuwien.ac.at>
References: <Pine.LNX.4.64.0712032258010.29138@acrux.dbai.tuwien.ac.at>
Message-ID: <200712041235.18391.stefan@codeweavers.com>

Am Dienstag, 4. Dezember 2007 01:34:55 schrieb Gerald Pfeifer:
> This looks like a mistaken consistency check.  The code where mapped_stage
> is set looks as follows:
>
>   DWORD mapped_stage = stateblock->wineD3DDevice->texUnitMap[texUnit];
>
> and at other places we do check for -1, so this looks like another bug
> in error handling.
In fact the texUnitMap entries are never set to any value < 0 other than -1, 
so it doesn't make much difference, but for the sake of consistency we should 
check for -1 here as well
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071204/05118d8e/attachment.pgp 

From jacek at codeweavers.com  Tue Dec  4 05:58:35 2007
From: jacek at codeweavers.com (Jacek Caban)
Date: Tue, 04 Dec 2007 12:58:35 +0100
Subject: shdocvw #3: Set default home and search page.
In-Reply-To: <47553A51.6090300@codeweavers.com>
References: <473F3AF8.1050201@codeweavers.com>		<4754D893.4010406@codeweavers.com>		<19e31a080712040252w4b9d63f3w1d0efd66e41cb25b@mail.gmail.com>		<47553258.8060401@codeweavers.com>	<19e31a080712040301o30446a33u7635a2c594e72674@mail.gmail.com>
	<475534AB.4050807@codeweavers.com>
	<47553964.4010505@codeweavers.com>
	<47553A51.6090300@codeweavers.com>
Message-ID: <475540EB.6080401@codeweavers.com>

Aric Stewart wrote:
> Humm, maybe i am confused but (at least the win98 version of )
> shdocvw.dll implements DllRegisterServer which seems to do a lot of
> stuff.  But Setting the Start Page is not one of them.  In my
> experience installing IE does not actually set a Start Page by
> default, but instead the browser seem to handle not having a Start
> Page by pulling up a default one.
>

I've checked it again and it looks like shdocvw registers only its
typelib, nothing else like coclasses. I will do more testing later today.

Jacek



From the3dfxdude at gmail.com  Tue Dec  4 09:00:17 2007
From: the3dfxdude at gmail.com (Jesse Allen)
Date: Tue, 4 Dec 2007 08:00:17 -0700
Subject: dib engine
In-Reply-To: <47549257.1060508@konto.pl>
References: <47549257.1060508@konto.pl>
Message-ID: <530468570712040700s7df0b25eic48b62f4698879a1@mail.gmail.com>

On Dec 3, 2007 4:33 PM, Piotr Maceluch <skrzynka365 at konto.pl> wrote:
> Hi,
> what's the status of DIB engine (or where can one read about it)? Are
> the up-to-date sources still available? What kind of help would be needed?
> Thanks
>   Peter Maceluch


If you are talking about my project, it is still available, and I
merged up to a recent git snapshot two weeks ago.
http://repo.or.cz/w/wine/dibdrv.git

I can't promise too much until after finals. I'm going to work on it
and finish the image support during my break. Finishing the image
support and proper forwarding of the missing stuff is probably what is
needed to get it merged into wine.

If you need to have it merged up again, I will do that. If you want to
start hacking on it, pretty much any of the stubs you can work on.

Jesse


From kai.blin at gmail.com  Tue Dec  4 17:14:02 2007
From: kai.blin at gmail.com (Kai Blin)
Date: Wed, 5 Dec 2007 00:14:02 +0100
Subject: Wine Weekly News
Message-ID: <200712050014.02742.kai.blin@gmail.com>

Hi Zach,

thanks for getting a new WWN issue out there. Finally there's more than one 
release after the other. I think WWN is a really valuable ressource for our 
users. Also, I hope it'll be a platform to get some GSoC exposure on the 
front page, especially without me having to take care of it. ;)

Thanks,
Kai
-- 
Kai Blin
WorldForge developer  http://www.worldforge.org/
Wine developer        http://wiki.winehq.org/KaiBlin
Samba team member     http://www.samba.org/samba/team/
--
Will code for cotton.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071205/d28bfb69/attachment.pgp 

From zgs at seas.upenn.edu  Tue Dec  4 17:23:10 2007
From: zgs at seas.upenn.edu (Zachary Goldberg)
Date: Tue, 4 Dec 2007 18:23:10 -0500
Subject: Wine Weekly News
In-Reply-To: <200712050014.02742.kai.blin@gmail.com>
References: <200712050014.02742.kai.blin@gmail.com>
Message-ID: <b050a5e70712041523k3e0f4707rfefb19afd4e3f3b5@mail.gmail.com>

Kai,

It was my pleasure :).  Keep the interesting wine discussion/news
coming and I'll keep writing WWNs.  I'll also make note to highlight
in particular GSoC developments as they happen.

--Zach

On Dec 4, 2007 6:14 PM, Kai Blin <kai.blin at gmail.com> wrote:
> Hi Zach,
>
> thanks for getting a new WWN issue out there. Finally there's more than one
> release after the other. I think WWN is a really valuable ressource for our
> users. Also, I hope it'll be a platform to get some GSoC exposure on the
> front page, especially without me having to take care of it. ;)
>
> Thanks,
> Kai
> --
> Kai Blin
> WorldForge developer  http://www.worldforge.org/
> Wine developer        http://wiki.winehq.org/KaiBlin
> Samba team member     http://www.samba.org/samba/team/
> --
> Will code for cotton.
>



-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From ripzonetriton at gmail.com  Tue Dec  4 17:43:43 2007
From: ripzonetriton at gmail.com (Triton)
Date: Tue, 4 Dec 2007 23:43:43 +0000
Subject: Wine Weekly News
In-Reply-To: <b050a5e70712041523k3e0f4707rfefb19afd4e3f3b5@mail.gmail.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<b050a5e70712041523k3e0f4707rfefb19afd4e3f3b5@mail.gmail.com>
Message-ID: <20071204234343.d47401e9.ripzonetriton@gmail.com>

On Tue, 4 Dec 2007 18:23:10 -0500
"Zachary Goldberg" <zgs at seas.upenn.edu> wrote:

> Kai,
> 
> It was my pleasure :).  Keep the interesting wine discussion/news
> coming and I'll keep writing WWNs.  I'll also make note to highlight
> in particular GSoC developments as they happen.
> 
> --Zach

Hi everyone, I've been following the mailing lists for some time now, this is my first post. OK, presentation done...

I also had to thank you bring to life the WWN, it's a great resource for those who don't actively follow the development discussions.

-- 
Triton <ripzonetriton at gmail.com>


From winehacker at gmail.com  Wed Dec  5 00:21:13 2007
From: winehacker at gmail.com (Steven Edwards)
Date: Wed, 5 Dec 2007 01:21:13 -0500
Subject: dlls/icmp/icmp_main.c -- attempt at fixing regression in r1.30
	(RESEND)
In-Reply-To: <Pine.LNX.4.64.0712050133280.29138@acrux.dbai.tuwien.ac.at>
References: <Pine.LNX.4.64.0712050133280.29138@acrux.dbai.tuwien.ac.at>
Message-ID: <19e31a080712042221o43c670b3p7b4776b816c3d56e@mail.gmail.com>

Hello,

On Dec 4, 2007 7:34 PM, Gerald Pfeifer <gerald at pfeifer.com> wrote:
> Since Alexandre has asked me to take care of overflow in some other
> context, I figured I could ping this underflow patch in return. ;-)
>
> Gerald
>
> ---------- Forwarded message ----------
> From: Gerald Pfeifer <gerald at pfeifer.com>
> To:  <wine-patches at winehq.org>, Damjan Jovanovic <damjan.jov at gmail.com>
> Date: Thu, 22 Nov 2007 22:32:08 +0100 (CET)
> Subject: dlls/icmp/icmp_main.c -- attempt at fixing regression in r1.30
>
> I believe revision 1.30 of dlls/icmp/icmp_main.c
>
>   date: 2006-11-06 11:51:07 +0000;  author: julliard;  state: Exp;  lines: +10 -15;
>   Damjan Jovanovic <damjan.jov at gmail.com>
>   icmp: Changed select to poll.

Could we just revert this patch? I think poll is not a valid api on
win32 so this breaks the windows port. I don't really see the need in
this change here in the first place.

Thanks
-- 
Steven Edwards

"There is one thing stronger than all the armies in the world, and
that is an idea whose time has come." - Victor Hugo


From julliard at winehq.org  Wed Dec  5 05:06:44 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 05 Dec 2007 12:06:44 +0100
Subject: dlls/icmp/icmp_main.c -- attempt at fixing regression in r1.30
	(RESEND)
In-Reply-To: <Pine.LNX.4.64.0712050133280.29138@acrux.dbai.tuwien.ac.at>
	(Gerald Pfeifer's message of "Wed, 5 Dec 2007 01:34:23 +0100 (CET)")
References: <Pine.LNX.4.64.0712050133280.29138@acrux.dbai.tuwien.ac.at>
Message-ID: <87lk89e6yj.fsf@wine.dyndns.org>

Gerald Pfeifer <gerald at pfeifer.com> writes:

> Since Alexandre has asked me to take care of overflow in some other
> context, I figured I could ping this underflow patch in return. ;-)

Looks ok, please submit the patch with a proper Changelog entry.

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Wed Dec  5 06:35:32 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Wed, 05 Dec 2007 13:35:32 +0100
Subject: [3/5] shell32: fix buffer sizes
In-Reply-To: <200712011939.37552.lav@etersoft.ru> (Vitaly Lipatov's message of
	"Sat, 1 Dec 2007 19:39:37 +0300")
References: <200712011939.37552.lav@etersoft.ru>
Message-ID: <87hcixe2uj.fsf@wine.dyndns.org>

Vitaly Lipatov <lav at etersoft.ru> writes:

> lstrcpynW needs size in TCHARS
> RegEnumKey needs size in TCHARS

It would be better to change the HCR_GetDefaultVerbW function to take a
len in WCHARs since it's returning a string in all cases.

-- 
Alexandre Julliard
julliard at winehq.org


From tzi063 at student.uib.no  Wed Dec  5 06:51:32 2007
From: tzi063 at student.uib.no (Tomas Zijdemans)
Date: Wed, 05 Dec 2007 13:51:32 +0100
Subject: Wine Weekly News
In-Reply-To: <20071204234343.d47401e9.ripzonetriton@gmail.com>
References: <200712050014.02742.kai.blin@gmail.com>	<b050a5e70712041523k3e0f4707rfefb19afd4e3f3b5@mail.gmail.com>
	<20071204234343.d47401e9.ripzonetriton@gmail.com>
Message-ID: <fj66p0$kl7$1@ger.gmane.org>

This is great :)

Would it be a good idea to include major news from the appDB?
Ex: "Photoshop cs2 has now reached Gold status"

I think this would be very inspiring to users.


Tomas

Triton wrote:
> On Tue, 4 Dec 2007 18:23:10 -0500
> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> 
>> Kai,
>>
>> It was my pleasure :).  Keep the interesting wine discussion/news
>> coming and I'll keep writing WWNs.  I'll also make note to highlight
>> in particular GSoC developments as they happen.
>>
>> --Zach
> 
> Hi everyone, I've been following the mailing lists for some time now, this is my first post. OK, presentation done...
> 
> I also had to thank you bring to life the WWN, it's a great resource for those who don't actively follow the development discussions.
> 



From mstefani at redhat.com  Wed Dec  5 08:01:43 2007
From: mstefani at redhat.com (Michael Stefaniuc)
Date: Wed, 05 Dec 2007 15:01:43 +0100
Subject: dlls/icmp/icmp_main.c -- attempt at fixing regression in r1.30
	(RESEND)
In-Reply-To: <Pine.LNX.4.64.0712051213110.29138@acrux.dbai.tuwien.ac.at>
References: <Pine.LNX.4.64.0712050133280.29138@acrux.dbai.tuwien.ac.at>	<87lk89e6yj.fsf@wine.dyndns.org>
	<Pine.LNX.4.64.0712051213110.29138@acrux.dbai.tuwien.ac.at>
Message-ID: <4756AF47.6030301@redhat.com>

Gerald Pfeifer wrote:
> On Wed, 5 Dec 2007, Alexandre Julliard wrote:
>> Looks ok, please submit the patch with a proper Changelog entry.
> 
> Thanks for looking into this!  Here we go! :-)

> ChangeLog:
> Correctly handle underflow in IcmpSendEcho(); bug introduced in rev 1.30.
Still using cvs? I guess nobody else can do anything with rev 1.30.

bye
	michael

> Index: dlls/icmp/icmp_main.c
> ===================================================================
> RCS file: /home/wine/wine/dlls/icmp/icmp_main.c,v
> retrieving revision 1.30
> diff -u -3 -p -r1.30 icmp_main.c
> --- dlls/icmp/icmp_main.c	6 Nov 2006 11:51:07 -0000	1.30
> +++ dlls/icmp/icmp_main.c	22 Nov 2007 21:28:59 -0000
> @@ -433,8 +433,9 @@ DWORD WINAPI IcmpSendEcho(
>               * Decrease the timeout so that we don't enter an endless loop even
>               * if we get flooded with ICMP packets that are not for us.
>               */
> -            Timeout -= (recv_time - send_time);
> -            if (Timeout < 0) Timeout = 0;
> +            DWORD t = (recv_time - send_time);
> +            if (Timeout > t) Timeout -= t;
> +            else             Timeout = 0;
>              continue;
>          } else {
>              /* This is a reply to our packet */
> 
> 


-- 
Michael Stefaniuc                           Tel.: +49-711-96437-199
Consulting Communications Engineer          Fax.: +49-711-96437-111
--------------------------------------------------------------------
Reg. Adresse: Red Hat GmbH, Hauptst?tter Strasse 58, 70178 Stuttgart
Handelsregister: Amtsgericht Stuttgart HRB 153243
Gesch?ftsf?hrer: Brendan Lane, Charlie Peters, Michael Cunningham,
                 Werner Knoblich


From zgold550 at gmail.com  Wed Dec  5 09:08:27 2007
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Wed, 5 Dec 2007 10:08:27 -0500
Subject: Wine Weekly News
In-Reply-To: <fj66p0$kl7$1@ger.gmane.org>
References: <200712050014.02742.kai.blin@gmail.com>
	<b050a5e70712041523k3e0f4707rfefb19afd4e3f3b5@mail.gmail.com>
	<20071204234343.d47401e9.ripzonetriton@gmail.com>
	<fj66p0$kl7$1@ger.gmane.org>
Message-ID: <b050a5e70712050708k7626c53mf4add2723191103d@mail.gmail.com>

Hmmm interesting idea.  I don't actually know just yet who the
maintainer of the AppDB is, but he/she may respond in this thread
(I'll attempt to find out their email anyway) as to whether or not its
possible to generate a weekly summary of applications which have been
"upgraded" through the week?  I agree that that would be a great
addition.


--Zach

On Dec 5, 2007 7:51 AM, Tomas Zijdemans <tzi063 at student.uib.no> wrote:
> This is great :)
>
> Would it be a good idea to include major news from the appDB?
> Ex: "Photoshop cs2 has now reached Gold status"
>
> I think this would be very inspiring to users.
>
>
> Tomas
>
>
> Triton wrote:
> > On Tue, 4 Dec 2007 18:23:10 -0500
> > "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> >
> >> Kai,
> >>
> >> It was my pleasure :).  Keep the interesting wine discussion/news
> >> coming and I'll keep writing WWNs.  I'll also make note to highlight
> >> in particular GSoC developments as they happen.
> >>
> >> --Zach
> >
> > Hi everyone, I've been following the mailing lists for some time now, this is my first post. OK, presentation done...
> >
> > I also had to thank you bring to life the WWN, it's a great resource for those who don't actively follow the development discussions.
> >
>
>
>
>



-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From dmitry at codeweavers.com  Wed Dec  5 09:12:31 2007
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Wed, 5 Dec 2007 23:12:31 +0800
Subject: system.sfd: make 18 pixel strike with Japanese jvgasys glyphs
References: <4756BC0D.1060308@codeweavers.com>
Message-ID: <01cb01c83751$441f4dc0$6700fea9@DMITRY>

"Aric Stewart" <aric at codeweavers.com> wrote:

>  fonts/system.sfd | 1407 
> ++++++++++++++++++++++++++++++++++++++++++++++--------
>  1 files changed, 1213 insertions(+), 194 deletions(-)

For some reason widths of many glyphs are changed by this patch,
that doesn't look correct.

-- 
Dmitry.


From alex at thehandofagony.com  Wed Dec  5 09:20:03 2007
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Wed, 5 Dec 2007 16:20:03 +0100
Subject: Wine Weekly News
In-Reply-To: <b050a5e70712050708k7626c53mf4add2723191103d@mail.gmail.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<fj66p0$kl7$1@ger.gmane.org>
	<b050a5e70712050708k7626c53mf4add2723191103d@mail.gmail.com>
Message-ID: <200712051620.03613.alex@thehandofagony.com>

On Wednesday 05 December 2007 16:08:27 Zachary Goldberg wrote:
> Hmmm interesting idea.  I don't actually know just yet who the
> maintainer of the AppDB is, but he/she may respond in this thread
> (I'll attempt to find out their email anyway) as to whether or not its
> possible to generate a weekly summary of applications which have been
> "upgraded" through the week?  I agree that that would be a great
> addition.
>

Their e-mail is appdb at winehq.org.  They'll have to decide how to track the 
changes, but in any case the code should be in soon.



Alexander N. S?rnes

>
> --Zach
>
> On Dec 5, 2007 7:51 AM, Tomas Zijdemans <tzi063 at student.uib.no> wrote:
> > This is great :)
> >
> > Would it be a good idea to include major news from the appDB?
> > Ex: "Photoshop cs2 has now reached Gold status"
> >
> > I think this would be very inspiring to users.
> >
> >
> > Tomas
> >
> > Triton wrote:
> > > On Tue, 4 Dec 2007 18:23:10 -0500
> > >
> > > "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> > >> Kai,
> > >>
> > >> It was my pleasure :).  Keep the interesting wine discussion/news
> > >> coming and I'll keep writing WWNs.  I'll also make note to highlight
> > >> in particular GSoC developments as they happen.
> > >>
> > >> --Zach
> > >
> > > Hi everyone, I've been following the mailing lists for some time now,
> > > this is my first post. OK, presentation done...
> > >
> > > I also had to thank you bring to life the WWN, it's a great resource
> > > for those who don't actively follow the development discussions.




From thunderbird2k at gmx.net  Wed Dec  5 11:52:07 2007
From: thunderbird2k at gmx.net (Roderick Colenbrander)
Date: Wed, 05 Dec 2007 18:52:07 +0100
Subject: wined3d:context.c Check for a context is added
In-Reply-To: <4756D113.405@etersoft.ru>
References: <4756D113.405@etersoft.ru>
Message-ID: <20071205175207.86820@gmx.net>

> We need to check context before than refer it.
> 
> Changelog:
>     Check for a context is added
> 
> -- 
> Best regards
> 	Anatoly Lyutin.
> 

Hi,

I'm not sure if your patch is correct. The block of code in front of the if-statement you added should have found or else created a context. If afterwards there is no context it sounds like something went wrong. Returning NULL isn't correct then. When we just return we keep using the old context (if one was around) which might work for your program but it isn't guaranteed to work at all.

So what is the real problem?

Regards,
Roderick
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer


From vostok at etersoft.ru  Wed Dec  5 12:01:12 2007
From: vostok at etersoft.ru (Anatoly Lyutin)
Date: Wed, 05 Dec 2007 21:01:12 +0300
Subject: wined3d:context.c Check for a context is added
In-Reply-To: <20071205175207.86820@gmx.net>
References: <4756D113.405@etersoft.ru> <20071205175207.86820@gmx.net>
Message-ID: <4756E768.1060402@etersoft.ru>

Roderick Colenbrander wrote:
>
> Hi,
>
>   
Hi!
> I'm not sure if your patch is correct. The block of code in front of the if-statement you added should have found or else created a context. If afterwards there is no context it sounds like something went wrong. Returning NULL isn't correct then. When we just return we keep using the old context (if one was around) which might work for your program but it isn't guaranteed to work at all.
>
> So what is the real problem?
>   
I use  one application that falls after exit:

ixme:dbghelp_dwarf:dwarf2_parse_variable Unsupported form for const value
srgb_sub_high (a)
Register dump:
 CS:0073 SS:007b DS:007b ES:007b FS:0033 GS:003b
 EIP:7ebe66f5 ESP:0033faac EBP:0033fae4 EFLAGS:00210202(   - 00      - -RI1)
 EAX:00000000 EBX:7ec91428 ECX:00000000 EDX:0013c908
 ESI:00000014 EDI:0013b588
Stack dump:
0x0033faac:  00110000 00000000 0013ae78 00000000
0x0033fabc:  7ecbad04 02ff7de8 0033fae4 7ecb01ee
0x0033facc:  02ff7de8 0033fb08 00000405 7ec91428
0x0033fadc:  02ff6360 0013c908 0033fb14 7ebe32a0
0x0033faec:  0013c908 0013b588 00000001 00000007
0x0033fafc:  00000000 00110000 00000000 7ec91428
Backtrace:
=>1 0x7ebe66f5 ActivateContext+0x75(This=0x13c908, target=0x13b588, usage=0x1)
[/srv/vostok/Projects/wine/dlls/wined3d/context.c:867] in wined3d (0x0033fae4)
  2 0x7ebe32a0 IWineD3DBaseTextureImpl_CleanUp+0x50(iface=<register ESI not in
topmost frame>) [/srv/vostok/Projects/wine/dlls/wined3d/basetexture.c:75] in
wined3d (0x0033fb14)
  3 0x7ec4cce6 IWineD3DTextureImpl_Destroy+0xa6(iface=<register EDI not in
topmost frame>, D3DCB_DestroySurface=0x7eca75e0)
[/srv/vostok/Projects/wine/dlls/wined3d/texture.c:237] in wined3d (0x0033fb44)
  4 0x7ecb1147 IDirect3DTexture8Impl_Release+0x57(iface=0x2f0c8a0)
[/srv/vostok/Projects/wine/dlls/d3d8/texture.c:62] in d3d8 (0x0033fb84)
  5 0x005ef395 in mme (+0xaf395) (0x0033fba0)
  6 0x005ef44b in mme (+0xaf44b) (0x0033fbac)
  7 0x005ef69f in mme (+0xaf69f) (0x0033fbc8)
  8 0x005e4ad3 in mme (+0xa4ad3) (0x0033fbd4)
  9 0x0057fd3f in mme (+0x3fd3f) (0x0033fbe4)
  10 0x005a040f in mme (+0x6040f) (0x0033fbf0)
  11 0x0059a4aa in mme (+0x5a4aa) (0x0033fc08)
  12 0x0059a7bf in mme (+0x5a7bf) (0x0033fc14)
  13 0x00548ec4 in mme (+0x8ec4) (0x0033fc2c)
  14 0x0056e770 in mme (+0x2e770) (0x0033fc3c)
  15 0x005af139 in mme (+0x6f139) (0x0033fc4c)
  16 0x0054443d in mme (+0x443d) (0x0033fc6c)


> Regards,
> Roderick
>   


-- 
Best regards
	Anatoly Lyutin.



From stefandoesinger at gmx.at  Wed Dec  5 13:46:06 2007
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Wed, 5 Dec 2007 20:46:06 +0100
Subject: wined3d:context.c Check for a context is added
In-Reply-To: <4756D113.405@etersoft.ru>
References: <4756D113.405@etersoft.ru>
Message-ID: <200712052046.10836.stefandoesinger@gmx.at>

Am Mittwoch, 5. Dezember 2007 17:25:55 schrieb Anatoly Lyutin:
> We need to check context before than refer it.
>
> Changelog:
>     Check for a context is added
Does that happen to fix any game? The idea was that the activeContext pointer 
never points to NULL, so a check like that only workaround a bug somewhere 
else
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071205/baf4ef96/attachment.pgp 

From stefandoesinger at gmx.at  Wed Dec  5 13:50:59 2007
From: stefandoesinger at gmx.at (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Wed, 5 Dec 2007 20:50:59 +0100
Subject: d3dx8 [2/2]: add basic functions for MatrixStack
In-Reply-To: <20071205181330.8c78pachgkc4kgk4@webmail.math.cnrs.fr>
References: <20071205181330.8c78pachgkc4kgk4@webmail.math.cnrs.fr>
Message-ID: <200712052051.02620.stefandoesinger@gmx.at>

Am Mittwoch, 5. Dezember 2007 18:13:30 schrieb David.Adam at math.cnrs.fr:
> This is my first attempt with ICOM objects. So, all the advices are
> welcome.
A few suggestions:

+HRESULT WINAPI ID3DXMatrixStackImpl_QueryInterface(ID3DXMatrixStack *iface, 
REFIID riid, void **ppvObject)
+ ...
+     IClassFactory_AddRef(iface);
It is better to use ID3DXMatrixStack_AddRef(iface) here. It is essentially the 
same, but it looks more consistent

The AddRef() and Release() methods should have a TRACE which write either the 
new or old refcount, otherwise tracking refcounting bugs is hell.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071205/ae34fe2e/attachment.pgp 

From brian.vincent at gmail.com  Wed Dec  5 14:30:54 2007
From: brian.vincent at gmail.com (Brian Vincent)
Date: Wed, 5 Dec 2007 13:30:54 -0700
Subject: Wine Weekly News
In-Reply-To: <200712051620.03613.alex@thehandofagony.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<fj66p0$kl7$1@ger.gmane.org>
	<b050a5e70712050708k7626c53mf4add2723191103d@mail.gmail.com>
	<200712051620.03613.alex@thehandofagony.com>
Message-ID: <3010968c0712051230t21ab7ce2g8f22e9eca660227d@mail.gmail.com>

On Dec 5, 2007 8:20 AM, Alexander Nicolaysen S?rnes
<alex at thehandofagony.com> wrote:
>
> Their e-mail is appdb at winehq.org.  They'll have to decide how to track the
> changes, but in any case the code should be in soon.

What about downgrades?  Regressions happen.  It'd be terrible one week
to promise something working and then a user finding out it's broken a
few months later.  Of course, even if we could report on apps
regressing it would rely on people actually changing the status in
AppDB and I'm not so sure that'll happen.

-Brian


From zgold550 at gmail.com  Wed Dec  5 14:32:08 2007
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Wed, 5 Dec 2007 15:32:08 -0500
Subject: Wine Weekly News
In-Reply-To: <3010968c0712051230t21ab7ce2g8f22e9eca660227d@mail.gmail.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<fj66p0$kl7$1@ger.gmane.org>
	<b050a5e70712050708k7626c53mf4add2723191103d@mail.gmail.com>
	<200712051620.03613.alex@thehandofagony.com>
	<3010968c0712051230t21ab7ce2g8f22e9eca660227d@mail.gmail.com>
Message-ID: <b050a5e70712051232y60f26574m1b80fa37a6826138@mail.gmail.com>

Brian,

Yep -- i'll be tracking downgrades too.  I'm actually writing the code
myself, you'll likely see the results in next weeks issue

--Zach

On Dec 5, 2007 3:30 PM, Brian Vincent <brian.vincent at gmail.com> wrote:
> On Dec 5, 2007 8:20 AM, Alexander Nicolaysen S?rnes
> <alex at thehandofagony.com> wrote:
> >
> > Their e-mail is appdb at winehq.org.  They'll have to decide how to track the
> > changes, but in any case the code should be in soon.
>
> What about downgrades?  Regressions happen.  It'd be terrible one week
> to promise something working and then a user finding out it's broken a
> few months later.  Of course, even if we could report on apps
> regressing it would rely on people actually changing the status in
> AppDB and I'm not so sure that'll happen.
>
> -Brian
>



-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From infyquest at gmail.com  Wed Dec  5 16:46:59 2007
From: infyquest at gmail.com (Vijay Kiran Kamuju)
Date: Wed, 5 Dec 2007 16:46:59 -0600
Subject: A small question regarding cpuid
Message-ID: <36bf289b0712051446o8168860x57ab9df0c1c0b944@mail.gmail.com>

Hi,

I was going through dlls/kernel32/cpu.c and stumbled upon the
functions do_cpuid and have_cpuid.
It seems the assembly code for both the Intel and AMD 64 bit processors.
Is it possible to remove the ifdefs or add the x86_64 ifdef.
And one more question does this change help 64 bit windows support?

Thanks,
VJ


From ben at atomnet.co.uk  Wed Dec  5 16:50:51 2007
From: ben at atomnet.co.uk (Ben Hodgetts (Enverex))
Date: Wed, 05 Dec 2007 22:50:51 +0000
Subject: Wine Weekly News
In-Reply-To: <fj66p0$kl7$1@ger.gmane.org>
References: <200712050014.02742.kai.blin@gmail.com>	<b050a5e70712041523k3e0f4707rfefb19afd4e3f3b5@mail.gmail.com>	<20071204234343.d47401e9.ripzonetriton@gmail.com>
	<fj66p0$kl7$1@ger.gmane.org>
Message-ID: <47572B4B.4030707@atomnet.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Possibly, but on the other hand it could just as easily become "Garbage"
in the next release of Wine ;)

(sorry, I already sent this once at the start of the day but emailed it
directly to the previous person rather than back to the list)

Ben H.

Tomas Zijdemans wrote:
> This is great :)
>
> Would it be a good idea to include major news from the appDB?
> Ex: "Photoshop cs2 has now reached Gold status"
>
> I think this would be very inspiring to users.
>
>
> Tomas
>
> Triton wrote:
>> On Tue, 4 Dec 2007 18:23:10 -0500
>> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
>>
>>> Kai,
>>>
>>> It was my pleasure :).  Keep the interesting wine discussion/news
>>> coming and I'll keep writing WWNs.  I'll also make note to highlight
>>> in particular GSoC developments as they happen.
>>>
>>> --Zach
>> Hi everyone, I've been following the mailing lists for some time now, this is my first post. OK, presentation done...
>>
>> I also had to thank you bring to life the WWN, it's a great resource for those who don't actively follow the development discussions.
>>
>
>
>

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFHVytLuqCUopk11kIRAkesAJ9d/vngVV71xY/749SA8g5hkys4DgCfVEwh
IlVnueogwUYAb4y1qx4iU38=
=qmuz
-----END PGP SIGNATURE-----


From mstefani at redhat.com  Wed Dec  5 16:51:58 2007
From: mstefani at redhat.com (Michael Stefaniuc)
Date: Wed, 05 Dec 2007 23:51:58 +0100
Subject: secur32: Remove the SECUR32_ALLOC() macro around HeapAlloc().
In-Reply-To: <3a768c550712051254o5c1f175dh3cf31a03fbfa4d55@mail.gmail.com>
References: <20071205205220.GA26291@redhat.com>
	<3a768c550712051254o5c1f175dh3cf31a03fbfa4d55@mail.gmail.com>
Message-ID: <47572B8E.3070203@redhat.com>

Juan Lang wrote:
> On Dec 5, 2007 12:52 PM, Michael Stefaniuc <mstefani at redhat.de> wrote:
>> Checked with Kai and Dmitry and there is nothing special about
>> SECUR32_ALLOC(). There are more direct usages of HeapAlloc()
>> than of the macro so instead of replacing SECUR32_ALLOC() with
>> heap_alloc() just remove it altogether.
> 
> No prob.  I introduced those macros some years ago before valgrind was
> usable with wine, it made debugging memory leaks (via redefinition of
> the macros with special leak-tracking ones) easier.  Valgrind is
> certainly better.
I thought that was still the reason why those $dll_alloc() and now
heap_alloc() wrappers are used. I mean the main reason cause we all know
that the HeapAlloc() API just sucks.

bye
	michael
-- 
Michael Stefaniuc               Tel.: +49-711-96437-199
Sr. Network Engineer            Fax.: +49-711-96437-111
--------------------------------------------------------------------
Reg. Adresse: Red Hat GmbH, Hauptst?tter Strasse 58, 70178 Stuttgart
Handelsregister: Amtsgericht Stuttgart HRB 153243
Gesch?ftsf?hrer: Brendan Lane, Charlie Peters, Michael Cunningham,
                 Werner Knoblich


From zgold550 at gmail.com  Wed Dec  5 17:02:36 2007
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Wed, 5 Dec 2007 18:02:36 -0500
Subject: Wine Weekly News
In-Reply-To: <47572B4B.4030707@atomnet.co.uk>
References: <200712050014.02742.kai.blin@gmail.com>
	<b050a5e70712041523k3e0f4707rfefb19afd4e3f3b5@mail.gmail.com>
	<20071204234343.d47401e9.ripzonetriton@gmail.com>
	<fj66p0$kl7$1@ger.gmane.org> <47572B4B.4030707@atomnet.co.uk>
Message-ID: <b050a5e70712051502p4da42a09p209bce3e9b663bf2@mail.gmail.com>

I've finished coding a script which runs the necessary query to
generate data (I download a database backup and run the queries on my
local machine.).  As a sampling (if anybody feels like tripple
checking that the data is correct) of "Upgrades" (and some downgrades)
from 11-27-2007 to 12-04-2007:

Chromadrome 2 - Demo 1.0 (18165)  went from Garbage (2007-11-25
01:25:25) to Platinum (2007-12-02 11:50:43)
Age of Empires II The Age of Kings: 2.x (18083)  went from Silver
(2007-11-15 15:58:30) to Gold (2007-11-30 16:30:18)
Dreamweaver MX (18123)  went from Silver (2007-07-22 03:17:03) to
Garbage (2007-12-01 17:41:49)
Call of Duty United Offensive: 1.5 (18163)  went from Gold (2007-04-06
07:46:23) to Platinum (2007-12-02 11:12:50)
Crysis Single player demo (18094)  went from Garbage (2007-11-06
12:49:00) to Bronze (2007-12-01 03:25:13)
Eschalon Book I Demo Demo (18029)  went from Garbage (2007-11-22
02:37:49) to Platinum (2007-11-29 03:11:20)
Gothic 1.0x (18154)  went from Bronze (2007-11-09 11:48:03) to Garbage
(2007-12-02 09:21:57)
Proteus 7.2 (18050)  went from Garbage (2007-11-18 07:08:51) to Silver
(2007-11-29 22:20:27)
Ys origin 1.1.0.0 - Adol Version (18060)  went from Bronze (2007-07-13
00:20:48) to Silver (2007-11-30 01:38:14)
Mp3tag v2.39 (17994)  went from Platinum (2007-10-20 11:01:13) to Gold
(2007-11-27 15:44:51)
Crayon Release 1 (17988)  went from Gold (2007-11-17 13:34:11) to
Platinum (2007-11-27 11:30:05)
Silencer 1.10.1 (18087)  went from Silver (2007-11-16 15:04:45) to
Platinum (2007-11-30 17:22:00)
.NET Framework 2.0 (18042)  went from Garbage (2007-11-29 10:07:26) to
Platinum (2007-11-30 11:35:57)
Tom Clancy's Rainbow Six 3: Raven Shield 1.60 (18057)  went from
Garbage (2007-10-17 11:44:55) to Bronze (2007-11-29 21:43:19)
Safari 3.x Public Beta (18196)  went from Garbage (2007-11-21
03:21:32) to Bronze (2007-12-03 10:03:37)
TTPlayer 5.0.1 (18191)  went from Silver (2007-11-07 05:24:39) to Gold
(2007-12-03 08:43:31)
Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
(18108)  went from Bronze (2007-11-07 06:34:47) to Silver (2007-12-01
10:08:49)
Original War 1.08 (18041)  went from Garbage (2007-11-18 19:59:13) to
Bronze (2007-11-29 09:31:33)
Half-Life 2 Half-Life: Source (17993)  went from Garbage (2007-11-05
14:08:10) to Platinum (2007-11-27 13:49:48)
Serif PhotoPlus PhotoPlus 11 (18201)  went from Garbage (2007-11-17
17:02:33) to Gold (2007-12-03 12:40:39)
MapSource 6.11.5 (18021)  went from Silver (2007-10-17 05:19:10) to
Gold (2007-11-28 18:11:37)
Call of Duty 4: Modern Warfare Demo (18143)  went from Garbage
(2007-11-16 11:59:30) to Silver (2007-12-02 06:40:04)
SimCity 4 1.1 638 Rush Hour (18148)  went from Gold (2007-11-25
14:58:28) to Bronze (2007-12-02 07:40:50)





On Dec 5, 2007 5:50 PM, Ben Hodgetts (Enverex) <ben at atomnet.co.uk> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Possibly, but on the other hand it could just as easily become "Garbage"
> in the next release of Wine ;)
>
> (sorry, I already sent this once at the start of the day but emailed it
> directly to the previous person rather than back to the list)
>
> Ben H.
>
>
> Tomas Zijdemans wrote:
> > This is great :)
> >
> > Would it be a good idea to include major news from the appDB?
> > Ex: "Photoshop cs2 has now reached Gold status"
> >
> > I think this would be very inspiring to users.
> >
> >
> > Tomas
> >
> > Triton wrote:
> >> On Tue, 4 Dec 2007 18:23:10 -0500
> >> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> >>
> >>> Kai,
> >>>
> >>> It was my pleasure :).  Keep the interesting wine discussion/news
> >>> coming and I'll keep writing WWNs.  I'll also make note to highlight
> >>> in particular GSoC developments as they happen.
> >>>
> >>> --Zach
> >> Hi everyone, I've been following the mailing lists for some time now, this is my first post. OK, presentation done...
> >>
> >> I also had to thank you bring to life the WWN, it's a great resource for those who don't actively follow the development discussions.
> >>
> >
> >
> >
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.6 (GNU/Linux)
>
> iD8DBQFHVytLuqCUopk11kIRAkesAJ9d/vngVV71xY/749SA8g5hkys4DgCfVEwh
> IlVnueogwUYAb4y1qx4iU38=
> =qmuz
> -----END PGP SIGNATURE-----
>
>
>



-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From alex at thehandofagony.com  Wed Dec  5 17:18:09 2007
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Thu, 6 Dec 2007 00:18:09 +0100
Subject: Wine Weekly News
In-Reply-To: <b050a5e70712051502p4da42a09p209bce3e9b663bf2@mail.gmail.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<47572B4B.4030707@atomnet.co.uk>
	<b050a5e70712051502p4da42a09p209bce3e9b663bf2@mail.gmail.com>
Message-ID: <200712060018.10307.alex@thehandofagony.com>

The problem of using test results as background for this is that they are very 
dependent on the experience of each user. For instance some might be unable 
to run a game because they have execshield or other stuff that mess up Wine, 
or simply because they are not following the how-to instructions.

Take the Age of Empires II test report, for instance.  The user has rated it 
Gold even though the text on the main menu is displayed black instead of 
white (on a dark background), and the game is a bit slow even on a modern 
computer.


The alternative is to use the maintainer ratings, which are generally more 
correct but updated far less frequently.


Alexander N. S?rnes

On Thursday 06 December 2007 00:02:36 Zachary Goldberg wrote:
> I've finished coding a script which runs the necessary query to
> generate data (I download a database backup and run the queries on my
> local machine.).  As a sampling (if anybody feels like tripple
> checking that the data is correct) of "Upgrades" (and some downgrades)
> from 11-27-2007 to 12-04-2007:
>
> Chromadrome 2 - Demo 1.0 (18165)  went from Garbage (2007-11-25
> 01:25:25) to Platinum (2007-12-02 11:50:43)
> Age of Empires II The Age of Kings: 2.x (18083)  went from Silver
> (2007-11-15 15:58:30) to Gold (2007-11-30 16:30:18)
> Dreamweaver MX (18123)  went from Silver (2007-07-22 03:17:03) to
> Garbage (2007-12-01 17:41:49)
> Call of Duty United Offensive: 1.5 (18163)  went from Gold (2007-04-06
> 07:46:23) to Platinum (2007-12-02 11:12:50)
> Crysis Single player demo (18094)  went from Garbage (2007-11-06
> 12:49:00) to Bronze (2007-12-01 03:25:13)
> Eschalon Book I Demo Demo (18029)  went from Garbage (2007-11-22
> 02:37:49) to Platinum (2007-11-29 03:11:20)
> Gothic 1.0x (18154)  went from Bronze (2007-11-09 11:48:03) to Garbage
> (2007-12-02 09:21:57)
> Proteus 7.2 (18050)  went from Garbage (2007-11-18 07:08:51) to Silver
> (2007-11-29 22:20:27)
> Ys origin 1.1.0.0 - Adol Version (18060)  went from Bronze (2007-07-13
> 00:20:48) to Silver (2007-11-30 01:38:14)
> Mp3tag v2.39 (17994)  went from Platinum (2007-10-20 11:01:13) to Gold
> (2007-11-27 15:44:51)
> Crayon Release 1 (17988)  went from Gold (2007-11-17 13:34:11) to
> Platinum (2007-11-27 11:30:05)
> Silencer 1.10.1 (18087)  went from Silver (2007-11-16 15:04:45) to
> Platinum (2007-11-30 17:22:00)
> .NET Framework 2.0 (18042)  went from Garbage (2007-11-29 10:07:26) to
> Platinum (2007-11-30 11:35:57)
> Tom Clancy's Rainbow Six 3: Raven Shield 1.60 (18057)  went from
> Garbage (2007-10-17 11:44:55) to Bronze (2007-11-29 21:43:19)
> Safari 3.x Public Beta (18196)  went from Garbage (2007-11-21
> 03:21:32) to Bronze (2007-12-03 10:03:37)
> TTPlayer 5.0.1 (18191)  went from Silver (2007-11-07 05:24:39) to Gold
> (2007-12-03 08:43:31)
> Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
> (18108)  went from Bronze (2007-11-07 06:34:47) to Silver (2007-12-01
> 10:08:49)
> Original War 1.08 (18041)  went from Garbage (2007-11-18 19:59:13) to
> Bronze (2007-11-29 09:31:33)
> Half-Life 2 Half-Life: Source (17993)  went from Garbage (2007-11-05
> 14:08:10) to Platinum (2007-11-27 13:49:48)
> Serif PhotoPlus PhotoPlus 11 (18201)  went from Garbage (2007-11-17
> 17:02:33) to Gold (2007-12-03 12:40:39)
> MapSource 6.11.5 (18021)  went from Silver (2007-10-17 05:19:10) to
> Gold (2007-11-28 18:11:37)
> Call of Duty 4: Modern Warfare Demo (18143)  went from Garbage
> (2007-11-16 11:59:30) to Silver (2007-12-02 06:40:04)
> SimCity 4 1.1 638 Rush Hour (18148)  went from Gold (2007-11-25
> 14:58:28) to Bronze (2007-12-02 07:40:50)
>
> On Dec 5, 2007 5:50 PM, Ben Hodgetts (Enverex) <ben at atomnet.co.uk> wrote:
> > -----BEGIN PGP SIGNED MESSAGE-----
> > Hash: SHA1
> >
> > Possibly, but on the other hand it could just as easily become "Garbage"
> > in the next release of Wine ;)
> >
> > (sorry, I already sent this once at the start of the day but emailed it
> > directly to the previous person rather than back to the list)
> >
> > Ben H.
> >
> > Tomas Zijdemans wrote:
> > > This is great :)
> > >
> > > Would it be a good idea to include major news from the appDB?
> > > Ex: "Photoshop cs2 has now reached Gold status"
> > >
> > > I think this would be very inspiring to users.
> > >
> > >
> > > Tomas
> > >
> > > Triton wrote:
> > >> On Tue, 4 Dec 2007 18:23:10 -0500
> > >>
> > >> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> > >>> Kai,
> > >>>
> > >>> It was my pleasure :).  Keep the interesting wine discussion/news
> > >>> coming and I'll keep writing WWNs.  I'll also make note to highlight
> > >>> in particular GSoC developments as they happen.
> > >>>
> > >>> --Zach
> > >>
> > >> Hi everyone, I've been following the mailing lists for some time now,
> > >> this is my first post. OK, presentation done...
> > >>
> > >> I also had to thank you bring to life the WWN, it's a great resource
> > >> for those who don't actively follow the development discussions.
> >
> > -----BEGIN PGP SIGNATURE-----
> > Version: GnuPG v1.4.6 (GNU/Linux)
> >
> > iD8DBQFHVytLuqCUopk11kIRAkesAJ9d/vngVV71xY/749SA8g5hkys4DgCfVEwh
> > IlVnueogwUYAb4y1qx4iU38=
> > =qmuz
> > -----END PGP SIGNATURE-----




From zgold550 at gmail.com  Wed Dec  5 17:44:03 2007
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Wed, 5 Dec 2007 18:44:03 -0500
Subject: Wine Weekly News
In-Reply-To: <200712060018.10307.alex@thehandofagony.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<47572B4B.4030707@atomnet.co.uk>
	<b050a5e70712051502p4da42a09p209bce3e9b663bf2@mail.gmail.com>
	<200712060018.10307.alex@thehandofagony.com>
Message-ID: <b050a5e70712051544k3e11188hb9334adea559a2e@mail.gmail.com>

Here are the updated results for when we only look at updates from App
Maintainers.  It also just so happens that that age of empires case
you mentioned is in fact by a maintainer.  Please respond and leave
your opinion as to which is more worthwhile in the WWN.  Perhaps i'll
put both in different sections.

(replaced dates with wine versions)
Age of Empires II The Age of Kings: 2.x went from Silver (0.9.49) to
Gold (0.9.50)
TTPlayer 5.0.1 went from Silver (0.9.48) to Gold (0.9.50)
Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
went from Bronze (0.9.48) to Silver (0.9.50)
Original War 1.08 went from Garbage (0.9.49) to Bronze (0.9.49)
Call of Duty United Offensive: 1.5 went from Gold (0.9.34) to Platinum (0.9.48)
Gothic 1.0x went from Bronze (0.9.48) to Garbage (0.9.50)
Ys origin 1.1.0.0 - Adol Version went from Bronze (0.9.40) to Silver (0.9.49)
Serif PhotoPlus PhotoPlus 11 went from Garbage (0.9.49) to Gold (0.9.50)





On Dec 5, 2007 6:18 PM, Alexander Nicolaysen S?rnes
<alex at thehandofagony.com> wrote:
> The problem of using test results as background for this is that they are very
> dependent on the experience of each user. For instance some might be unable
> to run a game because they have execshield or other stuff that mess up Wine,
> or simply because they are not following the how-to instructions.
>
> Take the Age of Empires II test report, for instance.  The user has rated it
> Gold even though the text on the main menu is displayed black instead of
> white (on a dark background), and the game is a bit slow even on a modern
> computer.
>
>
> The alternative is to use the maintainer ratings, which are generally more
> correct but updated far less frequently.
>
>
> Alexander N. S?rnes
>
>
> On Thursday 06 December 2007 00:02:36 Zachary Goldberg wrote:
> > I've finished coding a script which runs the necessary query to
> > generate data (I download a database backup and run the queries on my
> > local machine.).  As a sampling (if anybody feels like tripple
> > checking that the data is correct) of "Upgrades" (and some downgrades)
> > from 11-27-2007 to 12-04-2007:
> >
> > Chromadrome 2 - Demo 1.0 (18165)  went from Garbage (2007-11-25
> > 01:25:25) to Platinum (2007-12-02 11:50:43)
> > Age of Empires II The Age of Kings: 2.x (18083)  went from Silver
> > (2007-11-15 15:58:30) to Gold (2007-11-30 16:30:18)
> > Dreamweaver MX (18123)  went from Silver (2007-07-22 03:17:03) to
> > Garbage (2007-12-01 17:41:49)
> > Call of Duty United Offensive: 1.5 (18163)  went from Gold (2007-04-06
> > 07:46:23) to Platinum (2007-12-02 11:12:50)
> > Crysis Single player demo (18094)  went from Garbage (2007-11-06
> > 12:49:00) to Bronze (2007-12-01 03:25:13)
> > Eschalon Book I Demo Demo (18029)  went from Garbage (2007-11-22
> > 02:37:49) to Platinum (2007-11-29 03:11:20)
> > Gothic 1.0x (18154)  went from Bronze (2007-11-09 11:48:03) to Garbage
> > (2007-12-02 09:21:57)
> > Proteus 7.2 (18050)  went from Garbage (2007-11-18 07:08:51) to Silver
> > (2007-11-29 22:20:27)
> > Ys origin 1.1.0.0 - Adol Version (18060)  went from Bronze (2007-07-13
> > 00:20:48) to Silver (2007-11-30 01:38:14)
> > Mp3tag v2.39 (17994)  went from Platinum (2007-10-20 11:01:13) to Gold
> > (2007-11-27 15:44:51)
> > Crayon Release 1 (17988)  went from Gold (2007-11-17 13:34:11) to
> > Platinum (2007-11-27 11:30:05)
> > Silencer 1.10.1 (18087)  went from Silver (2007-11-16 15:04:45) to
> > Platinum (2007-11-30 17:22:00)
> > .NET Framework 2.0 (18042)  went from Garbage (2007-11-29 10:07:26) to
> > Platinum (2007-11-30 11:35:57)
> > Tom Clancy's Rainbow Six 3: Raven Shield 1.60 (18057)  went from
> > Garbage (2007-10-17 11:44:55) to Bronze (2007-11-29 21:43:19)
> > Safari 3.x Public Beta (18196)  went from Garbage (2007-11-21
> > 03:21:32) to Bronze (2007-12-03 10:03:37)
> > TTPlayer 5.0.1 (18191)  went from Silver (2007-11-07 05:24:39) to Gold
> > (2007-12-03 08:43:31)
> > Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
> > (18108)  went from Bronze (2007-11-07 06:34:47) to Silver (2007-12-01
> > 10:08:49)
> > Original War 1.08 (18041)  went from Garbage (2007-11-18 19:59:13) to
> > Bronze (2007-11-29 09:31:33)
> > Half-Life 2 Half-Life: Source (17993)  went from Garbage (2007-11-05
> > 14:08:10) to Platinum (2007-11-27 13:49:48)
> > Serif PhotoPlus PhotoPlus 11 (18201)  went from Garbage (2007-11-17
> > 17:02:33) to Gold (2007-12-03 12:40:39)
> > MapSource 6.11.5 (18021)  went from Silver (2007-10-17 05:19:10) to
> > Gold (2007-11-28 18:11:37)
> > Call of Duty 4: Modern Warfare Demo (18143)  went from Garbage
> > (2007-11-16 11:59:30) to Silver (2007-12-02 06:40:04)
> > SimCity 4 1.1 638 Rush Hour (18148)  went from Gold (2007-11-25
> > 14:58:28) to Bronze (2007-12-02 07:40:50)
> >
> > On Dec 5, 2007 5:50 PM, Ben Hodgetts (Enverex) <ben at atomnet.co.uk> wrote:
> > > -----BEGIN PGP SIGNED MESSAGE-----
> > > Hash: SHA1
> > >
> > > Possibly, but on the other hand it could just as easily become "Garbage"
> > > in the next release of Wine ;)
> > >
> > > (sorry, I already sent this once at the start of the day but emailed it
> > > directly to the previous person rather than back to the list)
> > >
> > > Ben H.
> > >
> > > Tomas Zijdemans wrote:
> > > > This is great :)
> > > >
> > > > Would it be a good idea to include major news from the appDB?
> > > > Ex: "Photoshop cs2 has now reached Gold status"
> > > >
> > > > I think this would be very inspiring to users.
> > > >
> > > >
> > > > Tomas
> > > >
> > > > Triton wrote:
> > > >> On Tue, 4 Dec 2007 18:23:10 -0500
> > > >>
> > > >> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> > > >>> Kai,
> > > >>>
> > > >>> It was my pleasure :).  Keep the interesting wine discussion/news
> > > >>> coming and I'll keep writing WWNs.  I'll also make note to highlight
> > > >>> in particular GSoC developments as they happen.
> > > >>>
> > > >>> --Zach
> > > >>
> > > >> Hi everyone, I've been following the mailing lists for some time now,
> > > >> this is my first post. OK, presentation done...
> > > >>
> > > >> I also had to thank you bring to life the WWN, it's a great resource
> > > >> for those who don't actively follow the development discussions.
> > >
> > > -----BEGIN PGP SIGNATURE-----
> > > Version: GnuPG v1.4.6 (GNU/Linux)
> > >
> > > iD8DBQFHVytLuqCUopk11kIRAkesAJ9d/vngVV71xY/749SA8g5hkys4DgCfVEwh
> > > IlVnueogwUYAb4y1qx4iU38=
> > > =qmuz
> > > -----END PGP SIGNATURE-----
>
>
>



-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From alex at thehandofagony.com  Wed Dec  5 17:52:58 2007
From: alex at thehandofagony.com (Alexander Nicolaysen =?iso-8859-1?q?S=F8rnes?=)
Date: Thu, 6 Dec 2007 00:52:58 +0100
Subject: Wine Weekly News
In-Reply-To: <b050a5e70712051544k3e11188hb9334adea559a2e@mail.gmail.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<200712060018.10307.alex@thehandofagony.com>
	<b050a5e70712051544k3e11188hb9334adea559a2e@mail.gmail.com>
Message-ID: <200712060052.59033.alex@thehandofagony.com>

On Thursday 06 December 2007 00:44:03 Zachary Goldberg wrote:
> Here are the updated results for when we only look at updates from App
> Maintainers.  It also just so happens that that age of empires case
> you mentioned is in fact by a maintainer.  Please respond and leave
> your opinion as to which is more worthwhile in the WWN.  Perhaps i'll
> put both in different sections.
>

The maintainer ratings are a field in the appVersions table, but they are not 
as frequently updated as test results.

An option might be to take the highest rating from each Wine version from the 
test results and compare them.  That would avoid many errors, but would still 
not help in cases where apps are over-rated, such as with Age of Empires II.


Alexander

> (replaced dates with wine versions)
> Age of Empires II The Age of Kings: 2.x went from Silver (0.9.49) to
> Gold (0.9.50)
> TTPlayer 5.0.1 went from Silver (0.9.48) to Gold (0.9.50)
> Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
> went from Bronze (0.9.48) to Silver (0.9.50)
> Original War 1.08 went from Garbage (0.9.49) to Bronze (0.9.49)
> Call of Duty United Offensive: 1.5 went from Gold (0.9.34) to Platinum
> (0.9.48) Gothic 1.0x went from Bronze (0.9.48) to Garbage (0.9.50)
> Ys origin 1.1.0.0 - Adol Version went from Bronze (0.9.40) to Silver
> (0.9.49) Serif PhotoPlus PhotoPlus 11 went from Garbage (0.9.49) to Gold
> (0.9.50)
>
>
>
>
>
> On Dec 5, 2007 6:18 PM, Alexander Nicolaysen S?rnes
>
> <alex at thehandofagony.com> wrote:
> > The problem of using test results as background for this is that they are
> > very dependent on the experience of each user. For instance some might be
> > unable to run a game because they have execshield or other stuff that
> > mess up Wine, or simply because they are not following the how-to
> > instructions.
> >
> > Take the Age of Empires II test report, for instance.  The user has rated
> > it Gold even though the text on the main menu is displayed black instead
> > of white (on a dark background), and the game is a bit slow even on a
> > modern computer.
> >
> >
> > The alternative is to use the maintainer ratings, which are generally
> > more correct but updated far less frequently.
> >
> >
> > Alexander N. S?rnes
> >
> > On Thursday 06 December 2007 00:02:36 Zachary Goldberg wrote:
> > > I've finished coding a script which runs the necessary query to
> > > generate data (I download a database backup and run the queries on my
> > > local machine.).  As a sampling (if anybody feels like tripple
> > > checking that the data is correct) of "Upgrades" (and some downgrades)
> > > from 11-27-2007 to 12-04-2007:
> > >
> > > Chromadrome 2 - Demo 1.0 (18165)  went from Garbage (2007-11-25
> > > 01:25:25) to Platinum (2007-12-02 11:50:43)
> > > Age of Empires II The Age of Kings: 2.x (18083)  went from Silver
> > > (2007-11-15 15:58:30) to Gold (2007-11-30 16:30:18)
> > > Dreamweaver MX (18123)  went from Silver (2007-07-22 03:17:03) to
> > > Garbage (2007-12-01 17:41:49)
> > > Call of Duty United Offensive: 1.5 (18163)  went from Gold (2007-04-06
> > > 07:46:23) to Platinum (2007-12-02 11:12:50)
> > > Crysis Single player demo (18094)  went from Garbage (2007-11-06
> > > 12:49:00) to Bronze (2007-12-01 03:25:13)
> > > Eschalon Book I Demo Demo (18029)  went from Garbage (2007-11-22
> > > 02:37:49) to Platinum (2007-11-29 03:11:20)
> > > Gothic 1.0x (18154)  went from Bronze (2007-11-09 11:48:03) to Garbage
> > > (2007-12-02 09:21:57)
> > > Proteus 7.2 (18050)  went from Garbage (2007-11-18 07:08:51) to Silver
> > > (2007-11-29 22:20:27)
> > > Ys origin 1.1.0.0 - Adol Version (18060)  went from Bronze (2007-07-13
> > > 00:20:48) to Silver (2007-11-30 01:38:14)
> > > Mp3tag v2.39 (17994)  went from Platinum (2007-10-20 11:01:13) to Gold
> > > (2007-11-27 15:44:51)
> > > Crayon Release 1 (17988)  went from Gold (2007-11-17 13:34:11) to
> > > Platinum (2007-11-27 11:30:05)
> > > Silencer 1.10.1 (18087)  went from Silver (2007-11-16 15:04:45) to
> > > Platinum (2007-11-30 17:22:00)
> > > .NET Framework 2.0 (18042)  went from Garbage (2007-11-29 10:07:26) to
> > > Platinum (2007-11-30 11:35:57)
> > > Tom Clancy's Rainbow Six 3: Raven Shield 1.60 (18057)  went from
> > > Garbage (2007-10-17 11:44:55) to Bronze (2007-11-29 21:43:19)
> > > Safari 3.x Public Beta (18196)  went from Garbage (2007-11-21
> > > 03:21:32) to Bronze (2007-12-03 10:03:37)
> > > TTPlayer 5.0.1 (18191)  went from Silver (2007-11-07 05:24:39) to Gold
> > > (2007-12-03 08:43:31)
> > > Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
> > > (18108)  went from Bronze (2007-11-07 06:34:47) to Silver (2007-12-01
> > > 10:08:49)
> > > Original War 1.08 (18041)  went from Garbage (2007-11-18 19:59:13) to
> > > Bronze (2007-11-29 09:31:33)
> > > Half-Life 2 Half-Life: Source (17993)  went from Garbage (2007-11-05
> > > 14:08:10) to Platinum (2007-11-27 13:49:48)
> > > Serif PhotoPlus PhotoPlus 11 (18201)  went from Garbage (2007-11-17
> > > 17:02:33) to Gold (2007-12-03 12:40:39)
> > > MapSource 6.11.5 (18021)  went from Silver (2007-10-17 05:19:10) to
> > > Gold (2007-11-28 18:11:37)
> > > Call of Duty 4: Modern Warfare Demo (18143)  went from Garbage
> > > (2007-11-16 11:59:30) to Silver (2007-12-02 06:40:04)
> > > SimCity 4 1.1 638 Rush Hour (18148)  went from Gold (2007-11-25
> > > 14:58:28) to Bronze (2007-12-02 07:40:50)
> > >
> > > On Dec 5, 2007 5:50 PM, Ben Hodgetts (Enverex) <ben at atomnet.co.uk> 
wrote:
> > > > -----BEGIN PGP SIGNED MESSAGE-----
> > > > Hash: SHA1
> > > >
> > > > Possibly, but on the other hand it could just as easily become
> > > > "Garbage" in the next release of Wine ;)
> > > >
> > > > (sorry, I already sent this once at the start of the day but emailed
> > > > it directly to the previous person rather than back to the list)
> > > >
> > > > Ben H.
> > > >
> > > > Tomas Zijdemans wrote:
> > > > > This is great :)
> > > > >
> > > > > Would it be a good idea to include major news from the appDB?
> > > > > Ex: "Photoshop cs2 has now reached Gold status"
> > > > >
> > > > > I think this would be very inspiring to users.
> > > > >
> > > > >
> > > > > Tomas
> > > > >
> > > > > Triton wrote:
> > > > >> On Tue, 4 Dec 2007 18:23:10 -0500
> > > > >>
> > > > >> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> > > > >>> Kai,
> > > > >>>
> > > > >>> It was my pleasure :).  Keep the interesting wine discussion/news
> > > > >>> coming and I'll keep writing WWNs.  I'll also make note to
> > > > >>> highlight in particular GSoC developments as they happen.
> > > > >>>
> > > > >>> --Zach
> > > > >>
> > > > >> Hi everyone, I've been following the mailing lists for some time
> > > > >> now, this is my first post. OK, presentation done...
> > > > >>
> > > > >> I also had to thank you bring to life the WWN, it's a great
> > > > >> resource for those who don't actively follow the development
> > > > >> discussions.
> > > >
> > > > -----BEGIN PGP SIGNATURE-----
> > > > Version: GnuPG v1.4.6 (GNU/Linux)
> > > >
> > > > iD8DBQFHVytLuqCUopk11kIRAkesAJ9d/vngVV71xY/749SA8g5hkys4DgCfVEwh
> > > > IlVnueogwUYAb4y1qx4iU38=
> > > > =qmuz
> > > > -----END PGP SIGNATURE-----




From zgold550 at gmail.com  Wed Dec  5 18:01:00 2007
From: zgold550 at gmail.com (Zachary Goldberg)
Date: Wed, 5 Dec 2007 19:01:00 -0500
Subject: Wine Weekly News
In-Reply-To: <200712060052.59033.alex@thehandofagony.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<200712060018.10307.alex@thehandofagony.com>
	<b050a5e70712051544k3e11188hb9334adea559a2e@mail.gmail.com>
	<200712060052.59033.alex@thehandofagony.com>
Message-ID: <b050a5e70712051601l7cc3b790mf3c0bcdac8e1f978@mail.gmail.com>

Do you feel apps get updated enough that there are enough instances of
an app being reviewed more than once per release to change these
results?


On Dec 5, 2007 6:52 PM, Alexander Nicolaysen S?rnes
<alex at thehandofagony.com> wrote:
> On Thursday 06 December 2007 00:44:03 Zachary Goldberg wrote:
> > Here are the updated results for when we only look at updates from App
> > Maintainers.  It also just so happens that that age of empires case
> > you mentioned is in fact by a maintainer.  Please respond and leave
> > your opinion as to which is more worthwhile in the WWN.  Perhaps i'll
> > put both in different sections.
> >
>
> The maintainer ratings are a field in the appVersions table, but they are not
> as frequently updated as test results.
>
> An option might be to take the highest rating from each Wine version from the
> test results and compare them.  That would avoid many errors, but would still
> not help in cases where apps are over-rated, such as with Age of Empires II.
>
>
> Alexander
>
>
> > (replaced dates with wine versions)
> > Age of Empires II The Age of Kings: 2.x went from Silver (0.9.49) to
> > Gold (0.9.50)
> > TTPlayer 5.0.1 went from Silver (0.9.48) to Gold (0.9.50)
> > Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
> > went from Bronze (0.9.48) to Silver (0.9.50)
> > Original War 1.08 went from Garbage (0.9.49) to Bronze (0.9.49)
> > Call of Duty United Offensive: 1.5 went from Gold (0.9.34) to Platinum
> > (0.9.48) Gothic 1.0x went from Bronze (0.9.48) to Garbage (0.9.50)
> > Ys origin 1.1.0.0 - Adol Version went from Bronze (0.9.40) to Silver
> > (0.9.49) Serif PhotoPlus PhotoPlus 11 went from Garbage (0.9.49) to Gold
> > (0.9.50)
> >
> >
> >
> >
> >
> > On Dec 5, 2007 6:18 PM, Alexander Nicolaysen S?rnes
> >
> > <alex at thehandofagony.com> wrote:
> > > The problem of using test results as background for this is that they are
> > > very dependent on the experience of each user. For instance some might be
> > > unable to run a game because they have execshield or other stuff that
> > > mess up Wine, or simply because they are not following the how-to
> > > instructions.
> > >
> > > Take the Age of Empires II test report, for instance.  The user has rated
> > > it Gold even though the text on the main menu is displayed black instead
> > > of white (on a dark background), and the game is a bit slow even on a
> > > modern computer.
> > >
> > >
> > > The alternative is to use the maintainer ratings, which are generally
> > > more correct but updated far less frequently.
> > >
> > >
> > > Alexander N. S?rnes
> > >
> > > On Thursday 06 December 2007 00:02:36 Zachary Goldberg wrote:
> > > > I've finished coding a script which runs the necessary query to
> > > > generate data (I download a database backup and run the queries on my
> > > > local machine.).  As a sampling (if anybody feels like tripple
> > > > checking that the data is correct) of "Upgrades" (and some downgrades)
> > > > from 11-27-2007 to 12-04-2007:
> > > >
> > > > Chromadrome 2 - Demo 1.0 (18165)  went from Garbage (2007-11-25
> > > > 01:25:25) to Platinum (2007-12-02 11:50:43)
> > > > Age of Empires II The Age of Kings: 2.x (18083)  went from Silver
> > > > (2007-11-15 15:58:30) to Gold (2007-11-30 16:30:18)
> > > > Dreamweaver MX (18123)  went from Silver (2007-07-22 03:17:03) to
> > > > Garbage (2007-12-01 17:41:49)
> > > > Call of Duty United Offensive: 1.5 (18163)  went from Gold (2007-04-06
> > > > 07:46:23) to Platinum (2007-12-02 11:12:50)
> > > > Crysis Single player demo (18094)  went from Garbage (2007-11-06
> > > > 12:49:00) to Bronze (2007-12-01 03:25:13)
> > > > Eschalon Book I Demo Demo (18029)  went from Garbage (2007-11-22
> > > > 02:37:49) to Platinum (2007-11-29 03:11:20)
> > > > Gothic 1.0x (18154)  went from Bronze (2007-11-09 11:48:03) to Garbage
> > > > (2007-12-02 09:21:57)
> > > > Proteus 7.2 (18050)  went from Garbage (2007-11-18 07:08:51) to Silver
> > > > (2007-11-29 22:20:27)
> > > > Ys origin 1.1.0.0 - Adol Version (18060)  went from Bronze (2007-07-13
> > > > 00:20:48) to Silver (2007-11-30 01:38:14)
> > > > Mp3tag v2.39 (17994)  went from Platinum (2007-10-20 11:01:13) to Gold
> > > > (2007-11-27 15:44:51)
> > > > Crayon Release 1 (17988)  went from Gold (2007-11-17 13:34:11) to
> > > > Platinum (2007-11-27 11:30:05)
> > > > Silencer 1.10.1 (18087)  went from Silver (2007-11-16 15:04:45) to
> > > > Platinum (2007-11-30 17:22:00)
> > > > .NET Framework 2.0 (18042)  went from Garbage (2007-11-29 10:07:26) to
> > > > Platinum (2007-11-30 11:35:57)
> > > > Tom Clancy's Rainbow Six 3: Raven Shield 1.60 (18057)  went from
> > > > Garbage (2007-10-17 11:44:55) to Bronze (2007-11-29 21:43:19)
> > > > Safari 3.x Public Beta (18196)  went from Garbage (2007-11-21
> > > > 03:21:32) to Bronze (2007-12-03 10:03:37)
> > > > TTPlayer 5.0.1 (18191)  went from Silver (2007-11-07 05:24:39) to Gold
> > > > (2007-12-03 08:43:31)
> > > > Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
> > > > (18108)  went from Bronze (2007-11-07 06:34:47) to Silver (2007-12-01
> > > > 10:08:49)
> > > > Original War 1.08 (18041)  went from Garbage (2007-11-18 19:59:13) to
> > > > Bronze (2007-11-29 09:31:33)
> > > > Half-Life 2 Half-Life: Source (17993)  went from Garbage (2007-11-05
> > > > 14:08:10) to Platinum (2007-11-27 13:49:48)
> > > > Serif PhotoPlus PhotoPlus 11 (18201)  went from Garbage (2007-11-17
> > > > 17:02:33) to Gold (2007-12-03 12:40:39)
> > > > MapSource 6.11.5 (18021)  went from Silver (2007-10-17 05:19:10) to
> > > > Gold (2007-11-28 18:11:37)
> > > > Call of Duty 4: Modern Warfare Demo (18143)  went from Garbage
> > > > (2007-11-16 11:59:30) to Silver (2007-12-02 06:40:04)
> > > > SimCity 4 1.1 638 Rush Hour (18148)  went from Gold (2007-11-25
> > > > 14:58:28) to Bronze (2007-12-02 07:40:50)
> > > >
> > > > On Dec 5, 2007 5:50 PM, Ben Hodgetts (Enverex) <ben at atomnet.co.uk>
> wrote:
> > > > > -----BEGIN PGP SIGNED MESSAGE-----
> > > > > Hash: SHA1
> > > > >
> > > > > Possibly, but on the other hand it could just as easily become
> > > > > "Garbage" in the next release of Wine ;)
> > > > >
> > > > > (sorry, I already sent this once at the start of the day but emailed
> > > > > it directly to the previous person rather than back to the list)
> > > > >
> > > > > Ben H.
> > > > >
> > > > > Tomas Zijdemans wrote:
> > > > > > This is great :)
> > > > > >
> > > > > > Would it be a good idea to include major news from the appDB?
> > > > > > Ex: "Photoshop cs2 has now reached Gold status"
> > > > > >
> > > > > > I think this would be very inspiring to users.
> > > > > >
> > > > > >
> > > > > > Tomas
> > > > > >
> > > > > > Triton wrote:
> > > > > >> On Tue, 4 Dec 2007 18:23:10 -0500
> > > > > >>
> > > > > >> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> > > > > >>> Kai,
> > > > > >>>
> > > > > >>> It was my pleasure :).  Keep the interesting wine discussion/news
> > > > > >>> coming and I'll keep writing WWNs.  I'll also make note to
> > > > > >>> highlight in particular GSoC developments as they happen.
> > > > > >>>
> > > > > >>> --Zach
> > > > > >>
> > > > > >> Hi everyone, I've been following the mailing lists for some time
> > > > > >> now, this is my first post. OK, presentation done...
> > > > > >>
> > > > > >> I also had to thank you bring to life the WWN, it's a great
> > > > > >> resource for those who don't actively follow the development
> > > > > >> discussions.
> > > > >
> > > > > -----BEGIN PGP SIGNATURE-----
> > > > > Version: GnuPG v1.4.6 (GNU/Linux)
> > > > >
> > > > > iD8DBQFHVytLuqCUopk11kIRAkesAJ9d/vngVV71xY/749SA8g5hkys4DgCfVEwh
> > > > > IlVnueogwUYAb4y1qx4iU38=
> > > > > =qmuz
> > > > > -----END PGP SIGNATURE-----
>
>
>



-- 
Zachary Goldberg
Computer Science & Engineering
Electrical Captain of Penn Electric Race Team
School of Engineering at the University of Pennsylvania


From ngompa13 at gmail.com  Wed Dec  5 19:05:59 2007
From: ngompa13 at gmail.com (King InuYasha)
Date: Wed, 5 Dec 2007 19:05:59 -0600
Subject: replying to wine-devel?
Message-ID: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>

I have noticed some unusual behavior in the wine-devel mailing list
compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
list does not automatically set the reply to wine-devel at winehq.org.
Why is that? If other mailing lists do so, how come Wine's doesn't?
Personally, I find myself making a mistake sometimes and not adding in
the wine-devel part because I am used to seeing it automatically set.
If I remember how emails are set up, isn't there a hidden field called
reply-to? AFAICT, other mailing lists either override or rewrite this
field and replace it with the email address of the mailing list.


From mihai.dontu at gmail.com  Wed Dec  5 19:26:23 2007
From: mihai.dontu at gmail.com (Mihai =?utf-8?q?Don=C8=9Bu?=)
Date: Thu, 6 Dec 2007 03:26:23 +0200
Subject: replying to wine-devel?
In-Reply-To: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
References: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
Message-ID: <200712060326.24239.mihai.dontu@gmail.com>

On Thursday 06 December 2007, King InuYasha wrote:
> I have noticed some unusual behavior in the wine-devel mailing list
> compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
> list does not automatically set the reply to wine-devel at winehq.org.

I think it's a client problem. I'm using KMail and hitting 'reply'
always set's the 'To' field to 'wine-devel at winehq.org'.

-- 
Mihai Don?u


From jjmckenzie51 at sprintpcs.com  Wed Dec  5 19:47:40 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Wed, 05 Dec 2007 18:47:40 -0700
Subject: replying to wine-devel?
In-Reply-To: <200712060326.24239.mihai.dontu@gmail.com>
References: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
	<200712060326.24239.mihai.dontu@gmail.com>
Message-ID: <475754BC.8000404@sprintpcs.com>

Mihai Don?u wrote:
> On Thursday 06 December 2007, King InuYasha wrote:
>   
>> I have noticed some unusual behavior in the wine-devel mailing list
>> compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
>> list does not automatically set the reply to wine-devel at winehq.org.
>>     
>
> I think it's a client problem. I'm using KMail and hitting 'reply'
> always set's the 'To' field to 'wine-devel at winehq.org'.
>
>   
It does not with any of the Wine mailing lists with Thunderbird. 

James McKenzie



From aric at codeweavers.com  Wed Dec  5 19:54:07 2007
From: aric at codeweavers.com (Aric Stewart)
Date: Thu, 06 Dec 2007 10:54:07 +0900
Subject: system.sfd: make 18 pixel strike with Japanese jvgasys glyphs
In-Reply-To: <01cb01c83751$441f4dc0$6700fea9@DMITRY>
References: <4756BC0D.1060308@codeweavers.com>
	<01cb01c83751$441f4dc0$6700fea9@DMITRY>
Message-ID: <4757563F.2090005@codeweavers.com>

Ahh, too late at night and my attempts to get the widths for the 18 
pixel strikes had side effects.

I have resubmitted.  Hand checked the widths of the glyphs for both 16 
and 18 pixles to make sure they are correct.  Had to redraw many of the 
18 pixel strikes (The capitals) to get them to fit into the proper widths.

-aric

Dmitry Timoshkov wrote:
> "Aric Stewart" <aric at codeweavers.com> wrote:
> 
>>  fonts/system.sfd | 1407 
>> ++++++++++++++++++++++++++++++++++++++++++++++--------
>>  1 files changed, 1213 insertions(+), 194 deletions(-)
> 
> For some reason widths of many glyphs are changed by this patch,
> that doesn't look correct.
> 



From truiken at gmail.com  Wed Dec  5 19:57:37 2007
From: truiken at gmail.com (James Hawkins)
Date: Wed, 5 Dec 2007 19:57:37 -0600
Subject: replying to wine-devel?
In-Reply-To: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
References: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
Message-ID: <BF863A0F-9E12-4EC6-B1E0-1566F50B4B0F@gmail.com>


On Dec 5, 2007, at 7:05 PM, "King InuYasha" <ngompa13 at gmail.com> wrote:

> I have noticed some unusual behavior in the wine-devel mailing list
> compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
> list does not automatically set the reply to wine-devel at winehq.org.
> Why is that? If other mailing lists do so, how come Wine's doesn't?
> Personally, I find myself making a mistake sometimes and not adding in
> the wine-devel part because I am used to seeing it automatically set.
> If I remember how emails are set up, isn't there a hidden field called
> reply-to? AFAICT, other mailing lists either override or rewrite this
> field and replace it with the email address of the mailing list.
>
>

You're supposed to reply-all.

--
James Hawkins


From jjmckenzie51 at sprintpcs.com  Wed Dec  5 20:06:25 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Wed, 05 Dec 2007 19:06:25 -0700
Subject: replying to wine-devel?
In-Reply-To: <BF863A0F-9E12-4EC6-B1E0-1566F50B4B0F@gmail.com>
References: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
	<BF863A0F-9E12-4EC6-B1E0-1566F50B4B0F@gmail.com>
Message-ID: <47575921.5090805@sprintpcs.com>

James Hawkins wrote:
> On Dec 5, 2007, at 7:05 PM, "King InuYasha" <ngompa13 at gmail.com> wrote:
>
>   
>> I have noticed some unusual behavior in the wine-devel mailing list
>> compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
>> list does not automatically set the reply to wine-devel at winehq.org.
>> Why is that? If other mailing lists do so, how come Wine's doesn't?
>> Personally, I find myself making a mistake sometimes and not adding in
>> the wine-devel part because I am used to seeing it automatically set.
>> If I remember how emails are set up, isn't there a hidden field called
>> reply-to? AFAICT, other mailing lists either override or rewrite this
>> field and replace it with the email address of the mailing list.
>>
>>
>>     
>
> You're supposed to reply-all.
>
>
>   
Most mailing lists have the reply-to field set for to mailing list address.

James




From chmorgan at gmail.com  Wed Dec  5 20:11:01 2007
From: chmorgan at gmail.com (Chris Morgan)
Date: Wed, 5 Dec 2007 21:11:01 -0500
Subject: Wine Weekly News
In-Reply-To: <200712060018.10307.alex@thehandofagony.com>
References: <200712050014.02742.kai.blin@gmail.com>
	<47572B4B.4030707@atomnet.co.uk>
	<b050a5e70712051502p4da42a09p209bce3e9b663bf2@mail.gmail.com>
	<200712060018.10307.alex@thehandofagony.com>
Message-ID: <f3f1b91a0712051811s15dee897t724d8d5ab265e8ad@mail.gmail.com>

i'd argue that this means we need to be smarter about how we process
the test results. We need both a confidence and a rating and some way
to reflect this in the results.

Your other point about configuration, if users have problems with
configuration then while it may be their fault its not really their
fault if we let them misconfigure wine. I'm of course assuming that
they aren't being malicious of course.

Chris


On Dec 5, 2007 6:18 PM, Alexander Nicolaysen S?rnes
<alex at thehandofagony.com> wrote:
> The problem of using test results as background for this is that they are very
> dependent on the experience of each user. For instance some might be unable
> to run a game because they have execshield or other stuff that mess up Wine,
> or simply because they are not following the how-to instructions.
>
> Take the Age of Empires II test report, for instance.  The user has rated it
> Gold even though the text on the main menu is displayed black instead of
> white (on a dark background), and the game is a bit slow even on a modern
> computer.
>
>
> The alternative is to use the maintainer ratings, which are generally more
> correct but updated far less frequently.
>
>
> Alexander N. S?rnes
>
>
> On Thursday 06 December 2007 00:02:36 Zachary Goldberg wrote:
> > I've finished coding a script which runs the necessary query to
> > generate data (I download a database backup and run the queries on my
> > local machine.).  As a sampling (if anybody feels like tripple
> > checking that the data is correct) of "Upgrades" (and some downgrades)
> > from 11-27-2007 to 12-04-2007:
> >
> > Chromadrome 2 - Demo 1.0 (18165)  went from Garbage (2007-11-25
> > 01:25:25) to Platinum (2007-12-02 11:50:43)
> > Age of Empires II The Age of Kings: 2.x (18083)  went from Silver
> > (2007-11-15 15:58:30) to Gold (2007-11-30 16:30:18)
> > Dreamweaver MX (18123)  went from Silver (2007-07-22 03:17:03) to
> > Garbage (2007-12-01 17:41:49)
> > Call of Duty United Offensive: 1.5 (18163)  went from Gold (2007-04-06
> > 07:46:23) to Platinum (2007-12-02 11:12:50)
> > Crysis Single player demo (18094)  went from Garbage (2007-11-06
> > 12:49:00) to Bronze (2007-12-01 03:25:13)
> > Eschalon Book I Demo Demo (18029)  went from Garbage (2007-11-22
> > 02:37:49) to Platinum (2007-11-29 03:11:20)
> > Gothic 1.0x (18154)  went from Bronze (2007-11-09 11:48:03) to Garbage
> > (2007-12-02 09:21:57)
> > Proteus 7.2 (18050)  went from Garbage (2007-11-18 07:08:51) to Silver
> > (2007-11-29 22:20:27)
> > Ys origin 1.1.0.0 - Adol Version (18060)  went from Bronze (2007-07-13
> > 00:20:48) to Silver (2007-11-30 01:38:14)
> > Mp3tag v2.39 (17994)  went from Platinum (2007-10-20 11:01:13) to Gold
> > (2007-11-27 15:44:51)
> > Crayon Release 1 (17988)  went from Gold (2007-11-17 13:34:11) to
> > Platinum (2007-11-27 11:30:05)
> > Silencer 1.10.1 (18087)  went from Silver (2007-11-16 15:04:45) to
> > Platinum (2007-11-30 17:22:00)
> > .NET Framework 2.0 (18042)  went from Garbage (2007-11-29 10:07:26) to
> > Platinum (2007-11-30 11:35:57)
> > Tom Clancy's Rainbow Six 3: Raven Shield 1.60 (18057)  went from
> > Garbage (2007-10-17 11:44:55) to Bronze (2007-11-29 21:43:19)
> > Safari 3.x Public Beta (18196)  went from Garbage (2007-11-21
> > 03:21:32) to Bronze (2007-12-03 10:03:37)
> > TTPlayer 5.0.1 (18191)  went from Silver (2007-11-07 05:24:39) to Gold
> > (2007-12-03 08:43:31)
> > Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
> > (18108)  went from Bronze (2007-11-07 06:34:47) to Silver (2007-12-01
> > 10:08:49)
> > Original War 1.08 (18041)  went from Garbage (2007-11-18 19:59:13) to
> > Bronze (2007-11-29 09:31:33)
> > Half-Life 2 Half-Life: Source (17993)  went from Garbage (2007-11-05
> > 14:08:10) to Platinum (2007-11-27 13:49:48)
> > Serif PhotoPlus PhotoPlus 11 (18201)  went from Garbage (2007-11-17
> > 17:02:33) to Gold (2007-12-03 12:40:39)
> > MapSource 6.11.5 (18021)  went from Silver (2007-10-17 05:19:10) to
> > Gold (2007-11-28 18:11:37)
> > Call of Duty 4: Modern Warfare Demo (18143)  went from Garbage
> > (2007-11-16 11:59:30) to Silver (2007-12-02 06:40:04)
> > SimCity 4 1.1 638 Rush Hour (18148)  went from Gold (2007-11-25
> > 14:58:28) to Bronze (2007-12-02 07:40:50)
> >
> > On Dec 5, 2007 5:50 PM, Ben Hodgetts (Enverex) <ben at atomnet.co.uk> wrote:
> > > -----BEGIN PGP SIGNED MESSAGE-----
> > > Hash: SHA1
> > >
> > > Possibly, but on the other hand it could just as easily become "Garbage"
> > > in the next release of Wine ;)
> > >
> > > (sorry, I already sent this once at the start of the day but emailed it
> > > directly to the previous person rather than back to the list)
> > >
> > > Ben H.
> > >
> > > Tomas Zijdemans wrote:
> > > > This is great :)
> > > >
> > > > Would it be a good idea to include major news from the appDB?
> > > > Ex: "Photoshop cs2 has now reached Gold status"
> > > >
> > > > I think this would be very inspiring to users.
> > > >
> > > >
> > > > Tomas
> > > >
> > > > Triton wrote:
> > > >> On Tue, 4 Dec 2007 18:23:10 -0500
> > > >>
> > > >> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
> > > >>> Kai,
> > > >>>
> > > >>> It was my pleasure :).  Keep the interesting wine discussion/news
> > > >>> coming and I'll keep writing WWNs.  I'll also make note to highlight
> > > >>> in particular GSoC developments as they happen.
> > > >>>
> > > >>> --Zach
> > > >>
> > > >> Hi everyone, I've been following the mailing lists for some time now,
> > > >> this is my first post. OK, presentation done...
> > > >>
> > > >> I also had to thank you bring to life the WWN, it's a great resource
> > > >> for those who don't actively follow the development discussions.
> > >
> > > -----BEGIN PGP SIGNATURE-----
> > > Version: GnuPG v1.4.6 (GNU/Linux)
> > >
> > > iD8DBQFHVytLuqCUopk11kIRAkesAJ9d/vngVV71xY/749SA8g5hkys4DgCfVEwh
> > > IlVnueogwUYAb4y1qx4iU38=
> > > =qmuz
> > > -----END PGP SIGNATURE-----
>
>
>
>
>
>


From dmitry at codeweavers.com  Wed Dec  5 21:14:35 2007
From: dmitry at codeweavers.com (Dmitry Timoshkov)
Date: Thu, 6 Dec 2007 11:14:35 +0800
Subject: system.sfd: make 18 pixel strike with Japanese jvgasys glyphs
References: <4756BC0D.1060308@codeweavers.com><01cb01c83751$441f4dc0$6700fea9@DMITRY>
	<4757563F.2090005@codeweavers.com>
Message-ID: <009701c837b6$22ff2060$6700fea9@DMITRY>

"Aric Stewart" <aric at codeweavers.com> wrote:

> Ahh, too late at night and my attempts to get the widths for the 18 
> pixel strikes had side effects.
> 
> I have resubmitted.  Hand checked the widths of the glyphs for both 16 
> and 18 pixles to make sure they are correct.  Had to redraw many of the 
> 18 pixel strikes (The capitals) to get them to fit into the proper widths.

New patch still changes widths of a lot of existing glyphs, watch out
for changes like:

>  StartChar: space
>  Encoding: 32 32 0
> -Width: 4
> +Width: 291

-- 
Dmitry.


From kai.blin at gmail.com  Thu Dec  6 00:49:31 2007
From: kai.blin at gmail.com (Kai Blin)
Date: Thu, 6 Dec 2007 07:49:31 +0100
Subject: replying to wine-devel?
In-Reply-To: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
References: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
Message-ID: <200712060749.32406.kai.blin@gmail.com>

On Thursday 06 December 2007 02:05:59 King InuYasha wrote:
> I have noticed some unusual behavior in the wine-devel mailing list
> compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
> list does not automatically set the reply to wine-devel at winehq.org.
> Why is that? If other mailing lists do so, how come Wine's doesn't?
> Personally, I find myself making a mistake sometimes and not adding in
> the wine-devel part because I am used to seeing it automatically set.
> If I remember how emails are set up, isn't there a hidden field called
> reply-to? AFAICT, other mailing lists either override or rewrite this
> field and replace it with the email address of the mailing list.

The reason is explained in http://www.unicom.com/pw/reply-to-harmful.html

In short, the downside to only replying to the author by accident is pretty 
small compared to mistakenly replying to the whole list with something 
intended just for the author.

Cheers,
Kai

-- 
Kai Blin
WorldForge developer  http://www.worldforge.org/
Wine developer        http://wiki.winehq.org/KaiBlin
Samba team member     http://www.samba.org/samba/team/
--
Will code for cotton.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071206/2c6a6597/attachment.pgp 

From truiken at gmail.com  Thu Dec  6 01:16:49 2007
From: truiken at gmail.com (James Hawkins)
Date: Thu, 6 Dec 2007 01:16:49 -0600
Subject: quartz: move current tests into its own test case [1/5]
In-Reply-To: <558b2f5c0712052035s32d3cf4bva316e5c5159534a1@mail.gmail.com>
References: <558b2f5c0712052035s32d3cf4bva316e5c5159534a1@mail.gmail.com>
Message-ID: <22821af30712052316i901ee97xfad3bb2af0117e53@mail.gmail.com>

On Dec 5, 2007 10:35 PM, Lei Zhang <thestig at google.com> wrote:
> Hi,
>
> I'm moving the current tests into their own function in preparation to
> write more tests.
>

When submitting a numbered patch series, can you put the numbers [x/y]
right after the module name?  That makes it easier to spot the
ordering of the patches.

Thanks,
James Hawkins


From hverbeet at gmail.com  Thu Dec  6 02:38:51 2007
From: hverbeet at gmail.com (H. Verbeet)
Date: Thu, 6 Dec 2007 09:38:51 +0100
Subject: d3dx8 [2/2]: add basic functions for MatrixStack
In-Reply-To: <200712052051.02620.stefandoesinger@gmx.at>
References: <20071205181330.8c78pachgkc4kgk4@webmail.math.cnrs.fr>
	<200712052051.02620.stefandoesinger@gmx.at>
Message-ID: <d658b69e0712060038g12329dfem786c57166c8cfb69@mail.gmail.com>

On 05/12/2007, Stefan D?singer <stefandoesinger at gmx.at> wrote:
> Am Mittwoch, 5. Dezember 2007 18:13:30 schrieb David.Adam at math.cnrs.fr:
> > This is my first attempt with ICOM objects. So, all the advices are
> > welcome.
> A few suggestions:
>
> +HRESULT WINAPI ID3DXMatrixStackImpl_QueryInterface(ID3DXMatrixStack *iface,
> REFIID riid, void **ppvObject)
> + ...
> +     IClassFactory_AddRef(iface);
> It is better to use ID3DXMatrixStack_AddRef(iface) here. It is essentially the
> same, but it looks more consistent
>
> The AddRef() and Release() methods should have a TRACE which write either the
> new or old refcount, otherwise tracking refcounting bugs is hell.
>
Having a TRACE in QueryInterface is occasionally useful as well.

A few more comments:
  - QueryInterface should return S_OK rather than D3D_OK, unless
you've got tests to prove it doesn't.
  - AFAIK on failure you should set *ppvObject to NULL.
  - There's no real reason to stick to MS names for parameters.


From huw at codeweavers.com  Thu Dec  6 03:29:42 2007
From: huw at codeweavers.com (Huw Davies)
Date: Thu, 06 Dec 2007 09:29:42 +0000
Subject: (corrected) Add 18 pixel strike with japanese fonts to system.sdf
	Widths corrected and double checked for both strikes
In-Reply-To: <475755DD.1000103@codeweavers.com>
References: <475755DD.1000103@codeweavers.com>
Message-ID: <4757C106.6050708@codeweavers.com>

Aric Stewart wrote:
> ---
>  fonts/system.sfd | 1587 
> +++++++++++++++++++++++++++++++++++++++++++++---------
>  1 files changed, 1341 insertions(+), 246 deletions(-)

You seem to have changed a couple of glyphs in the 16 pixel strike too. 
  Was that on purpose (and if so shouldn't it be a separate patch?).

Huw.



From huw at codeweavers.com  Thu Dec  6 03:33:26 2007
From: huw at codeweavers.com (Huw Davies)
Date: Thu, 06 Dec 2007 09:33:26 +0000
Subject: system.sfd: make 18 pixel strike with Japanese jvgasys glyphs
In-Reply-To: <009701c837b6$22ff2060$6700fea9@DMITRY>
References: <4756BC0D.1060308@codeweavers.com><01cb01c83751$441f4dc0$6700fea9@DMITRY>	<4757563F.2090005@codeweavers.com>
	<009701c837b6$22ff2060$6700fea9@DMITRY>
Message-ID: <4757C1E6.507@codeweavers.com>

Dmitry Timoshkov wrote:
> "Aric Stewart" <aric at codeweavers.com> wrote:
> 
>> Ahh, too late at night and my attempts to get the widths for the 18 
>> pixel strikes had side effects.
>>
>> I have resubmitted.  Hand checked the widths of the glyphs for both 16 
>> and 18 pixles to make sure they are correct.  Had to redraw many of the 
>> 18 pixel strikes (The capitals) to get them to fit into the proper widths.
> 
> New patch still changes widths of a lot of existing glyphs, watch out
> for changes like:
> 
>>  StartChar: space
>>  Encoding: 32 32 0
>> -Width: 4
>> +Width: 291

I think this is ok.  The Width between the StartChar/EndChar lines is 
the width of the outline glyph, but these fonts don't have outline 
glyphs so it doesn't really matter.  Fontforge seems to reset this 
whenever you add a new bitmap strike.

I do tend to edit the sfd to remove these changes in order to reduce the 
size of the diff.

Huw.



From aric at codeweavers.com  Thu Dec  6 03:54:05 2007
From: aric at codeweavers.com (Aric Stewart)
Date: Thu, 06 Dec 2007 18:54:05 +0900
Subject: (corrected) Add 18 pixel strike with japanese fonts to system.sdf
	Widths corrected and double checked for both strikes
In-Reply-To: <4757C106.6050708@codeweavers.com>
References: <475755DD.1000103@codeweavers.com>
	<4757C106.6050708@codeweavers.com>
Message-ID: <4757C6BD.9000805@codeweavers.com>

I added a number of the black boxes to the 18 pixel strike  (the range 
before 161)  and fontforge seemed unhappy if i did not add something to 
the 16 pixel one. (maybe it was my misinterperting fontforge) but so i 
added similar black boxes to what where already there.

-aric

Huw Davies wrote:
> Aric Stewart wrote:
>> ---
>>  fonts/system.sfd | 1587 
>> +++++++++++++++++++++++++++++++++++++++++++++---------
>>  1 files changed, 1341 insertions(+), 246 deletions(-)
> 
> You seem to have changed a couple of glyphs in the 16 pixel strike too. 
>   Was that on purpose (and if so shouldn't it be a separate patch?).
> 
> Huw.
> 
> 
> 



From tzi063 at student.uib.no  Thu Dec  6 02:21:45 2007
From: tzi063 at student.uib.no (Tomas Zijdemans)
Date: Thu, 06 Dec 2007 09:21:45 +0100
Subject: Wine Weekly News
In-Reply-To: <200712060018.10307.alex@thehandofagony.com>
References: <200712050014.02742.kai.blin@gmail.com>	<47572B4B.4030707@atomnet.co.uk>	<b050a5e70712051502p4da42a09p209bce3e9b663bf2@mail.gmail.com>
	<200712060018.10307.alex@thehandofagony.com>
Message-ID: <fj8bb0$6l8$1@ger.gmane.org>

All good points (from a fellow Norwegian :)

On the other hand, appDB entries are (and probably always will be) user 
generated content, and users will always have different opinions (and 
environment setup).

IMHO users won't sue wine if the abbDB status differs from their 
experience with an app. It's regarded more of a pointer at this stage.

But, as more and more lovely testing code gets into wine, and if there's 
going to be a stable and unstable branch after 1.0 - things will look 
slightly different...


Tomas Zijdemans


Alexander Nicolaysen S?rnes wrote:
> The problem of using test results as background for this is that they are very 
> dependent on the experience of each user. For instance some might be unable 
> to run a game because they have execshield or other stuff that mess up Wine, 
> or simply because they are not following the how-to instructions.
> 
> Take the Age of Empires II test report, for instance.  The user has rated it 
> Gold even though the text on the main menu is displayed black instead of 
> white (on a dark background), and the game is a bit slow even on a modern 
> computer.
> 
> 
> The alternative is to use the maintainer ratings, which are generally more 
> correct but updated far less frequently.
> 
> 
> Alexander N. S?rnes
> 
> On Thursday 06 December 2007 00:02:36 Zachary Goldberg wrote:
>> I've finished coding a script which runs the necessary query to
>> generate data (I download a database backup and run the queries on my
>> local machine.).  As a sampling (if anybody feels like tripple
>> checking that the data is correct) of "Upgrades" (and some downgrades)
>> from 11-27-2007 to 12-04-2007:
>>
>> Chromadrome 2 - Demo 1.0 (18165)  went from Garbage (2007-11-25
>> 01:25:25) to Platinum (2007-12-02 11:50:43)
>> Age of Empires II The Age of Kings: 2.x (18083)  went from Silver
>> (2007-11-15 15:58:30) to Gold (2007-11-30 16:30:18)
>> Dreamweaver MX (18123)  went from Silver (2007-07-22 03:17:03) to
>> Garbage (2007-12-01 17:41:49)
>> Call of Duty United Offensive: 1.5 (18163)  went from Gold (2007-04-06
>> 07:46:23) to Platinum (2007-12-02 11:12:50)
>> Crysis Single player demo (18094)  went from Garbage (2007-11-06
>> 12:49:00) to Bronze (2007-12-01 03:25:13)
>> Eschalon Book I Demo Demo (18029)  went from Garbage (2007-11-22
>> 02:37:49) to Platinum (2007-11-29 03:11:20)
>> Gothic 1.0x (18154)  went from Bronze (2007-11-09 11:48:03) to Garbage
>> (2007-12-02 09:21:57)
>> Proteus 7.2 (18050)  went from Garbage (2007-11-18 07:08:51) to Silver
>> (2007-11-29 22:20:27)
>> Ys origin 1.1.0.0 - Adol Version (18060)  went from Bronze (2007-07-13
>> 00:20:48) to Silver (2007-11-30 01:38:14)
>> Mp3tag v2.39 (17994)  went from Platinum (2007-10-20 11:01:13) to Gold
>> (2007-11-27 15:44:51)
>> Crayon Release 1 (17988)  went from Gold (2007-11-17 13:34:11) to
>> Platinum (2007-11-27 11:30:05)
>> Silencer 1.10.1 (18087)  went from Silver (2007-11-16 15:04:45) to
>> Platinum (2007-11-30 17:22:00)
>> .NET Framework 2.0 (18042)  went from Garbage (2007-11-29 10:07:26) to
>> Platinum (2007-11-30 11:35:57)
>> Tom Clancy's Rainbow Six 3: Raven Shield 1.60 (18057)  went from
>> Garbage (2007-10-17 11:44:55) to Bronze (2007-11-29 21:43:19)
>> Safari 3.x Public Beta (18196)  went from Garbage (2007-11-21
>> 03:21:32) to Bronze (2007-12-03 10:03:37)
>> TTPlayer 5.0.1 (18191)  went from Silver (2007-11-07 05:24:39) to Gold
>> (2007-12-03 08:43:31)
>> Sid Meier's Civilization IV Civilization IV Beyond The Sword (3.13)
>> (18108)  went from Bronze (2007-11-07 06:34:47) to Silver (2007-12-01
>> 10:08:49)
>> Original War 1.08 (18041)  went from Garbage (2007-11-18 19:59:13) to
>> Bronze (2007-11-29 09:31:33)
>> Half-Life 2 Half-Life: Source (17993)  went from Garbage (2007-11-05
>> 14:08:10) to Platinum (2007-11-27 13:49:48)
>> Serif PhotoPlus PhotoPlus 11 (18201)  went from Garbage (2007-11-17
>> 17:02:33) to Gold (2007-12-03 12:40:39)
>> MapSource 6.11.5 (18021)  went from Silver (2007-10-17 05:19:10) to
>> Gold (2007-11-28 18:11:37)
>> Call of Duty 4: Modern Warfare Demo (18143)  went from Garbage
>> (2007-11-16 11:59:30) to Silver (2007-12-02 06:40:04)
>> SimCity 4 1.1 638 Rush Hour (18148)  went from Gold (2007-11-25
>> 14:58:28) to Bronze (2007-12-02 07:40:50)
>>
>> On Dec 5, 2007 5:50 PM, Ben Hodgetts (Enverex) <ben at atomnet.co.uk> wrote:
>>> -----BEGIN PGP SIGNED MESSAGE-----
>>> Hash: SHA1
>>>
>>> Possibly, but on the other hand it could just as easily become "Garbage"
>>> in the next release of Wine ;)
>>>
>>> (sorry, I already sent this once at the start of the day but emailed it
>>> directly to the previous person rather than back to the list)
>>>
>>> Ben H.
>>>
>>> Tomas Zijdemans wrote:
>>>> This is great :)
>>>>
>>>> Would it be a good idea to include major news from the appDB?
>>>> Ex: "Photoshop cs2 has now reached Gold status"
>>>>
>>>> I think this would be very inspiring to users.
>>>>
>>>>
>>>> Tomas
>>>>
>>>> Triton wrote:
>>>>> On Tue, 4 Dec 2007 18:23:10 -0500
>>>>>
>>>>> "Zachary Goldberg" <zgs at seas.upenn.edu> wrote:
>>>>>> Kai,
>>>>>>
>>>>>> It was my pleasure :).  Keep the interesting wine discussion/news
>>>>>> coming and I'll keep writing WWNs.  I'll also make note to highlight
>>>>>> in particular GSoC developments as they happen.
>>>>>>
>>>>>> --Zach
>>>>> Hi everyone, I've been following the mailing lists for some time now,
>>>>> this is my first post. OK, presentation done...
>>>>>
>>>>> I also had to thank you bring to life the WWN, it's a great resource
>>>>> for those who don't actively follow the development discussions.
>>> -----BEGIN PGP SIGNATURE-----
>>> Version: GnuPG v1.4.6 (GNU/Linux)
>>>
>>> iD8DBQFHVytLuqCUopk11kIRAkesAJ9d/vngVV71xY/749SA8g5hkys4DgCfVEwh
>>> IlVnueogwUYAb4y1qx4iU38=
>>> =qmuz
>>> -----END PGP SIGNATURE-----
> 
> 
> 
> 
> 



From hurtta+gmane at siilo.fmi.fi  Thu Dec  6 04:04:18 2007
From: hurtta+gmane at siilo.fmi.fi (Kari Hurtta)
Date: 06 Dec 2007 12:04:18 +0200
Subject: replying to wine-devel?
References: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
	<BF863A0F-9E12-4EC6-B1E0-1566F50B4B0F@gmail.com>
	<47575921.5090805@sprintpcs.com>
Message-ID: <5d7ijs3zrx.fsf@Hurtta06k.keh.iki.fi>

James McKenzie <jjmckenzie51 at sprintpcs.com> writes
in gmane.comp.emulators.wine.devel:

> James Hawkins wrote:
> > On Dec 5, 2007, at 7:05 PM, "King InuYasha" <ngompa13 at gmail.com> wrote:
> >
> >   
> >> I have noticed some unusual behavior in the wine-devel mailing list
> >> compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
> >> list does not automatically set the reply to wine-devel at winehq.org.
> >> Why is that? If other mailing lists do so, how come Wine's doesn't?
> >> Personally, I find myself making a mistake sometimes and not adding in
> >> the wine-devel part because I am used to seeing it automatically set.
> >> If I remember how emails are set up, isn't there a hidden field called
> >> reply-to? AFAICT, other mailing lists either override or rewrite this
> >> field and replace it with the email address of the mailing list.

> > You're supposed to reply-all.
> >   
> Most mailing lists have the reply-to field set for to mailing list address.

There seems to have

List-Post: <mailto:wine-devel at winehq.org>

 
> James

/ Kari Hurtta



From stefan at codeweavers.com  Thu Dec  6 05:22:47 2007
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Thu, 6 Dec 2007 12:22:47 +0100
Subject: d3dx8 [2/2]: add basic functions for MatrixStack
In-Reply-To: <d658b69e0712060038g12329dfem786c57166c8cfb69@mail.gmail.com>
References: <20071205181330.8c78pachgkc4kgk4@webmail.math.cnrs.fr>
	<200712052051.02620.stefandoesinger@gmx.at>
	<d658b69e0712060038g12329dfem786c57166c8cfb69@mail.gmail.com>
Message-ID: <200712061222.50316.stefan@codeweavers.com>

Am Donnerstag, 6. Dezember 2007 09:38:51 schrieb H. Verbeet:
> On 05/12/2007, Stefan D?singer <stefandoesinger at gmx.at> wrote:
> > Am Mittwoch, 5. Dezember 2007 18:13:30 schrieb David.Adam at math.cnrs.fr:
> > > This is my first attempt with ICOM objects. So, all the advices are
> > > welcome.
> >
> > A few suggestions:
> >
> > +HRESULT WINAPI ID3DXMatrixStackImpl_QueryInterface(ID3DXMatrixStack
> > *iface, REFIID riid, void **ppvObject)
> > + ...
> > +     IClassFactory_AddRef(iface);
> > It is better to use ID3DXMatrixStack_AddRef(iface) here. It is
> > essentially the same, but it looks more consistent
> >
> > The AddRef() and Release() methods should have a TRACE which write either
> > the new or old refcount, otherwise tracking refcounting bugs is hell.
>
> Having a TRACE in QueryInterface is occasionally useful as well.
>
> A few more comments:
>   - QueryInterface should return S_OK rather than D3D_OK, unless
> you've got tests to prove it doesn't.
Well, that one is unprovable since D3D_OK is just S_OK :-)

>   - AFAIK on failure you should set *ppvObject to NULL.
>   - There's no real reason to stick to MS names for parameters.
Agreed
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071206/658fc6ed/attachment.pgp 

From ngompa13 at gmail.com  Thu Dec  6 05:45:12 2007
From: ngompa13 at gmail.com (King InuYasha)
Date: Thu, 6 Dec 2007 05:45:12 -0600
Subject: replying to wine-devel?
In-Reply-To: <5d7ijs3zrx.fsf@Hurtta06k.keh.iki.fi>
References: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
	<BF863A0F-9E12-4EC6-B1E0-1566F50B4B0F@gmail.com>
	<47575921.5090805@sprintpcs.com> <5d7ijs3zrx.fsf@Hurtta06k.keh.iki.fi>
Message-ID: <8278b1b0712060345g70cab1b7xa41dfc552a6fcf81@mail.gmail.com>

Hmm... Well, I use the Gmail interface sometimes and Thunderbird as well.
But apparently I missed the Reply to All button was there, which pretty much
makes it Cc to wine-devel. It should probably be noted that if you want to
mail the whole list, select reply to all. Replying will only mail to the
author.

On 06 Dec 2007 12:04:18 +0200, Kari Hurtta <hurtta+gmane at siilo.fmi.fi>
wrote:
> James McKenzie <jjmckenzie51 at sprintpcs.com> writes
> in gmane.comp.emulators.wine.devel:
>
>
> > James Hawkins wrote:
> > > On Dec 5, 2007, at 7:05 PM, "King InuYasha" <ngompa13 at gmail.com>
wrote:
> > >
> > >
> > >> I have noticed some unusual behavior in the wine-devel mailing list
> > >> compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
> > >> list does not automatically set the reply to wine-devel at winehq.org.
> > >> Why is that? If other mailing lists do so, how come Wine's doesn't?
> > >> Personally, I find myself making a mistake sometimes and not adding
in
> > >> the wine-devel part because I am used to seeing it automatically set.
> > >> If I remember how emails are set up, isn't there a hidden field
called
> > >> reply-to? AFAICT, other mailing lists either override or rewrite this
> > >> field and replace it with the email address of the mailing list.
>
> > > You're supposed to reply-all.
> > >
> > Most mailing lists have the reply-to field set for to mailing list
address.
>
> There seems to have
>
> List-Post: <mailto:wine-devel at winehq.org>
>
>
> > James
>
> / Kari Hurtta
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.winehq.org/pipermail/wine-devel/attachments/20071206/67e9f139/attachment.htm 

From julliard at winehq.org  Thu Dec  6 05:50:03 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 06 Dec 2007 12:50:03 +0100
Subject: msxml3: Implement cloneNode (resend)
In-Reply-To: <fj7nf0$pqn$1@ger.gmane.org> (Alistair Leslie-Hughes's message of
	"Thu, 06 Dec 2007 13:36:25 +1100")
References: <fj7nf0$pqn$1@ger.gmane.org>
Message-ID: <87lk88avpw.fsf@wine.dyndns.org>

Alistair Leslie-Hughes <leslie_alistair at hotmail.com> writes:

> +static void test_cloneNode(void )
> +{
> +    // NOTE TO SELF - r = IXMLDOMNode_selectSingleNode(node, _bstr_("br"), &node); //test

Please cleanup that sort of thing before submitting.

-- 
Alexandre Julliard
julliard at winehq.org


From hverbeet at gmail.com  Thu Dec  6 06:05:15 2007
From: hverbeet at gmail.com (H. Verbeet)
Date: Thu, 6 Dec 2007 13:05:15 +0100
Subject: d3dx8 [2/2]: add basic functions for MatrixStack
In-Reply-To: <200712061222.50316.stefan@codeweavers.com>
References: <20071205181330.8c78pachgkc4kgk4@webmail.math.cnrs.fr>
	<200712052051.02620.stefandoesinger@gmx.at>
	<d658b69e0712060038g12329dfem786c57166c8cfb69@mail.gmail.com>
	<200712061222.50316.stefan@codeweavers.com>
Message-ID: <d658b69e0712060405s415a4150ybf80bf397ecc1fa4@mail.gmail.com>

On 06/12/2007, Stefan D?singer <stefan at codeweavers.com> wrote:
> Well, that one is unprovable since D3D_OK is just S_OK :-)
>
Uh, right. The code should use S_OK then.


From alexd4 at inbox.lv  Thu Dec  6 22:49:26 2007
From: alexd4 at inbox.lv (Alexander Dorofeyev)
Date: Thu, 06 Dec 2007 20:49:26 -0800
Subject: GetMessage related Jagged Alliance 2 regression
Message-ID: <4758D0D6.2000407@inbox.lv>

Hello.

I get freezes in Jagged Alliance 2 (seems to be tied to moving the mouse). It
used to work in older versions. The game doesn't lock up totally (the music and
sounds continue to play normally, for example), but the screen doesn't redraw
and it doesn't respond to input. Activating some other window than the game
window (if it's not full screen) usually unfreezes it.

Bisect pointed to this change:

http://source.winehq.org/git/wine.git/?a=commitdiff;h=2896540a34a18b8aff848d728308c5811cdd122a

server: Set the queue mask directly in get_message to avoid an extra server call.

I did a bit of debugging and it looks like the game is getting stuck within a
GetMessageW call. It stays in that while loop in GetMessage, mostly in
MsgWaitForMultipleObjectsEx. If the mouse is moved, then it awakes, gets to
PeekMessageW, from there it goes to peek_message which returns false and so
PeekMessageW returns false and the game goes back to waiting within GetMessageW.

peek_message returns false, because in a first call to server it gets a 
MSG_HARDWARE (mouse) message which it drops for some reason, then it clears 
PM_QS_ flags and so in a next call to server it can't get a WM_TIMER message 
despite an expired timer seems to be ready in the queue.

I'm not sure what would be a proper fix, although I did find out that commenting 
out this line in peek_message()

if (HIWORD(flags)) flags = PM_QS_SENDMESSAGE | LOWORD(flags);

makes the game playable. Maybe this clearing of PM_QS_* flags shouldn't be done 
in case when the message gets dropped? Before that commit nothing was passed in 
flags high word, which is probably why this problem wasn't happening.


From julliard at winehq.org  Thu Dec  6 13:19:03 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Thu, 06 Dec 2007 20:19:03 +0100
Subject: GetMessage related Jagged Alliance 2 regression
In-Reply-To: <4758D0D6.2000407@inbox.lv> (Alexander Dorofeyev's message of
	"Thu, 06 Dec 2007 20:49:26 -0800")
References: <4758D0D6.2000407@inbox.lv>
Message-ID: <87hcivbpi0.fsf@wine.dyndns.org>

Alexander Dorofeyev <alexd4 at inbox.lv> writes:

> I'm not sure what would be a proper fix, although I did find out that commenting 
> out this line in peek_message()
>
> if (HIWORD(flags)) flags = PM_QS_SENDMESSAGE | LOWORD(flags);
>
> makes the game playable. Maybe this clearing of PM_QS_* flags shouldn't be done 
> in case when the message gets dropped? Before that commit nothing was passed in 
> flags high word, which is probably why this problem wasn't happening.

Does this help?

diff --git a/dlls/user32/message.c b/dlls/user32/message.c
index 53d1c1d..d3f4a3a 100644
--- a/dlls/user32/message.c
+++ b/dlls/user32/message.c
@@ -2173,11 +2173,11 @@ static BOOL peek_message( MSG *msg, HWND hwnd, UINT first, UINT last, UINT flags
                                    WMCHAR_MAP_RECVMESSAGE );
         reply_message( &info, result, TRUE );
         thread_info->receive_info = old_info;
-    next:
-        HeapFree( GetProcessHeap(), 0, buffer );
 
         /* if some PM_QS* flags were specified, only handle sent messages from now on */
         if (HIWORD(flags)) flags = PM_QS_SENDMESSAGE | LOWORD(flags);
+    next:
+        HeapFree( GetProcessHeap(), 0, buffer );
     }
 }
 

-- 
Alexandre Julliard
julliard at winehq.org


From ken at codeweavers.com  Thu Dec  6 15:35:38 2007
From: ken at codeweavers.com (Ken Thomases)
Date: Thu, 6 Dec 2007 15:35:38 -0600
Subject: wine 0.9.5 IO completion port questions
In-Reply-To: <47547DAA.2070206@gmail.com>
References: <08b801c835d1$d106f430$7314dc90$@slyzius@scimore.com>
	<47547DAA.2070206@gmail.com>
Message-ID: <A80A1946-EA06-43CC-801E-8E0C3E5F0DE3@codeweavers.com>

On Dec 3, 2007, at 4:05 PM, Andrey Turkin wrote:

> Marius Slyzius wrote:
>> 2) possible bug: the server sends 1500 bytes with WsaSend ( with 2
>> WSABUFFER ) and the client receive only 1452 bytes and calls WsaRecv
>> again. Also on the server, the completion port receive event that
>> transferred 1452 bytes. However, the last 8 bytes are never sends nor
>> completion port event arrives. Is it perhaps something to do with the
>> VMWare tool where I run Ubuntu 7.10?
>>
> WsaSend can send partial data when operating on non-blocking socket;
> from your description it looks like this is the case. Is this error
> reproducible with the same numbers every run?
> Your both questions are actually not about IOCP but about asynchronous
> I/O support.


My brain may be misfiring, but isn't 1452 bytes a common MTU size?   
Are your client and server remote from one another?  In that case,  
your client may really be receiving 1452 data bytes first, with the  
rest coming a (very) short while later.

-Ken



From frick at sc-networks.de  Thu Dec  6 15:57:53 2007
From: frick at sc-networks.de (Christoph Frick)
Date: Thu, 6 Dec 2007 22:57:53 +0100
Subject: d3d fill caps oddity
Message-ID: <20071206215753.GD1897@byleth.sc-networks.de>

Hi wined3d devs,

i get this message on my notebook (Quadro 570m):

fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 32 vertex samplers and 32 total samplers
fixme:d3d:IWineD3DImpl_FillGLCaps Expected vertex samplers + MAX_TEXTURES(=8) > combined_samplers

does anyone want some traces or other infos? or is this a problem most
likely going away with the next nvidia driver update?

-- 
cu
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 163 bytes
Desc: not available
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071206/44adc82e/attachment.pgp 

From jjmckenzie51 at sprintpcs.com  Thu Dec  6 18:48:09 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Thu, 06 Dec 2007 17:48:09 -0700
Subject: [Wine] TortoiseCVS- Unimplemented functions in ntdll.dll causes
	program to terminate.
In-Reply-To: <1196985257.24984.51.camel@mercury.sprymusic>
References: <1196979295.24984.42.camel@mercury.sprymusic>
	<b6bb06270712061421w6ccfba59md8593992028be704@mail.gmail.com>
	<1196985257.24984.51.camel@mercury.sprymusic>
Message-ID: <47589849.4040305@sprintpcs.com>

Jean-Claude Gervais wrote:
> Thank you, Austin!
>
> 	I installed Samba to obtain winbind and ntlm_auth, and it did change
> the outcome a bit:
>
> 	Tortoise still checks out the first file and pops up an error dialog,
> so there is no apparent difference, but the session output from Wine HAS
> changed, it has gotten quieter:
>
>  wine TortoiseAct.exe CVSCheckOut -f "C:\windows\Temp\TCV1.tmp" -h
> 0x300b4
> fixme:actctx:parse_depend_manifests Could not find dependent assembly
> L"Microsoft.Windows.Common-Controls"
> fixme:richedit:RichEditWndProc_common WM_STYLECHANGING: stub
> fixme:richedit:RichEditWndProc_common WM_STYLECHANGED: stub
> wine: Call from 0x7bc38828 to unimplemented function
> ntdll.dll.NtQueryEaFile, aborting
> wine: Call from 0x7bc38828 to unimplemented function
> ntdll.dll.NtSetEaFile, aborting
> err:mmio:MMIO_ParseExtA No . in szFileName: "TCVS_Error"
>
> Sadly, it appears that it really is the two unimplemented functions
> (NtQueryEaFile and NtSetEaFile) causing the problem.
>
> Thank you kindly for your help in any case and if you have any other
> strategies or ideas to workaround this, I would gladly try them.
>
> Thanks again.
> J
>   
As others have stated here, please file a bug against ntdll.dll and name
your program as the source of
the problem.  It may be possible to get your program to run with a
minimum of effort, but this may
take considerable effort.  The more reports of problems with these
functions, the more effort should be
brought in to build and implement these functions.
It also appears that you are using a program that is dependent on other
functions that are implemented
elsewhere in the Windows environment.

James



From chris.kcat at gmail.com  Thu Dec  6 18:46:54 2007
From: chris.kcat at gmail.com (Chris Robinson)
Date: Thu, 6 Dec 2007 16:46:54 -0800
Subject: [5/5] WineD3D: Use the disabled opengl extension string
In-Reply-To: <200712062305.52704.stefan@codeweavers.com>
References: <200712062305.52704.stefan@codeweavers.com>
Message-ID: <200712061646.54194.chris.kcat@gmail.com>

On Thursday 06 December 2007 02:05:52 pm Stefan D?singer wrote:
> +                    if(wined3d_settings.disabled_extensions &&
> +                       strstr(wined3d_settings.disabled_extensions,
> ThisExtn)) {

You need to be careful with this. I read somewhere that using strstr to check 
for an opengl extension in an extension list is discourage because it can 
find false positives. Especially in this case, if you have, say:

wined3d_settings.disabled_extensions = "GL_NV_texture_shader3 
GL_NV_vertex_program2_option GL_NV_vertex_program3"

Then if you check for "GL_NV_texture_shader", "GL_NV_vertex_program2", 
or "GL_NV_vertex_program", they'll all show up as being disabled, when 
they're not. Which is a double problem because "GL_NV_vertex_program1_1" 
would still be enabled, which requires "GL_NV_vertex_program".

AFAIK, the proper way to check for OpenGL extensions in a space-delimitted 
list is like this:

const char *ptr = strstr(wined3d_settings.disabled_extensions, ThisExtn);
if(ptr) {
    if(ptr == wined3d_settings.disabled_extensions || isspace(ptr[-1])) {
        int len = strlen(ThisExtn);
        if(!ptr[len] || isspace(ptr[len])) {
            /* is disabled */
        }
    }
}


From jjmckenzie51 at sprintpcs.com  Thu Dec  6 18:54:05 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Thu, 06 Dec 2007 17:54:05 -0700
Subject: replying to wine-devel?
In-Reply-To: <200712060749.32406.kai.blin@gmail.com>
References: <8278b1b0712051705g4575d34epfc78c9e34c1e1b7@mail.gmail.com>
	<200712060749.32406.kai.blin@gmail.com>
Message-ID: <475899AD.5050407@sprintpcs.com>

Kai Blin wrote:
> On Thursday 06 December 2007 02:05:59 King InuYasha wrote:
>   
>> I have noticed some unusual behavior in the wine-devel mailing list
>> compared to others (e.g. fedora's, etc.). Wine's wine-devel mailing
>> list does not automatically set the reply to wine-devel at winehq.org.
>> Why is that? If other mailing lists do so, how come Wine's doesn't?
>> Personally, I find myself making a mistake sometimes and not adding in
>> the wine-devel part because I am used to seeing it automatically set.
>> If I remember how emails are set up, isn't there a hidden field called
>> reply-to? AFAICT, other mailing lists either override or rewrite this
>> field and replace it with the email address of the mailing list.
>>     
>
> The reason is explained in http://www.unicom.com/pw/reply-to-harmful.html
>
> In short, the downside to only replying to the author by accident is pretty 
> small compared to mistakenly replying to the whole list with something 
> intended just for the author.
>   
You are correct as this can prove fatal to the sender if you intended
only to send back to the original
sender rather than the entire list.  I was removed from one list after I
forgot to change the intended
receipant from the list to a single person.  Thus, I will reverse my
original opinion and state that requiring
the use of the 'Reply to All' button may delay or even remove the desire
to reply.

Thank you for this informational link and why using the 'reply-to' is
very dangerous.

James



From jjmckenzie51 at sprintpcs.com  Thu Dec  6 18:59:10 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Thu, 06 Dec 2007 17:59:10 -0700
Subject: wine 0.9.5 IO completion port questions
In-Reply-To: <A80A1946-EA06-43CC-801E-8E0C3E5F0DE3@codeweavers.com>
References: <08b801c835d1$d106f430$7314dc90$%slyzius@scimore.com>
	<47547DAA.2070206@gmail.com>
	<A80A1946-EA06-43CC-801E-8E0C3E5F0DE3@codeweavers.com>
Message-ID: <47589ADE.30709@sprintpcs.com>

Ken Thomases wrote:
> On Dec 3, 2007, at 4:05 PM, Andrey Turkin wrote:
>
>   
>> Marius Slyzius wrote:
>>     
>>> 2) possible bug: the server sends 1500 bytes with WsaSend ( with 2
>>> WSABUFFER ) and the client receive only 1452 bytes and calls WsaRecv
>>> again. Also on the server, the completion port receive event that
>>> transferred 1452 bytes. However, the last 8 bytes are never sends nor
>>> completion port event arrives. Is it perhaps something to do with the
>>> VMWare tool where I run Ubuntu 7.10?
>>>
>>>       
>> WsaSend can send partial data when operating on non-blocking socket;
>> from your description it looks like this is the case. Is this error
>> reproducible with the same numbers every run?
>> Your both questions are actually not about IOCP but about asynchronous
>> I/O support.
>>     
>
>
> My brain may be misfiring, but isn't 1452 bytes a common MTU size?   
> Are your client and server remote from one another?  In that case,  
> your client may really be receiving 1452 data bytes first, with the  
> rest coming a (very) short while later.
>   
Yes, 1452 is a common MTU, but I recommend setting 576 or smaller for
testing of lines.  You MAY
encounter problems sending exactly 1500 bytes over old style 10Base
systems, too.  It may be necessary
to pad on send to a different number and then remove the padding on receipt.

James



From hverbeet at gmail.com  Fri Dec  7 03:16:51 2007
From: hverbeet at gmail.com (H. Verbeet)
Date: Fri, 7 Dec 2007 10:16:51 +0100
Subject: [5/5] WineD3D: Use the disabled opengl extension string
In-Reply-To: <200712062305.52704.stefan@codeweavers.com>
References: <200712062305.52704.stefan@codeweavers.com>
Message-ID: <d658b69e0712070116u5f146624n8eb75861a49cad53@mail.gmail.com>

The clearest way to do this would probably be to simply do the
disabling in a separate loop over the disabled extensions string,
similarly to how we detect the extensions.


From stefan at codeweavers.com  Fri Dec  7 04:48:20 2007
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Fri, 7 Dec 2007 11:48:20 +0100
Subject: [5/5] WineD3D: Use the disabled opengl extension string
In-Reply-To: <d658b69e0712070116u5f146624n8eb75861a49cad53@mail.gmail.com>
References: <200712062305.52704.stefan@codeweavers.com>
	<d658b69e0712070116u5f146624n8eb75861a49cad53@mail.gmail.com>
Message-ID: <200712071148.22538.stefan@codeweavers.com>

Am Freitag, 7. Dezember 2007 10:16:51 schrieb H. Verbeet:
> The clearest way to do this would probably be to simply do the
> disabling in a separate loop over the disabled extensions string,
> similarly to how we detect the extensions.
This will only partially work because we should also filter "extensions" 
imported from higher opengl base versions
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071207/0074fb3d/attachment.pgp 

From rob at codeweavers.com  Fri Dec  7 05:23:27 2007
From: rob at codeweavers.com (Robert Shearman)
Date: Fri, 07 Dec 2007 11:23:27 +0000
Subject: [1/2] msxml3: Implement IPersistStream
In-Reply-To: <fjadur$fqc$2@ger.gmane.org>
References: <fjadur$fqc$2@ger.gmane.org>
Message-ID: <47592D2F.1070206@codeweavers.com>

Alistair Leslie-Hughes wrote:
> +    hr = CreateStreamOnHGlobal(NULL, TRUE, &This->stream);
> +    if (FAILED(hr))
> +        return hr

You need to free This->stream somewhere.

-- 
Rob Shearman



From hverbeet at gmail.com  Fri Dec  7 05:37:04 2007
From: hverbeet at gmail.com (H. Verbeet)
Date: Fri, 7 Dec 2007 12:37:04 +0100
Subject: Assorted spelling fixes.
In-Reply-To: <Pine.LNX.4.64.0712070103310.21564@amboise.dolphin>
References: <Pine.LNX.4.64.0712070103310.21564@amboise.dolphin>
Message-ID: <d658b69e0712070337v3257ad44secc67bb5c918212b@mail.gmail.com>

On 07/12/2007, Francois Gouget <fgouget at free.fr> wrote:
> --- a/dlls/wined3d/glsl_shader.c
> +++ b/dlls/wined3d/glsl_shader.c
> -         * out. The nvidia driver only does that if the parameter is inout instead of out, hence the
> -         * inout.
> +         * out. The nvidia driver only does that if the parameter is in/out instead of out, hence the
> +         * in/out.
I don't think that change is correct. GLSL function parameters can
have qualifiers to specify how the parameter is used. The possible
qualifiers are "in", "out" and "inout", where specifying no qualifier
is the same as specifying "in". I suppose the first "inout" could be
replaced with "in/out" without changing the meaning of the sentence
too much, but the second one is a reference to the actual qualifier.


From stefan at codeweavers.com  Fri Dec  7 05:49:54 2007
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Fri, 7 Dec 2007 12:49:54 +0100
Subject: d3d fill caps oddity
In-Reply-To: <20071206215753.GD1897@byleth.sc-networks.de>
References: <20071206215753.GD1897@byleth.sc-networks.de>
Message-ID: <200712071249.58302.stefan@codeweavers.com>

Am Donnerstag, 6. Dezember 2007 22:57:53 schrieb Christoph Frick:
> Hi wined3d devs,
>
> i get this message on my notebook (Quadro 570m):
>
> fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 32 vertex
> samplers and 32 total samplers fixme:d3d:IWineD3DImpl_FillGLCaps Expected
> vertex samplers + MAX_TEXTURES(=8) > combined_samplers
Ah, this is a false positive, and actually harmless. One could patch the code 
to not warn about this situation. See the comments in the code about why this 
happens.

d3d9 doesn't support more than 4 vertex samplers, so even if the card supports 
more(a gf8 class card supports 32, due to the uniformed shader architecture), 
we're still fine with 8 fixed function textures and 4 vertex samplers. So you 
can suppress the warning by capping the supported fragment samplers at 4 in 
this check(e.g. max(4, gl_info->fragment samplers)).
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071207/987cfd82/attachment.pgp 

From huw at codeweavers.com  Fri Dec  7 06:00:18 2007
From: huw at codeweavers.com (Huw Davies)
Date: Fri, 7 Dec 2007 12:00:18 +0000
Subject: [2/2] msxml3: Register Missing Components
In-Reply-To: <fjaduo$fqc$1@ger.gmane.org>
References: <fjaduo$fqc$1@ger.gmane.org>
Message-ID: <20071207120017.GB5468@merlot.physics.ox.ac.uk>

On Fri, Dec 07, 2007 at 02:07:44PM +1100, Alistair Leslie-Hughes wrote:
> diff --git a/dlls/msxml3/regsvr.c b/dlls/msxml3/regsvr.c
> index 9a0d938..1beed5b 100644
> --- a/dlls/msxml3/regsvr.c
> +++ b/dlls/msxml3/regsvr.c
> @@ -465,13 +465,13 @@ static LONG register_key_defvalueA(
>   */
>  static struct regsvr_coclass const coclass_list[] = {
>      {   &CLSID_DOMDocument,
> -	"XML DOM Document",
> -	NULL,
> -	"msxml3.dll",
> -	"Both",
> -	"Microsoft.XMLDOM",
> -	"1.0"
> -    },
> +        "XML DOM Document",
> +        NULL,
> +        "msxml3.dll",
> +        "Both",
> +        "Microsoft.XMLDOM",
> +        "1.0"
> +    },    


There are a lot of white-space changes in this patch.  Please re-submit
without them.

Thanks,
Huw.
-- 
Huw Davies
huw at codeweavers.com


From huw at codeweavers.com  Fri Dec  7 06:48:43 2007
From: huw at codeweavers.com (Huw Davies)
Date: Fri, 7 Dec 2007 12:48:43 +0000
Subject: gdi32: Update fontsubstitutes and add ms shell dlg 2
In-Reply-To: <47593AAB.7010109@codeweavers.com>
References: <47593AAB.7010109@codeweavers.com>
Message-ID: <20071207124843.GE5468@merlot.physics.ox.ac.uk>

On Fri, Dec 07, 2007 at 01:20:59PM +0100, Maarten Lankhorst wrote:
> ---
>  dlls/gdi32/freetype.c |   34 ++++++++++++++++++----------------
>  1 files changed, 18 insertions(+), 16 deletions(-)

> diff --git a/dlls/gdi32/freetype.c b/dlls/gdi32/freetype.c
> index e9fb663..1542e29 100644
> --- a/dlls/gdi32/freetype.c
> +++ b/dlls/gdi32/freetype.c
> @@ -1884,83 +1884,83 @@ static const struct nls_update_font_list
>      const char *oem, *fixed, *system;
>      const char *courier, *serif, *small, *sserif;
>     /* these are for font substitute */
> -    const char *shelldlg, *tmsrmn;
> +    const char *shelldlg, *shelldlg2, *tmsrmn;
>  } nls_update_font_list[] =
>  {
>      /* Latin 1 (United States) */
>      { 1252, 437, "vgaoem.fon", "vgafix.fon", "vgasys.fon",
>        "coure.fon", "serife.fon", "smalle.fon", "sserife.fon",
> -      "Tahoma","Times New Roman",
> +      "MS Sans Serif", "Tahoma","Times New Roman",
>      },

I'm fairly sure we don't want to map MS Shell Dlg to MS Sans Serif.
Which version of Windows has this mapping?  Some map it to Microsoft
Sans Serif, but that's a completely different font...

Huw.
-- 
Huw Davies
huw at codeweavers.com


From kornelpal at gmail.com  Fri Dec  7 07:19:55 2007
From: kornelpal at gmail.com (=?iso-8859-2?B?S29ybulsIFDhbA==?=)
Date: Fri, 7 Dec 2007 14:19:55 +0100
Subject: Mono 1.2.5.1 on Wine
Message-ID: <000901c838d3$dce502b0$0100a8c0@kornelpal.hu>

Hi,

I tried to run Mono 1.2.5.1 on Wine but it dies with the "Weird VirtualQuery 
result" error message. Are there any know bugs of Wine or Mono that prevent 
it from running?

I would like to make Mono run on Wine and I am willing to contribute patches 
to Wine and Mono as well to achieve that.

Korn?l 



From dank at kegel.com  Fri Dec  7 08:27:54 2007
From: dank at kegel.com (Dan Kegel)
Date: Fri, 7 Dec 2007 06:27:54 -0800
Subject: Nifty new valgrind report script. New error in oleaut32. Call for
	volunteer(s).
Message-ID: <a71bd89a0712070627m735cd649o47e6ba5c6e607499@mail.gmail.com>

I finally got tired of doing "history | grep diff" etc, and
partially automated the daily valgrind run; the resulting
script is at http://kegel.com/wine/valgrind/valgrind-daily.sh

The results are now in directories named like
http://kegel.com/wine/valgrind/logs-2007-12-06/
A summary of the new problems compared to last run are in files named like
http://kegel.com/wine/valgrind/logs-2007-12-06-summary.txt
And next to each individual result, there is a diff with the previous run, e.g.
http://kegel.com/wine/valgrind/logs-2007-12-06/vg-oleaut32_varformat.txt
http://kegel.com/wine/valgrind/logs-2007-12-06/vg-oleaut32_varformat-diff.txt

To look at what changed since yesterday, start by looking at the day's
summary file.
In it, there's one line per test, followed by the changes in that
test's results, if any.
Lines that start with + indicate new problems (boo);
lines that start with - indicate old problems that are now gone (yay!)
Nearby lines that are identical except for one starting with + and one
starting with -
indicate a problem that moved, so ignore those.

For example, in today's summary,
http://kegel.com/wine/valgrind/logs-2007-12-06-summary.txt
the first test with changes is in hlink:

diff -u logs-2007-12-05/vg-hlink_hlink.txt logs-2007-12-06/vg-hlink_hlink.txt
- Syscall param write(buf) points to uninitialised byte(s)

That means the hlink test has one fewer error.  Yay!

The next test with changes is

diff -u logs-2007-12-05/vg-ole32_moniker.txt
logs-2007-12-06/vg-ole32_moniker.txt
+ Syscall param write(buf) points to uninitialised byte(s)
- Syscall param write(buf) points to uninitialised byte(s)
- Conditional jump or move depends on uninitialised value(s)

The 'Syscall' error just moved, so that's not really a change.
The 'Conditional' error went away, yay!

The next test with changes is

diff -u logs-2007-12-05/vg-oleaut32_varformat.txt
logs-2007-12-06/vg-oleaut32_varformat.txt
+ Invalid read of size 2

That's a + with no matching -, so it's a new error, boo!
Let's see if it's a real error, or just crap in the log.  The
first thing to check is the diff of that test's results with the last run:
http://kegel.com/wine/valgrind/logs-2007-12-06/vg-oleaut32_varformat-diff.txt
It shows a fairly convincing new error:

+ Invalid read of size 2
+    at  VarFormatFromTokens (varformat.c:1888)
+    by  VarFormat (varformat.c:2096)
+    by  func_varformat (varformat.c:317)
+    by  run_test (test.h:387)
+    by  main (test.h:436)
+  Address 0x7F00AB01 is 15 bytes before a block of size 8 alloc'd
+    at  RtlAllocateHeap (heap.c:1225)
+    by  SysAllocStringByteLen (oleaut.c:357)
+    by  VariantCopy (variant.c:722)
+    by  VariantChangeTypeEx (variant.c:992)
+    by  VarFormatFromTokens (varformat.c:1884)
+    by  VarFormat (varformat.c:2096)
+    by  func_varformat (varformat.c:317)
+    by  run_test (test.h:387)
+    by  main (test.h:436)

Now, sometimes tests are flaky, and errors
just happen to come and go, so this doesn't mean
for sure it's a new error.  But looking back a
few days, I don't see it before.  So it's probably
a new error.  Let's see, who's been submitting changes
to oleaut32 lately?    Only change in git since the last run seems to be
http://www.winehq.org/pipermail/wine-cvs/2007-December/038491.html
It's not clear how that patch could have caused the error offhand,
but it's worth emailing the author and asking him to check,
so I've cc'd him.

And that's the only new error in the whole run.

It's worth watching for new errors and alerting the authors,
since the change is fresh in their mind, they'll probably
be able to fix it quickly.   Egg in the face is a dish best served warm.

I'll try to keep running this script daily, but it'd be nice if
somebody else took over (and possibly even increased
the automation; I still have to do git pull, run the script, and
upload by hand.)
It doesn't help that valgrind only works well on some machines,
but hey, what's life without challenges.
- Dan


From huw at codeweavers.com  Fri Dec  7 08:31:49 2007
From: huw at codeweavers.com (Huw Davies)
Date: Fri, 7 Dec 2007 14:31:49 +0000
Subject: (corrected) Add 18 pixel strike with japanese fonts to system.sdf
	Widths corrected and double checked for both strikes
In-Reply-To: <4757C6BD.9000805@codeweavers.com>
References: <475755DD.1000103@codeweavers.com>
	<4757C106.6050708@codeweavers.com>
	<4757C6BD.9000805@codeweavers.com>
Message-ID: <20071207143149.GI5468@merlot.physics.ox.ac.uk>

On Thu, Dec 06, 2007 at 06:54:05PM +0900, Aric Stewart wrote:
> I added a number of the black boxes to the 18 pixel strike  (the range 
> before 161)  and fontforge seemed unhappy if i did not add something to 
> the 16 pixel one. (maybe it was my misinterperting fontforge) but so i 
> added similar black boxes to what where already there.

It was these lines that looked suspicious:

-BDFChar: 351 154 4 0 2 0 8
-?smAM?smAM?iU0,
-BDFChar: 352 156 4 0 2 0 8
-?smAM?smAM?iU0,
+BDFChar: 351 154 4 1 2 0 8
+^qdb$^qdb$^]4?7
+BDFChar: 352 156 4 1 2 0 8
+^qdb$^qdb$^]4?7

Huw.
-- 
Huw Davies
huw at codeweavers.com


From fgouget at free.fr  Fri Dec  7 09:14:24 2007
From: fgouget at free.fr (Francois Gouget)
Date: Fri, 7 Dec 2007 16:14:24 +0100 (CET)
Subject: Assorted spelling fixes.
In-Reply-To: <d658b69e0712070337v3257ad44secc67bb5c918212b@mail.gmail.com>
References: <Pine.LNX.4.64.0712070103310.21564@amboise.dolphin>
	<d658b69e0712070337v3257ad44secc67bb5c918212b@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0712071613440.15881@amboise.dolphin>

On Fri, 7 Dec 2007, H. Verbeet wrote:

> On 07/12/2007, Francois Gouget <fgouget at free.fr> wrote:
> > --- a/dlls/wined3d/glsl_shader.c
> > +++ b/dlls/wined3d/glsl_shader.c
> > -         * out. The nvidia driver only does that if the parameter is inout instead of out, hence the
> > -         * inout.
> > +         * out. The nvidia driver only does that if the parameter is in/out instead of out, hence the
> > +         * in/out.
> I don't think that change is correct. GLSL function parameters can
> have qualifiers to specify how the parameter is used. The possible
> qualifiers are "in", "out" and "inout", where specifying no qualifier
> is the same as specifying "in". I suppose the first "inout" could be
> replaced with "in/out" without changing the meaning of the sentence
> too much, but the second one is a reference to the actual qualifier.

Oh, ok. I'll fix that.

-- 
Francois Gouget <fgouget at free.fr>              http://fgouget.free.fr/
                              145 = 1! + 4! + 5!


From ben at atomnet.co.uk  Fri Dec  7 09:58:44 2007
From: ben at atomnet.co.uk (Ben Hodgetts)
Date: Fri, 07 Dec 2007 15:58:44 +0000
Subject: Missing 32bit support libraries on x86_64 Debian
Message-ID: <47596DB4.3070000@atomnet.co.uk>

I just submitted this to the Debian tracker system, thought it may be 
useful to echo here in-case anyone else is using x86_64 Debian as it 
seems since Julliard put in a patch just before .42 to check more 
completely for dependencies it now shows that Debian (64) actually lacks 
certain deps for Wine.

Ben H.

---------------------------------------

Package: wine
Version: All
Severity: important

Wine, when compiled from source (upstream source) shows that Debian is 
missing certain dependencies which cause loss of functionality in Wine 
on x86_64. These are libpng, libcups, libcapi20, libhal and openssl. 
This means that 32bit support packages need to be made for Debian for 
Wine to work properly (just like there is currently a lib32asound(-dev), 
etc to give ALSA support).

-- System Information:
Debian Release: lenny/sid
   APT prefers unstable
   APT policy: (500, 'unstable'), (500, 'testing')
Architecture: amd64 (x86_64)

Kernel: Linux 2.6.22-3-amd64 (SMP w/2 CPU cores)
Locale: LANG=en_GB.UTF-8, LC_CTYPE=en_GB.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/bash

Versions of packages wine depends on:
ii  debconf [debconf-2.0]         1.5.17     Debian configuration 
management sy
pn  libwine                       <none>     (no description available)
ii  xbase-clients                 1:7.3+7    miscellaneous X clients - 
metapack

Versions of packages wine recommends:
ii  msttcorefonts                 2.4        Installer for Microsoft 
TrueType c
pn  wine-utils                    <none>     (no description available)


From julliard at winehq.org  Fri Dec  7 10:39:33 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 07 Dec 2007 17:39:33 +0100
Subject: msi 2: Reimplement MsiGetProductCode
In-Reply-To: <22821af30712060934w6ce2d32cw8941369b4dd98f61@mail.gmail.com>
	(James Hawkins's message of "Thu, 6 Dec 2007 11:34:25 -0600")
References: <22821af30712060934w6ce2d32cw8941369b4dd98f61@mail.gmail.com>
Message-ID: <874peulare.fsf@wine.dyndns.org>

"James Hawkins" <truiken at gmail.com> writes:

> Changelog:
> * Reimplement MsiGetProductCode.

The test fails occasionally with something like:

../../../tools/runtest -q -P wine -M msi.dll -T ../../.. -p msi_test.exe.so msi.c && touch msi.ok
msi.c:1426: Test failed: Expected {E853FAEA-A4E2-11DC-A19E-001A923592CB}, got {E853FAAE-A4E2-11DC-A19E-001A923592CB}
msi.c:1530: Test failed: Expected {E853FAEA-A4E2-11DC-A19E-001A923592CB}, got {E853FAAE-A4E2-11DC-A19E-001A923592CB}
make: *** [msi.ok] Error 2

-- 
Alexandre Julliard
julliard at winehq.org


From julliard at winehq.org  Fri Dec  7 10:41:38 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 07 Dec 2007 17:41:38 +0100
Subject: [PATCH 1/5] winealsa: Make widGetPos more accurate
In-Reply-To: <47591733.1000908@codeweavers.com> (Maarten Lankhorst's message
	of "Fri, 07 Dec 2007 10:49:39 +0100")
References: <47591733.1000908@codeweavers.com>
Message-ID: <87zlwmjw3h.fsf@wine.dyndns.org>

Maarten Lankhorst <maarten at codeweavers.com> writes:

> ---
>  dlls/winealsa.drv/wavein.c |    6 +++++-

This doesn't work for me:

../../../tools/runtest -q -P wine -M winmm.dll -T ../../.. -p winmm_test.exe.so capture.c && touch capture.ok
capture.c:73: Test failed: waveInGetPosition(0): returned 2730 bytes, should be 0
capture.c:84: Test failed: waveInGetPosition(0): returned 2730 samples, should be 0
capture.c:96: Test failed: waveInGetPosition(0): returned 341 ms, should be 0
capture.c:108: Test failed: waveInGetPosition(0): SMPTE test failed
capture.c:119: Test failed: waveInGetPosition(0): MIDI test failed
capture.c:130: Test failed: waveInGetPosition(0): TICKS test failed
[lots more of the same]

-- 
Alexandre Julliard
julliard at winehq.org


From maarten at codeweavers.com  Fri Dec  7 11:49:50 2007
From: maarten at codeweavers.com (Maarten Lankhorst)
Date: Fri, 07 Dec 2007 18:49:50 +0100
Subject: [PATCH 1/5] winealsa: Make widGetPos more accurate
In-Reply-To: <87zlwmjw3h.fsf@wine.dyndns.org>
References: <47591733.1000908@codeweavers.com> <87zlwmjw3h.fsf@wine.dyndns.org>
Message-ID: <475987BE.9090805@codeweavers.com>

Hi Alex,

Alexandre Julliard schreef:
> This doesn't work for me:
>
> ../../../tools/runtest -q -P wine -M winmm.dll -T ../../.. -p winmm_test.exe.so capture.c && touch capture.ok
> capture.c:73: Test failed: waveInGetPosition(0): returned 2730 bytes, should be 0
> capture.c:84: Test failed: waveInGetPosition(0): returned 2730 samples, should be 0
> capture.c:96: Test failed: waveInGetPosition(0): returned 341 ms, should be 0
> capture.c:108: Test failed: waveInGetPosition(0): SMPTE test failed
> capture.c:119: Test failed: waveInGetPosition(0): MIDI test failed
> capture.c:130: Test failed: waveInGetPosition(0): TICKS test failed
> [lots more of the same]
>   
Oops, it's a naive assumption on my side. Omit this patch, the other 4
should be fine.

-Maarten


From julliard at winehq.org  Fri Dec  7 12:01:22 2007
From: julliard at winehq.org (Alexandre Julliard)
Date: Fri, 07 Dec 2007 19:01:22 +0100
Subject: Monthcal lost focus fix
In-Reply-To: <475298EF.2060404@home.se> (Gregor Brunmar's message of "Sun, 02
	Dec 2007 12:37:19 +0100")
References: <475298EF.2060404@home.se>
Message-ID: <87sl2ejsel.fsf@wine.dyndns.org>

Gregor Brunmar <gregor.brunmar at home.se> writes:

> diff --git a/dlls/comctl32/monthcal.c b/dlls/comctl32/monthcal.c
> index 8a92d42..e826612 100644
> --- a/dlls/comctl32/monthcal.c
> +++ b/dlls/comctl32/monthcal.c
> @@ -1719,11 +1719,12 @@ MONTHCAL_Paint(MONTHCAL_INFO *infoPtr, WPARAM wParam)
>  
>  
>  static LRESULT
> -MONTHCAL_KillFocus(const MONTHCAL_INFO *infoPtr)
> +MONTHCAL_KillFocus(const MONTHCAL_INFO *infoPtr, HWND hFocusWnd)
>  {
>    TRACE("\n");
>  
> -  InvalidateRect(infoPtr->hwndSelf, NULL, TRUE);
> +  if (infoPtr->hwndNotify != hFocusWnd)
> +    ShowWindow(infoPtr->hwndSelf, SW_HIDE);

Is there a reason for removing the InvalidateRect completely?

-- 
Alexandre Julliard
julliard at winehq.org


From dank at kegel.com  Fri Dec  7 20:14:15 2007
From: dank at kegel.com (Dan Kegel)
Date: Fri, 7 Dec 2007 18:14:15 -0800
Subject: Wine Problem
Message-ID: <a71bd89a0712071814g722f42ecwcc3e6a95e599c7c9@mail.gmail.com>

Pedro Ferreira wrote:
> I installed a software that talks with the informix client 2.7.0
> everything was running fine, the instalation went with minor problems.
> Until now
>
>when i stated a connection to the informix server wine simply stops

Which version of Wine?

Have you tested the connection using the ilogin.exe demo
that comes with the informix SDK?  If you don't have it,
you can download a free trial of the 2.80 SDK, that's probably close enough.

The procedure for testing the connection is described here:
http://www.synametrics.com/ifmxODBC.htm

BTW the right mailing list for this is probably wine-users, not wine-devel.
- Dan


From jjmckenzie51 at sprintpcs.com  Fri Dec  7 23:57:23 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Fri, 07 Dec 2007 22:57:23 -0700
Subject: Mono 1.2.5.1 on Wine
In-Reply-To: <000901c838d3$dce502b0$0100a8c0@kornelpal.hu>
References: <000901c838d3$dce502b0$0100a8c0@kornelpal.hu>
Message-ID: <475A3243.20704@sprintpcs.com>

Korn?l P?l wrote:
> Hi,
>
> I tried to run Mono 1.2.5.1 on Wine but it dies with the "Weird VirtualQuery 
> result" error message. Are there any know bugs of Wine or Mono that prevent 
> it from running?
>
> I would like to make Mono run on Wine and I am willing to contribute patches 
> to Wine and Mono as well to achieve that.
>
>   
Use Mono 1.2.5.2.  It works, but 1.2.5.1 does not.

James



From luis.busquets at ilidium.com  Sat Dec  8 00:55:34 2007
From: luis.busquets at ilidium.com (=?ISO-8859-1?Q?=22Luis_C=2E_Busquets_P=E9rez=22?=)
Date: Sat, 08 Dec 2007 07:55:34 +0100
Subject: d3ds9_xx
Message-ID: <475A3FE6.9070901@ilidium.com>

I have not seen any patch committed beginning the implementation of 
these libraries. Therefore, I was wondering which is the tree structure 
for these dlls that all of you propose and Alexander is willing to commit.



From stefan at codeweavers.com  Sat Dec  8 10:31:30 2007
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Sat, 8 Dec 2007 17:31:30 +0100
Subject: ddraw: fix wrong initialization order in IDirect3DDevice vtable
In-Reply-To: <475B4C3C.1090802@inbox.lv>
References: <475B4C3C.1090802@inbox.lv>
Message-ID: <200712081731.35188.stefan@codeweavers.com>

Am Sonntag, 9. Dezember 2007 03:00:28 schrieb Alexander Dorofeyev:
> Helps bug#7584 (http://bugs.winehq.org/show_bug.cgi?id=7584)
> ---
>     dlls/ddraw/device.c |    2 +-
>     1 files changed, 1 insertions(+), 1 deletions(-)
Looks correct to me, good catch!
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071208/002c34f6/attachment.pgp 

From rob at codeweavers.com  Sat Dec  8 11:13:27 2007
From: rob at codeweavers.com (Robert Shearman)
Date: Sat, 08 Dec 2007 17:13:27 +0000
Subject: Valgrind support for our unit tests
In-Reply-To: <a71bd89a0712071354v2ff9d3c0ie5e26f74c324f433@mail.gmail.com>
References: <a71bd89a0712071354v2ff9d3c0ie5e26f74c324f433@mail.gmail.com>
Message-ID: <475AD0B7.4020903@codeweavers.com>

Dan Kegel wrote:
> +{
> +   todo_suppress_exception_addr4
> +   Memcheck:Addr4
> +   fun:__wine_call_from_32_regs
> +   obj:/home/dank/wine-git/dlls/ntdll/ntdll.dll.so
> +   obj:/home/dank/wine-git/dlls/ntdll/ntdll.dll.so
> +   fun:raise_exception

I'm not sure this will work for other people unless they log on as dank :-)

However, I don't think maintaining the valgrind suppressions file in 
tree is viable since most of the warnings come from system libraries 
which means that it is very dependent on user's distribution.

It might be best to set up an external git tree for this, which would 
allow for people to submit patches for any bogus warnings in the runs 
that you publish on your website.

-- 
Rob Shearman



From coke at lounge.lu  Sat Dec  8 12:27:35 2007
From: coke at lounge.lu (Gilles May)
Date: Sat, 08 Dec 2007 19:27:35 +0100
Subject: File a bug report?
Message-ID: <475AE217.40707@lounge.lu>

Hi everybody.

After updating WINE to from 0.9.49 to 0.9.50 I noticed major slowdown in
Company of Heroes, to the point that I get like 1 Frame every 2 seconds.
Wine spams the console with:

fixme:d3d_shader:IWineD3DVertexShaderImpl_CompileShader Vertexshader
0x4d20b78 recompiled more than 50 times

Trying to find out the cause for the slowdown I did my first attempt at
using git bisect and I could trace the slowdown to this patch:

959212304dfaf0e7459374593b20b74fe22a0b57 is first bad commit
commit 959212304dfaf0e7459374593b20b74fe22a0b57
Author: Stefan D?singer <stefan at codeweavers.com>
Date:   Tue Nov 20 21:14:10 2007 +0100

    wined3d: Track vertex declaration changes on vertex shaders.
   
    If an attribute has type D3DDECLTYPE_D3DCOLOR, the red and blue channels
    are swizzled in the shader. Since the attribute is stored in the vertex
    declaration and not the vertex shader, it can change by setting a new
    vertex declaration. If this happens, we have to recompile the shader
    with the swizzling of that specific attribute turned on or off.

:040000 040000 327661a4d0f8a02bdc18380084589c891b64af9c
e35a2bcbf9514e4f261d8b7a93dcb24c0b3c89a7 M      dlls

Now without that patch there is slight texture corruption in the game,
with the patch it's much much less but it renders the game unplayable.
The reason I didn't file a bug report is that I am not sure if it is
really a bug or not since obviously the patch fixes in-game texture
corruption.

Regards, Gilles




From dank at kegel.com  Sat Dec  8 14:13:27 2007
From: dank at kegel.com (Dan Kegel)
Date: Sat, 8 Dec 2007 12:13:27 -0800
Subject: Valgrind support for our unit tests
In-Reply-To: <475AD0B7.4020903@codeweavers.com>
References: <a71bd89a0712071354v2ff9d3c0ie5e26f74c324f433@mail.gmail.com>
	<475AD0B7.4020903@codeweavers.com>
Message-ID: <a71bd89a0712081213od3cf325x2b3f056fe1a1123f@mail.gmail.com>

On Dec 8, 2007 9:13 AM, Robert Shearman <rob at codeweavers.com> wrote:
> Dan Kegel wrote:
> > +   obj:/home/dank/wine-git/dlls/ntdll/ntdll.dll.so
> I'm not sure this will work for other people unless they log on as dank :-)

Whoops!

> However, I don't think maintaining the valgrind suppressions file in
> tree is viable since most of the warnings come from system libraries
> which means that it is very dependent on user's distribution.

Right, but we can add suppressions for them all as needed,
it's not that hard to get all the popular libc etc. versions.

> It might be best to set up an external git tree for this, which would
> allow for people to submit patches for any bogus warnings

I'd rather that be maintained in the main tree.  I'm trying
to reduce my typing...
and really, I'd like to see more than just one person running
valgrind with wine.
- Dan


From lav at etersoft.ru  Sat Dec  8 14:31:45 2007
From: lav at etersoft.ru (Vitaly Lipatov)
Date: Sat, 8 Dec 2007 23:31:45 +0300
Subject: Alexander Nicolaysen
	=?utf-8?q?S=C3=B8rnes_=3A_comdlg32=3A_PageSetupDlgA=3A_Read_margins_from?=
	=?utf-8?q?_correct_edit?= boxes.
In-Reply-To: <E1J15aN-0002FC-8W@wine.codeweavers.com>
References: <E1J15aN-0002FC-8W@wine.codeweavers.com>
Message-ID: <200712082331.45919.lav@etersoft.ru>

Hello,
I already posted the same patch to wine-patches one month ago:
http://www.winehq.org/pipermail/wine-patches/2007-November/046156.html
Why my patch was ignored? I am in some black list?

? ????????? ?? 8 ??????? 2007 Alexandre Julliard ???????(a):
> Module: wine
> Branch: master
> Commit: 51086b5513a436f51460d006f4fa7156e9d58a92
> URL:   
> http://source.winehq.org/git/wine.git/?a=commit;h=51086b5513a436f51460d006f
>4fa7156e9d58a92
>
> Author: Alexander Nicolaysen S?rnes <alex at thehandofagony.com>
> Date:   Sat Dec  8 13:53:32 2007 +0100
>
> comdlg32: PageSetupDlgA: Read margins from correct edit boxes.
>
> ---
>
>  dlls/comdlg32/printdlg.c |    4 ++--
>  1 files changed, 2 insertions(+), 2 deletions(-)
>
> diff --git a/dlls/comdlg32/printdlg.c b/dlls/comdlg32/printdlg.c
> index e04e145..5baa90e 100644
> --- a/dlls/comdlg32/printdlg.c
> +++ b/dlls/comdlg32/printdlg.c
> @@ -2890,10 +2890,10 @@ PRINTDLG_PS_WMCommandA(
>      	GETVAL(id, pda->curdlg.rtMargin.left);
>  	break;
>      case edt5:
> -    	GETVAL(id, pda->curdlg.rtMargin.right);
> +	GETVAL(id, pda->curdlg.rtMargin.top);
>  	break;
>      case edt6:
> -    	GETVAL(id, pda->curdlg.rtMargin.top);
> +	GETVAL(id, pda->curdlg.rtMargin.right);
>  	break;
>      case edt7:
>      	GETVAL(id, pda->curdlg.rtMargin.bottom);




-- 
Vitaly Lipatov, ALT Linux Team
Russia, Saint-Petersburg, www.etersoft.ru


From jjmckenzie51 at sprintpcs.com  Sat Dec  8 14:41:01 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Sat, 08 Dec 2007 13:41:01 -0700
Subject: File a bug report?
In-Reply-To: <475AE217.40707@lounge.lu>
References: <475AE217.40707@lounge.lu>
Message-ID: <475B015D.2060205@sprintpcs.com>

Gilles May wrote:
> Hi everybody.
>
> After updating WINE to from 0.9.49 to 0.9.50 I noticed major slowdown in
> Company of Heroes, to the point that I get like 1 Frame every 2 seconds.
> Wine spams the console with:
>
>   
Please file a bug report for this, thank you.

Also, in the future, please bring up issues like this in the wine-users
list as well.

James



From jjmckenzie51 at sprintpcs.com  Sat Dec  8 14:42:59 2007
From: jjmckenzie51 at sprintpcs.com (James McKenzie)
Date: Sat, 08 Dec 2007 13:42:59 -0700
Subject: Valgrind support for our unit tests
In-Reply-To: <a71bd89a0712081213od3cf325x2b3f056fe1a1123f@mail.gmail.com>
References: <a71bd89a0712071354v2ff9d3c0ie5e26f74c324f433@mail.gmail.com>
	<475AD0B7.4020903@codeweavers.com>
	<a71bd89a0712081213od3cf325x2b3f056fe1a1123f@mail.gmail.com>
Message-ID: <475B01D3.2060209@sprintpcs.com>

Dan Kegel wrote:
> On Dec 8, 2007 9:13 AM, Robert Shearman <rob at codeweavers.com> wrote:
>   
>> Dan Kegel wrote:
>>     
>>> +   obj:/home/dank/wine-git/dlls/ntdll/ntdll.dll.so
>>>       
>> I'm not sure this will work for other people unless they log on as dank :-)
>>     
>
> Whoops!
>
>
>   
Since I am a Mac user, does valgrind exist for this platform and if so,
where can it get/build it?

I feel that reports from Mac users would be useful as well as from the
Linux community.

Thank you.

James




From zac at zacbrown.org  Sat Dec  8 14:59:06 2007
From: zac at zacbrown.org (Zac Brown)
Date: Sat, 08 Dec 2007 15:59:06 -0500
Subject: Valgrind support for our unit tests
In-Reply-To: <475B01D3.2060209@sprintpcs.com>
References: <a71bd89a0712071354v2ff9d3c0ie5e26f74c324f433@mail.gmail.com>	<475AD0B7.4020903@codeweavers.com>	<a71bd89a0712081213od3cf325x2b3f056fe1a1123f@mail.gmail.com>
	<475B01D3.2060209@sprintpcs.com>
Message-ID: <475B059A.5010001@zacbrown.org>

James McKenzie wrote:
> Dan Kegel wrote:
>> On Dec 8, 2007 9:13 AM, Robert Shearman <rob at codeweavers.com> wrote:
>>   
>>> Dan Kegel wrote:
>>>     
>>>> +   obj:/home/dank/wine-git/dlls/ntdll/ntdll.dll.so
>>>>       
>>> I'm not sure this will work for other people unless they log on as dank :-)
>>>     
>> Whoops!
>>
>>
>>   
> Since I am a Mac user, does valgrind exist for this platform and if so,
> where can it get/build it?
> 
> I feel that reports from Mac users would be useful as well as from the
> Linux community.
> 
> Thank you.
> 
> James
> 
> 
> 

There is no valgrind port for Mac OS X yet but it looks to me that the
likelihood of there being one is pretty good.

See this link: http://valgrind.org/info/platforms.html

It mentions that Darwin support for x86 will be high, but would that
be that helpful in Leopard? If I recall correctly, Leopard is
fully 64-bit now. <-- Someone correct me if I'm wrong on that.

-Zac


From stefan at codeweavers.com  Sat Dec  8 15:18:30 2007
From: stefan at codeweavers.com (Stefan =?iso-8859-1?q?D=F6singer?=)
Date: Sat, 8 Dec 2007 22:18:30 +0100
Subject: File a bug report?
In-Reply-To: <475AE217.40707@lounge.lu>
References: <475AE217.40707@lounge.lu>
Message-ID: <200712082218.35047.stefan@codeweavers.com>

Am Samstag, 8. Dezember 2007 19:27:35 schrieb Gilles May:
> Hi everybody.
>
> After updating WINE to from 0.9.49 to 0.9.50 I noticed major slowdown in
> Company of Heroes, to the point that I get like 1 Frame every 2 seconds.
> Wine spams the console with:
>
> fixme:d3d_shader:IWineD3DVertexShaderImpl_CompileShader Vertexshader
> 0x4d20b78 recompiled more than 50 times
This patch caused quite a few similar regressions, I fixed one of them before 
the .50 release, and another one afterwards, so you might want to give the 
current git code a try. However, there is at least one (not yet known) 
situation left where shaders recompile all over.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://www.winehq.org/pipermail/wine-devel/attachments/20071208/55113f32/attachment.pgp 

From dank at kegel.com  Sat Dec  8 15:56:48 2007
From: dank at kegel.com (Dan Kegel)
Date: Sat, 8 Dec 2007 13:56:48 -0800
Subject: Valgrind support for our unit tests
In-Reply-To: <475B01D3.2060209@sprintpcs.com>
References: <a71bd89a0712071354v2ff9d3c0ie5e26f74c324f433@mail.gmail.com>
	<475AD0B7.4020903@codeweavers.com>
	<a71bd89a0712081213od3cf325x2b3f056fe1a1123f@mail.gmail.com>
	<475B01D3.2060209@sprintpcs.com>
Message-ID: <a71bd89a0712081356s22723110x7d6ce23fa6bd27a2@mail.gmail.com>

On Dec 8, 2007 12:42 PM, James McKenzie <jjmckenzie51 at sprintpcs.com> wrote:
> I feel that reports from Mac users would be useful as well as from the
> Linux community.

Yes, it'd be nice to have MacOSX support for
Valgrind sometime.  It would probably take significant
effort; hopefully Apple or some very motivated grad
student will do it someday.

But most of the useful errors Valgrind picks up are
probably platform independent, so Wine on Mac
will still benefit from the Valgrinding going on under Linux.
- Dan


From dank at kegel.com  Sat Dec  8 19:09:40 2007
From: dank at kegel.com (Dan Kegel)
Date: Sat, 8 Dec 2007 17:09:40 -0800
Subject: Saturday's(!) valgrind results
Message-ID: <a71bd89a0712081709n609a0607j28b679ae829785af@mail.gmail.com>

For the first time I can recall, Alexandre committed lots
of changes on a Saturday, so I did a valgrind run.

http://kegel.com/wine/valgrind/logs-2007-12-08-summary.txt
shows the highlights; basically, lots more warnings like
+ Syscall param writev(vector[1]) points to uninitialised byte(s)
For example, the one at the top of
http://kegel.com/wine/valgrind/logs-2007-12-08/vg-user32_edit-diff.txt

+ Syscall param writev(vector[1]) points to uninitialised byte(s)
+    at  (within /lib/ld-2.5.so)
+    by  writev (in /lib/tls/i686/cmov/libc-2.5.so)
+    by  wine_server_call (server.c:244)

The only change in the server was
http://source.winehq.org/git/wine.git/?a=commitdiff;h=edd3f264d95c0c6bed9c18f51e42a9523bd305eb
so I guess the new errors reflect additional
error completion events being sent,
and that kind of event just happens to contain some
uninitialized bytes.

So this is probably in Alexandre's court, and
my guess is he'll consider this a false positive.
- Dan

-- 
Wine for Windows ISVs: http://kegel.com/wine/isv


From alex at thehandofagony.com  Sat Dec  8 19:14:53 2007
From: alex at thehandofagony.com (Alexander Nicolaysen =?utf-8?q?S=C3=B8rnes?=)
Date: Sun, 9 Dec 2007 02:14:53 +0100
Subject: Alexander Nicolaysen
	=?utf-8?q?S=C3=B8rnes_=3A_comdlg32=3A_PageSetupDlgA=3A_Read_margins_from?=
	=?utf-8?q?_correct_edit?= boxes.
In-Reply-To: <200712082331.45919.lav@etersoft.ru>
References: <E1J15aN-0002FC-8W@wine.codeweavers.com>
	<200712082331.45919.lav@etersoft.ru>
Message-ID: <200712090214.54024.alex@thehandofagony.com>

On Saturday 08 December 2007 21:31:45 Vitaly Lipatov wrote:
> Hello,
> I already posted the same patch to wine-patches one month ago:
> http://www.winehq.org/pipermail/wine-patches/2007-November/046156.html
> Why my patch was ignored? I am in some black list?
>

I discovered the issue while working on PageDlgA/W.  Are you working on those, 
too?  Just so we don't duplicate work.


Alexander


> ? ????????? ?? 8 ??????? 2007 Alexandre Julliard ???????(a):
> > Module: wine
> > Branch: master
> > Commit: 51086b5513a436f51460d006f4fa7156e9d58a92
> > URL:
> > http://source.winehq.org/git/wine.git/?a=commit;h=51086b5513a436f51460d00
> >6f 4fa7156e9d58a92
> >
> > Author: Alexander Nicolaysen S?rnes <alex at thehandofagony.com>
> > Date:   Sat Dec  8 13:53:32 2007 +0100
> >
> > comdlg32: PageSetupDlgA: Read margins from correct edit boxes.
> >
> > ---
> >
> >  dlls/comdlg32/printdlg.c |    4 ++--
> >  1 files changed, 2 insertions(+), 2 deletions(-)
> >
> > diff --git a/dlls/comdlg32/printdlg.c b/dlls/comdlg32/printdlg.c
> > index e04e145..5baa90e 100644
> > --- a/dlls/comdlg32/printdlg.c
> > +++ b/dlls/comdlg32/printdlg.c
> > @@ -2890,10 +2890,10 @@ PRINTDLG_PS_WMCommandA(
> >      	GETVAL(id, pda->curdlg.rtMargin.left);
> >  	break;
> >      case edt5:
> > -    	GETVAL(id, pda->curdlg.rtMargin.right);
> > +	GETVAL(id, pda->curdlg.rtMargin.top);
> >  	break;
> >      case edt6:
> > -    	GETVAL(id, pda->curdlg.rtMargin.top);
> > +	GETVAL(id, pda->curdlg.rtMargin.right);
> >  	break;
> >      case edt7:
> >      	GETVAL(id, pda->curdlg.rtMargin.bottom);




From dank at kegel.com  Sat Dec  8 23:14:21 2007
From: dank at kegel.com (Dan Kegel)
Date: Sat, 8 Dec 2007 21:14:21 -0800
Subject: speeding up regression testing by disabling building of tests?
Message-ID: <a71bd89a0712082114ge31b370i148cd53801ee8d96@mail.gmail.com>

Lots of the time in regression searches is spent
compiling tests, but when you're only going to
run the app that's breaking, that's not too useful.
How does one disable compilation of conformance tests?
I have this funny feeling Lei or Mikolaj did this
recently, but I couldn't track it down.


